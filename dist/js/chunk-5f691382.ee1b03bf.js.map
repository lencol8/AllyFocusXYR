{"version":3,"sources":["webpack:///./node_modules/tinymce/plugins/template/index.js","webpack:///./node_modules/tinymce/plugins/table/index.js","webpack:///./node_modules/tinymce/plugins/codesample/index.js","webpack:///./node_modules/tinymce/plugins/pagebreak/plugin.js","webpack:///./node_modules/tinymce/plugins/advlist/index.js","webpack:///./node_modules/tinymce/plugins/textcolor/plugin.js","webpack:///./node_modules/tinymce/plugins/preview/index.js","webpack:///./node_modules/tinymce/plugins/help/index.js","webpack:///./node_modules/tinymce/plugins/visualblocks/index.js","webpack:///./node_modules/tinymce/plugins/template/plugin.js","webpack:///./node_modules/core-js/modules/es.string.split.js","webpack:///./node_modules/tinymce/plugins/anchor/plugin.js","webpack:///./node_modules/tinymce/plugins/charmap/plugin.js","webpack:///./node_modules/core-js/internals/array-method-has-species-support.js","webpack:///./node_modules/tinymce/plugins/lists/plugin.js","webpack:///./node_modules/tinymce/plugins/autolink/plugin.js","webpack:///./node_modules/tinymce/plugins/searchreplace/plugin.js","webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./node_modules/tinymce/plugins/hr/index.js","webpack:///./node_modules/ipfs-mini/src/lib/XMLHttpRequest-browser.js","webpack:///./node_modules/tinymce/plugins/colorpicker/index.js","webpack:///./node_modules/tinymce/plugins/autolink/index.js","webpack:///./node_modules/tinymce/plugins/colorpicker/plugin.js","webpack:///./node_modules/tinymce/plugins/fullscreen/index.js","webpack:///./node_modules/tinymce/plugins/textcolor/index.js","webpack:///./src/views/Admin.vue?f959","webpack:///./src/components/admin/ContentEditor.vue?c59a","webpack:///./node_modules/vue-tinymce-editor/src/components/TinymceVue.vue?65ff","webpack:///node_modules/vue-tinymce-editor/src/components/TinymceVue.vue","webpack:///./node_modules/vue-tinymce-editor/src/components/TinymceVue.vue?501e","webpack:///./node_modules/vue-tinymce-editor/src/components/TinymceVue.vue","webpack:///./node_modules/vue-tinymce-editor/src/index.js","webpack:///src/components/admin/ContentEditor.vue","webpack:///./src/components/admin/ContentEditor.vue?56d1","webpack:///./src/components/admin/ContentEditor.vue","webpack:///./src/components/table/CityTable.vue?5e13","webpack:///src/components/table/CityTable.vue","webpack:///./src/components/table/CityTable.vue?13a8","webpack:///./src/components/table/CityTable.vue","webpack:///./src/components/table/CategoryTable.vue?607d","webpack:///src/components/table/CategoryTable.vue","webpack:///./src/components/table/CategoryTable.vue?3b3b","webpack:///./src/components/table/CategoryTable.vue","webpack:///./src/components/table/ContentTable.vue?7fa5","webpack:///src/components/table/ContentTable.vue","webpack:///./src/components/table/ContentTable.vue?0ac5","webpack:///./src/components/table/ContentTable.vue","webpack:///./src/components/admin/SendTokens.vue?0525","webpack:///./src/components/admin/SendTokens.vue?3111","webpack:///./src/components/admin/SendTokens.vue","webpack:///./src/components/admin/Promo.vue?dee9","webpack:///src/components/admin/Promo.vue","webpack:///./src/components/admin/Promo.vue?cc2d","webpack:///./src/components/admin/Promo.vue","webpack:///./src/components/admin/Emails.vue?2e7d","webpack:///src/components/admin/Emails.vue","webpack:///./src/components/admin/Emails.vue?7d4f","webpack:///./src/components/admin/Emails.vue","webpack:///./src/components/admin/CustomContent.vue?d724","webpack:///src/components/admin/CustomContent.vue","webpack:///./src/components/admin/CustomContent.vue?e788","webpack:///./src/components/admin/CustomContent.vue","webpack:///src/views/Admin.vue","webpack:///./src/views/Admin.vue?5b90","webpack:///./src/views/Admin.vue","webpack:///./node_modules/tinymce/plugins/visualchars/index.js","webpack:///./node_modules/tinymce/plugins/media/plugin.js","webpack:///./node_modules/tinymce/plugins/importcss/plugin.js","webpack:///./node_modules/tinymce/plugins/textpattern/plugin.js","webpack:///./node_modules/tinymce/plugins/media/index.js","webpack:///./node_modules/tinymce/plugins/help/plugin.js","webpack:///./node_modules/tinymce/plugins/link/index.js","webpack:///./node_modules/tinymce/plugins/noneditable/plugin.js","webpack:///./node_modules/core-js/modules/es.string.match.js","webpack:///./node_modules/tinymce/plugins/insertdatetime/index.js","webpack:///./node_modules/tinymce/plugins/visualblocks/plugin.js","webpack:///./node_modules/tinymce/plugins/legacyoutput/index.js","webpack:///./node_modules/tinymce/plugins/image/index.js","webpack:///./node_modules/tinymce/plugins/tabfocus/index.js","webpack:///./node_modules/tinymce/plugins/contextmenu/plugin.js","webpack:///./node_modules/tinymce/plugins/searchreplace/index.js","webpack:///./node_modules/tinymce/plugins/code/index.js","webpack:///./src/views/Admin.vue?1962","webpack:///./node_modules/tinymce/plugins/save/index.js","webpack:///./node_modules/tinymce/plugins/preview/plugin.js","webpack:///./node_modules/tinymce/plugins/emoticons/index.js","webpack:///./node_modules/tinymce/plugins/fullpage/plugin.js","webpack:///./node_modules/tinymce/plugins/legacyoutput/plugin.js","webpack:///./node_modules/tinymce/plugins/autoresize/index.js","webpack:///./node_modules/tinymce/plugins/save/plugin.js","webpack:///./node_modules/tinymce/plugins/textpattern/index.js","webpack:///./node_modules/tinymce/themes/modern/theme.js","webpack:///./node_modules/tinymce/plugins/paste/plugin.js","webpack:///./node_modules/tinymce/plugins/print/index.js","webpack:///./node_modules/core-js/internals/create-property.js","webpack:///./node_modules/tinymce/plugins/lists/index.js","webpack:///./node_modules/tinymce/plugins/directionality/index.js","webpack:///./node_modules/tinymce/plugins/imagetools/index.js","webpack:///./node_modules/tinymce/plugins/advlist/plugin.js","webpack:///./node_modules/tinymce/plugins/autosave/plugin.js","webpack:///./node_modules/tinymce/plugins/wordcount/index.js","webpack:///./node_modules/tinymce/plugins/table/plugin.js","webpack:///./node_modules/tinymce/plugins/bbcode/plugin.js","webpack:///./node_modules/tinymce/plugins/imagetools/plugin.js","webpack:///./node_modules/tinymce/plugins/insertdatetime/plugin.js","webpack:///./node_modules/tinymce/plugins/bbcode/index.js","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./node_modules/tinymce/plugins/codesample/plugin.js","webpack:///./node_modules/tinymce/plugins/autoresize/plugin.js","webpack:///./node_modules/tinymce/plugins/paste/index.js","webpack:///./node_modules/tinymce/plugins/link/plugin.js","webpack:///src/components/admin/SendTokens.vue","webpack:///./node_modules/tinymce/plugins/nonbreaking/plugin.js","webpack:///./node_modules/tinymce/plugins/charmap/index.js","webpack:///./src/components/PromoDialog.vue?fdff","webpack:///src/components/PromoDialog.vue","webpack:///./src/components/PromoDialog.vue?ed72","webpack:///./src/components/PromoDialog.vue","webpack:///./node_modules/core-js/modules/es.array.index-of.js","webpack:///./node_modules/tinymce/plugins/image/plugin.js","webpack:///./node_modules/tinymce/plugins/visualchars/plugin.js","webpack:///./node_modules/tinymce/plugins/noneditable/index.js","webpack:///./node_modules/tinymce/plugins/emoticons/plugin.js","webpack:///./node_modules/tinymce/plugins/anchor/index.js","webpack:///./node_modules/tinymce/plugins/print/plugin.js","webpack:///./node_modules/tinymce/plugins/hr/plugin.js","webpack:///./node_modules/tinymce/plugins/spellchecker/index.js","webpack:///./node_modules/tinymce/plugins/directionality/plugin.js","webpack:///./node_modules/tinymce/plugins/fullpage/index.js","webpack:///./node_modules/tinymce/tinymce.js","webpack:///./node_modules/tinymce/plugins/spellchecker/plugin.js","webpack:///./node_modules/tinymce/plugins/wordcount/plugin.js","webpack:///./node_modules/tinymce/plugins/pagebreak/index.js","webpack:///./node_modules/tinymce/plugins/nonbreaking/index.js","webpack:///./src/components/admin/ContentEditor.vue?4a54","webpack:///./node_modules/tinymce/plugins/code/plugin.js","webpack:///./node_modules/tinymce/plugins/toc/index.js","webpack:///./node_modules/tinymce/plugins/fullscreen/plugin.js","webpack:///./node_modules/ipfs-mini/src/index.js","webpack:///./node_modules/tinymce/plugins/contextmenu/index.js","webpack:///./node_modules/tinymce/plugins/tabfocus/plugin.js","webpack:///./node_modules/core-js/modules/es.array.slice.js","webpack:///./node_modules/tinymce/plugins/importcss/index.js","webpack:///./node_modules/tinymce/plugins/toc/plugin.js","webpack:///./node_modules/tinymce/plugins/autosave/index.js"],"names":["global","tinymce","util","Tools","resolve","global$1","getSeparatorHtml","editor","getParam","shouldSplitBlock","Settings","getPageBreakClass","getPlaceholderHtml","transparentSrc","setup","separatorHtml","pageBreakSeparatorRegExp","RegExp","replace","a","on","e","content","serializer","addNodeFilter","nodes","node","className","i","length","attr","indexOf","parentNode","parent","schema","getBlockElements","name","type","value","raw","remove","FilterContent","register","addCommand","settings","pagebreak_split_block","insertContent","Commands","setup$1","target","nodeName","dom","hasClass","ResolveName","register$1","addButton","title","cmd","addMenuItem","text","icon","context","Buttons","Plugin","add","getCurrentColor","format","color","getParents","selection","getStart","elm","style","mapColors","colorMap","colors","push","applyFormat","undoManager","transact","focus","formatter","apply","nodeChanged","removeFormat","TextColor","global$2","defaultColorMap","getTextColorMap","getForeColorMap","getBackColorMap","getTextColorRows","getTextColorCols","getForeColorRows","getBackColorRows","getForeColorCols","getBackColorCols","getColorPickerCallback","hasColorPicker","global$3","getHtml","cols","rows","html","last","x","y","count","id","DOM","uniqueId","getColorCellHtml","isNoColor","translate","ColorPickerHtml","setDivColor","div","background","setAttribute","onButtonClick","ctrl","control","_color","execCommand","onPanelClick","buttonCtrl","this","currentColor","selectColor","hidePanel","resetColor","getParent","colorPickerCallback","call","customColorCells","tableElm","panel","getEl","getElementsByTagName","map","childNodes","firstChild","getAttribute","lastId","get","renderColorPicker","foreColor","tooltip","role","ariaRemember","onclick","curry","fn","initialArgs","_i","arguments","restArgs","all","concat","getCreationDateClasses","getModificationDateClasses","getSelectedContentClasses","getPreviewReplaceValues","getTemplateReplaceValues","getTemplates","editorSettings","templates","getCdateFormat","getLang","getMdateFormat","getDialogWidth","getDialogHeight","Math","min","getViewPort","h","addZeros","len","getDateTime","fmt","date","daysShort","split","daysLong","monthsShort","monthsLong","Date","getFullYear","getYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","DateTimeHelper","createTemplateList","callback","templateList","send","url","success","JSON","parse","replaceTemplateValues","templateValues","each","v","k","replaceVals","vl","select","n","c","test","insertTemplate","ui","el","sel","getContent","create","appendChild","cloneNode","innerHTML","addVisual","Templates","o","dateFormat","insertIframeHtml","win","contentCssLinks_1","contentCSS","documentBaseURI","toAbsolute","bodyClass","body_class","doc","find","contentWindow","document","open","write","close","templateHtml","values","template","selected","description","onSelectTemplate","windowManager","layout","direction","align","padding","spacing","items","flex","label","onselect","border","onsubmit","minWidth","minHeight","fire","message","notificationManager","Dialog","showDialog","fixRegExpWellKnownSymbolLogic","isRegExp","anObject","requireObjectCoercible","speciesConstructor","advanceStringIndex","toLength","callRegExpExec","regexpExec","fails","arrayPush","MAX_UINT32","SUPPORTS_Y","SPLIT","nativeSplit","maybeCallNative","internalSplit","separator","limit","string","String","lim","undefined","match","lastIndex","lastLength","output","flags","ignoreCase","multiline","unicode","sticky","lastLastIndex","separatorCopy","source","slice","index","O","splitter","regexp","res","done","rx","S","C","unicodeMatching","p","q","A","z","isValidId","getId","selectedNode","getNode","isAnchor","tagName","getAttrib","insert","removeAttribute","collapse","createHTML","Anchor","insertAnchor","newId","alert","currentId","body","size","data","preventDefault","isAnchorNode","setContentEditable","state","parser","stateSelector","fireInsertCustomChar","chr","Events","insertChar","evtChr","Actions","getCharMap","charmap","getCharMapAppend","charmap_append","isArray","getDefaultCharMap","charmapFilter","grep","item","getCharsFromSetting","settingValue","extendCharMap","userCharMap","userCharMapAppend","getCharMap$1","CharMap","Api","gridHtml","width","height","ceil","charCode","parseInt","chrText","fromCharCode","GridHtml","getParentTd","charMapPanel","charDiv","hasAttribute","charCodeString","isNaN","ctrlKey","onmouseover","td","buttons","wellKnownSymbol","V8_VERSION","SPECIES","module","exports","METHOD_NAME","array","constructor","foo","Boolean","domGlobals","global$4","global$5","global$6","isTextNode","nodeType","isListNode","isOlUlNode","isListItemNode","isDlItemNode","isTableCellNode","isBr","isFirstChild","isLastChild","lastChild","isTextBlock","getTextBlockElements","isBlock","blockElements","isBogusBr","nextSibling","previousSibling","isEmpty","keepBookmarks","empty","isChildOfBody","isChildOf","getRoot","NodeType","getNormalizedPoint","container","offset","normalizeRange","rng","outRng","cloneRange","rangeStart","startContainer","startOffset","setStart","rangeEnd","endContainer","endOffset","setEnd","Range","createBookmark","bookmark","setupEndPoint","start","offsetNode","hasChildNodes","insertBefore","insertAfter","collapsed","resolveBookmark","restoreEndPoint","nodeIndex","idx","createRng","Bookmark","noop","constant","not","f","args","never","always","none","NONE","eq","isNone","thunk","me","fold","s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","or","orThunk","bind","exists","forall","filter","equals","equals_","toArray","toString","Object","freeze","some","constant_a","self","elementEq","b","from","Option","typeOf","t","Array","prototype","isPrototypeOf","isType","isString","isBoolean","isFunction","isNumber","nativeSlice","nativePush","xs","r","pred","groupBy","wasType","group","foldl","acc","flatten","reverse","head","Global","window","Function","path","parts","scope","unsafe","actual","Global$1","htmlElement","HTMLElement","global$7","getParentList","selectionStart","getClosestListRootElm","isParentListSelected","parentList","selectedBlocks","findSubLists","querySelectorAll","getSelectedSubLists","getSelectedBlocks","findParentListItemsNodes","elms","listItemsElms","parentLi","unique","getSelectedListItems","block","getSelectedDlItems","parentTableCell","root","getBody","findLastParentListNode","parentLists","getSelectedLists","firstList","subsequentLists","getSelectedListRoots","selectedLists","getUniqueListRoots","lists","listRoots","list","isList","Selection","fromHtml","createElement","console","error","fromDom","fromTag","tag","fromText","createTextNode","fromPoint","docElm","elementFromPoint","Element","lift2","oa","ob","fromElements","elements","fragment","createDocumentFragment","element","Immutable","fields","struct","keys","each$1","obj","props","compareDocumentPosition","documentPositionPreceding","DOCUMENT_POSITION_PRECEDING","documentPositionContainedBy","DOCUMENT_POSITION_CONTAINED_BY","Node","cached","called","firstMatch","regexes","find$1","agent","major","minor","Number","nu","detect","versionRegexes","cleanedAgent","toLowerCase","unknown","Version","edge","chrome","ie","opera","firefox","safari","isBrowser","current","unknown$1","nu$1","version","info","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","windows","ios","android","linux","osx","solaris","freebsd","isOS","unknown$2","nu$2","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","OperatingSystem","DeviceType","os","browser","userAgent","isiPad","isiPhone","isAndroid3","isAndroid4","isTablet","isTouch","isPhone","iOSwebview","isWebView","detect$1","candidates","candidate","search","detectBrowser","browsers","detectOs","oses","UaString","contains","str","substr","normalVersionRegex","checkContains","uastring","PlatformInfo","detect$2","deviceType","PlatformDetection","detect$3","navigator","PlatformDetection$1","ELEMENT","ATTRIBUTE_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","ELEMENT_NODE","ELEMENT$1","TEXT_NODE","PROCESSING_INSTRUCTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","NOTATION_NODE","selector","elem","matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","e1","e2","regularContains","d1","d2","ieContains","contains$1","is$1","children","child","cs","before","marker","parent$1","append","before$1","append$1","removeChild","isType$1","isElement","rawSet","key","setAll","attrs","clone","attributes","isSupported","getPropertyValue","internalSet","property","setProperty","set","clone$1","original","isDeep","deep","shallowAs","mutate","children$1","joinSegment","joinSegments","segments","appendSegments","head$1","tail","createSegment","listType","segment","createSegments","entry","populateSegments","listAttributes","itemAttributes","normalizeSegment","createItem","appendItem","writeShallow","cast","newCast","depth","writeDeep","composeList","entries","isList$1","hasFirstChildList","hasLastChildList","isIndented","isSelected","cloneItemContent","li","createEntry","indentEntry","indentation","hasOwnProperty","shallow","old","baseMerge","merger","objects","ret","j","curObject","merge","cloneListProperties","previousSiblingEntry","normalizeEntries","matchingEntry","Cell","initial","parseItem","itemSelection","selectionState","currentItemEntry","end","childListEntries","parseList","newDepth","parseLists","initialDepth","sourceList","global$8","createTextBlock","contentNode","textBlock","blockName","hasContentNode","createFragment","forced_root_block","setAttribs","forced_root_block_attrs","outdentedComposer","indentedComposer","contentDocument","composeEntries","groupIsIndented","indentSelectedEntries","getItemSelection","selectedListItems","listsIndentation","entrySets","entrySet","DOM$1","splitList","ul","tmpRng","bookmarks","newBlock","removeAndKeepBookmarks","targetNode","setStartAfter","setEndAfter","extractContents","SplitList","outdentDlItem","dl","indentDlItem","dlIndentation","dlItems","selectionIndentation","isHandled","getBookmark","moveToBookmark","setRng","getRng","indentListSelection","outdentListSelection","flattenListSelection","updateListStyle","detail","setStyle","updateListAttrs","updateListWithDetails","removeStyles","styles","_a","getEndPointNode","getSelectedTextBlocks","textBlocks","startNode","endNode","siblings","isBookmarkNode","hasCompatibleStyle","sib","sibStyle","getStyle","detailStyle","applyList","listName","listItemName","getContentEditable","toUpperCase","listBlock","sibling","rename","mergeWithAdjacentLists","isValidLists","list1","list2","hasSameListStyle","targetStyle","hasSameClasses","elm1","elm2","shouldMerge","updateList","newList","toggleMultipleLists","hasListStyleDetail","toggleSingleList","toggleList","selectedSubLists","ToggleList","DOM$2","normalizeList","normalizeLists","NormalizeLists","findNextCaretContainer","isForward","nonEmptyBlocks","walker","getNonEmptyElements","next","hasOnlyOneBlockChild","unwrapSingleBlockChild","moveChildren","fromElm","toElm","targetElm","mergeLiElements","listNode","$","nestedLists","mergeIntoEmptyLi","fromLi","toLi","setCursorLocation","mergeForward","mergeBackward","resolvedBookmark","backspaceDeleteFromListToListCaret","otherLi","selectionStartElm","removeBlock","parentBlock","backspaceDeleteIntoListCaret","otherLi_1","backspaceDeleteCaret","backspaceDeleteRange","startListParent","backspaceDelete","isCollapsed","keyCode","BACKSPACE","DELETE","Delete","queryListCommandState","command","addQueryStateHandler","shouldIndentOnTab","setupTabKey","TAB","metaKeyPressed","shiftKey","Keyboard","findIndex","predicate","listState","tableCellIndex","parents","active","hasPlugin","plugin","plugins","inArray","onPostRender","getAutoLinkPattern","getDefaultLinkTarget","rangeEqualsDelimiterOrSpace","rangeString","delimiter","charCodeAt","handleEclipse","parseCurrentLine","handleSpacebar","handleEnter","scopeIndex","setStartBefore","prev","rngText","autoLinkPattern","defaultLinkTarget","nodeValue","charAt","trim","setAttrib","autoUrlDetectState","ex","Keys","isContentEditableFalse","contentEditable","findAndReplaceDOMText","regex","replacementNode","captureGroup","m","blockElementsMap","hiddenTextElementsMap","shortEndedElementsMap","getMatchIndexes","cg","getText","txt","stepThroughMatches","replaceFn","startNodeIndex","endNodeIndex","innerNodes","atIndex","curNode","matchLocation","shift","matchIndex","out","genReplacer","makeReplacementNode","stencilNode_1","fill","range","after","node_1","substring","elA","l","innerNode","innerEl","replaceChild","elB","ownerDocument","getWhiteSpaceElements","getShortEndedElements","exec","FindReplaceText","getElmIndex","markAllMatches","currentIndexState","unwrap","findSpansByIndex","spans","moveSelection","forward","testIndex","removeClass","addClass","scrollIntoView","removeNode","matchCase","wholeWord","isMatchSpan","currentMatchIndex","hasMore","nextIndex","hasNext","hasPrev","keepEditorSelection","selectedText","updateButtonStates","statusbar","disabled","notFoundAlert","pack","onClose","onSubmit","caseState","checked","subtype","submit","labelGap","shortcut","shortcuts","redefine","TO_STRING","RegExpPrototype","nativeToString","NOT_GENERIC","INCORRECT_NAME","R","rf","XMLHttpRequest","showPreview","hexColor","setColor","rgb","toRgb","fromJSON","g","hex","toHex","onchange","defaults","spellcheck","colorPickerCtrl","autofocus","toJSON","color_picker_callback","render","_vm","_h","$createElement","_c","_self","staticClass","model","$$v","activeTab","expression","_l","tab","_v","_s","_e","staticRenderFns","changeAddBtnState","btnText","ipfsPushing","addToIPFS","domProps","html_content","options","component","host","port","protocol","components","showEditor","lastDocumentHash","paste_data_images","methods","ipfs","result","cleanText","category","img","xyr","eth","created","err","log","readIPFS","cat","city","headers","cities","selectItem","scopedSlots","_u","ref","_g","_b","dialog","formTitle","editedIndex","editedItem","$set","$event","save","proxy","stopPropagation","editItem","deleteItem","computed","$store","watch","val","deletedingCity","commit","adminCity","assign","confirm","deleteCity","splice","$nextTick","setCity","forEach","edited","$http","post","$HOST","$cookie","stringify","categories","adminCategory","deleteCategory","deletedingCategory","addCategory","_f","clearAdminCity","loading","IPFSData","categoryNames","filters","truncate","suffix","setContent","newData","getIPFSContent","hash","savedItem","allSrc","deleteIPFSContent","contentData","account","pkey","gasPrice","noResize","placeholder","rowHeight","fieldModel","sendTx","form","dialogAction","PromoDialog","loadData","mounted","emailsCSV","num","loadEmails","staticItems","selectedItem","newVal","getStatic","getKey","ContentEditor","CityTable","CategoryTable","ContentTable","SendTokens","Promo","Emails","CustomContent","adminActiveTab","tabs","logged","profile","uid","getScripts","getAudioTemplateCallback","getVideoTemplateCallback","hasLiveEmbeds","shouldFilterHtml","getUrlResolver","hasAltSource","hasPoster","hasDimensions","has","getVideoScriptMatch","prefixes","src","VideoScript","trimPx","getEphoxEmbedData","parseStyle","source1","source2","poster","htmlToData","isEphoxEmbed","validate","allow_conditional_comments","special","movie","extend","videoScript","HtmlToData","guess","mimes","mp3","wav","mp4","webm","ogg","swf","fileEnd","pop","mime","Mime","addPx","setAttributes","updatedAttrs","updateEphoxEmbed","styleMap","serializeStyle","updateHtml","updateAll","hasImage","writer","sourceCount","comment","cdata","imgAttrs","UpdateHtml","urlPatterns","w","allowFullscreen","getUrl","pattern","newUrl","_loop_1","matchPattern","getIframeHtml","getFlashHtml","getAudioHtml","audioTemplateCallback","source2mime","getVideoHtml","videoTemplateCallback","source1mime","getScriptHtml","dataToHtml","dataIn","embed","convertURL","encode","DataToHtml","cache","embedPromise","handler","rej","wrappedResolve","response","defaultPromise","loadedData","getEmbedHtml","embedHandler","isCached","Service","trimPx$1","addPx$1","getSize","setSize","Size","getMaxWidth","getMaxHeight","setMaxWidth","setMaxHeight","doSyncSize","widthCtrl","heightCtrl","doSizeControls","constrained","doUpdateSize","isContrained","oldWidth","oldHeight","newWidth","newHeight","round","syncSize","updateSize","createUi","onChange","recalcSize","maxLength","ariaLabel","SizeManager","embedChange","handleError","errorMessage","getData","dataEmbed","serialize","getSource","addEmbedHtml","selectPlaceholder","beforeObjects","afterObjects","handleInsert","submitForm","then","catch","populateMeta","meta","generalFormItems","filetype","onpaste","setTimeout","onbeforecall","advancedFormItems","reserialise","update","embedTextBox","updateValueOnChange","forId","bodyType","get$1","sanitize","blocked","attrName","Sanitize","createPlaceholderNode","placeHolder","shortEnded","retainAttributesAndInnerHtml","createPreviewIframeNode","previewWrapper","previewNode","shimNode","allowfullscreen","class","frameborder","sourceNode","attrValue","attribs","ai","innerHtml","escape","isWithinEphoxEmbed","placeHolderConverter","ceFalse","Nodes","specialElements","getSpecialElements","boolAttrs","getBoolAttrs","addAttributeFilter","realElm","realElmName","unescape","$elm","setup$2","objectType","prependToContext","shouldMergeClasses","shouldImportExclusive","getSelectorConverter","getSelectorFilter","getCssGroups","shouldAppend","getFileFilter","removeCacheSuffix","cacheSuffix","isSkinContentCss","href","skin","skinUrl","skin_url","baseURL","inline","compileFilter","getSelectors","fileFilter","selectors","contentCSSUrls","styleSheet","imported","rules","imports","cssRules","cssRule","selectorText","styleSheets","defaultConvertSelectorToFormat","elementName","classes","join","inlineSelectorElements","makeMap","getGroupsBySelector","groups","compileUserDefinedGroups","menu","isExclusiveMode","isUniqueSelector","globallyUniqueSelectors","markUniqueSelector","convertSelectorToFormat","selectorConverter","selector_converter","selectorFilter","processSelector","importcss","formatName","itemDefaults","getDoc","selectorGroups","menuItem","renderNew","ImportCss","__spreadArrays","il","jl","sort","comparator","copy","isInlinePattern","isBlockPattern","isReplacementPattern","sortPatterns","patterns","createPatternSet","inlinePatterns","blockPatterns","replacementPatterns","patternsState","setPatterns","newPatterns","getPatterns","defaultPatterns","getPatternSet","findPattern","lastIndexOf","isMatchingPattern","delta","textEnd","hasContent","findEndPattern","findInlinePattern","space","endPattern","patternRng","createRange","startPattern","findReplacementPattern","startSearch","isText","setSelection","textNode","newRng","splitContainer","splitText","deleteData","splitAndApply","found","formatArray","validFormats","applyInlinePattern","foundPattern","applyInlinePatternSpace","wrappedTextNode","lastChar","lastCharNode","applyInlinePatternEnter","applyBlockPattern","firstTextNode","textBlockElm","max","selectionInsertText","insertData","newNode","insertNode","applyReplacement","replacement","extractChar","char","applyReplacementPattern","ch","applyReplacementPatternSpace","applyReplacementPatternEnter","patternSet","handleInlineKey","checkKeyEvent","codes","event","checkKeyCode","code","modifierPressed","checkCharCode","chars","KeyHandler","charCodes","keyCodes","setEditorTimeout","nativeIndexOf","rawIndexOf","ts","mac","access","action","KeyboardShortcuts","makeTab","makeAriaLabel","shortcutLisString","KeyboardShortcutsTab","supplant","isStringOrNumber","fullMatch","urls","PluginUrls","makeLink","maybeUrlize","getMetadata","getPluginKeys","keys$1","forced_plugins","pluginLister","pluginKeys","pluginLis","pluginsString","installedPlugins","availablePlugins","makeTab$1","PluginsTab","getVersion","makeRow","majorVersion","minorVersion","changeLogLink","ButtonsRow","pluginUrl","getNonEditableClass","getEditableClass","getNonEditableRegExps","nonEditableRegExps","checkClassName","replaceMatchWithSpan","cls","prevChar","findStartTagIndex","tagHtml","convertRegExpsToNonEditable","editClass","nonEditClass","contentEditableAttrName","hasEditClass","hasNonEditClass","regExpExec","MATCH","nativeMatch","matcher","fullUnicode","matchStr","fireVisualBlocks","isEnabledByDefault","getContentCss","visualblocks_content_css","cssId","load","linkElements","matchingLinkElms","linkElm","rel","LoadCss","toggleVisualBlocks","enabledState","contentCss","toggleClass","VisualBlocks","Bindings","toggleActiveState","selectable","visibleState","isContextMenuVisible","shouldNeverUseNative","contextmenu_never_use_native","getContextMenu","getUiContainer","ui_container","transpose","pos","dx","dy","fromPageXY","pageX","pageY","fromClientXY","clientX","clientY","transposeUiContainer","containerPos","getPos","scrollLeft","scrollTop","transposeContentAreaContainer","iframePos","getContentAreaContainer","Coords","renderMenu","contextmenu","menuItems","uiContainer","renderTo","show","moveTo","ContextMenu","isNativeOverrideKeyEvent","Bind","getPreviewDialogWidth","getPreviewDialogHeight","getContentStyle","getPreviewHtml","previewHtml","headHtml","contentStyle","getURI","bodyId","body_id","preventClicksOnLinksScript","dirAttr","directionality","injectIframeContent","iframe","sandbox","encodeURIComponent","IframeContent","dialogHtml","dialogWidth","dialogHeight","iframeElm","shouldHideInSourceView","getDefaultXmlPi","getDefaultEncoding","getDefaultFontFamily","getDefaultFontSize","getDefaultTextColor","getDefaultTitle","getDefaultDocType","parseHeader","root_name","headerFragment","getAttr","fontface","fontsize","xml_pi","docencoding","getAll","doctype","httpEquiv","langcode","stylesheets","link","langdir","visited_color","link_color","active_color","headElement","setAttr","addHeadNode","currentStyleSheetsMap","stylesheet","dir","vLink","aLink","indent","apply_source_formatting","indent_before","indent_after","Parser","headState","protectHtml","protect","unprotectHtml","Protect","low","handleSetContent","footState","evt","startPos","endPos","source_view","getDefaultHeader","headElm","cssText","header","piEncoding","handleGetContent","foot","overrideFormats","alignElements","fontSizes","explode","font_size_style_values","alignleft","aligncenter","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","textDecoration","exact","strikethrough","fontname","face","vars","forecolor","hilitecolor","backgroundColor","addValidElements","getElementRule","rule","attributesOrder","inline_styles","Formats","defaultFontsizeFormats","fontsizeFormats","fixedWidth","fontElm","createFormats","formats","defaultFontsFormats","fonts","font_formats","font","textStyle","enableWhenDirty","hasOnSaveCallback","hasOnCancelCallback","displayErrorMessage","formObj","isDirty","execCallback","setDirty","cancel","startContent","clear","stateToggle","addShortcut","isBrandingEnabled","hasMenubar","getMenubar","hasStatusbar","getToolbarSize","isReadOnly","getFixedToolbarContainer","getInlineToolbarPositionHandler","getMenu","getRemovedMenuItems","getMinWidth","getMinHeight","isSkinDisabled","isInline","getResize","resize","getSkinUrl","skinName","getIndexedToolbars","defaultToolbar","toolbars","toolbar","mainToolbar","getToolbars","fireSkinLoaded","fireResizeEditor","fireBeforeRenderUI","addKeys","A11y","getUiContainerDelta","setUiContainer","inheritUiContainer","fromCtrl","toCtrl","UiContainer","createToolbar","buttonGroup","toolbarItems","itemName","bindSelectorChanged","selectorChanged","disabledStateSelector","initialized","createToolbars","addToolbar","ariaRoot","Toolbar","toClientRect","geomRect","left","top","right","bottom","hideAllFloatingPanels","contextToolbars","hide","movePanelTo","togglePositionClass","relPos","toggle","userConstrain","elementRect","contentAreaRect","panelRect","addContextualToolbars","scrollContainer","getContextToolbars","getElementRect","targetRect","getRect","documentElement","reposition","shouldShow","relRect","testPositions","smallElementWidthThreshold","removed","clientRect","getBoundingClientRect","offsetWidth","controlSelection","isResizable","inflate","findBestRelativePosition","clamp","relativePosition","intersect","pos1","pos2","repositionHandler","execute","findFrontMostMatch","requestAnimationFrame","bindScrollEvent","reposition_1","uiContainer_1","getScrollContainer","getWin","unbind","showContextToolbar","autohide","autofix","fixed","oncancel","reflow","hideAllContextToolbars","parentsAndSelf","ContextToolbars","defaultMenus","file","edit","view","tools","table","help","delimiterMenuNamePair","createMenuNameItemPair","hasItemName","namedMenuItems","namedMenuItem","isSeparator","cleanupMenu","removedMenuItems","menuItemsPass1","menuItemsPass2","createMenu","editorMenuItems","menus","menuButton","isUserDefined","unshift","getDefaultMenubar","defaultMenuBar","createMenuButtons","menuButtons","menubar","enabledMenuNames","Menubar","clientWidth","clientHeight","resizeTo","containerElm","containerSize","iframeSize","getContainer","resizeBy","dw","dh","Resize","api","trigger","sidebar","callbackName","hidePanels","sidebars","visible","deactivateButtons","findSidebar","showPanel","btnCtrl","prepend","isModernBrowser","hasSidebar","createSidebar","image","Sidebar","fireSkinLoaded$1","_skinLoaded","SkinLoaded","switchMode","mode","editArea","editAreaContainer","theme","resizeHandleCtrl","startSize","skinUiCss","styleSheetLoader","onResizeStart","onResize","deltaX","deltaY","linkHtml","brandingLabel","renderBefore","setMode","iframeContainer","editorContainer","Iframe","global$9","funcs","getWindowSize","rect","offsetHeight","getElementById","css","getRuntimeStyle","off","setHTML","isStatic","isFixed","calculateRelativePosition","ctrlElm","selfW","selfH","targetW","targetH","viewport","getWindowViewPort","getUiContainerViewPort","customUiContainer","scrollWidth","scrollHeight","pageXOffset","pageYOffset","innerWidth","innerHeight","getViewPortRect","Movable","testMoveRel","rels","viewPortRect","moveRel","moveBy","layoutRect","constrain","constrainToViewport","repaint","global$a","global$b","BoxUtils","parseBox","radix","measureBox","prefix","defaultView","computedStyle","getComputedStyle","currentStyle","getSide","parseFloat","noop$1","ClassList","_map","uniqueItems","__checked","_change","curState","clsValue","Collection","Collection$1","proto","chunker","whiteSpace","Selector","init","compileNameFilter","compileIdFilter","_name","compileClassesFilter","compileAttrFilter","cmp","check","compilePsuedoFilter","notSelectors","parseChunks","compile","direct","pseudo","extra","_selectors","si","sl","fi","fl","collect","prop","Collection$2","Binding","otherModel","otherName","bindings","fromSelfToOther","fromOtherToSelf","_bindings","global$c","isNode","isEqual","animationFrameRequested","Control","ObservableObject","Mixins","oldValue","destroy","dirtyCtrls","ReflowQueue","_layout","isNative","_id","hasMouseWheelEventSupport","hasWheelEventSupport","classPrefix","idCounter","proto$1","Statics","isRtl","rtl","defaultClasses","applyClasses","Defaults","_aria","_elmCache","borderBox","paddingBox","marginBox","margin","hidden","Properties","getContainerElm","getParentCtrl","lookup","controlIdLookup","initLayoutRect","autoResize","startMinWidth","startMinHeight","initialSize","deltaW","deltaH","maxW","maxWidth","maxH","maxHeight","_layoutRect","contentW","contentH","innerW","innerH","minW","minH","scrollW","_lastLayoutRect","newRect","lastLayoutRect","deltaWidth","deltaHeight","repaintControls","curRect","bodyStyle","bodyElm","borderW","borderH","lastRepaintRect","_lastRepaintRect","_hasBody","updateLayoutRect","_lastRect","resolveCallbackName","callbacks","getEventDispatcher","bubble","isPropagationStopped","hasEventListeners","parentControls","$el","blur","aria","ariaTarget","newItems","controls","_eventsRoot","renderHtml","postRender","preRender","box","parentEventsRoot","_nativeEvents","bindPendingEvents","display","bindStates","parentCtrl","getOffset","rootElm","offsetLeft","offsetTop","offsetParent","parentWidth","parentHeight","parentElm","rootControl","_eventDispatcher","toggleEvent","eventCtrl","eventRootCtrl","nativeEvents","delegate","mouseLeaveHandler","_lastHoverCtrl","mouseEnterHandler","lastParents","lastCtrl","fixWheelEvent","wheelDelta","wheelDeltaX","eventRootDelegates","_delegates","_hasMouseEnter","Control$1","hasTabstopData","KeyboardNavigation","focusedElement","focusedControl","activeElement","getRole","getParentRole","getAriaProp","isTextInputElement","canFocus","getFocusElements","getNavigationRoot","targetControl","navigationRoot","focusFirst","focusElements","moveFocusToIndex","lastAriaIndex","moveFocus","parentRole","submenu","enter","up","down","handleNonTabOrEscEvent","isDefaultPrevented","selectorCache","Container","_super","_items","bodyClasses","containerCls","keyboard","focusCtrl","keyboardNav","oldItem","newItem","ctrlItems","defaultType","curItems","beforeItems","afterItems","recalc","lastRect","getDocumentSize","updateWithTouchData","changedTouches","DragHelper","$eventOverlay","downButton","stop","drag","startX","startY","handleElement","handle","handleElm","cursor","docSize","button","screenX","screenY","runtimeStyle","position","zIndex","opacity","appendTo","documentClickHandler","documentScrollHandler","windowResizeHandler","hasModal","Scrollable","renderScroll","repaintScroll","hasScrollH","hasScrollV","repaintAxis","axisName","posName","sizeName","contentSizeName","hasScroll","ax","scrollBarElm","scrollThumbElm","scrollSize","ratio","posNameLower","sizeNameLower","addScroll","addScrollAxis","deltaPosName","scrollStart","axisId","draghelper","autoScroll","_hasScroll","bodyEl","Panel","_preBodyHtml","Resizable","resizeToContent","visiblePanels","zOrder","skipOrHidePanels","clickCtrl","bindDocumentClickHandler","bindDocumentScrollHandler","repositionPanel","bindWindowResizeHandler","docElm_1","clientWidth_1","clientHeight_1","FloatPanel","hideAll","scrollY","toggleFixedChildPanels","_autoFixY","addRemove","topModal","modal","modalBlockEl","currentZIndex","$modalBlockEl_1","prefix_1","popover","describedBy","removeVisiblePanel","bodyRole","isFixed$1","inlineToolbarContainer","render$1","fixedToolbarContainer","_fixed","bodyPos","scrollContainerPos","content_editable","Inline","Throbber","timer","time","clearTimeout","throbber","ProgressState","renderUI","Render","Tooltip","Widget","tooltips","_tooltip","disable","Progress","setValue","updateLiveRegion","ctx","textContent","progressBar","Notification","timeout","closeButton","notificationStyle","NotificationManagerImpl","getEditorContainer","getElement","getContainerWidth","prePositionNotifications","notifications","notification","positionNotifications","firstItem","closeCallback","extendedArgs","notif","getArgs","oldMetaValue","toggleFullScreenState","contentValue","noScaleMetaValue","overrideViewPort","toggleBodyFullScreenClasses","checkFullscreenWindows","_fullscreen","handleWindowResize","desktop","lastSize_1","setInterval","Window","closeClass","needsRecalc","headerW","headEl","headerH","headerHtml","footerHtml","fullscreen","slowRendering","_timer","getTime","_initial","dragHelper","getContentWindow","ifr","MessageBox","OK","OK_CANCEL","YES_NO","YES_NO_CANCEL","msgBox","createButton","status","primary","onClick","onCancel","WindowManagerImpl","params","commands","features","choiceCallback","getParams","setParams","getNotificationManagerImpl","getWindowManagerImpl","ThemeApi","Layout","firstControlClass","lastControlClass","containerClass","firstClass","lastClass","lastItem","controlClass","AbsoluteLayout","Button","btnStyle","btnElm","ariaPressed","textHtml","getSelection","textCls","setButtonText","$span","iconElm","BrowseButton","multiple","accept","input","files","click","ButtonGroup","Checkbox","global$d","ComboBox","subinput","showMenu","newValue","statusLevel","statusMessage","lineHeight","openElm","innerPadding","inputElm","documentMode","openBtnHtml","extraAttrs","statusHtml","showAutoComplete","term","previewUrl","hideMenu","statusIconElm","focusIdx","DOWN","UP","ColorBox","onaction","repaintColor","PanelButton","panelSettings","rtlRels","ltrRels","popoverAlign","isTop","DOM$3","ColorButton","onClickHandler","stopImmediatePropagation","global$e","ColorPicker","hsv","hueRootElm","huePointElm","svRootElm","svPointElm","updateColor","hueUpdate","hue","updateSaturationAndValue","updateHue","toHsv","_repaint","_svdraghelper","_hdraghelper","_rendered","hueHtml","stops","getOldIeFallbackHtml","gradientPrefix","stopsList","gradientCssText","DropZone","cfg","hidefocus","outerHTML","toggleDragClass","re","dataTransfer","Path","row","_getDataPathHtml","ElementPath","isHidden","elementpath","outParents","FormItem","Form","formItemDefaults","formItem","recalcLabels","maxLabelWidth","labels","labelGapCalc","labelCtrl","labelWidth","FieldSet","unique$1","generate","random","floor","DOCUMENT","windows$1","DOCUMENT$1","bypassSelector","childElementCount","base","one","querySelector","descendants","hasContentEditableState","isContentEditableTrue","level","attach","isChildOfContentEditableTrue","getElementText","innerText","getOrGenerateId","isValidAnchor","isEditable","isHeader","isValidHeader","getLevel","headerTarget","headerId","anchorTarget","anchorId","anchorText","getHeaderTargets","getAnchorTargets","getTargetElements","hasTitle","find$2","LinkTargets","getActiveEditor","activeEditor","history","HISTORY_LENGTH","clearHistory","toMenuItem","toMenuItems","targets","staticMenuItem","isUniqueUrl","foundTarget","getSetting","defaultValue","createMenuItems","fileType","fromHistoryMenuItems","historyItems","uniqueHistory","fromMenuItems","filteredTargets","anchorMenuItems","topAnchor","bottomAchor","bothEmpty","typeahead_urls","filterByQuery","addToHistory","lowerCaseTerm","getTitle","linkDetails","setupAutoCompleteHandler","autocomplete","linkTargets","alt","statusToUiState","setupLinkValidatorHandler","validatorHandler","filepicker_validator_handler","validateUrl_1","uiState","FilePicker","actionCallback","fileBrowserCallback","fileBrowserCallbackTypes","file_picker_types","file_browser_callback_types","file_picker_callback","file_browser_callback","FitLayout","contLayoutRect","FlexLayout","contPaddingBox","contSettings","totalFlex","availableSpace","ctrlLayoutRect","ctrlSettings","maxSize","maxAlignEndPos","minSizeName","maxSizeName","beforeName","innerSizeName","deltaSizeName","alignAxisName","alignInnerSizeName","alignSizeName","alignMinSizeName","alignBeforeName","alignAfterName","alignDeltaSizeName","alignContentSizeName","maxSizeItems","maxFlexSize","FlowLayout","endClass","descendant","toggleFormat","addFormatChangedListener","changed","formatChanged","postRenderFormatToggle","alignFormats","defaultAlign","alignMenuItems","onShowMenu","alignnone","Align","getFirstFont","fontFamily","findMatchingValue","createFontNameListBoxChangeHandler","queryCommandValue","getFontItems","registerButtons","FontSelect","number","precision","factor","pow","toPt","fontSize","findMatchingValue$1","pt","px","createFontSizeListBoxChangeHandler","getFontSizeItems","fontsize_formats","registerButtons$1","register$2","FontSizeSelect","hideMenuObjects","canApply","hideFormatMenuItems","createFormatMenu","newFormats","defaultStyleFormats","createStylesMenu","style_formats_merge","style_formats","preview","getCssText","queryCommandState","registerMenuItems","formatMenu","registerButtons$2","style_formats_autohide","register$3","defaultBlocks","createFormats$1","createListBoxChangeHandler","matchNode","lazyFormatSelectBoxItems","blocks","buildMenuItems","register$4","block_formats","FormatSelect","createCustomMenuItems","names","nameList","isSeparator$1","trimMenuItems","menuItems2","createContextMenuItems","outputMenuItems","createInsertMenu","insertButtonItems","insert_button_items","registerButtons$3","oncreatemenu","register$5","InsertButton","registerFormatButtons","subscript","superscript","registerCommandButtons","outdent","cut","paste","selectall","visualaid","newdocument","removeformat","registerCommandToggleButtons","blockquote","registerButtons$4","registerMenuItems$1","register$6","SimpleControls","toggleUndoRedoState","checkState","typeFn","readonly","registerMenuItems$2","registerButtons$5","register$7","UndoRedo","toggleVisualAidState","hasVisual","registerMenuItems$3","register$8","VisualAid","setupEnvironment","iOS","setupUiContainer","setupRtlMode","setupHideFloatPanels","FormatControls","GridLayout","posX","posY","spacingH","spacingV","alignH","alignV","maxX","maxY","ctrlMinWidth","ctrlMinHeight","availableWidth","availableHeight","reverseRows","colWidths","rowHeights","columns","sqrt","flexV","packV","flexWidths","Iframe$1","InfoBox","severity","Label","strong","startMinH","targetCtrl","forName","Toolbar$1","MenuBar","isChildOf$1","MenuButton","_renderOpen","animate","activeMenu","menuLayoutRect","selfBottom","hasVisibleSiblingMenu","overCtrl","Menu","itemsFactory","factory","hideThrobber","requestTime","_hasIcons","ListBox","lastItemCtrl","setSelected","menuValues","_values","lastControl","valueExists","activateMenuItemsByValue","hasMenus","getSelectedItem","toggleTextStyle","_textStyle","textElm","MenuItem","ariaHideMenu","_parentMenu","_lastRel","iconHtml","convertShortcut","escapeRegExp","markMatches","boldMatches","hover","Radio","ResizeHandle","resizeDragHelper","createOptions","strOptions","SelectBox","_options","minVal","maxVal","setAriaProp","updateSliderHandle","maxHandlePos","shortSizeName","stylePosName","styleValue","handleEl","orientation","_minValue","_maxValue","previewFilter","Slider","minValue","maxValue","_initValue","reset","screenCordName","toFraction","fromFraction","handleKeyboard","alter","handleDrag","startHandlePos","handlePos","_dragHelper","Spacer","SplitButton","mainButtonElm","menuButtonElm","_menuBtnText","StackLayout","TabPanel","activateTab","activeTabElm","activeTabId","tabsHtml","targetParent","headH","TextBox","getApi","Factory","registerToFactory","Theme","hasProPlugin","DetectProPlugin","clipboard","quirks","firePastePreProcess","internal","isWordHtml","wordContent","firePastePostProcess","firePastePlainTextToggle","firePaste","ieFake","shouldPlainTextInform","shouldBlockDrop","shouldPasteDataImages","shouldFilterDrop","getPreProcess","getPostProcess","getWebkitStyles","shouldRemoveWebKitStyles","shouldMergeFormats","isSmartPasteEnabled","isPasteAsTextEnabled","getRetainStyleProps","getWordValidElements","defaultValidElements","shouldConvertWordFakeLists","shouldUseDefaultFilters","shouldInformUserAboutPlainText","userIsInformedState","displayNotification","togglePlainTextPaste","pasteFormat","pasteHtml","pasteText","internalMimeType","internalMark","mark","unmark","isMarked","InternalHtml","internalHtmlMime","isPlainText","toBRs","openContainer","rootTag","rootAttrs","encodeAllRaw","toBlockElements","tagOpen","tagClose","paragraphs","stitch","convert","Newlines","domParser","shortEndedElements","ignoreElements","walk","currentNode","trimHtml","trimSpaces","s1","s2","createIdGenerator","isMsEdge","Utils","isWordContent","isNumericList","isBulletList","convertFakeListsToProperLists","currentListNode","prevListNode","lastLevel","trimListStart","regExp","removeIgnoredNodes","_listIgnore","convertParagraphToLi","paragraphNode","_listLevel","wrap","nodeText","filterStyles","validStyles","outputStyles","filterWordContent","retainStyleProperties","spaces","validElements","valid_elements","valid_children","rootNode","preProcess","WordFilter","preProcess$1","isRootContent","processResult","cancelled","postProcessFilter","tempBody","postProcessArgs","filterContent","preProcessArgs","filteredContent","process","ProcessFilters","isAbsoluteUrl","isImageUrl","createImage","pasteHtmlFn","createLink","linkSelection","insertImage","smartInsertContent","SmartPaste","filter$1","from$1","exports$1","define","require","amd","EphoxContactWrapper","u","1","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","Item","nextTick","env","argv","versions","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","2","setImmediate","setTimeoutFunc","thisArg","Promise","TypeError","_state","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","promise","finale","_unhandledRejectionFn","Handler","reason","prom","arr","remaining","race","warn","_setImmediateFn","_setUnhandledRejectionFn","3","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_clearFn","clearInterval","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","4","promisePolyfill","boltExport","baseFn","nCallback","isReady","cbs","pure","LazyValue","errorReporter","make","fab","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","pure$1","Future","par","asyncValues","asyncValue","par$1","futures","traverse","mapM","subject","isSet","pasteHtml$1","internalFlag","getDataTransferItems","mceInternalUrlPrefix","legacyText","types","contentType","getClipboardContent","clipboardEvent","clipboardData","hasContentType","clipboardContent","mimeType","hasHtmlOrText","getBase64FromUri","uri","isValidDataUriImage","imgElm","images_dataimg_filter","extractFilename","pasteImage","imageItem","base64","images_reuse_filename","blob","Image","blobCache","editorUpload","blobInfo","existingBlobInfo","findFirst","cachedBlobInfo","blobUri","isClipboardEvent","readBlobsAsDataUris","getAsFile","reader","FileReader","onload","readAsDataURL","getImagesFromDataTransfer","images","pasteImageData","blobResults","isBrokenAndroidClipboardEvent","isKeyboardPasteEvent","registerEventHandlers","pasteBin","keyboardPastePlainTextState","keyboardPasteEvent","insertClipboardContent","isKeyBoardPaste","plainTextMode","isPlainTextHtml","isDefaultContent","removePasteBinOnKeyUp","webkit","getLastRng","registerEventsAndFilters","isPasteInsert","isWebKitFakeUrl","isDataUri","allow_html_data_urls","getPasteBinParent","isExternalPasteBin","delegatePasteEvents","pasteBinElm","pasteBinDefaultContent","isDefault","lastRngCell","gecko","pasteBinClone","lastRng","pasteBinClones","dirtyWrappers","cleanWrapper","copyAndRemove","isPasteBin","PasteBin","Clipboard","hasWorkingClipboardApi","setData","setHtml5Clipboard","clearData","setClipboardData","fallback","markedHtml","outer","inner","contenteditable","setStyles","overflow","offscreenRange","selectNodeContents","contextual","isTableSelection","hasSelectedContent","CutCopy","getCaretRangeFromEvent","getCaretRangeFromPoint","isPlainTextFileUrl","plainTextContent","setFocusedRange","draggingInternallyState","dropContent","content_1","DragDrop","postProcess","PrePostProcess","addPreProcessFilter","filterFunc","addPostProcessFilter","removeExplorerBrElementsAfterBlocks","explorerBlocksRegExp","removeWebKitStyles","webKitStyles","webKitStylesSetting","dom_1","inputStyles","decode","inputValue","currentValue","removeUnderlineAndFontInAnchor","Quirks","stateChange","toPrimitive","definePropertyModule","createPropertyDescriptor","object","propertyKey","applyListFormat","getNumberStyles","getBulletStyles","getSelectedStyleType","listElm","ListUtils","styleValueToText","ListStyles","updateSelection","listStyleType","addSplitButton","onshow","addControl","fireRestoreDraft","fireStoreDraft","fireRemoveDraft","timeString","defaultTime","multiples","toParse","parsedTime","shouldAskBeforeUnload","getAutoSavePrefix","location","pathname","shouldRestoreWhenEmpty","getAutoSaveInterval","autosave_interval","getAutoSaveRetention","autosave_retention","forcedRootBlockName","hasDraft","getItem","removeDraft","removeItem","storeDraft","setItem","no_events","restoreDraft","startStoreDraft","started","interval","restoreLastDraft","_beforeUnloadHandler","autosave","onbeforeunload","compose","fa","fb","identity","die","eachr","foldr","map$1","tupleMap","tuple","reqMessage","required","unsuppMessage","unsupported","validateStrArr","invalidTypeMessage","incorrect","checkDupes","everything","sorted","dupe","d","MixedBag","optional","allReqd","req","opt","COMMENT","TEXT","isComment","checkRange","endsWith","inBody","internalRemove","removeProperty","set$1","setAll$1","getUnsafeProperty","getRaw","remove$1","sourceDom","targetDom","contains$2","owner","isRoot","rawParent","prevSibling","firstChild$1","wrapper","after$1","rogue","remove$2","grid","address","detailnew","extended","rowdata","elementnew","rowdatanew","rowcells","rowdetails","bounds","ancestors","ancestors$1","children$2","descendants$1","ClosestOrAncestor","ancestor","closest","child$1","descend","child_1","ancestor$1","child$2","descendant$1","closest$1","firstLayer","filterFirstLayer","LayerSelector","tags","isRootOrUpperTable","cell","cells","notCell","neighbours","neighbourCells","neighbourRows","firstCell","grid$1","rowProp","colProp","rowsCount","TableLookup","fromTable","parentSection","parentName","rowspan","colspan","fromPastedRows","example","section","DetailsList","column","getAt","warehouse","findItem","filtered","filterItems","maxRows","maxColumns","details","currentRow","cr","cc","newpos","justCells","Warehouse","statsStruct","findSelectedStats","house","totalColumns","totalRows","minRow","minCol","maxRow","maxCol","startRow","endRow","startCol","endCol","makeCell","seenSelected","rowIndex","fillInGaps","stats","needCell","clean","emptyRows","extract","selectedSelector","unselectedCells","CopySelected","NodeValue","getOption","get$2","set$2","getEnd","NBSP","isTextNodeWithCursorPosition","elementsWithCursorPosition","isCursorPosition","hasCursorPosition","first","last$1","descendantRtl","copy$1","cloneChildren","createCell","replica","pasteReplace","newRow","cloneFormats","oldCell","newCell","first$1","firstText","formatSelector","clonedFormat","cellOperations","formatsToClone","docu","lastNode","gap","TableFill","fromHtml$1","inSelection","leftEdge","rightEdge","topEdge","bottomEdge","finishCol","finishRow","isWithin","isRectangular","isRect","detailIsWithin","CellBounds","getBounds","detailA","detailB","getAnyBox","startCell","finishCell","startCoords","finishCoords","sc","fc","getBox","CellGroup","dest","intercepts","finish","inside","parentCell","innerCell","isContainedBy","c1","c2","CellFinder","moveBy$1","deltaRow","deltaColumn","getWarehouse","intercepts$1","nestedIntercepts","firstTable","lastTable","optStartCell","optLastCell","lastCell","getBox$1","TablePositions","TagBoundaries","DomUniverse","isBoundary","isEmptyTag","comparePosition","other","copyAttributesTo","destination","as","copyTo","afterAll","appendAll","query","setText","leftRight","brokenPath","bisect","universe","ind","breakToRight","second","breakToLeft","prior","breakPath","breaker","splits","breakage","nextChild","all$1","look","oneAll","unsafeOne","commonElement","eq$1","unsafeSubset","common","ps1","ps2","finder","ps","topDown","startIndex","endIndex","sIndex","eIndex","ancestors$2","prune","pruned1","pruned2","shared","firstpath","secondpath","subset","ancs","SubsetFn","sharedOne","subset$1","ancestors$3","breakToLeft$1","breakToRight$1","breakPath$1","Parent","sharedOne$1","_universe","subset$2","ancestors$4","breakToLeft$2","breakToRight$2","breakPath$2","DomParent","Identified","lookupTable","identify","getIsRoot","rootTable","boxes","startTable","finishTable","ancestorCells","lca","lcaTable","finishAncestorCells","startAncestorCells","retrieve","sels","getLast","lastSelectedSelector","getEdges","firstSelectedSelector","tbl","expandTo","identified","shiftSelection","CellSelection","retrieve$1","retrieveBox","edges","firstAncestor","lastAncestor","fA","lA","TableSelection","attributeSelector","firstSelected","lastSelected","Ephemera","generate$1","cases","constructors","adt","acase","argLength","branches","branchKeys","reqKey","Adt","type$1","single","cata","onNone","onMultiple","onSingle","SelectionTypes","selections","unmergable","hasSpan","mergable","_env","CellOperations","noMenu","forMenu","notCell$1","paste$1","pasteRows","generators","TableTargets","extractSelected","serializeElements","getTextContent","registerEvents","actions","cellSelection","multiCellContext","cellOpt","domCell","pasteCells","Dimension","getOuter","aggregate","properties","cumulativeInclusions","absoluteMax","api$1","get$3","api$2","get$4","getOuter$1","platform","needManualCalc","toNumber","getProp","getCalculatedHeight","paddingTop","paddingBottom","borderTop","borderBottom","boxSizing","borders","getWidth","getHeight","RuntimeSize","genericSizeRegex","percentageBasedSizeRegex","pixelBasedSizeRegex","setPixelWidth","amount","setPercentageWidth","setHeight","getHeightValue","getter","setter","newSize","total","normalizePixelSize","getTotalHeight","get$5","span","getSpan","getRawWidth","cssWidth","normalizePercentageWidth","cellWidth","tableSize","pixelWidth","choosePercentageSize","percentMatch","intWidth","getPercentageWidth","normalizePixelWidth","choosePixelSize","pixelMatch","floatWidth","getPixelWidth","getHeight$1","getGenericWidth","unit","setGenericWidth","Sizes","halve","main","CellMutations","Position","boxPosition","firstDefinedOrZero","absolute","clientTop","clientLeft","rowInfo","colInfo","rtlEdge","ltrEdge","getLeftEdge","getRightEdge","getTop","getTopEdge","getBottomEdge","findPositions","getInnerEdge","getOuterEdge","lines","cellOption","lastLine","negate","step","positions","optElements","ltr","BarPositions","ResizeDirection","TableDirection","directionAt","auto","getGridSize","TableGridSize","__assign","findMap","setIfNot","ignore","newRows","newCells","renderSection","gridSection","sectionName","tb","isNew","tr","removeSection","renderOrRemoveSection","headSection","bodySection","footSection","copy$2","clonedCell","Redraw","read","remove$3","supports","classList","get$6","add$1","clazz","remove$4","add$2","cleanClass","remove$5","has$1","repeat","repititions","deduce","rest","aa","extras","abs","rowsArr","col","getBlock","isSingle","getFallback","decide","inBlock","singleInBlock","detailOption","rows$1","Blocks","namespace","dashNamespace","Styles","blocker","row$1","Bar","resizeBar","resizeRowBar","resizeColBar","BAR_THICKNESS","wire","previous","drawBar","origin","cpOption","cp","bar","refreshCol","colPositions","tableHeight","colBar","refreshRow","rowPositions","tableWidth","rowBar","refreshGrid","hdirection","vdirection","refresh","each$2","bars","isRowBar","isColBar","Bars","addCell","gridRow","setCells","mutateCell","mapCells","getCell","getCellElement","cellLength","GridRow","getColumn","getRow","findDiff","comp","subgrid","restOfRow","endColIndex","restOfColumn","endRowIndex","TableGrid","toDetails","seen","ri","ci","updateSeen","toGrid","rowCells","Transitions","fromWarehouse","deriveRows","rendered","findRow","rowOfCells","toDetailList","findInWarehouse","operation","adjustment","postAction","genWrappers","newElements","onCell","onPaste","onPasteRows","lc","onMergable","_warehouse","onUnmergable","onCells","mapError","_","onValue","toOption","isValue","isError","onError","fromOption","Result","measure","startAddress","gridA","gridB","rowRemainder","colRemainder","colRequired","rowRequired","rowDelta","colDelta","measureWidth","colLengthA","colLengthB","generator","rowFill","_row","colFill","tailor","fillCols","fillRows","modifiedCols","tailoredGrid","Fitment","substitution","unmerge","isToReplace","uniqueCells","currentCell","splitRows","rowPrevCells","_loop_2","sub","MergingOperations","isSpanning","matching","mergeTables","mergeHeight","mergeWidth","merge$1","fittedGrid","fittedNewGrid","secondDelta","fittedOldGrid","TableMerge","insertRowAt","between","withinSpan","insertColumnAt","splitCellIntoColumns","exampleRow","exampleCol","isTargetCell","splitCellIntoRows","deleteColumnsAt","deleteRowsAt","ModificationOperations","replaceIn","isTarget","notStartRow","colIndex","notStartColumn","replaceColumn","alreadyAdded","replaceRow","targetRow","TransformOperations","only","middle","ColumnContext","neighbours$1","determine","zero","onOnly","singleColumnWidth","newNext","minCellWidth","newThis","diffx","onLeft","onMiddle","_prev","onRight","Deltas","getSpan$1","hasColspan","hasRowspan","getInt","CellUtils","getRaw$1","getRawW","getRawH","getWidthFrom","backups","columnCell","deduced","getDeduced","getRawWidths","getPercentageWidths","getPixelWidths","getHeightFrom","rowCell","getPixelHeights","getRawHeights","ColumnSizes","measures","recalculateWidth","widths","recalculateHeight","heights","matchRowHeight","Recalculations","percentageSize","getCellDelta","_delta","setTableWidth","_newWidths","change","getWidths","setElementWidth","pixelSize","newWidths","chooseSize","fallbackWidth","getTableSize","TableSize","getWarehouse$1","sumUp","getTableWarehouse","adjustWidth","deltas","newSizes","adjustHeight","newHeights","newCellSizes","newRowSizes","adjustWidthTo","Adjustments","handleUnsupported","baseWith","invalidKeys","handleExact","exactly","verifyGenerators","elementToData","modification","toData","nuFrom","recent","getOrInit","transform","makeNew","replaceOrInit","merging","combine","Generators","blockList","isFormatting","isHeading","isContainer","isFrame","Structure","universe$1","isBlock$1","isFormatting$1","isHeading$1","isContainer$1","isEmptyTag$1","isFrame$1","isInline$1","DomStructure","merge$2","advancedBr","isListItem","siblingIsBlock","rightSibling","markCell","rightSiblingIsBlock","markContent","contents","TableContent","outcome","elementFromGrid","findIn","bundle","uniqueRows","currentDetail","uniqueColumns","insertRowBefore","targetIndex","newGrid","insertRowsBefore","newG","insertRowAfter","insertRowsAfter","insertColumnBefore","insertColumnsBefore","insertColumnAfter","insertColumnsAfter","makeRowHeader","makeColumnHeader","unmakeRowHeader","unmakeColumnHeader","splitCellIntoColumns$1","splitCellIntoRows$1","eraseColumns","_comparator","_genWrappers","eraseRows","mergeCells","unmergeCells","pasteDetails","gridify","wh","mergedGrid","nuGrid","gridifyRows","pasteRowsBefore","pasteRowsAfter","TableOperations","getBody$1","getPixelWidth$1","getPixelHeight","removePxSuffix","addSizeSuffix","removeDataStyle","dataStyleCells","getDirection","ltr$1","rtl$1","Direction","defaultTableToolbar","defaultStyles","defaultAttributes","getDefaultAttributes","getDefaultStyles","hasTableResizeBars","hasTabNavigation","hasAdvancedCellTab","hasAdvancedRowTab","hasAdvancedTableTab","hasAppearanceOptions","hasTableGrid","shouldStyleWithCss","getCellClassList","getRowClassList","getTableClassList","isPixelsForced","getCloneElements","cloneElements","hasObjectResizing","objectResizing","getToolbar","fireNewRow","fireNewCell","fireObjectResizeStart","fireObjectResized","TableActions","lazyWire","isTableBody","lastRowGuard","lastColumnGuard","guard","deleteRow","deleteColumn","copyRows","selectedCells","slicedGrid","slicedDetails","CopyRows","getTDTHOverallStyle","firstChildStyle","checkChildren","applyAlign","applyVAlign","unApplyAlign","unApplyVAlign","Styles$1","buildListItems","inputList","itemCallback","startItems","appendItems","styleFieldHasFocus","isEqualNode","syncAdvancedStyleFields","updateAdvancedFields","updateStyleField","borderStyle","borderColor","extractAdvancedStyles","createStyleForm","createColorPickAction","Helpers","updateStyles","dataset","mceStyle","extractDataFromElement","valign","onSubmitCellForm","cellElm","classListCtrl","generalCellForm","CellDialog","extractDataFromElement$1","switchRowType","rowElm","toType","oldParentElm","onSubmitRowForm","oldData","open$1","generalRowForm","RowDialog","DefaultRenderOptions","percentages","makeTable","tableBody","tableRow","tableHeaderCell","tableCell","rowHeaders","columnHeaders","renderOpts","tbody","trs","get$7","getOuter$2","placeCaretInCell","selectFirstCellInTable","fireEvents","isPercentage","insert$1","InsertTable","styleTDTH","extractDataFromElement$2","cellspacing","cellpadding","caption","applyDataToElement","onSubmitTableForm","captionElm","open$2","isProps","colsCtrl","rowsCtrl","generalTableForm","TableDialog","each$3","registerCommands","clipboardRows","eraseTable","getSelectionStartCell","getSelectionStartCaption","cellOrCaption","getSelectionStartFromSelector","getTableFromCell","resizeChange","oldSize","actOnSelection","beforeSize","copyRowSelection","pasteOnSelection","clonedRows","mceTableSplitCells","mceTableMergeCells","mceTableInsertRowBefore","mceTableInsertRowAfter","mceTableInsertColBefore","mceTableInsertColAfter","mceTableDeleteCol","mceTableDeleteRow","mceTableCutRow","mceTableCopyRow","mceTablePasteRowBefore","mceTablePasteRowAfter","mceTableDelete","func","mceInsertTable","mceTableProps","mceTableRowProps","mceTableCellProps","detached","editable","body$1","ResizeWire","Event","handlers","create$1","typeDefs","registry","mkEvent","prevent","kill","rawEvent","binder","useCapture","wrapped","addEventListener","bind$1","removeEventListener","bind$2","shallow$1","merge$3","styles$1","Styles$2","Blocker","layerClass","DragMode","DragSink","DragApi","compare","extract$1","mutation","sink","dragApi","mdown","forceDrop","mup","drop","mmove","move","mout","delayDrop","MouseDrag","last$2","rate","throttle","InDrag","onEvent","dataOption","events","NoDrag","Movement","noDragState","inDragState","dragState","isOn","movement","throttledDrop","go","mousemove","runIfActive","Dragging","transform$1","Dragger","Mutation","BarMutation","xDelta","yDelta","findClosestContentEditable","resizeBarDragging","BarManager","resizing","hoverTable","getResizer","_dataRow","_dataCol","currentCol","getDelta","newX","oldX","startAdjust","mousedown","findClosestEditableTable","mouseover","hideBars","showBars","create$2","manager","beforeResize","afterResize","startDrag","TableResize","createContainer","get$8","remove$6","TableWire","ResizeHandler","startW","startRawW","selectionRng","isTable","lazyResize","sz","rawWire","rawTable","percentW","targetPercentW","newCellSizes_1","newCellSize","adt$1","none$1","CellLocation","detect$4","detection","CellNavigation","create$3","SimRange","adt$2","cata$1","onBefore","onOn","onAfter","situ","before$2","after$2","Situ","adt$3","domRange","relative","exactFromRange","simRange","soffset","foffset","getStart$1","startSitu","finishSitu","range$1","selectNodeContentsUsing","setFinish","setEndBefore","relativeToNative","exactToNative","toRect","getFirstRect","rects","getClientRects","adt$4","fromRange","getRanges","doDiagnose","ranges","reversed","rev","diagnose","asLtrRange","diagnosis","searchForPoint","rectForOffset","curDeltaX","inRect","locateOffset","textnode","rangeForOffset","locate","selectNode","foundRect","searchInChildren","locateNode","locate$1","boundedX","boundedY","COLLAPSE_TO_LEFT","COLLAPSE_TO_RIGHT","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","caretPositionFromPoint","caretRangeFromPoint","searchTextNodes","searchFromPoint","availableSearch","fromPoint$1","beforeSpecial","name$1","preprocessRelative","preprocessExact","preprocess","makeRange","after$3","same","doSetNativeRange","removeAllRanges","addRange","doSetRange","setLegacyRtlRange","setRangeFromRelative","setBaseAndExtent","setExact","setRelative","toNative","getDomRange","readRange","rangeCount","firstRng","getRangeAt","doGetExact","anchor","anchorNode","focusNode","anchorOffset","focusOffset","setToElement","getExact","get$9","getFirstRect$1","getAtPoint","backward","getCellFirstCursorPosition","getNewRowCursorPosition","rootElements","handle$1","body_1","isRoot_1","navigation","TabContext","create$4","Response","create$5","Situs","convertToRange","makeSitus","Util","sync","selectRange","detect$5","cellSel","annotations","newSels","KeySelection","backtrack","_direction","transition","sidestep","advance","successors","go$1","ruleOpt","succ","Walkers","hone","left$1","right$1","isLeaf","before$3","seekLeft","after$4","seekRight","universe$2","before$4","after$5","seekLeft$1","seekRight$1","ancestor$2","point","adt$5","failedUp","failedDown","isOverlapping","bridge","beforeBounds","afterBounds","isRow","verify","beforeOffset","afterOffset","failure","afterCell","beforeCell","_sharedRow","cata$2","onSuccess","onFailedUp","onFailedDown","BeforeAfter","inParent","indexInParent","gatherer","cand","gather","handleBr","findBr","handleParent","br","adjacent","tryBr","tgt","analysis","BrTags","nu$3","moveDown","caret","moveUp","moveBottomTo","moveTopTo","getTop$1","getBottom","Carets","getPartialBox","getRangedRect","toCaret","getElemBox","getBoxAt","getEntireBox","Rectangles","JUMP_SIZE","NUM_RETRIES","adt$6","retry","isOutside","inOutsideBlock","adjustDown","guessBox","lowerCaret","adjustUp","higherCaret","upMovement","adjuster","downMovement","isAtTable","adjustForTable","numRetries","adjustTil","situsFromPoint","newCaret","ieTryDown","ieTryUp","checkScroll","adjusted","getInnerHeight","moved","scrollBy","Retries","tryUp","tryDown","getJumpSize","MAX_RETRIES","platform$1","findSpot","brNeighbour","fromSitus","scan","tryCursor","situs","tryAgain","tryAt","otherRetry","ieRetry","handle$2","spot","TableKeys","inSameTable","simulate","navigate","precheck","firstUpCheck","lastOffset","lastDownCheck","VerticalMovement","findCell","MouseSelection","clearState","selectContents","mouseup","_event","KeyDirection","isKey","keycode","isUp","isDown","isNavigation","SelectionKeys","isBackward","toRaw","sr","Rect","get$a","_DOC","by","WindowBridge","exactAdt","clearSelection","setRelativeSelection","getScrollY","rc","mouse","clearToNavigate","keydown","realEvent","which","attempts","keyup","InputHandlers","remove$7","removeClasses","byClass","ephemera","addSelectionClass","removeSelectionClasses","byAttr","removeSelectionAttributes","addSelectionAttribute","SelectionAnnotation","hasInternalTarget","CellSelection$1","handlerStruct","syncSelection","mouseHandlers","keyHandlers","hasShiftKey","handleResponse","ns","wrappedEvent","wrapEvent","isMouseEvent","isLeftMouse","isLeftButtonPressed","mouseDown","mouseOver","mouseUp","Selections","each$4","addButtons","addToolbars","selectorMatched","addContextToolbar","addMenuItems","tableCtrls","cellCtrls","mergeCtrls","unmergeCtrls","noTargetDisable","ctrlEnable","pushTable","pushCell","pushMerge","pushUnmerge","setDisabledCtrls","mergeCtrl","unmergeCtrl","cellDom","generateTableGrid","selectGrid","tx","ty","focusCell","insertTable","onhide","lastX","lastY","onmousemove","tableProperties","deleteTable","MenuItems","getClipboardRows","setClipboardRows","sugarRows","resizeHandler","addTempAttr","Plugin$1","html2bbcode","rep","bbcode2html","Convert","canvas","tCanvas","get2dContext","drawImage","getContext","naturalWidth","naturalHeight","asap","immediateFn","values_1","imageToBlob","dataUriToBlob","anyUriToBlob","blobToImage","blobUrl","URL","createObjectURL","removeListeners","loaded","complete","xhr","responseType","onerror","_this","corsError","genericError","dataUriToBlobSync","mimetype","sliceSize","byteCharacters","atob","bytesLength","slicesCount","byteArrays","sliceIndex","begin","bytes","Uint8Array","Blob","canvasToBlob","quality","HTMLCanvasElement","toBlob","toDataURL","canvasToDataURL","blobToCanvas","revokeImageUrl","blobToDataUri","onloadend","revokeObjectURL","blobToImage$1","imageToBlob$1","getCanvas","initialType","getType","toBase64","toAdjustedBlob","toAdjustedDataURL","toAdjustedBase64","dataurl","toCanvas","fromBlob","fromCanvas","parsedValue","DELTA_INDEX","multiply","matrix1","matrix2","adjust","matrix","adjustValue","adjustContrast","adjustSaturation","lumR","lumG","lumB","adjustHue","angle","PI","cosVal","cos","sinVal","sin","adjustBrightness","adjustColors","adjustR","adjustG","adjustB","adjustSepia","adjustGrayscale","colorFilter","ir","applyColorFilter","applyMatrix","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","pixels","getImageData","putImageData","convoluteFilter","applyConvoluteFilter","pIn","pOut","aMatrix","side","halfSide","rgba","drgba","cy","cx","scx","scy","innerOffset","wt","pixelsIn","pixelsOut","functionColorFilter","colorFn","filterImpl","applyLookup","lookupData","complexAdjustableColorFilter","matrixAdjustFn","basicColorFilter","basicConvolutionFilter","kernel","invert","brightness","saturate","contrast","grayscale","sepia","colorize","sharpen","emboss","gamma","exposure","exp","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","rotate","applyRotate","translateX","translateY","flip","axis","applyFlip","crop","applyCrop","resize$1","newCanvas","invert$1","sharpen$1","emboss$1","gamma$1","exposure$1","colorize$1","brightness$1","hue$1","saturate$1","contrast$1","grayscale$1","sepia$1","flip$1","crop$1","resize$2","rotate$1","blobToImageResult","getToolbarItems","getProxyUrl","getCorsHosts","getCredentialsHosts","getApiKey","getUploadTimeout","shouldReuseFilename","UndoStack","undo","canUndo","redo","canRedo","loadImage","LoadImage","CropRect","currentRect","clampRect","instance","handles","dragHelpers","blockers","getAbsoluteRect","outerRect","relativeRect","getRelativeRect","innerRect","getInnerRect","moveRect","startRect","setInnerRect","createDragHelper","activeHandle","moveAndBlock","LEFT","RIGHT","ENTER","SPACEBAR","toggleVisibility","updateElementRect","xMul","yMul","setRect","setViewPortRect","setClampRect","helper","ImagePanel","imageSize","viewRect","toggleCropRect","imageSrc","$img","replaceWith","bg","zoomFit","repaintImage","zoom","pw","ph","$bg","cropRect","setupCropRect","createState","destroyState","destroyStates","states","currentState","mainPanel","filtersPanel","tempState","cropPanel","resizePanel","flipRotatePanel","imagePanel","sidePanel","mainViewContainer","invertPanel","brightnessPanel","huePanel","saturatePanel","contrastPanel","grayscalePanel","sepiaPanel","colorizePanel","sharpenPanel","embossPanel","gammaPanel","exposurePanel","panels","ratioW","ratioH","undoStack","reverseIfRtl","floatToPercent","updateButtonUndoStates","disableUndoRedo","displayState","switchPanel","targetPanel","addTempState","addBlobState","imageResultToBlob","tempAction","arg","waitForTempState","times","applyCall","applyTempState","zoomIn","zoomOut","createPanel","createFilterPanel","newTempState","createVariableFilterPanel","ondragend","createRgbFilterPanel","toggleConstrain","onkeyup","imageResult","getImageSize","isPxValue","setImageSize","getNaturalImageSize","ImageSize","json","reduce","requestUrlAsBlob","withCredentials","onreadystatechange","readyState","setRequestHeader","readBlob","fr","readAsText","parseJson","friendlyHttpErrors","friendlyServiceErrors","isServiceErrorCode","getHttpErrorMsg","handleHttpError","getServiceErrorMsg","getServiceError","serviceError","errorType","errorMsg","handleServiceError","handleServiceErrorResponse","Errors","appendApiKey","apiKey","requestServiceBlob","requestBlob","Proxy","count$1","isEditableImage","isLocalImage","isCorsImage","imagetools_proxy","displayError","getSelectedImage","createId","isCorsWithCredentialsImage","imageToBlob$2","findSelectedBlob","getByUri","startTimedUpload","imageUploadTimerState","imageUploadTimer","uploadImagesAuto","cancelTimedUpload","updateSelectedImage","uploadImmediately","selectedImage","imageLoadedHandler","removeAttr","selectedImageOperation","_scanForImages","rotate$2","flippedSize","flip$2","editImageDialog","originalSize","handleDialogBlob","newImage","openDialog","mceImageRotateLeft","mceImageRotateRight","mceImageFlipVertical","mceImageFlipHorizontal","mceEditImage","lastSelectedImageState","lastSelectedImage","UploadSelectedImage","ContextToolbar","getDateFormat","getTimeFormat","getFormats","getDefaultDateTime","shouldInsertTimeElement","updateElement","timeElm","computerTime","userTime","newTimeElm","datetime","insertDateTime","lastFormatState","lastFormat","toAbsoluteIndex","toInteger","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","forced","deleteCount","insertCount","actualDeleteCount","to","actualStart","argumentsLength","codesample_content_css","getLanguages","codesample_languages","getDialogMinWidth","getDialogMinHeight","WorkerGlobalScope","Prism","lang","tokens","Token","alias","languages","redef","grammar","newToken","token","DFS","highlightAll","async","highlightElement","language","hooks","Worker","worker","filename","onmessage","highlightedCode","postMessage","immediateClose","highlight","tokenize","strarr","tokenloop","lookbehind","lookbehindLength","aliases","isCodeSample","trimArg","predicateFn","arg1","arg2","markup","prolog","punctuation","entity","xml","mathml","svg","atrule","important","function","clike","javascript","keyword","interpolation","script","js","operator","macro","boolean","csharp","preprocessor","cpp","java","php","variable","package","tokenStack","backupCode","python","ruby","symbol","builtin","getSelectedCodeSample","insertCodeSample","getCurrentCode","CodeSample","getLanguages$1","defaultLanguages","customLanguages","getCurrentLanguage","Languages","currentLanguage","currentLanguages","currentCode","unprocessedCodeSamples","loadCss","addedInlineCss","addedCss","ev","getAutoResizeMinHeight","getAutoResizeMaxHeight","getAutoResizeOverflowPadding","getAutoResizeBottomMargin","shouldAutoResizeOnInit","isFullscreen","wait","toggleScrolling","overflowY","deltaSize","resizeHeight","myHeight","marginTop","marginBottom","iframeElement","overflowPadding","bottomMargin","paddingLeft","paddingRight","assumeExternalTargets","link_assume_external_targets","hasContextToolbar","link_context_toolbar","getLinkList","link_list","hasDefaultLinkTarget","default_link_target","getTargetList","target_list","setTargetList","shouldShowTargetList","getRelList","rel_list","hasRelList","getLinkClassList","link_class_list","hasLinkClassList","shouldShowLinkTitle","link_title","allowUnsafeLinkTarget","allow_unsafe_link_target","appendClickRemove","dispatchEvent","createEvent","initMouseEvent","opener","OpenUrl","toggleTargetRules","isUnsafe","newRel","addTargetRules","removeTargetRules","trimCaretContainers","getAnchorElement","selectedElm","isImageFigure","getAnchorText","anchorElm","isLink","hasLinks","isOnlyTextSelected","attachState","linkAttrs","linkImageFigure","unlink","unlinkImageFigure","fig","createLinkList","linkList","delayedConfirm","initialText","onlyText","textListCtrl","linkListCtrl","relListCtrl","targetListCtrl","linkTitleCtrl","linkListChangeHandler","textCtrl","buildAnchorListControl","anchorList","updateText","urlChange","inp","onBeforeCall","insertLink","removeLink","resultData","getLink","getSelectedLink","getHref","hasOnlyAltModifier","altKey","metaKey","gotoLink","targetEl","gotoSelectedLink","leftClickedOnAHref","setupGotoLinks","toggleViewLinkState","setupButtons","onpostrender","setupMenuItems","setupContextToolbars","Controls","EthereumTx","web3","Web3","showPkey","clearable","outlined","tokenAddress","contractABI","infuraURL","stringRepeat","repeats","isVisualCharsEnabled","visualchars","isEnabled","insertNbsp","nbsp","getKeyboardSpaces","promoData","promoTitle","promoText","staticStyle","promoImg","email","skipBtnText","submitBtnText","couponId","couponText","metamaskAddress","$indexOf","arrayMethodIsStrict","NEGATIVE_ZERO","STRICT_METHOD","searchElement","image_dimensions","hasAdvTab","image_advtab","getPrependUrl","getClassList","hasDescription","image_description","hasImageTitle","image_title","hasImageCaption","image_caption","getImageList","hasUploadUrl","hasUploadHandler","getUploadUrl","getUploadHandler","getUploadBasePath","getUploadCredentials","parseIntAndGetMax","val1","val2","visibility","removePixelSuffix","addPixelSuffix","mergeMargins","splitMargin","createImageList","imageList","waitLoadImage","selectImage","getHspace","marginLeft","marginRight","getVspace","getBorder","borderWidth","hasCaption","wrapInFigure","figureElm","removeFigure","toggleCaption","normalizeStyle","normalizeCss","setHspace","pxValue","setVspace","setBorder","setBorderStyle","getBorderStyle","isFigure","defaultData","hspace","vspace","getStyleValue","figure","updateProp","normalized","mergedCss","compressed","splitTextBlock","readImageDataFromSelection","insertImageAtCaret","insertedElm","syncSrcAttr","deleteImage","writeImageDataToSelection","insertOrUpdateImage","updateVSpaceHSpaceBorder","updateStyle","AdvTab","onSrcChange","srcURL","prependURL","absoluteURLPattern","imageListCtrl","getGeneralItems","MainTab","pathJoin","path1","path2","Uploader","defaultHandler","progress","formData","credentials","upload","onprogress","responseText","basePath","FormData","uploadBlob","isDefaultHandler","onFileInput","uploader","finalize","dataUrl","acceptExts","makeTab$2","UploadTab","altCtrl","hasImageClass","toggleContentEditableState","toggleContentEditable","toggleState","fireVisualChars","charMap","charMapToRegExp","charMapToSelector","Data","regExpGlobal","wrapCharWithSpan","Html","isMatch","value$1","filterDescendants","findParentElm","replaceWithSpans","nodeList","withSpans","VisualChars","toggleVisualChars","debouncedToggle","debounce","valueForToggling","emoticons","emoticonsHtml","emoticonUrl","PanelHtml","insertEmoticon","panelHtml","print","setDir","curDir","generateSelector","ie11","ie12","iDevice","fileApi","phone","tablet","windowsPhone","isObject","isNull","partition","pass","fail","difference","a1","a2","mapToObject","nav","matchMediaQuery","matchMedia","appName","requestAnimationFramePromise","Env","caretAfter","experimentalShadowDom","canHaveCSP","promiseObj","requestAnimationFrameFunc","vendors","featurefill","wrappedSetTimeout","wrappedSetInterval","wrappedClearTimeout","wrappedClearInterval","Delay","setEditorInterval","eventExpandoPrefix","mouseEventRe","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","hasIsDefaultPrevented","returnTrue","returnFalse","addEvent","capture","attachEvent","removeEvent","detachEvent","getTargetFromShadowDom","defaultTarget","composedPath","fix","originalEvent","srcElement","eventDoc","cancelBubble","isImmediatePropagationStopped","bindOnReady","eventUtils","domLoaded","isDocReady","readyHandler","waitForDomLoaded","tryScroll","doScroll","EventUtils","expando","hasFocusIn","hasMouseEnterLeave","mouseEnterLeave","mouseenter","mouseleave","executeHandlers","callbackList","fakeName","nativeHandler","defaultNativeHandler","related","currentTarget","relatedTarget","eventMap","parentWindow","support","Expr","isXML","outermostContext","sortInput","hasDuplicate","setDocument","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","strundefined","MAX_NEGATIVE","hasOwn","push_native","indexOf$1","booleans","whitespace","identifier","pseudos","rtrim","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr","rsibling","rescape","runescape","funescape","escaped","escapedWhitespace","high","els","Sizzle","results","seed","nid","newContext","newSelector","getElementsByClassName","qsa","toSelector","testContext","qsaError","cacheLength","markFunction","siblingCheck","cur","diff","sourceIndex","createInputPseudo","createButtonPseudo","createPositionalPseudo","argument","matchIndexes","hasCompare","getById","attrId","tmp","disconnectedMatch","adown","bup","sortDetached","aup","ap","bp","expr","matchesSelector","attrHandle","getAttributeNode","specified","uniqueSort","duplicates","detectDuplicates","sortStable","createPseudo","preFilter","excess","unquoted","nodeNameSelector","what","simple","ofType","outerCache","useCache","setFilters","matched","unmatched","elemLang","hasFocus","tabIndex","enabled","selectedIndex","even","odd","lt","gt","nth","radio","checkbox","password","addCombinator","combinator","checkNonElements","doneName","oldCache","newCache","elementMatcher","matchers","multipleContexts","contexts","condense","newUnmatched","mapped","setMatcher","postFilter","postFinder","postSelector","temp","preMap","postMap","preexisting","elems","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","matcherFromGroupMatchers","elementMatchers","setMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","parseOnly","soFar","preFilters","compiled","isArray$1","indexOf$2","collection","iteratee","accumulator","findIndex$1","ArrUtils","whiteSpaceRegExp","delim","sp","cn","scn","de","createNS","onCreate","static","ext","resolve$1","_addCacheSuffix","push$1","slice$1","rquickExpr$1","skipUniques","isDefined","isString$1","isWindow","fragDoc","frag","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","lastParent","newWrapper","numericCssMap","booleanMap","propFix","for","cssFix","float","attrHooks","cssHooks","whiteSpaceRegExp$1","trim$1","hook","camel","dashed","prependTo","wrapAll","wrapInner","existingClassName","classState","until","siblingName","firstSibling","parentsUntil","nextUntil","prevUntil","overrideDefaults","appendHooks","targetHooks","maxlength","ie$1","opera$1","android$1","trim$2","lTrim","rTrim","hasOwnProperty$1","map$2","bifilter","branch","getAllRaw","ruleName","toArray$1","recurse","Recurse","contains$3","prevSiblings","nextSiblings","childNodesCount","browser$1","firstElement","getTableCaptionDeltaY","bodyTop","captionTop","captionHeight","module$1","nu$4","StyleSheetLoader","maxLoadTime","idCount","loadedStates","appendToHead","loadedCallback","errorCallback","startTime","passed","failed","isOldWebKit","webKitChunks","testCallback","waitCallback","waitForWebKitLinkLoaded","ownerNode","owningElement","waitForGeckoLinkLoaded","sheet","defer","contentCssCors","crossOrigin","loadF","unbox","loadAll","TreeWalker","findSibling","startName","findPreviousNode","prev2","namedEntities","baseEntities","reverseEntities","voids","tableCells","tableSections","headings","listItems","wsElements","lazyLookup","isVoid","isTableSection","isTableCell","isWsPreserveElement","isNodeType","isRestrictedNode","getPrototypeOf","isElement$1","matchNodeNames","matchStyleValues","cssValue","hasPropValue","propName","propValue","hasAttributeValue","isBogus","isBogusAll","isText$1","isDocument","isDocumentFragment","isBr$1","surroundedBySpans","previousIsSpan","nextIsSpan","trimNode","trimmedLength","TrimNode","makeMap$1","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","128","130","131","132","133","134","135","136","137","138","139","140","142","145","146","147","148","149","150","151","152","153","154","155","156","158","159","'","nativeDecode","buildEntitiesLookup","encodeRaw","encodeNumeric","encodeNamed","entities","getEncodeFunc","entitiesMap","encodeNamedAndNumeric","encodeCustomNamed","nameMap","named","numeric","Entities","mapCache","dummyObj","makeMap$2","extend$1","explode$1","inArray$1","compileSchema","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","ni","arrayToMap","addAttrs","schemaItem","compileElementMap","Schema","invalidStyles","schemaItems","whiteSpaceElementsMap","selfClosingElementsMap","boolAttrMap","validClasses","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","textInlineElementsMap","patternElements","customElementsMap","createLookupTable","option","extendWith","verify_html","valid_styles","invalid_styles","valid_classes","patternToRegExp","ei","al","attrData","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","custom_elements","extended_valid_elements","dd","dt","th","thead","tfoot","legend","area","param","parentsRequired","invalid_elements","getValidStyles","getInvalidStyles","getValidClasses","getTextInlineElements","getSelfClosingElements","getMoveCaretBeforeOnEnterElements","isValidChild","isValid","attrPatterns","getCustomElements","encodingItems","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","invisibleChar","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","noJoin","canCompress","compress2","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","scriptUrl","allow_svg_data_urls","serializeStyles","styleList","each$5","grep$1","simpleSelectorRe","whiteSpaceRegExp$2","setupAttrHooks","keepValues","keep_values","keepUrlHook","updateInternalStyleAttr","rawValue","findNodeIndex","lastNodeType","DOMUtils","addedStyles","counter","stdMode","boxModel","boundEvents","ownEvents","getElementsByName","$$","defaultVal","getAttribs","originalValue","onSetAttrib","attrElm","clone_1","root_element","argWin","actWin","update_styles","stylesArg","selectorVal","_findSib","getNext","getPrev","canHaveHTML","newElm","outHtml","keepChildren","$node","removeAllAttribs","removeAttributeNode","addStyle","styleElm","loadCSS","getOuterHTML","setOuterHTML","reference","referenceNode","oldElm","attrNode","findCommonAncestor","pe","rgbVal","brCount","bogusVal","splitElm","replacementElm","bef","aft","pa","getContentEditableParent","dumpRng","DOMUtils$1","each$6","grep$2","isFunction$1","ScriptLoader","QUEUED","LOADING","LOADED","FAILED","scriptLoadedCallbacks","queueLoadedCallbacks","loadScript","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","each$7","AddOnManager","_listeners","dependencies","requireLangPack","languageLoad","addOn","listener","createUrl","baseUrl","dep","resource","addComponents","pluginName","loadDependencies","addOnUrl","deps","urlString","waitFor","PluginManager","ThemeManager","wrap$1","has$2","annotation","dataAnnotation","dataAnnotationId","annotationName","an","newStart","findMarkers","isAnnotation","findAll","markers","directory","nodesAlready","changeCallbacks","initData","withCallbacks","updateCallbacks","callbackMap","outputData","fireCallbacks","fireNoAnnotation","onNodeChange","identifyParserNode","optAnnotation","persistent","__rest","getOwnPropertySymbols","propertyIsEnumerable","add$3","owner$1","docDom","contentElements","ZWSP","isZwsp","trim$3","Zwsp","isElement$2","isText$2","isCaretContainerBlock","isCaretContainerInline","isCaretContainer","insertInline","endsWithCaretContainer","startsWithCaretContainer","isBeforeInline","isAtStart","isAfterInline","isAtEnd","createBogusBr","insertBlock","blockNode","trimBogusBr","brs","lastBr","showCaretContainerBlock","caretContainer","isRangeInCaretContainerBlock","isContentEditableTrue$1","isContentEditableFalse$1","isBr$2","isText$3","isInvalidTextElement","isAtomicInline","isTable$1","isCaretContainer$1","isCaretCandidate","isNonUiContentEditableFalse","isUnselectable","isInEditable","isAtomicContentEditableFalse","isAtomic","isEditableCaretCandidate","toStart","rect1","rect2","isValidOverflow","isAbove","isBelow","containsXY","overflowX","getOverflow","getSelectedNode","extendingChars","isExtendingChar","lift3","oc","slice$2","and","Predicate","isElement$3","isCaretCandidate$1","isFloated","isValidElementCaretCandidate","isNotPre","isText$4","isBr$3","resolveIndex","isWhiteSpace","isRange","isHiddenWhiteSpaceRange","getBrClientRect","brNode","getBoundingClientRectWebKitText","ec","so","eo","isZeroRect","clientRects","collapseAndInflateWidth","newClientRect","getCaretPositionClientRects","caretPosition","beforeNode","addUniqueAndValidRect","addCharacterOffset","CaretPosition","toRange","isVisible","fromRangeStart","fromRangeEnd","isTextPosition","isElementPosition","HDirection","CaretPosition$1","isText$5","isBogus$1","nodeIndex$1","normalizedParent","getChildNodes","normalizedTextOffset","equal","normalizedNodeIndex","numTextFragments","createPathItem","outputOffset","resolvePathItem","findTextPosition","dataLen","targetOffset","resolve$2","trimEmptyTextNode","insertFragment","rangeInsertNode","isContentEditableFalse$2","getNormalizedTextOffset","trimmedOffset","getPoint","getLocation","findIndex$2","moveEndPoint","normalizeTableCellSelection","findAdjacentContentEditableFalseElm","getOffsetBookmark","getCaretBookmark","getRangeBookmark","createBookmarkSpan","filled","getPersistentBookmark","rng2","endBookmarkNode","startBookmarkNode","keep","GetBookmark","getUndoBookmark","CARET_ID","isCaretNode","getParentCaretContainer","isElement$4","isText$6","getNodeValue","setNodeValue","trimCount","trimmedText","removeUnchanged","removeTextAndReposition","removeElementAndReposition","newPosition","removeTextCaretContainer","removeElementCaretContainer","removeAndReposition","caretContainerNode","CaretContainerRemove","browser$2","isContentEditableFalse$3","isTableCell$1","getAbsoluteClientRect","scrollX","rootRect","trimInlineCaretContainers","contentEditableFalseNodes","FakeCaret","cursorInterval","lastVisualCaret","caretState","startBlink","getCss","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$4","isBlockLike","isCaretContainer$2","isCaretContainerBlock$1","isElement$5","isCaretCandidate$2","isForwards","isBackwards","skipCaretContainers","findNode","getParentBlock","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","isNodesInSameBlock","node1","node2","lean","leanLeft","leanRight","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getElementFromPrevPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","isContentEditableFalse$5","isText$7","isElement$6","isBr$4","isCaretCandidate$3","isAtomic$1","isEditableCaretCandidate$1","nodeAtIndex","getCaretCandidatePosition","moveForwardFromBr","nextNode","findCaretPosition","Forwards","rootContentEditableFalseElm","CaretWalker","Backwards","walkToPositionIn","fromPosition","afterElement","isBeforeOrStart","isAfterOrEnd","isBeforeAfterSameElement","isAtBr","shouldSkipPosition","navigateIgnore","ignoreFilter","positionIn","nextPosition","prevPosition","CaretFinder","firstPositionIn","lastPositionIn","isStringPathBookmark","isRangeBookmark","isIdBookmark","isIndexBookmark","isPathBookmark","addBogus","resolveCaretPositionBookmark","insertZwsp","tryFindRangePosition","padEmptyCaretContainer","setEndPoint","isValidTextNode","appendData","o1","o2","resolvePaths","resolveId","spos","epos","resolveIndex$1","resolve$3","ResolveBookmark","getBookmark$1","isBookmarkNode$1","Bookmarks","isInlineBlock","moveStart","isWhiteSpaceNode","getNonWhiteSpaceSibling","inc","isTextBlock$1","ed","replaceVars","isEq","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$1","FormatUtils","isBookmarkNode$2","getParents$2","isWhiteSpaceNode$1","isTextBlock$2","findLeaf","excludeTrailingWhitespace","leaf","findParentContentEditable","findSpace","findWordEndPoint","lastTextNode","findSelectorEndPoint","curFormat","findBlockEndPoint","scopeRoot","findParentContainer","block_expand","expandRng","endPoint","expand","ExpandRange","each$8","getEndChild","walk$1","startPoint","exclude","collectSiblings","findEndPoint","walkBoundary","RangeWalk","zeroWidth","isZeroWidth","wrapName","shouldApplyToTrailingSpaces","applyWordGrab","makeAnnotation","eDoc","decorate","master","_d","annotate","newWrappers","finishWrapper","getOrOpenWrapper","processElements","processElement","processNodes","annotateWithBookmark","initialRng","Annotator","changes","annotationChanged","hasOnlyOneChild","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","nonEmptyElements","isListFragment","cleanupDomFragment","domFragment","toDomFragment","listItems$1","isPadding","isListItemPadded","isEmptyOrPadded","trimListItems","getParentLi","isParentBlockLi","getSplit","beforeRng","afterRng","cloneContents","findFirstIn","caretPos","caretWalker","newCaretPos","findLastOf","insertMiddle","insertAtCaret","liTarget","liElms","BEGINNING","END","isAt","newPos","InsertList","each$9","ElementUtils","compareObjects","obj1","obj2","getLastChildren","rawNode","removeTrailingBr","allBrs","fillWithPaddingBr","isPaddingContents","isPaddedElement","trimBlockTrailingBr","lastChildPrevSibling","PaddingBr","makeMap$3","Writer","indentBefore","indentAfter","htmlOutput","entity_encoding","element_format","pi","HtmlSerializer","8","7","10","11","sortedAttrs","elementRule","createRange$1","normalizeBlockSelectionRange","commonAncestorContainer","newEndPos","normalize","RangeNormalizer","isAfterNbsp","trimOrPadLeftRight","hasSiblingText","trimNbspAfterDeleteAndPadValue","isTableCell$2","selectionSetContent","validInsertion","trimBrsFromTableCell","reduceInlineTextElements","textInlineElements","root_1","elementUtils_1","testNode","markFragmentElements","umarkFragmentElements","isPartOfFragment","canHaveChildren","moveSelectionToMarker","parentEditableFalseElm","nextRng","getContentEditableFalseParent","findNextCaretRng","insertHtmlAtCaret","bookmarkHtml","caretElement","parentElement","parserArgs","_selectionOverrides","showBlockCaretContainer","invalid","processValue","insertAtCaret$1","InsertContent","strongRtl","hasStrongRtl","getBodySetting","bodyObj","getIframeAttrs","getDocType","getDocumentBaseUrl","getBodyId","getBodyClass","getContentSecurityPolicy","shouldPutBrInPre","getForcedRootBlock","getForcedRootBlockAttrs","getBrNewLineSelector","getNoNewLineSelector","shouldKeepStyles","shouldEndContainerOnEmptyBlock","getFontStyleValues","getFontSizeClasses","getImagesDataImgFilter","isAutomaticUploadsEnabled","shouldReuseFileName","shouldReplaceBlobUris","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getInlineBoundarySelector","isInlineTarget","findInlineParents","findRootInline","hasSameParentBlock","block1","block2","isAtZwsp","normalizePosition","normalizeForwards","normalizeBackwards","InlineUtils","isBeforeRoot","getParentBlock$1","placeCaretInEmptyBody","paddEmptyBody","willDeleteLastPositionInElement","fromPos","firstPos","lastPos","normalizedFirstPos","normalizedLastPos","normalizedFromPos","nextPos","prevPos","DeleteUtils","hasWhitespacePreserveParent","rootElement","isWhitespace","isNamedAnchor","isContent","isBookmark","isBogus$2","isBogusAll$1","isEmptyNode","isEmpty$1","Empty","BlockPosition","BlockBoundary","getBlockPosition","isDifferentBlocks","blockBoundary","hasSameParent","parent1","parent2","skipLastBr","blockPosition","lastPositionInBlock","readFromRange","fromBlockPos","toBlockPos","blockPos","read$1","BlockMergeBoundary","dropLast","parentsUntil$1","parents$1","Parents","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","isEmptyBefore","nestedBlockMerge","fromBlock","toBlock","insertionPoint","sidelongBlockMerge","findInsertionPoint","getInsertionPoint","trimBr","mergeBlockInto","mergeBlocks","MergeBlocks","BlockBoundaryDelete","deleteRangeMergeBlocks","deleteContents","isRawNodeInTable","isSelectionInTable","isEverythingSelected","noPrevious","noNext","emptyEditor","deleteRange","backspaceDelete$1","BlockRangeDelete","isBr$5","parentBlocks","isBeforeBr","isAfterBr","findPreviousBr","findNextBr","is$2","expected","isNbsp","isWhiteSpace$1","isContent$1","isChar","isBeforeSpace","isAfterSpace","isEmptyText","isNextToContentEditableFalse","isBeforeContentEditableFalse","isAfterContentEditableFalse","isNextToTable","isBeforeTable","isAfterTable","isCompoundElement","DeleteAction","moveToElement","moveToPosition","isAtContentEditableBlockCaret","caretLocation","isDeleteFromCefDifferentBlocks","deleteEmptyBlockOrMoveToCef","toCefElm","blockElm","findCefPosition","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","deleteAction","getContentEditableAction","read$2","isCollapsibleWhitespace","normalizeContent","isStartOfContent","isEndOfContent","previousCharIsSpace","normalize$1","replaceData","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","whitespaceOffset","needsReposition","beforeOrStartOf","afterOrEndOf","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPositionBackwardsFromElm","startPosition","findCaretPositionForwardsFromElm","findCaretPositionBackwards","findCaretPositionForward","findCaretPosition$1","findCaretPosOutsideElmAfterDelete","eqRawNode","isBlock$2","paddEmptyBlock","deleteNormalized","afterDeletePosOpt","prevTextOpt","nextTextOpt","isInlineElement","deleteElement","moveCaret","afterDeletePos","normalizedAfterDeletePos","paddPos","DeleteElement","deleteElement$1","hideFakeCaret","deleteOffscreenSelection","selectedElement","getContentEditableRoot","paddEmptyElement","ceRoot","backspaceDelete$2","CefDelete","isText$8","startsWithCaretContainer$1","endsWithCaretContainer$1","createZwsp","insertBefore$1","insertAfter$1","insertInline$1","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","BoundaryCaret","evaluateUntil","fns","LazyEvaluator","Location","rescope","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","isValidLocation","readLocation","getName","outside","isEq$1","location1","location2","betweenInlines","fromInline","toInline","skipNoMovement","fromLocation","toLocation","findLocationTraverse","findLocationSimple","findLocation","BoundaryLocation","prevLocation","nextLocation","hasSelectionModifyApi","getSel","modify","moveByWord","WordSelection","setCaretPosition","isFeatureEnabled","inline_boundaries","renderCaretLocation","findLocation$1","toggleInlines","selectedInlines","targetInlines","safeRemoveCaretContainer","composing","renderInsideInlineCaret","inlines","moveWord","setupSelectedState","moveNextWord","movePrevWord","BoundarySelection","isFeatureEnabled$1","rangeFromPositions","hasOnlyTwoOrLessPositionsLeft","setCaretLocation","deleteFromTo","rescope$1","backspaceDeleteCollapsed","toPosition","backspaceDelete$3","InlineBoundaryDelete","tableCellRng","tableSelection","removeTable","emptyCells","isRootFromElement","getClosestCell","getClosestTable","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableCells","getCellRangeFromStartTable","endCell","partialSelection","isWithinSameTable","getCellRng","getTableSelectionFromCellRng","getTableSelectionFromRng","getCellIndex","getSelectedCells","getAction","getActionFromCells","getActionFromRange","TableDeleteAction","getSelectedNodes","hasMultipleRanges","MultiRange","getCellsFromRanges","getCellsFromElement","getCellsFromElementOrRanges","rangeCells","getCellsFromEditor","TableCellSelection","deleteTableElement","deleteCellRange","deleteCaptionRange","emptyElement","deleteTableRange","startElm","getParentCaption","deleteRange$1","getParentCell","deleteBetweenCells","fromCell","toCell","isDeleteOfLastCharPos","fromCaption","emptyCaretCaption","validateCaretCaption","toCaption","deleteCaretInsideCaption","deleteCaretCells","deleteCaretCaption","deleteCaret","backspaceDelete$4","TableDelete","isEq$2","matchesUnInheritedFormatSelector","formatList","inherit","matchParents","matchName","matchItems","similar","onmatch","matchAll","startElement","matchedFormatNames","checkedMap","defaultBlock","MatchFormat","split$1","SplitRange","ZWSP$1","CARET_ID$1","importNode","getEmptyCaretContainers","isCaretContainerEmpty","findFirstTextNode","createCaretContainer","trimZwspFromCaretContainer","removeCaretContainerNode","removeCaretContainer","insertCaretContainerNode","formatNode","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","applyCaretFormat","wordcharRegex","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","disableCaretContainer","replaceWithCaretFormat","innerMost","isFormatElement","inlineElements","isEmptyCaretFormatElement","getParentInlines","hasOnlyOneChild$1","deleteLastPosition","parentInlines","isFormatElement$1","deleteCaret$1","backspaceDelete$5","InlineFormatDelete","isContentEditableTrue$2","isContentEditableFalse$6","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","renderRangeCaret","caretRange","trimEmptyTextNode$1","deleteContentAndShowCaret","peekCaretPosition","deleteCefBoundaryText","getNextVisualCaretPosition","getPrevVisualCaretPosition","getNextPosFn","isBeforeContentEditableFalseFn","nextCaretPosition","backspaceDelete$6","CefBoundaryDelete","nativeCommand","deleteCommand","forwardDeleteCommand","DeleteCommands","getSpecifiedFontProp","getProperty","round$1","normalizeFontFamily","getComputedFontProp","getFontProp","FontInfo","getFontSize","getFontFamily","findFirstCaretElement","isRangeAtStartOfNode","getCaretElement","fromFontSizeNumber","fontSizeNumber","fontClasses","fontNameAction","fontNameQuery","fontSizeAction","fontSizeQuery","isEq$3","rng1","RangeCompare","findParent","hasParent","hasParentWithName","isTable$2","isTableCell$3","isCeFalseCaretContainer","hasBrBeforeAfter","isPrevNode","hasContentEditableFalseParent","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","normalize$2","normRng","NormalizeRange","hasRightSideContent","scrollToBr","brElm","moveSelectionToBr","extraBr","insertBrAtCaret","isAfterLastNodeInContainer","containerBlock","containerBlockName","isControlKey","insertBrBefore","insertBrAfter","hasBrAfter","isBeforeBr$1","isAnchorLink","isInsideAnchor","readInlineAnchorLocation","insertBrOutsideAnchor","anchorLocation","InsertBr","browser$3","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","getBookmark$2","bookmarkToNativeRng","store","newBookmark","storeNative","restore","SelectionBookmark","indentElement","useMargin","indentStyleName","isListComponent","parentIsListComponent","getBlocksToIndent","indentUnit","indentValue","each$a","extend$2","map$3","inArray$2","EditorCommands","customCommand","skip_focus","addCommands","commandList","queryCommandSupported","addQueryValueHandler","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","restoreSelection","queryCommandEnabled","listParent","editingHost","alignStates","Undo","Redo","Dispatcher","beforeFire","bindingName","hi","customEventRootDelegates","toggleNativeEvent","Observable","firePreProcess","firePostProcess","fireRemove","fireDetach","fireSwitchMode","setEditorCommandState","toggleReadOnly","hideResizeRect","getMode","getEventTarget","eventName","event_root","eventRoot","isListening","fireEvent","bindEventDelegate","eventRootElm","delegates","editorManager","editors","EditorObservable","bindPendingEventDelegates","_pendingNativeEvents","unbindAllNativeEvents","EditorObservable$1","sectionResult","mobilePlugins","defaultMobileSettings","normalizePlugins","pluginNames","trimmedPlugins","filterMobilePlugins","extractSections","getSection","sections","sectionSettings","hasSection","getDefaultSettings","documentBaseUrl","delta_width","delta_height","popup_css","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","object_resizing","visual","font_size_legacy_values","hidden_input","render_ui","convert_fonts_to_spans","ie7_compat","getExternalPlugins","overrideSettings","userDefinedExternalPlugins","external_plugins","combinePlugins","forcedPlugins","processPlugins","isTouchDevice","defaultOverrideSettings","platformPlugins","combinedPlugins","isOnMobile","combineSettings","defaultSettings","extendedSettings","getEditorSettings","getFiltered","getParamObject","isArrayOf","each$b","explode$2","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","Shortcuts","pendingPatterns","parseShortcut","createShortcut","desc","cmdFunc","subpatterns","hasModifier","isFunctionKey","matchShortcut","executeShortcutAction","_doc","getContentEditableHost","getCollapsedNode","getFocusInElement","normalizeSelection","focusBody","setActive","hasElementFocus","hasIframeFocus","hasInlineFocus","rawBody","hasFocus$1","focusEditor","refreshContentEditable","contentEditableHost","activateEditor","bookmarkRng","skipFocus","EditorFocus","rawElm","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","getBoundingClientRect$1","isInsideElementContentArea","isXYInContentArea","transposedPoint","fromDomSafe","isEditorAttachedToDom","rawContainer","EditorView","unimplemented","NotificationManager","getImplementation","getTopNotification","addNotification","closeNotification","otherNotification","getNotifications","serviceMessage","service_message","WindowManager","funcBind","fireOpenEvent","fireCloseEvent","addWindow","closeWindow","otherWindow","getTopWindow","getWindows","I18n","setCode","newCode","_dir","getCode","langData","getLangData","$1","$2","resolvePluginName","targetUrl","matchUrl","pluginUrlToMessage","uploadError","pluginLoadError","pluginInitError","initError","ErrorReporter","PluginManager$1","uploadStatus","pendingPromises","noUpload","handlerSuccess","handlerFailure","resolvePending","uploadBlobInfo","openNotification","markPending","closeNotification_1","markUploaded","removeFailed","percent","pendingUploadBlobInfo","uploadBlobs","blobInfos","isUploaded","isPending","requestAnimationFrame$1","blobUriToBlob","rejectWithError","parseDataUri","uriParts","decodeURIComponent","uriToBlob","Conversions","imageToBlobInfo","dataUri","getAllImages","ImageScanner","cachedPromises","promises","imageInfo","newPromise","rnd","now","uuid","Uuid","BlobCache","mimeToExt","toBlobInfo","removeByUri","UploadStatus","PENDING","UPLOADED","blobUriStatuses","createStatus","resultUri","hasBlobUri","getResultUri","EditorUpload","imageScanner","urlFilters","aliveGuard","cacheInvalidator","replaceString","replaceImageUrl","replacementUrl","replaceUrlInUndoStack","fragments","replaceImageUri","uploadImages","scanForImages","imageInfos","filteredResult","uploadInfo","dataImgFilter","addFilter","resultItem","replaceBlobUris","isBlockElement","isValidTarget","hasBlockParent","shouldRemoveTextNode","addRootBlocks","rootBlockNode","tempNode","rootNodeName","forcedRootBlock","setup$3","ForceBlocks","getStartNode","getEndNode","getFirstChildren","getLastChildren$1","hasAllContentsSelected","moveEndPoint$1","hasAnyRanges","NodeChange","lastPath","isSameElementPath","currentPath","nativeRng","fakeRng","selectionChange","disable_nodechange","VDirection","VK","HOME","getNodeClientRects","toArrayWithNode","findUntil","walkUntil","isAboveFn","isBeflowFn","targetClientRect","line","aboveLineNumber","lineNumber","isLineNumber","upUntil","Up","downUntil","Down","positionsUntil","isBelowFn","getClientRect","isAboveLine","isLine","isContentEditableFalse$7","findNode$1","distanceToRectLeft","distanceToRectRight","isInside","findClosestClientRect","oldClientRect","oldDistance","newDistance","walkUntil$1","findLineNodeRects","targetNodeRect","checkPosFn","lineRects","getFakeCaretTargets","caretInfo","closestCaret","closestNodeRect","contentEditableFalseNodeRects","targetNodeRects","isXYWithinRange","RangePoint","getAbsolutePosition","getBodyPosition","getScrollPosition","getBodyScroll","inlineScroll","iframeScroll","getMousePosition","iframePosition","scrollPosition","calculatePosition","bodyPosition","mousePosition","calc","MousePosition","isContentEditableFalse$8","isContentEditableTrue$3","isDraggable","isValidDropTarget","targetElement","dragElement","cloneElement","cloneElm","createGhost","clonedElm","ghostElm","appendGhostToBody","moveGhost","removeElement","isLeftMouseButtonPressed","hasDraggableElement","applyRelPos","relX","start$1","ceElm","elmPos","relY","ghost","move$1","throttledPlaceCaretAt","placeCaretAt","dragging","targetPos","getRawTarget","targetClone_1","targetClone","removeDragState","bindFakeDragEvents","pageDom","dragStartHandler","dragHandler","dropHandler","dragEndHandler","rootDocument","blockIeDrop","realTarget","DragDropOverrides","setup$4","renderFocusCaret","CefFocus","isContentEditableTrue$4","isContentEditableFalse$9","getContentEditableRoot$1","SelectionOverrides","selectedContentEditableNode","fakeCaret","realSelectionId","isFakeSelectionElement","getRealSelectionElement","setRange","getRange","blockCaretContainer","contentEditableRoot","removeContentEditableSelection","handleTouchSelect","setContentEditableSelection","hasNormalCaretPosition","hasBetterMouseTarget","targetBlock","caretBlock","normalizeShortEndedElementSelection","isRangeInCaretContainer","realSelectionElement","outerText","addCss","contentStyles","rootClass","isWithinCaretContainer","$realSelectionContainer","origTargetClone","isValidPrefixAttrName","trimComments","sanitizedText","isInvalidUri","findEndTagIndex","tokenRegExp","checkBogusAttribute","attrString","SaxParser","fix_self_closing","endRegExp","attrList","textData","isInternalElement","removeInternalElements","fillAttrsMap","isShortEnded","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","processHtml","anyAttributesRequired","selfClosing","attrRegExp","fixSelfClosing","stack","filteredUrlAttrs","scriptUriRegExp","processEndTag","valid","parseAttribute","val3","attrRule","trimRegExp","self_closing_elements","remove_internals","bogusValue","findEndTag","SaxParser$1","tempAttrs","trimContentRegExp","trimInternal","endTagIndex","matchLength","bogusAllRegExp","getTempAttrs","trimExternal","TrimHtml","KEEP","INSERT","vDown","vUp","snake","diag","buildScript","start1","end1","start2","end2","getMiddleSnake","i2","buildSnake","sum","Diff","getOuterHtml","createFragment$1","insertAt","removeAt","applyDiff","read$3","currentFragments","Fragments","undoLevelDocument","lazyTempDocument","implementation","createHTMLDocument","hasIframes","createFragmentedLevel","beforeBookmark","createCompleteLevel","createFromEditor","trimmedFragments","trimmed","applyToEditor","getLevelContent","getCleanLevelContent","hasEqualContent","level1","level2","hasEqualCleanedContent","isEq$4","Levels","UndoManager","isFirstTypedCharacter","locks","isUnlocked","setTyping","typing","addNonTypingUndoLevel","endTyping","beforeChange","modKey","isInsertReplacementText","inputType","isInsertTextDataNull","currentLevel","custom_undo_redo_levels","hasUndo","hasRedo","callback1","callback2","postProcessHooks","filter$2","each$c","addPostProcessHook","isPre","hasPreSibling","pre","joinPre","pre1","pre2","Hooks","MCE_ATTR_RE","each$d","isEq$5","isTableCell$4","isChildOfInlineParent","lastIdx","wrap$2","wrapWithSiblings","matchName$1","isColorFormatAndAnchor","links","find$3","removeNode$1","rootBlockElm","list_block","compareNode","stylesModified","remove_similar","valueOut","findFormatRoot","formatRoot","wrapAndSplit","lastClone","firstClone","formatRootParent","mixed","splitToFormatRoot","isRemoveBookmarkNode","lastContentEditable","removeRngStyle","ceFalseOverride","RemoveFormat","each$e","isElementNode","findElementSibling","mergeSiblingsNodes","tmpSibling","elementUtils","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","processUnderlineAndColor","mergeUnderlineAndColor","mergeBackgroundColorAndFontSize","mergeSubSup","mergeSiblings","merge_siblings","clearChildStyles","clear_child_styles","mergeWithChildren","mergeWithParents","merge_with_parents","MergeFormats","each$f","isElementNode$1","setElementFormat","onformat","styleVal","applyNodeStyle","applyRngStyle","nodeSpecific","wrapElm","currentWrapElm","childCount","getChildCount","getChildElementNode","mergeStyles","curSelNode","ApplyFormat","each$g","setup$5","formatChangeData","currentFormats","matchedFormats","addListeners","formatChangeItems","formatChangeState","FormatChanged","valigntop","verticalAlign","valignmiddle","valignbottom","textAlign","fontsize_class","DefaultFormats","FormatRegistry","unregister","each$h","parsedSelectorToHtml","ancestry","sItem","getRequiredParent","elmRule","wrapInHtml","parentCandidate","parentRequired","ancestorName","siblingElm","selectorToHtml","parseSelector","parseSelectorItem","$0","$3","$4","previewFrag","previewElm","parentFontSize","previewStyles","previewCss","preview_styles","removeVars","numValue","Preview","ToggleFormat","setup$6","FormatShortcuts","Formatter","hasOwnProperty$2","htmlParser","internalName","cleanup","hasChildren","trimTrailingBr","brNode1","brNode2","DomSerializerFilters","impl","oldDoc","shouldFireEvent","DomSerializerPreProcess","removeAttrs","addFontToSpansFilter","addStrikeToSpanFilter","addFilters","LegacyFilter","whiteSpaceRegExp$3","typeLookup","walk$2","Node$1","selfAttrs","selfAttr","cloneAttrs","refNode","paddEmptyNode","brPreferred","padd_empty_with_br","isPaddedWithNbsp","hasOnlyChild","isPadded","isEmpty$2","whitespaceElements","isLineBreakNode","remove_trailing_brs","prevName","whiteSpaceElements","appendRel","addNoOpener","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","makeMap$4","each$i","explode$3","extend$3","DomParser","nodeFilters","attributeFilters","matchedNodes","matchedAttributes","fixInvalidChildren","newParent","childNode","nonSplitableElements","textBlockElements","filterNode","getNodeFilters","getAttributeFilters","isInWhiteSpacePreservedElement","invalidChildren","rootBlockName","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","createNode","removeWhitespaceBefore","textNodeNext","textVal","cloneAndExcludeBlocks","attrFiltersLen","postProcess$1","outArgs","getHtmlFromNode","getInner","parseHtml","serializeNode","htmlSerializer","toHtml","DomSerializer","addRules","setRules","DomSerializer$1","domSerializer","BookmarkManager","BreakType","BookmarkManager$1","isContentEditableFalse$a","isContentEditableTrue$5","getContentEditableRoot$2","ControlSelection","selectedElmGhost","resizeHelper","resizeHandles","selectedHandle","selectedElmX","selectedElmY","startH","resizeStarted","startScrollWidth","startScrollHeight","editableDoc","nw","ne","se","sw","isImage","isEventOnImageOutsideRange","contextMenuSelectImage","getResizeTarget","resizeGhostElement","proportional","resizeHelperX","resizeHelperY","resize_img_proportional","endGhostResize","setSizeProp","showResizeRect","targetWidth","targetHeight","unbindResizeHandleEvents","unSelectabe","updateResizeRect","controlElm","isChildOrEqual","disableGeckoResize","isWithinContentEditableFalse","delayedSelect","throttledUpdateResizeRect","getPos$1","fireScrollIntoViewEvent","alignToTop","scrollEvent","scrollElementIntoView","viewPort","viewPortY","viewPortH","offsetY","scrollTo","scrollRangeIntoView","rngRect","bodyRect","ScrollIntoView","hasCeProperty","findParent$1","findClosestIeRange","createTextRange","moveToElementText","moveToPoint","moveOutOfContentEditableFalse","pointDoc","CaretRangeFromPoint","processRanges","EventProcessRanges","tableModel","cellPosition","fillout","y2","x2","cellExists","skipCellsX","findElementPos","extractRows","sx","sy","ey","subTable","createDomTable","tableElement","modelRowsToDomRows","fromDom$1","toDom","subsection","endElement","SimpleTableModel","findParentListContainer","getFullySelectedListWrappers","listCont","wrap$3","innerElm","directListWrappers","commonAnchorContainer","getWrapElements","wrapElements","listWrappers","allWrappers","emptyFragment","getFragmentFromRange","getParentTable","getTableFragment","selectedTableCells","fullTableModel","sectionedTableModel","getSelectionFragment","read$4","FragmentReader","bin","getHtmlContent","tmpElm","GetSelectionContent","createContextualFragment","pasteHTML","SetSelectionContent","getEndpointElement","real","getStart$2","skipEmptyTextNodes","forwards","orig","getNode$1","endElm","select$1","each$j","isNativeIeSelection","isAttachedToDom","isValidRange","Selection$1","bookmarkManager","selectedRange","explicitRange","selectorChangedData","getEnd$1","compareEndPoints","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","START_TO_START","END_TO_END","ieRange","setNode","getSelectedBlocks$1","anchorRange","focusRange","currentSelectors","matchedSelectors","walk$3","getBreakType","currentPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastDist","newDist","findClosestHorizontalPosition","getPositionsUntilPreviousLine","getPositionsUntilNextLine","isAtFirstLine","isAtLastLine","getPositionsAbove","getPositionsBelow","getFirstLinePositions","getLastLinePositions","isContentEditableFalse$b","getSelectedNode$1","moveToCeFalseHorizontally","rangeIsInContainerBlock","moveToCeFalseVertically","walkerFn","linePositions","nextLinePositions","closestNextLineRect","caretClientRect","dist1","dist2","contentEditableFalseNode","caretPositions","exitPreBlock","getHorizontalRange","newRange","getVerticalRange","moveH","moveV","isCefPosition","moveToLineEndPoint","deflate","getCorners","getYAxisValue","tds","findClosestCorner","corners","newCorner","oldCorner","oldDist","getClosestCell$1","isTargetCorner","corner","getBottomValue","getTopValue","isAbove$1","isBelow$1","getClosestCellAbove","getClosestCellBelow","findClosestPositionInAboveCell","findClosestPositionInBelowCell","moveToRange","hasNextBreak","lineInfo","breakPos","startsWithWrapBreak","startsWithBrBreak","isAtTableCellLine","isAtFirstTableCellLine","isAtLastTableCellLine","isCaretAtStartOrEndOfTable","navigateHorizontally","getClosestAbovePosition","getClosestBelowPosition","getTable","renderBlock","navigateVertically","moveH$1","moveV$1","rangeBefore","insertElement","insertBr","insertBlock$1","insertEmptyLine","getClosestTargetBlock","isAtFirstOrLastLine","moveCaretToNewEmptyLine","rootBlock","rootBlockAttrs","moveV$2","matchesEvent","match$1","MatchKeys","executeKeydownOverride","setup$7","ArrowKeys","executeKeydownOverride$1","executeKeyupOverride","setup$8","DeleteBackspaceKeys","firstNonWhiteSpaceNodeSibling","moveToCaretPosition","tempElm","getEditableRoot","editableRoot","getParentBlock$2","getParentBlockName","isListItemParentBlock","NewLineUtils","hasFirstChild","hasParent$1","isListBlock","isNestedList","getContainerBlock","containerBlockParent","isFirstOrLastLi","createNewBlock","newBlockName","InsertLi","trimZwsp","isEmptyAnchor","isTableCell$5","emptyBlock","containerAndSiblingName","canSplitBlock","trimInlineElementsOnLeftSideOfBlock","firstChilds","normalizeZwspOffset","includeZwspInRange","trimLeadingLineBreaks","getEditableRoot$1","applyAttributes","forcedRootBlockAttrs","attrStyles","currentStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","setForcedBlockAttrs","wrapSelfAndSiblingsInDefaultBlock","addBrToBlockIfNeeded","insert$2","parentBlockName","clonedNode","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","InsertBlock","shouldInsertBr","shouldBlockNewLine","ContextSelectors","newLineAction","shouldBlockNewLine$1","isBrMode","requiredState","brMode","inListBlock","inPreBlock","inSummaryBlock","shouldPutBrInPre$1","inBrContext","canInsertIntoEditableRoot","rootEditable","match$2","predicates","getAction$1","NewLineAction","insert$3","InsertNewLine","endTypingLevel","handleEnterKeyEvent","setup$9","EnterKey","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","navigateIgnoreEmptyTextNodes","getClosestBlock","isAtBeforeAfterBlockBoundary","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isInMiddleOfText","getClosestBlock$1","hasSpaceBefore","hasSpaceAfter","isPreValue","isInPre","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","needsToHaveNbsp","needsToBeNbspLeft","needsToBeNbspRight","afterPos","needsToBeNbsp","isNbspAt","hasNbsp","normalizeNbspMiddle","normalizeNbspAtStart","normalizeNbspInMiddleOfTextNode","newText","normalizeNbspAtEnd","normalizeNbsps","normalizeNbspsInEditor","locationToCaretPosition","insertInlineBoundarySpaceOrNbsp","checkPos","setSelection$1","insertSpaceOrNbspAtSelection","executeKeydownOverride$2","setup$a","SpaceKey","findBlockCaretContainer","removeIeControlRect","handleBlockContainer","setup$b","CaretContainerInput","browser$4","setupIeInput","keypressThrotter","setup$c","isComposing","executeKeydownOverride$3","setup$d","HomeEndKeys","setup$e","KeyboardOverrides","isGecko","isWebKit","mceInternalDataType","setMceInternalContent","selectionHtml","internalContent","getMceInternalContent","insertClipboardContents","emptyEditorWhenDeleting","serializeRng","allContentsSelected","allRng","allSelection","selectAll","inputMethodFocus","removeHrOnBackspace","selectControlElements","removeStylesWhenDeletingAcrossBlockElements","getAttributeApplyFunction","setAttributeNode","isSelectionAcrossElements","disableBackspaceIntoATable","removeBlockQuoteOnBackSpace","setGeckoEditingOptions","setOpts","addBrAfterLastLinks","fixLinks","setDefaultBlockType","showBrokenImageIcon","restoreFocusOnKeyDown","bodyHeight","blockCmdArrowNavigation","disableAutoUrlDetect","tapLinksAndImages","blockFormSubmitInsideEditor","removeAppleInterchangeBrs","ieInternalDragAndDrop","isTextBlockNode","normalizeSelection$1","setup$f","preventSummaryToggle","filterDetails","setup$g","appendStyle","createParser","autoFocus","auto_focus","destroyed","initEditor","getStyleSheetLoader","initContentBody","skipWrite","contentCssText","orgVisibility","iframeHTML","content_document","content_window","bodyElement","hex_colors","force_hex_style_colors","class_filter","annotator","_nodeChangeDispatcher","browser_spellcheck","gecko_spellcheck","nowrap","content_style","InitContentBody","relaxDomain","domain","hostname","bodyUuid","domainRelaxUrl","normalizeHeight","normalizedHeight","createIframeElement","customAttrs","frameBorder","allowTransparency","createIframe","isDomainRelaxed","contentAreaContainer","init$1","boxInfo","orgDisplay","InitIframe","DOM$4","initPlugin","initializedPlugins","pluginInstance","trimLegacyPrefix","initPlugins","initTheme","renderFromLoadedTheme","min_height","iframeHeight","renderFromThemeFunc","createThemeFalseResult","renderThemeFalseIframe","renderThemeFalse","renderThemeUi","init$2","rtl_ui","i18n","aria_label","content_css","Init","DOM$5","hasSkipLoadPrefix","loadLanguage","scriptLoader","language_url","loadTheme","themeUrl","theme_url","loadPlugins","formElement","hasHiddenInput","formEventDelegate","_mceOldSubmit","triggerSave","encoding","_beforeUnload","set_dirty","add$4","each$k","trim$4","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","URI","baseUri","base_uri","isProtocolRelative","toAbsPath","part","userInfo","setPath","toRelative","tu","uu","toRelPath","noHost","isSameOrigin","defaultPort","breakPoint","outPath","nb","noProtoHost","loc","defaultFormat","trimEmptyContents","emptyRegExp","getContentFromBody","getContent$1","findMatchingNodes","nodeMatches","attrMatches","filter$3","defaultFormat$1","isTreeNode","setEditorHtml","setContentString","padd","setContentTree","setContent$1","DOM$6","restoreOriginalStyles","safeDestroy","clearDomReferences","restoreForm","is_removing","automatic","DOM$7","extend$4","each$l","resolve$4","ie$2","Editor","documentBaseURL","baseURI","language_load","loadedCSS","editorCommands","cache_suffix","override_viewport","callbackLookup","lang_1","i18n_1","addSidebar","focusedEditor","setProgressState","isNotDirty","oldState","urlconverter_callback","visual_table_class","visual_anchor_class","documentFocusInHandler","beforeUnloadDelegate","EditorManager","isEditorUIElement","FocusManager","isManualNodeChange","registerPageMouseUp","throttledStore","mouseUpPage","registerFocusOut","registerMouseUp","registerEditorEvents","SelectionRestore","DOM$8","isEditorUIElement$1","isUIElement","customSelector","custom_ui_selector","getActiveElement","blurredEditor","unregisterDocumentEvents","setup$h","FocusController","DOM$9","explode$4","each$m","extend$5","instanceCounter","boundGlobalEvents","legacyEditors","isValidLegacyKey","globalEventDelegate","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","purgeDestroyedEditor","releaseDate","preInit","tinyMCEPreInit","srcScript","currentScript","base_url","pluginBaseUrls","plugin_base_urls","invalidInlineTargets","isInvalidInlineTarget","findTargets","forms","editor_deselector","editor_selector","provideResults","initEditors","initCount","createEditor","existingEditor","addI18n","EditorManager$1","RangeUtils","normalizedRng","compareRanges","extendClass","initializing","RangeUtils$1","round$2","constrainRect","x1","y1","clamp$1","fixedSize","underflowX1","underflowY1","overflowX2","overflowY2","cx2","cy2","fromClientRect","typeClass","lctype","controlType","ControlType","each$n","extend$6","Class","member","mixins","mixin","dummy","createMethod","name_1","Methods","fieldName","min$1","max$1","round$3","Color","rgb2hsv","minRGB","maxRGB","hsvToRgb","saturation","chroma","quote","JSON$1","JSONP","XHR","ready","success_scope","error_scope","overrideMimeType","content_type","crossDomain","requestheaders","extend$7","JSONRequest","sendRPC","ecb","scb","method","localStorage","storage","defineProperty","configurable","enumerable","LocalStorage","publicApi","geom","EventDispatcher","Serializer","isMac","Tinymce","exportToModuleLoaders","exportToWindowGlobal","tinyMCE","getLanguage","defaultLanguage","getRpcUrl","getSpellcheckerCallback","getSpellcheckerWordcharPattern","defaultPattern","fireSpellcheckStart","fireSpellcheckEnd","suggestionsMenu","DomTextMatcher","createMatch","stencil","unwrapElement","getWrappersByIndex","wrappers","dataIndex","filteredMatches","matchFromElement","elementFromMatch","rangeFromMatch","getTextMatcher","textMatcherState","textMatcher","defaultSpellcheckCallback","currentLanguageState","doneCallback","postData","sendRpcCall","successCallback","userSpellcheckCallback","spellCheckCallback","spellchecker","startedState","lastSuggestionsState","markErrors","checkIfFinished","addToDictionary","word","ignoreWord","suggestions","hasDictionarySupport","words","dictionary","getWordCharPattern","languageValues","languageValue","selectedLanguage","getItems","langPair","languageMenuItems","startSpellchecking","buttonArgs","showSuggestions","suggestion","onautohide","SuggestionsMenu","regExps","aletter","midnumlet","midletter","midnum","lf","newline","katakana","extendnumlet","characterIndices","ALETTER","MIDNUMLET","MIDLETTER","MIDNUM","NUMERIC","CR","LF","NEWLINE","EXTEND","FORMAT","KATAKANA","EXTENDNUMLET","AT","OTHER","SETS","EMPTY_STRING","PUNCTUATION","WHITESPACE","UnicodeData","SETS$1","setsLength","memoize","classify","memoized","StringMapper","isWordBoundary","prevType","nextNextType","nextType","WordBoundary","EMPTY_STRING$1","WHITESPACE$1","PUNCTUATION$1","isProtocol","findWordEnd","extractUrl","peakedWord","doGetWords","includePunctuation","includeWhitespace","getWords","WordGetter","treeWalker","getCount","WordCount","wordsToText","debouncedUpdate","Statusbar","Content","fullscreenState","fireFullscreenStateChanged","getScrollPos","vp","setScrollPos","toggleFullscreen","editorContainerStyle","iframeStyle","fullscreenInfo","removeResize","iframeWidth","containerWidth","containerHeight","scrollPos","removeHandler","newFullScreenInfo","IPFS","provider","setProvider","noopPromise","createBoundary","boundary","pinning","requestBase","sendAsync","opts","request","takeHash","Hash","jsonParse","jsonError","pinningURI","payload","isBuffer","addJSON","jsonData","stat","ipfsHash","catJSON","getTabFocusElements","getTabFocus","tabCancel","tabHandler","canSelectRecursive","canSelect","toIndexedObject","Constructor","fin","getTocClass","getTocHeader","getTocDepth","guid","Guid","tocId","hasHeaders","readHeaders","tocClass","headerTag","getMinLevel","minLevel","generateTitle","openTag","closeTag","generateTocHtml","generateTocContentHtml","ii","nextLevel","prevLevel","isEmptyOrOffscren","insertToc","$tocElm","updateToc","Toc","isToc"],"mappings":"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CACE,MACA,mBAEF,CACE,MACA,iBAEF,CACE,OACA,kBAEF,CACE,MACA,uBAEF,CACE,MACA,mBAEF,CACE,MACA,mBAEF,CACE,MACA,qBAEF,CACE,MACA,wBAEF,CACE,MACA,qBAEF,CACE,MACA,2BAEF,CACE,MACA,qBAEF,CACE,OACA,YAEF,CACE,OACA,kBAEF,CACE,OACA,YAEF,CACE,OACA,eAEF,CACE,OACA,cAEF,CACE,OACA,0BAEF,CACE,OACA,mBAEF,CACE,OACA,gBAEF,CACE,OACA,gBAEF,CACE,OACA,cAEF,CACE,OACA,qBAEF,CACE,OACA,sBAEF,CACE,OACA,iBAEF,CACE,OACA,eAEF,CACE,OACA,cAEF,CACE,MACA,YAEF,CACE,OACA,gBAEF,CACE,OACA,SAEF,CACE,OACA,wBAEF,CACE,OACA,WAEF,CACE,OACA,gBAEF,CACE,OACA,YAEF,CACE,OACA,uBAEF,CACE,OACA,qBAEF,CACE,OACA,mBAEF,CACE,OACA,SAEF,CACE,MACA,gBAEF,CACE,MACA,WAEF,CACE,MACA,8BAEF,CACE,MACA,+BAEF,CACE,OACA,UAEF,CACE,OACA,iBAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,kBAEF,CACE,MACA,cAEF,CACE,MACA,eAEF,CACE,MACA,eAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,OAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,aAEF,CACE,MACA,cAEF,CACE,MACA,eAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,SAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,kBAEF,CACE,MACA,cAEF,CACE,MACA,eAEF,CACE,MACA,eAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,OAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,WAEF,CACE,MACA,YAEF,CACE,MACA,eAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,SAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,SAEF,CACE,MACA,QAEF,CACE,MACA,SAEF,CACE,MACA,SAEF,CACE,MACA,WAEF,CACE,MACA,QAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,MACA,QAEF,CACE,MACA,SAEF,CACE,MACA,UAEF,CACE,MACA,MAEF,CACE,MACA,MAEF,CACE,MACA,MAEF,CACE,MACA,WAEF,CACE,MACA,MAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,MACA,OAEF,CACE,MACA,WAEF,CACE,MACA,OAEF,CACE,MACA,OAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,MACA,SAEF,CACE,MACA,QAEF,CACE,MACA,SAEF,CACE,MACA,SAEF,CACE,MACA,WAEF,CACE,MACA,QAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,MACA,QAEF,CACE,MACA,SAEF,CACE,MACA,UAEF,CACE,MACA,MAEF,CACE,MACA,MAEF,CACE,MACA,MAEF,CACE,MACA,WAEF,CACE,MACA,MAEF,CACE,MACA,OAEF,CACE,MACA,eAEF,CACE,MACA,SAEF,CACE,MACA,OAEF,CACE,MACA,WAEF,CACE,MACA,OAEF,CACE,MACA,OAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,OACA,eAEF,CACE,MACA,aAEF,CACE,OACA,oBAEF,CACE,MACA,yBAEF,CACE,OACA,iBAEF,CACE,OACA,kBAEF,CACE,OACA,mBAEF,CACE,OACA,iBAEF,CACE,OACA,oBAEF,CACE,OACA,mBAEF,CACE,OACA,oBAEF,CACE,OACA,mBAEF,CACE,OACA,0BAEF,CACE,OACA,wBAEF,CACE,OACA,2BAEF,CACE,OACA,0BAEF,CACE,OACA,2BAEF,CACE,OACA,aAEF,CACE,OACA,aAEF,CACE,OACA,eAEF,CACE,OACA,mBAEF,CACE,OACA,yBAEF,CACE,OACA,2BAEF,CACE,OACA,gBAEF,CACE,OACA,iBAEF,CACE,OACA,iBAEF,CACE,OACA,gBAEF,CACE,OACA,gBAEF,CACE,OACA,iBAEF,CACE,OACA,cAEF,CACE,OACA,eAEF,CACE,OACA,+BAEF,CACE,OACA,gCAEF,CACE,OACA,WAEF,CACE,OACA,oBAEF,CACE,OACA,mBAEF,CACE,OACA,oBAEF,CACE,OACA,sBAEF,CACE,OACA,YAEF,CACE,OACA,YAEF,CACE,OACA,cAEF,CACE,OACA,yBAEF,CACE,OACA,qBAEF,CACE,OACA,sBAEF,CACE,OACA,wBAIFC,EAAgB,SAAUL,GAC5B,OAAOzV,EAAS+V,KAAKN,GAAS,SAAUO,GACtC,OAAOJ,EAAQI,IAAyB,IAAhBA,EAAKxU,WAG7ByU,EAAsB,SAAUC,GAClC,OAAIN,EAAQM,GACH,GAAGzM,OAAOqM,EAAcI,IAEL,oBAAjBA,EACFA,IAEF,IAELC,EAAgB,SAAUjW,EAAQuV,GACpC,IAAIW,EAAc/V,EAASmV,WAAWtV,GAClCkW,IACFX,EAAUQ,EAAoBG,IAEhC,IAAIC,EAAoBhW,EAASqV,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DC,EAAO,CACT,CACE70B,IAAK,UACLtrB,KAAM,iBAER,CACEsrB,IAAK,SACLtrB,KAAM,UAER,CACEsrB,IAAK,WACLtrB,KAAM,YAER,CACEsrB,IAAK,aACLtrB,KAAM,cAER,CACEsrB,IAAK,WACLtrB,KAAM,YAER,CACEsrB,IAAK,SACLtrB,KAAM,UAER,CACEsrB,IAAK,UACLtrB,KAAM,iBAER,CACEsrB,IAAK,OACLtrB,KAAM,QAER,CACEsrB,IAAK,aACLtrB,KAAM,eAER,CACEsrB,IAAK,cACLtrB,KAAM,gBAER,CACEsrB,IAAK,WACLtrB,KAAM,qBAER,CACEsrB,IAAK,cACLtrB,KAAM,gBAER,CACEsrB,IAAK,iBACLtrB,KAAM,kBAER,CACEsrB,IAAK,YACLtrB,KAAM,aAER,CACEsrB,IAAK,WACLtrB,KAAM,aAER,CACEsrB,IAAK,aACLtrB,KAAM,eAER,CACEsrB,IAAK,OACLtrB,KAAM,QAER,CACEsrB,IAAK,KACLtrB,KAAM,mBAER,CACEsrB,IAAK,QACLtrB,KAAM,SAER,CACEsrB,IAAK,aACLtrB,KAAM,eAER,CACEsrB,IAAK,YACLtrB,KAAM,cAER,CACEsrB,IAAK,iBACLtrB,KAAM,oBAER,CACEsrB,IAAK,eACLtrB,KAAM,iBAER,CACEsrB,IAAK,OACLtrB,KAAM,QAER,CACEsrB,IAAK,QACLtrB,KAAM,SAER,CACEsrB,IAAK,QACLtrB,KAAM,SAER,CACEsrB,IAAK,cACLtrB,KAAM,eAER,CACEsrB,IAAK,cACLtrB,KAAM,eAER,CACEsrB,IAAK,YACLtrB,KAAM,cAER,CACEsrB,IAAK,QACLtrB,KAAM,SAER,CACEsrB,IAAK,UACLtrB,KAAM,WAER,CACEsrB,IAAK,QACLtrB,KAAM,SAER,CACEsrB,IAAK,OACLtrB,KAAM,QAER,CACEsrB,IAAK,gBACLtrB,KAAM,sBAER,CACEsrB,IAAK,eACLtrB,KAAM,iBAER,CACEsrB,IAAK,WACLtrB,KAAM,aAER,CACEsrB,IAAK,QACLtrB,KAAM,SAER,CACEsrB,IAAK,WACLtrB,KAAM,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BnrJ,EAAMiqJ,GAC9B,OAAOiB,EAAkBlrJ,EAAMiqJ,GAAS/2G,MAAK,SAAUk4G,GACrD,OAAOA,EAAQniJ,MAAM,KAAK,MAG9B,SAASoiJ,IACP,OAAOR,EAAU33G,KAAK1nB,GAExB,MAAO,CACLu/H,QAASA,EACTZ,OAAQA,EACRC,UAAWA,EACXY,SAAUA,EACVC,eAAgBA,EAChBC,kBAAmBA,EACnBC,iBAAkBA,EAClBE,SAAUA,GAGd,SAASC,EAAS5oD,GAChB,OAAO8nD,EAAc9nD,GAAMxvD,MAAK,SAAU+uD,GACxC,OAAOkoC,EAASmgB,EAAa5nD,GAAOA,EAAMT,MAG9C,SAASspD,EAAW9D,EAAQznJ,GAC1B,OAAOgqJ,EAAavC,EAAQznJ,GAAMkzC,MAAK,SAAUwvD,GAC/C,OAAOynC,EAASvtC,EAAQ7+F,QAAQ0pJ,GAAS/kD,EAAM+kD,EAAO2C,gBAI1D,SAASr2F,EAAM9zD,EAAOuI,EAAKi1C,GACzB,IAAI+tG,EAA+B,kBAAVvrJ,EAAqB09D,WAAW19D,GAASA,EAMlE,OALIurJ,EAAc/tG,EAChB+tG,EAAc/tG,EACL+tG,EAAchjJ,IACvBgjJ,EAAchjJ,GAETgjJ,EAET,SAASn/C,IACP,MAAO,CACL,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GAGJ,IAAIo/C,EAAc,CAChB,EACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,EACA,KACA,KACA,KACA,IACA,KA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,EACrB,GAAIprB,EAAM,CAER,GADAw1B,EAAUx1B,EAAKysL,GACXtzF,GAAY3jE,IAAY2jE,EAC1B,OAEF,GAAI3jE,EAAS,CACX,IAAKnG,EACH,IAAKjE,EAAQoK,EAAQg7J,GAAYplK,EAAOA,EAAQA,EAAMolK,GACpD,IAAKplK,EAAMolK,GACT,OAAOplK,EAIb,OAAOoK,EAGT,GADAj1B,EAASP,EAAKM,WACVC,GAAUA,IAAW44F,EACvB,OAAO54F,IAIb6F,KAAKkf,QAAU,WACb,OAAOtlB,GAEToG,KAAKixB,KAAO,SAAUhI,GAEpB,OADArvB,EAAOuwL,EAAYvwL,EAAM,aAAc,cAAeqvB,GAC/CrvB,GAEToG,KAAKm1B,KAAO,SAAUlM,GAEpB,OADArvB,EAAOuwL,EAAYvwL,EAAM,YAAa,kBAAmBqvB,GAClDrvB,GAEToG,KAAKsqL,MAAQ,SAAUrhK,GAErB,OADArvB,EAAOywL,EAAiBzwL,EAAM,YAAa,kBAAmBqvB,GACvDrvB,GAIX,IAwSI2wL,GAAeC,GAAcC,GAxS7BvoG,GAAS,CACX,UACA,QACA,UACA,MACA,KACA,aACA,SACA,OACA,WACA,SACA,SACA,OACA,OACA,MACA,UACA,UACA,OACA,IACA,KACA,WACA,KACA,SACA,UACA,SACA,aACA,KACA,KACA,KACA,KACA,KACA,KACA,UACA,MACA,MACA,YACA,OACA,MACA,KACA,KACA,KACA,KACA,QACA,QACA,QACA,QACA,KACA,KACA,KACA,WAEEwoG,GAAQ,CACV,OACA,OACA,WACA,KACA,MACA,QACA,KACA,MACA,QACA,UACA,OACA,OACA,QACA,QACA,SACA,MACA,SAEEC,GAAa,CACf,KACA,MAEEC,GAAgB,CAClB,QACA,QACA,SAEEx8J,GAAa,CACf,KACA,KACA,KACA,KACA,KACA,KACA,IACA,MACA,UACA,MACA,OACA,aACA,SACA,MACA,WACA,SACA,SACA,UACA,UACA,SACA,QACA,MACA,UAEEy8J,GAAW,CACb,KACA,KACA,KACA,KACA,KACA,MAEEC,GAAY,CACd,KACA,KACA,MAEE1vK,GA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","file":"js/chunk-5f691382.ee1b03bf.js","sourcesContent":["// Exports the \"template\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/template')\n//   ES2015:\n//     import 'tinymce/plugins/template'\nrequire('./plugin.js');","// Exports the \"table\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/table')\n//   ES2015:\n//     import 'tinymce/plugins/table'\nrequire('./plugin.js');","// Exports the \"codesample\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/codesample')\n//   ES2015:\n//     import 'tinymce/plugins/codesample'\nrequire('./plugin.js');","(function () {\nvar pagebreak = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getSeparatorHtml = function (editor) {\n      return editor.getParam('pagebreak_separator', '<!-- pagebreak -->');\n    };\n    var shouldSplitBlock = function (editor) {\n      return editor.getParam('pagebreak_split_block', false);\n    };\n    var Settings = {\n      getSeparatorHtml: getSeparatorHtml,\n      shouldSplitBlock: shouldSplitBlock\n    };\n\n    var getPageBreakClass = function () {\n      return 'mce-pagebreak';\n    };\n    var getPlaceholderHtml = function () {\n      return '<img src=\"' + global$1.transparentSrc + '\" class=\"' + getPageBreakClass() + '\" data-mce-resize=\"false\" data-mce-placeholder />';\n    };\n    var setup = function (editor) {\n      var separatorHtml = Settings.getSeparatorHtml(editor);\n      var pageBreakSeparatorRegExp = new RegExp(separatorHtml.replace(/[\\?\\.\\*\\[\\]\\(\\)\\{\\}\\+\\^\\$\\:]/g, function (a) {\n        return '\\\\' + a;\n      }), 'gi');\n      editor.on('BeforeSetContent', function (e) {\n        e.content = e.content.replace(pageBreakSeparatorRegExp, getPlaceholderHtml());\n      });\n      editor.on('PreInit', function () {\n        editor.serializer.addNodeFilter('img', function (nodes) {\n          var i = nodes.length, node, className;\n          while (i--) {\n            node = nodes[i];\n            className = node.attr('class');\n            if (className && className.indexOf('mce-pagebreak') !== -1) {\n              var parentNode = node.parent;\n              if (editor.schema.getBlockElements()[parentNode.name] && Settings.shouldSplitBlock(editor)) {\n                parentNode.type = 3;\n                parentNode.value = separatorHtml;\n                parentNode.raw = true;\n                node.remove();\n                continue;\n              }\n              node.type = 3;\n              node.value = separatorHtml;\n              node.raw = true;\n            }\n          }\n        });\n      });\n    };\n    var FilterContent = {\n      setup: setup,\n      getPlaceholderHtml: getPlaceholderHtml,\n      getPageBreakClass: getPageBreakClass\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mcePageBreak', function () {\n        if (editor.settings.pagebreak_split_block) {\n          editor.insertContent('<p>' + FilterContent.getPlaceholderHtml() + '</p>');\n        } else {\n          editor.insertContent(FilterContent.getPlaceholderHtml());\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var setup$1 = function (editor) {\n      editor.on('ResolveName', function (e) {\n        if (e.target.nodeName === 'IMG' && editor.dom.hasClass(e.target, FilterContent.getPageBreakClass())) {\n          e.name = 'pagebreak';\n        }\n      });\n    };\n    var ResolveName = { setup: setup$1 };\n\n    var register$1 = function (editor) {\n      editor.addButton('pagebreak', {\n        title: 'Page break',\n        cmd: 'mcePageBreak'\n      });\n      editor.addMenuItem('pagebreak', {\n        text: 'Page break',\n        icon: 'pagebreak',\n        cmd: 'mcePageBreak',\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('pagebreak', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      FilterContent.setup(editor);\n      ResolveName.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"advlist\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/advlist')\n//   ES2015:\n//     import 'tinymce/plugins/advlist'\nrequire('./plugin.js');","(function () {\nvar textcolor = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return color;\n    };\n    var mapColors = function (colorMap) {\n      var i;\n      var colors = [];\n      for (i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          color: '#' + colorMap[i]\n        });\n      }\n      return colors;\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var TextColor = {\n      getCurrentColor: getCurrentColor,\n      mapColors: mapColors,\n      applyFormat: applyFormat,\n      removeFormat: removeFormat\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        TextColor.applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        TextColor.removeFormat(editor, format);\n      });\n    };\n    var Commands = { register: register };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var defaultColorMap = [\n      '000000',\n      'Black',\n      '993300',\n      'Burnt orange',\n      '333300',\n      'Dark olive',\n      '003300',\n      'Dark green',\n      '003366',\n      'Dark azure',\n      '000080',\n      'Navy Blue',\n      '333399',\n      'Indigo',\n      '333333',\n      'Very dark gray',\n      '800000',\n      'Maroon',\n      'FF6600',\n      'Orange',\n      '808000',\n      'Olive',\n      '008000',\n      'Green',\n      '008080',\n      'Teal',\n      '0000FF',\n      'Blue',\n      '666699',\n      'Grayish blue',\n      '808080',\n      'Gray',\n      'FF0000',\n      'Red',\n      'FF9900',\n      'Amber',\n      '99CC00',\n      'Yellow green',\n      '339966',\n      'Sea green',\n      '33CCCC',\n      'Turquoise',\n      '3366FF',\n      'Royal blue',\n      '800080',\n      'Purple',\n      '999999',\n      'Medium gray',\n      'FF00FF',\n      'Magenta',\n      'FFCC00',\n      'Gold',\n      'FFFF00',\n      'Yellow',\n      '00FF00',\n      'Lime',\n      '00FFFF',\n      'Aqua',\n      '00CCFF',\n      'Sky blue',\n      '993366',\n      'Red violet',\n      'FFFFFF',\n      'White',\n      'FF99CC',\n      'Pink',\n      'FFCC99',\n      'Peach',\n      'FFFF99',\n      'Light yellow',\n      'CCFFCC',\n      'Pale green',\n      'CCFFFF',\n      'Pale cyan',\n      '99CCFF',\n      'Light sky blue',\n      'CC99FF',\n      'Plum'\n    ];\n    var getTextColorMap = function (editor) {\n      return editor.getParam('textcolor_map', defaultColorMap);\n    };\n    var getForeColorMap = function (editor) {\n      return editor.getParam('forecolor_map', getTextColorMap(editor));\n    };\n    var getBackColorMap = function (editor) {\n      return editor.getParam('backcolor_map', getTextColorMap(editor));\n    };\n    var getTextColorRows = function (editor) {\n      return editor.getParam('textcolor_rows', 5);\n    };\n    var getTextColorCols = function (editor) {\n      return editor.getParam('textcolor_cols', 8);\n    };\n    var getForeColorRows = function (editor) {\n      return editor.getParam('forecolor_rows', getTextColorRows(editor));\n    };\n    var getBackColorRows = function (editor) {\n      return editor.getParam('backcolor_rows', getTextColorRows(editor));\n    };\n    var getForeColorCols = function (editor) {\n      return editor.getParam('forecolor_cols', getTextColorCols(editor));\n    };\n    var getBackColorCols = function (editor) {\n      return editor.getParam('backcolor_cols', getTextColorCols(editor));\n    };\n    var getColorPickerCallback = function (editor) {\n      return editor.getParam('color_picker_callback', null);\n    };\n    var hasColorPicker = function (editor) {\n      return typeof getColorPickerCallback(editor) === 'function';\n    };\n    var Settings = {\n      getForeColorMap: getForeColorMap,\n      getBackColorMap: getBackColorMap,\n      getForeColorRows: getForeColorRows,\n      getBackColorRows: getBackColorRows,\n      getForeColorCols: getForeColorCols,\n      getBackColorCols: getBackColorCols,\n      getColorPickerCallback: getColorPickerCallback,\n      hasColorPicker: hasColorPicker\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var getHtml = function (cols, rows, colorMap, hasColorPicker) {\n      var colors, color, html, last, x, y, i, count = 0;\n      var id = global$1.DOM.uniqueId('mcearia');\n      var getColorCellHtml = function (color, title) {\n        var isNoColor = color === 'transparent';\n        return '<td class=\"mce-grid-cell' + (isNoColor ? ' mce-colorbtn-trans' : '') + '\">' + '<div id=\"' + id + '-' + count++ + '\"' + ' data-mce-color=\"' + (color ? color : '') + '\"' + ' role=\"option\"' + ' tabIndex=\"-1\"' + ' style=\"' + (color ? 'background-color: ' + color : '') + '\"' + ' title=\"' + global$3.translate(title) + '\">' + (isNoColor ? '&#215;' : '') + '</div>' + '</td>';\n      };\n      colors = TextColor.mapColors(colorMap);\n      colors.push({\n        text: global$3.translate('No color'),\n        color: 'transparent'\n      });\n      html = '<table class=\"mce-grid mce-grid-border mce-colorbutton-grid\" role=\"list\" cellspacing=\"0\"><tbody>';\n      last = colors.length - 1;\n      for (y = 0; y < rows; y++) {\n        html += '<tr>';\n        for (x = 0; x < cols; x++) {\n          i = y * cols + x;\n          if (i > last) {\n            html += '<td></td>';\n          } else {\n            color = colors[i];\n            html += getColorCellHtml(color.color, color.text);\n          }\n        }\n        html += '</tr>';\n      }\n      if (hasColorPicker) {\n        html += '<tr>' + '<td colspan=\"' + cols + '\" class=\"mce-custom-color-btn\">' + '<div id=\"' + id + '-c\" class=\"mce-widget mce-btn mce-btn-small mce-btn-flat\" ' + 'role=\"button\" tabindex=\"-1\" aria-labelledby=\"' + id + '-c\" style=\"width: 100%\">' + '<button type=\"button\" role=\"presentation\" tabindex=\"-1\">' + global$3.translate('Custom...') + '</button>' + '</div>' + '</td>' + '</tr>';\n        html += '<tr>';\n        for (x = 0; x < cols; x++) {\n          html += getColorCellHtml('', 'Custom color');\n        }\n        html += '</tr>';\n      }\n      html += '</tbody></table>';\n      return html;\n    };\n    var ColorPickerHtml = { getHtml: getHtml };\n\n    var setDivColor = function setDivColor(div, value) {\n      div.style.background = value;\n      div.setAttribute('data-mce-color', value);\n    };\n    var onButtonClick = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        if (ctrl._color) {\n          editor.execCommand('mceApplyTextcolor', ctrl.settings.format, ctrl._color);\n        } else {\n          editor.execCommand('mceRemoveTextcolor', ctrl.settings.format);\n        }\n      };\n    };\n    var onPanelClick = function (editor, cols) {\n      return function (e) {\n        var buttonCtrl = this.parent();\n        var value;\n        var currentColor = TextColor.getCurrentColor(editor, buttonCtrl.settings.format);\n        var selectColor = function (value) {\n          editor.execCommand('mceApplyTextcolor', buttonCtrl.settings.format, value);\n          buttonCtrl.hidePanel();\n          buttonCtrl.color(value);\n        };\n        var resetColor = function () {\n          editor.execCommand('mceRemoveTextcolor', buttonCtrl.settings.format);\n          buttonCtrl.hidePanel();\n          buttonCtrl.resetColor();\n        };\n        if (global$1.DOM.getParent(e.target, '.mce-custom-color-btn')) {\n          buttonCtrl.hidePanel();\n          var colorPickerCallback = Settings.getColorPickerCallback(editor);\n          colorPickerCallback.call(editor, function (value) {\n            var tableElm = buttonCtrl.panel.getEl().getElementsByTagName('table')[0];\n            var customColorCells, div, i;\n            customColorCells = global$2.map(tableElm.rows[tableElm.rows.length - 1].childNodes, function (elm) {\n              return elm.firstChild;\n            });\n            for (i = 0; i < customColorCells.length; i++) {\n              div = customColorCells[i];\n              if (!div.getAttribute('data-mce-color')) {\n                break;\n              }\n            }\n            if (i === cols) {\n              for (i = 0; i < cols - 1; i++) {\n                setDivColor(customColorCells[i], customColorCells[i + 1].getAttribute('data-mce-color'));\n              }\n            }\n            setDivColor(div, value);\n            selectColor(value);\n          }, currentColor);\n        }\n        value = e.target.getAttribute('data-mce-color');\n        if (value) {\n          if (this.lastId) {\n            global$1.DOM.get(this.lastId).setAttribute('aria-selected', 'false');\n          }\n          e.target.setAttribute('aria-selected', true);\n          this.lastId = e.target.id;\n          if (value === 'transparent') {\n            resetColor();\n          } else {\n            selectColor(value);\n          }\n        } else if (value !== null) {\n          buttonCtrl.hidePanel();\n        }\n      };\n    };\n    var renderColorPicker = function (editor, foreColor) {\n      return function () {\n        var cols = foreColor ? Settings.getForeColorCols(editor) : Settings.getBackColorCols(editor);\n        var rows = foreColor ? Settings.getForeColorRows(editor) : Settings.getBackColorRows(editor);\n        var colorMap = foreColor ? Settings.getForeColorMap(editor) : Settings.getBackColorMap(editor);\n        var hasColorPicker = Settings.hasColorPicker(editor);\n        return ColorPickerHtml.getHtml(cols, rows, colorMap, hasColorPicker);\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addButton('forecolor', {\n        type: 'colorbutton',\n        tooltip: 'Text color',\n        format: 'forecolor',\n        panel: {\n          role: 'application',\n          ariaRemember: true,\n          html: renderColorPicker(editor, true),\n          onclick: onPanelClick(editor, Settings.getForeColorCols(editor))\n        },\n        onclick: onButtonClick(editor)\n      });\n      editor.addButton('backcolor', {\n        type: 'colorbutton',\n        tooltip: 'Background color',\n        format: 'hilitecolor',\n        panel: {\n          role: 'application',\n          ariaRemember: true,\n          html: renderColorPicker(editor, false),\n          onclick: onPanelClick(editor, Settings.getBackColorCols(editor))\n        },\n        onclick: onButtonClick(editor)\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('textcolor', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"preview\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/preview')\n//   ES2015:\n//     import 'tinymce/plugins/preview'\nrequire('./plugin.js');","// Exports the \"help\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/help')\n//   ES2015:\n//     import 'tinymce/plugins/help'\nrequire('./plugin.js');","// Exports the \"visualblocks\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/visualblocks')\n//   ES2015:\n//     import 'tinymce/plugins/visualblocks'\nrequire('./plugin.js');","(function () {\nvar template = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var getCreationDateClasses = function (editor) {\n      return editor.getParam('template_cdate_classes', 'cdate');\n    };\n    var getModificationDateClasses = function (editor) {\n      return editor.getParam('template_mdate_classes', 'mdate');\n    };\n    var getSelectedContentClasses = function (editor) {\n      return editor.getParam('template_selected_content_classes', 'selcontent');\n    };\n    var getPreviewReplaceValues = function (editor) {\n      return editor.getParam('template_preview_replace_values');\n    };\n    var getTemplateReplaceValues = function (editor) {\n      return editor.getParam('template_replace_values');\n    };\n    var getTemplates = function (editorSettings) {\n      return editorSettings.templates;\n    };\n    var getCdateFormat = function (editor) {\n      return editor.getParam('template_cdate_format', editor.getLang('template.cdate_format'));\n    };\n    var getMdateFormat = function (editor) {\n      return editor.getParam('template_mdate_format', editor.getLang('template.mdate_format'));\n    };\n    var getDialogWidth = function (editor) {\n      return editor.getParam('template_popup_width', 600);\n    };\n    var getDialogHeight = function (editor) {\n      return Math.min(global$3.DOM.getViewPort().h, editor.getParam('template_popup_height', 500));\n    };\n    var Settings = {\n      getCreationDateClasses: getCreationDateClasses,\n      getModificationDateClasses: getModificationDateClasses,\n      getSelectedContentClasses: getSelectedContentClasses,\n      getPreviewReplaceValues: getPreviewReplaceValues,\n      getTemplateReplaceValues: getTemplateReplaceValues,\n      getTemplates: getTemplates,\n      getCdateFormat: getCdateFormat,\n      getMdateFormat: getMdateFormat,\n      getDialogWidth: getDialogWidth,\n      getDialogHeight: getDialogHeight\n    };\n\n    var addZeros = function (value, len) {\n      value = '' + value;\n      if (value.length < len) {\n        for (var i = 0; i < len - value.length; i++) {\n          value = '0' + value;\n        }\n      }\n      return value;\n    };\n    var getDateTime = function (editor, fmt, date) {\n      var daysShort = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');\n      var daysLong = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');\n      var monthsShort = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');\n      var monthsLong = 'January February March April May June July August September October November December'.split(' ');\n      date = date || new Date();\n      fmt = fmt.replace('%D', '%m/%d/%Y');\n      fmt = fmt.replace('%r', '%I:%M:%S %p');\n      fmt = fmt.replace('%Y', '' + date.getFullYear());\n      fmt = fmt.replace('%y', '' + date.getYear());\n      fmt = fmt.replace('%m', addZeros(date.getMonth() + 1, 2));\n      fmt = fmt.replace('%d', addZeros(date.getDate(), 2));\n      fmt = fmt.replace('%H', '' + addZeros(date.getHours(), 2));\n      fmt = fmt.replace('%M', '' + addZeros(date.getMinutes(), 2));\n      fmt = fmt.replace('%S', '' + addZeros(date.getSeconds(), 2));\n      fmt = fmt.replace('%I', '' + ((date.getHours() + 11) % 12 + 1));\n      fmt = fmt.replace('%p', '' + (date.getHours() < 12 ? 'AM' : 'PM'));\n      fmt = fmt.replace('%B', '' + editor.translate(monthsLong[date.getMonth()]));\n      fmt = fmt.replace('%b', '' + editor.translate(monthsShort[date.getMonth()]));\n      fmt = fmt.replace('%A', '' + editor.translate(daysLong[date.getDay()]));\n      fmt = fmt.replace('%a', '' + editor.translate(daysShort[date.getDay()]));\n      fmt = fmt.replace('%%', '%');\n      return fmt;\n    };\n    var DateTimeHelper = { getDateTime: getDateTime };\n\n    var createTemplateList = function (editorSettings, callback) {\n      return function () {\n        var templateList = Settings.getTemplates(editorSettings);\n        if (typeof templateList === 'function') {\n          templateList(callback);\n          return;\n        }\n        if (typeof templateList === 'string') {\n          global$2.send({\n            url: templateList,\n            success: function (text) {\n              callback(JSON.parse(text));\n            }\n          });\n        } else {\n          callback(templateList);\n        }\n      };\n    };\n    var replaceTemplateValues = function (editor, html, templateValues) {\n      global$1.each(templateValues, function (v, k) {\n        if (typeof v === 'function') {\n          v = v(k);\n        }\n        html = html.replace(new RegExp('\\\\{\\\\$' + k + '\\\\}', 'g'), v);\n      });\n      return html;\n    };\n    var replaceVals = function (editor, e) {\n      var dom = editor.dom, vl = Settings.getTemplateReplaceValues(editor);\n      global$1.each(dom.select('*', e), function (e) {\n        global$1.each(vl, function (v, k) {\n          if (dom.hasClass(e, k)) {\n            if (typeof vl[k] === 'function') {\n              vl[k](e);\n            }\n          }\n        });\n      });\n    };\n    var hasClass = function (n, c) {\n      return new RegExp('\\\\b' + c + '\\\\b', 'g').test(n.className);\n    };\n    var insertTemplate = function (editor, ui, html) {\n      var el;\n      var n;\n      var dom = editor.dom;\n      var sel = editor.selection.getContent();\n      html = replaceTemplateValues(editor, html, Settings.getTemplateReplaceValues(editor));\n      el = dom.create('div', null, html);\n      n = dom.select('.mceTmpl', el);\n      if (n && n.length > 0) {\n        el = dom.create('div', null);\n        el.appendChild(n[0].cloneNode(true));\n      }\n      global$1.each(dom.select('*', el), function (n) {\n        if (hasClass(n, Settings.getCreationDateClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = DateTimeHelper.getDateTime(editor, Settings.getCdateFormat(editor));\n        }\n        if (hasClass(n, Settings.getModificationDateClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = DateTimeHelper.getDateTime(editor, Settings.getMdateFormat(editor));\n        }\n        if (hasClass(n, Settings.getSelectedContentClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = sel;\n        }\n      });\n      replaceVals(editor, el);\n      editor.execCommand('mceInsertContent', false, el.innerHTML);\n      editor.addVisual();\n    };\n    var Templates = {\n      createTemplateList: createTemplateList,\n      replaceTemplateValues: replaceTemplateValues,\n      replaceVals: replaceVals,\n      insertTemplate: insertTemplate\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceInsertTemplate', curry(Templates.insertTemplate, editor));\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor) {\n      editor.on('PreProcess', function (o) {\n        var dom = editor.dom, dateFormat = Settings.getMdateFormat(editor);\n        global$1.each(dom.select('div', o.node), function (e) {\n          if (dom.hasClass(e, 'mceTmpl')) {\n            global$1.each(dom.select('*', e), function (e) {\n              if (dom.hasClass(e, editor.getParam('template_mdate_classes', 'mdate').replace(/\\s+/g, '|'))) {\n                e.innerHTML = DateTimeHelper.getDateTime(editor, dateFormat);\n              }\n            });\n            Templates.replaceVals(editor, e);\n          }\n        });\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var insertIframeHtml = function (editor, win, html) {\n      if (html.indexOf('<html>') === -1) {\n        var contentCssLinks_1 = '';\n        global$1.each(editor.contentCSS, function (url) {\n          contentCssLinks_1 += '<link type=\"text/css\" rel=\"stylesheet\" href=\"' + editor.documentBaseURI.toAbsolute(url) + '\">';\n        });\n        var bodyClass = editor.settings.body_class || '';\n        if (bodyClass.indexOf('=') !== -1) {\n          bodyClass = editor.getParam('body_class', '', 'hash');\n          bodyClass = bodyClass[editor.id] || '';\n        }\n        html = '<!DOCTYPE html>' + '<html>' + '<head>' + contentCssLinks_1 + '</head>' + '<body class=\"' + bodyClass + '\">' + html + '</body>' + '</html>';\n      }\n      html = Templates.replaceTemplateValues(editor, html, Settings.getPreviewReplaceValues(editor));\n      var doc = win.find('iframe')[0].getEl().contentWindow.document;\n      doc.open();\n      doc.write(html);\n      doc.close();\n    };\n    var open = function (editor, templateList) {\n      var win;\n      var values = [];\n      var templateHtml;\n      if (!templateList || templateList.length === 0) {\n        var message = editor.translate('No templates defined.');\n        editor.notificationManager.open({\n          text: message,\n          type: 'info'\n        });\n        return;\n      }\n      global$1.each(templateList, function (template) {\n        values.push({\n          selected: !values.length,\n          text: template.title,\n          value: {\n            url: template.url,\n            content: template.content,\n            description: template.description\n          }\n        });\n      });\n      var onSelectTemplate = function (e) {\n        var value = e.control.value();\n        if (value.url) {\n          global$2.send({\n            url: value.url,\n            success: function (html) {\n              templateHtml = html;\n              insertIframeHtml(editor, win, templateHtml);\n            }\n          });\n        } else {\n          templateHtml = value.content;\n          insertIframeHtml(editor, win, templateHtml);\n        }\n        win.find('#description')[0].text(e.control.value().description);\n      };\n      win = editor.windowManager.open({\n        title: 'Insert template',\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        padding: 15,\n        spacing: 10,\n        items: [\n          {\n            type: 'form',\n            flex: 0,\n            padding: 0,\n            items: [{\n                type: 'container',\n                label: 'Templates',\n                items: {\n                  type: 'listbox',\n                  label: 'Templates',\n                  name: 'template',\n                  values: values,\n                  onselect: onSelectTemplate\n                }\n              }]\n          },\n          {\n            type: 'label',\n            name: 'description',\n            label: 'Description',\n            text: '\\xA0'\n          },\n          {\n            type: 'iframe',\n            flex: 1,\n            border: 1\n          }\n        ],\n        onsubmit: function () {\n          Templates.insertTemplate(editor, false, templateHtml);\n        },\n        minWidth: Settings.getDialogWidth(editor),\n        minHeight: Settings.getDialogHeight(editor)\n      });\n      win.find('listbox')[0].fire('select');\n    };\n    var Dialog = { open: open };\n\n    var showDialog = function (editor) {\n      return function (templates) {\n        Dialog.open(editor, templates);\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addButton('template', {\n        title: 'Insert template',\n        onclick: Templates.createTemplateList(editor.settings, showDialog(editor))\n      });\n      editor.addMenuItem('template', {\n        text: 'Template',\n        onclick: Templates.createTemplateList(editor.settings, showDialog(editor)),\n        icon: 'template',\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('template', function (editor) {\n      Buttons.register(editor);\n      Commands.register(editor);\n      FilterContent.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar isRegExp = require('../internals/is-regexp');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar toLength = require('../internals/to-length');\nvar callRegExpExec = require('../internals/regexp-exec-abstract');\nvar regexpExec = require('../internals/regexp-exec');\nvar fails = require('../internals/fails');\n\nvar arrayPush = [].push;\nvar min = Math.min;\nvar MAX_UINT32 = 0xFFFFFFFF;\n\n// babel-minify transpiles RegExp('x', 'y') -> /x/y and it causes SyntaxError\nvar SUPPORTS_Y = !fails(function () { return !RegExp(MAX_UINT32, 'y'); });\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', 2, function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'.split(/(b)*/)[1] == 'c' ||\n    'test'.split(/(?:)/, -1).length != 4 ||\n    'ab'.split(/(?:ab)*/).length != 2 ||\n    '.'.split(/(.?)(.?)/).length != 4 ||\n    '.'.split(/()()/).length > 1 ||\n    ''.split(/.?/).length\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = String(requireObjectCoercible(this));\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (separator === undefined) return [string];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) {\n        return nativeSplit.call(string, separator, lim);\n      }\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = regexpExec.call(separatorCopy, string)) {\n        lastIndex = separatorCopy.lastIndex;\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index));\n          if (match.length > 1 && match.index < string.length) arrayPush.apply(output, match.slice(1));\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= lim) break;\n        }\n        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string.length) {\n        if (lastLength || !separatorCopy.test('')) output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output.length > lim ? output.slice(0, lim) : output;\n    };\n  // Chakra, V8\n  } else if ('0'.split(undefined, 0).length) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : nativeSplit.call(this, separator, limit);\n    };\n  } else internalSplit = nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = separator == undefined ? undefined : separator[SPLIT];\n      return splitter !== undefined\n        ? splitter.call(separator, O, limit)\n        : internalSplit.call(String(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (regexp, limit) {\n      var res = maybeCallNative(internalSplit, regexp, this, limit, internalSplit !== nativeSplit);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (SUPPORTS_Y ? 'y' : 'g');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(SUPPORTS_Y ? rx : '^(?:' + rx.source + ')', flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = SUPPORTS_Y ? q : 0;\n        var z = callRegExpExec(splitter, SUPPORTS_Y ? S : S.slice(q));\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (SUPPORTS_Y ? 0 : q)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          A.push(S.slice(p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            A.push(z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      A.push(S.slice(p));\n      return A;\n    }\n  ];\n}, !SUPPORTS_Y);\n","(function () {\nvar anchor = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var isValidId = function (id) {\n      return /^[A-Za-z][A-Za-z0-9\\-:._]*$/.test(id);\n    };\n    var getId = function (editor) {\n      var selectedNode = editor.selection.getNode();\n      var isAnchor = selectedNode.tagName === 'A' && editor.dom.getAttrib(selectedNode, 'href') === '';\n      return isAnchor ? selectedNode.id || selectedNode.name : '';\n    };\n    var insert = function (editor, id) {\n      var selectedNode = editor.selection.getNode();\n      var isAnchor = selectedNode.tagName === 'A' && editor.dom.getAttrib(selectedNode, 'href') === '';\n      if (isAnchor) {\n        selectedNode.removeAttribute('name');\n        selectedNode.id = id;\n        editor.undoManager.add();\n      } else {\n        editor.focus();\n        editor.selection.collapse(true);\n        editor.execCommand('mceInsertContent', false, editor.dom.createHTML('a', { id: id }));\n      }\n    };\n    var Anchor = {\n      isValidId: isValidId,\n      getId: getId,\n      insert: insert\n    };\n\n    var insertAnchor = function (editor, newId) {\n      if (!Anchor.isValidId(newId)) {\n        editor.windowManager.alert('Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.');\n        return true;\n      } else {\n        Anchor.insert(editor, newId);\n        return false;\n      }\n    };\n    var open = function (editor) {\n      var currentId = Anchor.getId(editor);\n      editor.windowManager.open({\n        title: 'Anchor',\n        body: {\n          type: 'textbox',\n          name: 'id',\n          size: 40,\n          label: 'Id',\n          value: currentId\n        },\n        onsubmit: function (e) {\n          var newId = e.data.id;\n          if (insertAnchor(editor, newId)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceAnchor', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var isAnchorNode = function (node) {\n      return !node.attr('href') && (node.attr('id') || node.attr('name')) && !node.firstChild;\n    };\n    var setContentEditable = function (state) {\n      return function (nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n          if (isAnchorNode(nodes[i])) {\n            nodes[i].attr('contenteditable', state);\n          }\n        }\n      };\n    };\n    var setup = function (editor) {\n      editor.on('PreInit', function () {\n        editor.parser.addNodeFilter('a', setContentEditable('false'));\n        editor.serializer.addNodeFilter('a', setContentEditable(null));\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.addButton('anchor', {\n        icon: 'anchor',\n        tooltip: 'Anchor',\n        cmd: 'mceAnchor',\n        stateSelector: 'a:not([href])'\n      });\n      editor.addMenuItem('anchor', {\n        icon: 'anchor',\n        text: 'Anchor',\n        context: 'insert',\n        cmd: 'mceAnchor'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('anchor', function (editor) {\n      FilterContent.setup(editor);\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar charmap = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var fireInsertCustomChar = function (editor, chr) {\n      return editor.fire('insertCustomChar', { chr: chr });\n    };\n    var Events = { fireInsertCustomChar: fireInsertCustomChar };\n\n    var insertChar = function (editor, chr) {\n      var evtChr = Events.fireInsertCustomChar(editor, chr).chr;\n      editor.execCommand('mceInsertContent', false, evtChr);\n    };\n    var Actions = { insertChar: insertChar };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getCharMap = function (editor) {\n      return editor.settings.charmap;\n    };\n    var getCharMapAppend = function (editor) {\n      return editor.settings.charmap_append;\n    };\n    var Settings = {\n      getCharMap: getCharMap,\n      getCharMapAppend: getCharMapAppend\n    };\n\n    var isArray = global$1.isArray;\n    var getDefaultCharMap = function () {\n      return [\n        [\n          '160',\n          'no-break space'\n        ],\n        [\n          '173',\n          'soft hyphen'\n        ],\n        [\n          '34',\n          'quotation mark'\n        ],\n        [\n          '162',\n          'cent sign'\n        ],\n        [\n          '8364',\n          'euro sign'\n        ],\n        [\n          '163',\n          'pound sign'\n        ],\n        [\n          '165',\n          'yen sign'\n        ],\n        [\n          '169',\n          'copyright sign'\n        ],\n        [\n          '174',\n          'registered sign'\n        ],\n        [\n          '8482',\n          'trade mark sign'\n        ],\n        [\n          '8240',\n          'per mille sign'\n        ],\n        [\n          '181',\n          'micro sign'\n        ],\n        [\n          '183',\n          'middle dot'\n        ],\n        [\n          '8226',\n          'bullet'\n        ],\n        [\n          '8230',\n          'three dot leader'\n        ],\n        [\n          '8242',\n          'minutes / feet'\n        ],\n        [\n          '8243',\n          'seconds / inches'\n        ],\n        [\n          '167',\n          'section sign'\n        ],\n        [\n          '182',\n          'paragraph sign'\n        ],\n        [\n          '223',\n          'sharp s / ess-zed'\n        ],\n        [\n          '8249',\n          'single left-pointing angle quotation mark'\n        ],\n        [\n          '8250',\n          'single right-pointing angle quotation mark'\n        ],\n        [\n          '171',\n          'left pointing guillemet'\n        ],\n        [\n          '187',\n          'right pointing guillemet'\n        ],\n        [\n          '8216',\n          'left single quotation mark'\n        ],\n        [\n          '8217',\n          'right single quotation mark'\n        ],\n        [\n          '8220',\n          'left double quotation mark'\n        ],\n        [\n          '8221',\n          'right double quotation mark'\n        ],\n        [\n          '8218',\n          'single low-9 quotation mark'\n        ],\n        [\n          '8222',\n          'double low-9 quotation mark'\n        ],\n        [\n          '60',\n          'less-than sign'\n        ],\n        [\n          '62',\n          'greater-than sign'\n        ],\n        [\n          '8804',\n          'less-than or equal to'\n        ],\n        [\n          '8805',\n          'greater-than or equal to'\n        ],\n        [\n          '8211',\n          'en dash'\n        ],\n        [\n          '8212',\n          'em dash'\n        ],\n        [\n          '175',\n          'macron'\n        ],\n        [\n          '8254',\n          'overline'\n        ],\n        [\n          '164',\n          'currency sign'\n        ],\n        [\n          '166',\n          'broken bar'\n        ],\n        [\n          '168',\n          'diaeresis'\n        ],\n        [\n          '161',\n          'inverted exclamation mark'\n        ],\n        [\n          '191',\n          'turned question mark'\n        ],\n        [\n          '710',\n          'circumflex accent'\n        ],\n        [\n          '732',\n          'small tilde'\n        ],\n        [\n          '176',\n          'degree sign'\n        ],\n        [\n          '8722',\n          'minus sign'\n        ],\n        [\n          '177',\n          'plus-minus sign'\n        ],\n        [\n          '247',\n          'division sign'\n        ],\n        [\n          '8260',\n          'fraction slash'\n        ],\n        [\n          '215',\n          'multiplication sign'\n        ],\n        [\n          '185',\n          'superscript one'\n        ],\n        [\n          '178',\n          'superscript two'\n        ],\n        [\n          '179',\n          'superscript three'\n        ],\n        [\n          '188',\n          'fraction one quarter'\n        ],\n        [\n          '189',\n          'fraction one half'\n        ],\n        [\n          '190',\n          'fraction three quarters'\n        ],\n        [\n          '402',\n          'function / florin'\n        ],\n        [\n          '8747',\n          'integral'\n        ],\n        [\n          '8721',\n          'n-ary sumation'\n        ],\n        [\n          '8734',\n          'infinity'\n        ],\n        [\n          '8730',\n          'square root'\n        ],\n        [\n          '8764',\n          'similar to'\n        ],\n        [\n          '8773',\n          'approximately equal to'\n        ],\n        [\n          '8776',\n          'almost equal to'\n        ],\n        [\n          '8800',\n          'not equal to'\n        ],\n        [\n          '8801',\n          'identical to'\n        ],\n        [\n          '8712',\n          'element of'\n        ],\n        [\n          '8713',\n          'not an element of'\n        ],\n        [\n          '8715',\n          'contains as member'\n        ],\n        [\n          '8719',\n          'n-ary product'\n        ],\n        [\n          '8743',\n          'logical and'\n        ],\n        [\n          '8744',\n          'logical or'\n        ],\n        [\n          '172',\n          'not sign'\n        ],\n        [\n          '8745',\n          'intersection'\n        ],\n        [\n          '8746',\n          'union'\n        ],\n        [\n          '8706',\n          'partial differential'\n        ],\n        [\n          '8704',\n          'for all'\n        ],\n        [\n          '8707',\n          'there exists'\n        ],\n        [\n          '8709',\n          'diameter'\n        ],\n        [\n          '8711',\n          'backward difference'\n        ],\n        [\n          '8727',\n          'asterisk operator'\n        ],\n        [\n          '8733',\n          'proportional to'\n        ],\n        [\n          '8736',\n          'angle'\n        ],\n        [\n          '180',\n          'acute accent'\n        ],\n        [\n          '184',\n          'cedilla'\n        ],\n        [\n          '170',\n          'feminine ordinal indicator'\n        ],\n        [\n          '186',\n          'masculine ordinal indicator'\n        ],\n        [\n          '8224',\n          'dagger'\n        ],\n        [\n          '8225',\n          'double dagger'\n        ],\n        [\n          '192',\n          'A - grave'\n        ],\n        [\n          '193',\n          'A - acute'\n        ],\n        [\n          '194',\n          'A - circumflex'\n        ],\n        [\n          '195',\n          'A - tilde'\n        ],\n        [\n          '196',\n          'A - diaeresis'\n        ],\n        [\n          '197',\n          'A - ring above'\n        ],\n        [\n          '256',\n          'A - macron'\n        ],\n        [\n          '198',\n          'ligature AE'\n        ],\n        [\n          '199',\n          'C - cedilla'\n        ],\n        [\n          '200',\n          'E - grave'\n        ],\n        [\n          '201',\n          'E - acute'\n        ],\n        [\n          '202',\n          'E - circumflex'\n        ],\n        [\n          '203',\n          'E - diaeresis'\n        ],\n        [\n          '274',\n          'E - macron'\n        ],\n        [\n          '204',\n          'I - grave'\n        ],\n        [\n          '205',\n          'I - acute'\n        ],\n        [\n          '206',\n          'I - circumflex'\n        ],\n        [\n          '207',\n          'I - diaeresis'\n        ],\n        [\n          '298',\n          'I - macron'\n        ],\n        [\n          '208',\n          'ETH'\n        ],\n        [\n          '209',\n          'N - tilde'\n        ],\n        [\n          '210',\n          'O - grave'\n        ],\n        [\n          '211',\n          'O - acute'\n        ],\n        [\n          '212',\n          'O - circumflex'\n        ],\n        [\n          '213',\n          'O - tilde'\n        ],\n        [\n          '214',\n          'O - diaeresis'\n        ],\n        [\n          '216',\n          'O - slash'\n        ],\n        [\n          '332',\n          'O - macron'\n        ],\n        [\n          '338',\n          'ligature OE'\n        ],\n        [\n          '352',\n          'S - caron'\n        ],\n        [\n          '217',\n          'U - grave'\n        ],\n        [\n          '218',\n          'U - acute'\n        ],\n        [\n          '219',\n          'U - circumflex'\n        ],\n        [\n          '220',\n          'U - diaeresis'\n        ],\n        [\n          '362',\n          'U - macron'\n        ],\n        [\n          '221',\n          'Y - acute'\n        ],\n        [\n          '376',\n          'Y - diaeresis'\n        ],\n        [\n          '562',\n          'Y - macron'\n        ],\n        [\n          '222',\n          'THORN'\n        ],\n        [\n          '224',\n          'a - grave'\n        ],\n        [\n          '225',\n          'a - acute'\n        ],\n        [\n          '226',\n          'a - circumflex'\n        ],\n        [\n          '227',\n          'a - tilde'\n        ],\n        [\n          '228',\n          'a - diaeresis'\n        ],\n        [\n          '229',\n          'a - ring above'\n        ],\n        [\n          '257',\n          'a - macron'\n        ],\n        [\n          '230',\n          'ligature ae'\n        ],\n        [\n          '231',\n          'c - cedilla'\n        ],\n        [\n          '232',\n          'e - grave'\n        ],\n        [\n          '233',\n          'e - acute'\n        ],\n        [\n          '234',\n          'e - circumflex'\n        ],\n        [\n          '235',\n          'e - diaeresis'\n        ],\n        [\n          '275',\n          'e - macron'\n        ],\n        [\n          '236',\n          'i - grave'\n        ],\n        [\n          '237',\n          'i - acute'\n        ],\n        [\n          '238',\n          'i - circumflex'\n        ],\n        [\n          '239',\n          'i - diaeresis'\n        ],\n        [\n          '299',\n          'i - macron'\n        ],\n        [\n          '240',\n          'eth'\n        ],\n        [\n          '241',\n          'n - tilde'\n        ],\n        [\n          '242',\n          'o - grave'\n        ],\n        [\n          '243',\n          'o - acute'\n        ],\n        [\n          '244',\n          'o - circumflex'\n        ],\n        [\n          '245',\n          'o - tilde'\n        ],\n        [\n          '246',\n          'o - diaeresis'\n        ],\n        [\n          '248',\n          'o slash'\n        ],\n        [\n          '333',\n          'o macron'\n        ],\n        [\n          '339',\n          'ligature oe'\n        ],\n        [\n          '353',\n          's - caron'\n        ],\n        [\n          '249',\n          'u - grave'\n        ],\n        [\n          '250',\n          'u - acute'\n        ],\n        [\n          '251',\n          'u - circumflex'\n        ],\n        [\n          '252',\n          'u - diaeresis'\n        ],\n        [\n          '363',\n          'u - macron'\n        ],\n        [\n          '253',\n          'y - acute'\n        ],\n        [\n          '254',\n          'thorn'\n        ],\n        [\n          '255',\n          'y - diaeresis'\n        ],\n        [\n          '563',\n          'y - macron'\n        ],\n        [\n          '913',\n          'Alpha'\n        ],\n        [\n          '914',\n          'Beta'\n        ],\n        [\n          '915',\n          'Gamma'\n        ],\n        [\n          '916',\n          'Delta'\n        ],\n        [\n          '917',\n          'Epsilon'\n        ],\n        [\n          '918',\n          'Zeta'\n        ],\n        [\n          '919',\n          'Eta'\n        ],\n        [\n          '920',\n          'Theta'\n        ],\n        [\n          '921',\n          'Iota'\n        ],\n        [\n          '922',\n          'Kappa'\n        ],\n        [\n          '923',\n          'Lambda'\n        ],\n        [\n          '924',\n          'Mu'\n        ],\n        [\n          '925',\n          'Nu'\n        ],\n        [\n          '926',\n          'Xi'\n        ],\n        [\n          '927',\n          'Omicron'\n        ],\n        [\n          '928',\n          'Pi'\n        ],\n        [\n          '929',\n          'Rho'\n        ],\n        [\n          '931',\n          'Sigma'\n        ],\n        [\n          '932',\n          'Tau'\n        ],\n        [\n          '933',\n          'Upsilon'\n        ],\n        [\n          '934',\n          'Phi'\n        ],\n        [\n          '935',\n          'Chi'\n        ],\n        [\n          '936',\n          'Psi'\n        ],\n        [\n          '937',\n          'Omega'\n        ],\n        [\n          '945',\n          'alpha'\n        ],\n        [\n          '946',\n          'beta'\n        ],\n        [\n          '947',\n          'gamma'\n        ],\n        [\n          '948',\n          'delta'\n        ],\n        [\n          '949',\n          'epsilon'\n        ],\n        [\n          '950',\n          'zeta'\n        ],\n        [\n          '951',\n          'eta'\n        ],\n        [\n          '952',\n          'theta'\n        ],\n        [\n          '953',\n          'iota'\n        ],\n        [\n          '954',\n          'kappa'\n        ],\n        [\n          '955',\n          'lambda'\n        ],\n        [\n          '956',\n          'mu'\n        ],\n        [\n          '957',\n          'nu'\n        ],\n        [\n          '958',\n          'xi'\n        ],\n        [\n          '959',\n          'omicron'\n        ],\n        [\n          '960',\n          'pi'\n        ],\n        [\n          '961',\n          'rho'\n        ],\n        [\n          '962',\n          'final sigma'\n        ],\n        [\n          '963',\n          'sigma'\n        ],\n        [\n          '964',\n          'tau'\n        ],\n        [\n          '965',\n          'upsilon'\n        ],\n        [\n          '966',\n          'phi'\n        ],\n        [\n          '967',\n          'chi'\n        ],\n        [\n          '968',\n          'psi'\n        ],\n        [\n          '969',\n          'omega'\n        ],\n        [\n          '8501',\n          'alef symbol'\n        ],\n        [\n          '982',\n          'pi symbol'\n        ],\n        [\n          '8476',\n          'real part symbol'\n        ],\n        [\n          '978',\n          'upsilon - hook symbol'\n        ],\n        [\n          '8472',\n          'Weierstrass p'\n        ],\n        [\n          '8465',\n          'imaginary part'\n        ],\n        [\n          '8592',\n          'leftwards arrow'\n        ],\n        [\n          '8593',\n          'upwards arrow'\n        ],\n        [\n          '8594',\n          'rightwards arrow'\n        ],\n        [\n          '8595',\n          'downwards arrow'\n        ],\n        [\n          '8596',\n          'left right arrow'\n        ],\n        [\n          '8629',\n          'carriage return'\n        ],\n        [\n          '8656',\n          'leftwards double arrow'\n        ],\n        [\n          '8657',\n          'upwards double arrow'\n        ],\n        [\n          '8658',\n          'rightwards double arrow'\n        ],\n        [\n          '8659',\n          'downwards double arrow'\n        ],\n        [\n          '8660',\n          'left right double arrow'\n        ],\n        [\n          '8756',\n          'therefore'\n        ],\n        [\n          '8834',\n          'subset of'\n        ],\n        [\n          '8835',\n          'superset of'\n        ],\n        [\n          '8836',\n          'not a subset of'\n        ],\n        [\n          '8838',\n          'subset of or equal to'\n        ],\n        [\n          '8839',\n          'superset of or equal to'\n        ],\n        [\n          '8853',\n          'circled plus'\n        ],\n        [\n          '8855',\n          'circled times'\n        ],\n        [\n          '8869',\n          'perpendicular'\n        ],\n        [\n          '8901',\n          'dot operator'\n        ],\n        [\n          '8968',\n          'left ceiling'\n        ],\n        [\n          '8969',\n          'right ceiling'\n        ],\n        [\n          '8970',\n          'left floor'\n        ],\n        [\n          '8971',\n          'right floor'\n        ],\n        [\n          '9001',\n          'left-pointing angle bracket'\n        ],\n        [\n          '9002',\n          'right-pointing angle bracket'\n        ],\n        [\n          '9674',\n          'lozenge'\n        ],\n        [\n          '9824',\n          'black spade suit'\n        ],\n        [\n          '9827',\n          'black club suit'\n        ],\n        [\n          '9829',\n          'black heart suit'\n        ],\n        [\n          '9830',\n          'black diamond suit'\n        ],\n        [\n          '8194',\n          'en space'\n        ],\n        [\n          '8195',\n          'em space'\n        ],\n        [\n          '8201',\n          'thin space'\n        ],\n        [\n          '8204',\n          'zero width non-joiner'\n        ],\n        [\n          '8205',\n          'zero width joiner'\n        ],\n        [\n          '8206',\n          'left-to-right mark'\n        ],\n        [\n          '8207',\n          'right-to-left mark'\n        ]\n      ];\n    };\n    var charmapFilter = function (charmap) {\n      return global$1.grep(charmap, function (item) {\n        return isArray(item) && item.length === 2;\n      });\n    };\n    var getCharsFromSetting = function (settingValue) {\n      if (isArray(settingValue)) {\n        return [].concat(charmapFilter(settingValue));\n      }\n      if (typeof settingValue === 'function') {\n        return settingValue();\n      }\n      return [];\n    };\n    var extendCharMap = function (editor, charmap) {\n      var userCharMap = Settings.getCharMap(editor);\n      if (userCharMap) {\n        charmap = getCharsFromSetting(userCharMap);\n      }\n      var userCharMapAppend = Settings.getCharMapAppend(editor);\n      if (userCharMapAppend) {\n        return [].concat(charmap).concat(getCharsFromSetting(userCharMapAppend));\n      }\n      return charmap;\n    };\n    var getCharMap$1 = function (editor) {\n      return extendCharMap(editor, getDefaultCharMap());\n    };\n    var CharMap = { getCharMap: getCharMap$1 };\n\n    var get = function (editor) {\n      var getCharMap = function () {\n        return CharMap.getCharMap(editor);\n      };\n      var insertChar = function (chr) {\n        Actions.insertChar(editor, chr);\n      };\n      return {\n        getCharMap: getCharMap,\n        insertChar: insertChar\n      };\n    };\n    var Api = { get: get };\n\n    var getHtml = function (charmap) {\n      var gridHtml, x, y;\n      var width = Math.min(charmap.length, 25);\n      var height = Math.ceil(charmap.length / width);\n      gridHtml = '<table role=\"presentation\" cellspacing=\"0\" class=\"mce-charmap\"><tbody>';\n      for (y = 0; y < height; y++) {\n        gridHtml += '<tr>';\n        for (x = 0; x < width; x++) {\n          var index = y * width + x;\n          if (index < charmap.length) {\n            var chr = charmap[index];\n            var charCode = parseInt(chr[0], 10);\n            var chrText = chr ? String.fromCharCode(charCode) : '&nbsp;';\n            gridHtml += '<td title=\"' + chr[1] + '\">' + '<div tabindex=\"-1\" title=\"' + chr[1] + '\" role=\"button\" data-chr=\"' + charCode + '\">' + chrText + '</div>' + '</td>';\n          } else {\n            gridHtml += '<td />';\n          }\n        }\n        gridHtml += '</tr>';\n      }\n      gridHtml += '</tbody></table>';\n      return gridHtml;\n    };\n    var GridHtml = { getHtml: getHtml };\n\n    var getParentTd = function (elm) {\n      while (elm) {\n        if (elm.nodeName === 'TD') {\n          return elm;\n        }\n        elm = elm.parentNode;\n      }\n    };\n    var open = function (editor) {\n      var win;\n      var charMapPanel = {\n        type: 'container',\n        html: GridHtml.getHtml(CharMap.getCharMap(editor)),\n        onclick: function (e) {\n          var target = e.target;\n          if (/^(TD|DIV)$/.test(target.nodeName)) {\n            var charDiv = getParentTd(target).firstChild;\n            if (charDiv && charDiv.hasAttribute('data-chr')) {\n              var charCodeString = charDiv.getAttribute('data-chr');\n              var charCode = parseInt(charCodeString, 10);\n              if (!isNaN(charCode)) {\n                Actions.insertChar(editor, String.fromCharCode(charCode));\n              }\n              if (!e.ctrlKey) {\n                win.close();\n              }\n            }\n          }\n        },\n        onmouseover: function (e) {\n          var td = getParentTd(e.target);\n          if (td && td.firstChild) {\n            win.find('#preview').text(td.firstChild.firstChild.data);\n            win.find('#previewTitle').text(td.title);\n          } else {\n            win.find('#preview').text(' ');\n            win.find('#previewTitle').text(' ');\n          }\n        }\n      };\n      win = editor.windowManager.open({\n        title: 'Special character',\n        spacing: 10,\n        padding: 10,\n        items: [\n          charMapPanel,\n          {\n            type: 'container',\n            layout: 'flex',\n            direction: 'column',\n            align: 'center',\n            spacing: 5,\n            minWidth: 160,\n            minHeight: 160,\n            items: [\n              {\n                type: 'label',\n                name: 'preview',\n                text: ' ',\n                style: 'font-size: 40px; text-align: center',\n                border: 1,\n                minWidth: 140,\n                minHeight: 80\n              },\n              {\n                type: 'spacer',\n                minHeight: 20\n              },\n              {\n                type: 'label',\n                name: 'previewTitle',\n                text: ' ',\n                style: 'white-space: pre-wrap;',\n                border: 1,\n                minWidth: 140\n              }\n            ]\n          }\n        ],\n        buttons: [{\n            text: 'Close',\n            onclick: function () {\n              win.close();\n            }\n          }]\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceShowCharmap', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('charmap', {\n        icon: 'charmap',\n        tooltip: 'Special character',\n        cmd: 'mceShowCharmap'\n      });\n      editor.addMenuItem('charmap', {\n        icon: 'charmap',\n        text: 'Special character',\n        cmd: 'mceShowCharmap',\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('charmap', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      return Api.get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","(function () {\nvar lists = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.BookmarkManager');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var isTextNode = function (node) {\n      return node && node.nodeType === 3;\n    };\n    var isListNode = function (node) {\n      return node && /^(OL|UL|DL)$/.test(node.nodeName);\n    };\n    var isOlUlNode = function (node) {\n      return node && /^(OL|UL)$/.test(node.nodeName);\n    };\n    var isListItemNode = function (node) {\n      return node && /^(LI|DT|DD)$/.test(node.nodeName);\n    };\n    var isDlItemNode = function (node) {\n      return node && /^(DT|DD)$/.test(node.nodeName);\n    };\n    var isTableCellNode = function (node) {\n      return node && /^(TH|TD)$/.test(node.nodeName);\n    };\n    var isBr = function (node) {\n      return node && node.nodeName === 'BR';\n    };\n    var isFirstChild = function (node) {\n      return node.parentNode.firstChild === node;\n    };\n    var isLastChild = function (node) {\n      return node.parentNode.lastChild === node;\n    };\n    var isTextBlock = function (editor, node) {\n      return node && !!editor.schema.getTextBlockElements()[node.nodeName];\n    };\n    var isBlock = function (node, blockElements) {\n      return node && node.nodeName in blockElements;\n    };\n    var isBogusBr = function (dom, node) {\n      if (!isBr(node)) {\n        return false;\n      }\n      if (dom.isBlock(node.nextSibling) && !isBr(node.previousSibling)) {\n        return true;\n      }\n      return false;\n    };\n    var isEmpty = function (dom, elm, keepBookmarks) {\n      var empty = dom.isEmpty(elm);\n      if (keepBookmarks && dom.select('span[data-mce-type=bookmark]', elm).length > 0) {\n        return false;\n      }\n      return empty;\n    };\n    var isChildOfBody = function (dom, elm) {\n      return dom.isChildOf(elm, dom.getRoot());\n    };\n    var NodeType = {\n      isTextNode: isTextNode,\n      isListNode: isListNode,\n      isOlUlNode: isOlUlNode,\n      isDlItemNode: isDlItemNode,\n      isListItemNode: isListItemNode,\n      isTableCellNode: isTableCellNode,\n      isBr: isBr,\n      isFirstChild: isFirstChild,\n      isLastChild: isLastChild,\n      isTextBlock: isTextBlock,\n      isBlock: isBlock,\n      isBogusBr: isBogusBr,\n      isEmpty: isEmpty,\n      isChildOfBody: isChildOfBody\n    };\n\n    var getNormalizedPoint = function (container, offset) {\n      if (NodeType.isTextNode(container)) {\n        return {\n          container: container,\n          offset: offset\n        };\n      }\n      var node = global$1.getNode(container, offset);\n      if (NodeType.isTextNode(node)) {\n        return {\n          container: node,\n          offset: offset >= container.childNodes.length ? node.data.length : 0\n        };\n      } else if (node.previousSibling && NodeType.isTextNode(node.previousSibling)) {\n        return {\n          container: node.previousSibling,\n          offset: node.previousSibling.data.length\n        };\n      } else if (node.nextSibling && NodeType.isTextNode(node.nextSibling)) {\n        return {\n          container: node.nextSibling,\n          offset: 0\n        };\n      }\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n    var normalizeRange = function (rng) {\n      var outRng = rng.cloneRange();\n      var rangeStart = getNormalizedPoint(rng.startContainer, rng.startOffset);\n      outRng.setStart(rangeStart.container, rangeStart.offset);\n      var rangeEnd = getNormalizedPoint(rng.endContainer, rng.endOffset);\n      outRng.setEnd(rangeEnd.container, rangeEnd.offset);\n      return outRng;\n    };\n    var Range = {\n      getNormalizedPoint: getNormalizedPoint,\n      normalizeRange: normalizeRange\n    };\n\n    var DOM = global$6.DOM;\n    var createBookmark = function (rng) {\n      var bookmark = {};\n      var setupEndPoint = function (start) {\n        var offsetNode, container, offset;\n        container = rng[start ? 'startContainer' : 'endContainer'];\n        offset = rng[start ? 'startOffset' : 'endOffset'];\n        if (container.nodeType === 1) {\n          offsetNode = DOM.create('span', { 'data-mce-type': 'bookmark' });\n          if (container.hasChildNodes()) {\n            offset = Math.min(offset, container.childNodes.length - 1);\n            if (start) {\n              container.insertBefore(offsetNode, container.childNodes[offset]);\n            } else {\n              DOM.insertAfter(offsetNode, container.childNodes[offset]);\n            }\n          } else {\n            container.appendChild(offsetNode);\n          }\n          container = offsetNode;\n          offset = 0;\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      setupEndPoint(true);\n      if (!rng.collapsed) {\n        setupEndPoint();\n      }\n      return bookmark;\n    };\n    var resolveBookmark = function (bookmark) {\n      function restoreEndPoint(start) {\n        var container, offset, node;\n        var nodeIndex = function (container) {\n          var node = container.parentNode.firstChild, idx = 0;\n          while (node) {\n            if (node === container) {\n              return idx;\n            }\n            if (node.nodeType !== 1 || node.getAttribute('data-mce-type') !== 'bookmark') {\n              idx++;\n            }\n            node = node.nextSibling;\n          }\n          return -1;\n        };\n        container = node = bookmark[start ? 'startContainer' : 'endContainer'];\n        offset = bookmark[start ? 'startOffset' : 'endOffset'];\n        if (!container) {\n          return;\n        }\n        if (container.nodeType === 1) {\n          offset = nodeIndex(container);\n          container = container.parentNode;\n          DOM.remove(node);\n          if (!container.hasChildNodes() && DOM.isBlock(container)) {\n            container.appendChild(DOM.create('br'));\n          }\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      }\n      restoreEndPoint(true);\n      restoreEndPoint();\n      var rng = DOM.createRng();\n      rng.setStart(bookmark.startContainer, bookmark.startOffset);\n      if (bookmark.endContainer) {\n        rng.setEnd(bookmark.endContainer, bookmark.endOffset);\n      }\n      return Range.normalizeRange(rng);\n    };\n    var Bookmark = {\n      createBookmark: createBookmark,\n      resolveBookmark: resolveBookmark\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var groupBy = function (xs, f) {\n      if (xs.length === 0) {\n        return [];\n      } else {\n        var wasType = f(xs[0]);\n        var r = [];\n        var group = [];\n        for (var i = 0, len = xs.length; i < len; i++) {\n          var x = xs[i];\n          var type = f(x);\n          if (type !== wasType) {\n            r.push(group);\n            group = [];\n          }\n          wasType = type;\n          group.push(x);\n        }\n        if (group.length !== 0) {\n          r.push(group);\n        }\n        return r;\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var htmlElement = function (scope) {\n      return Global$1.getOrDie('HTMLElement', scope);\n    };\n    var isPrototypeOf = function (x) {\n      var scope = resolve('ownerDocument.defaultView', x);\n      return htmlElement(scope).prototype.isPrototypeOf(x);\n    };\n    var HTMLElement = { isPrototypeOf: isPrototypeOf };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var getParentList = function (editor) {\n      var selectionStart = editor.selection.getStart(true);\n      return editor.dom.getParent(selectionStart, 'OL,UL,DL', getClosestListRootElm(editor, selectionStart));\n    };\n    var isParentListSelected = function (parentList, selectedBlocks) {\n      return parentList && selectedBlocks.length === 1 && selectedBlocks[0] === parentList;\n    };\n    var findSubLists = function (parentList) {\n      return global$5.grep(parentList.querySelectorAll('ol,ul,dl'), function (elm) {\n        return NodeType.isListNode(elm);\n      });\n    };\n    var getSelectedSubLists = function (editor) {\n      var parentList = getParentList(editor);\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      if (isParentListSelected(parentList, selectedBlocks)) {\n        return findSubLists(parentList);\n      } else {\n        return global$5.grep(selectedBlocks, function (elm) {\n          return NodeType.isListNode(elm) && parentList !== elm;\n        });\n      }\n    };\n    var findParentListItemsNodes = function (editor, elms) {\n      var listItemsElms = global$5.map(elms, function (elm) {\n        var parentLi = editor.dom.getParent(elm, 'li,dd,dt', getClosestListRootElm(editor, elm));\n        return parentLi ? parentLi : elm;\n      });\n      return global$7.unique(listItemsElms);\n    };\n    var getSelectedListItems = function (editor) {\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      return global$5.grep(findParentListItemsNodes(editor, selectedBlocks), function (block) {\n        return NodeType.isListItemNode(block);\n      });\n    };\n    var getSelectedDlItems = function (editor) {\n      return filter(getSelectedListItems(editor), NodeType.isDlItemNode);\n    };\n    var getClosestListRootElm = function (editor, elm) {\n      var parentTableCell = editor.dom.getParents(elm, 'TD,TH');\n      var root = parentTableCell.length > 0 ? parentTableCell[0] : editor.getBody();\n      return root;\n    };\n    var findLastParentListNode = function (editor, elm) {\n      var parentLists = editor.dom.getParents(elm, 'ol,ul', getClosestListRootElm(editor, elm));\n      return last(parentLists);\n    };\n    var getSelectedLists = function (editor) {\n      var firstList = findLastParentListNode(editor, editor.selection.getStart());\n      var subsequentLists = filter(editor.selection.getSelectedBlocks(), NodeType.isOlUlNode);\n      return firstList.toArray().concat(subsequentLists);\n    };\n    var getSelectedListRoots = function (editor) {\n      var selectedLists = getSelectedLists(editor);\n      return getUniqueListRoots(editor, selectedLists);\n    };\n    var getUniqueListRoots = function (editor, lists) {\n      var listRoots = map(lists, function (list) {\n        return findLastParentListNode(editor, list).getOr(list);\n      });\n      return global$7.unique(listRoots);\n    };\n    var isList = function (editor) {\n      var list = getParentList(editor);\n      return HTMLElement.isPrototypeOf(list);\n    };\n    var Selection = {\n      isList: isList,\n      getParentList: getParentList,\n      getSelectedSubLists: getSelectedSubLists,\n      getSelectedListItems: getSelectedListItems,\n      getClosestListRootElm: getClosestListRootElm,\n      getSelectedDlItems: getSelectedDlItems,\n      getSelectedListRoots: getSelectedListRoots\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie())) : Option.none();\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || domGlobals.document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom());\n      });\n      return Element.fromDom(fragment);\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n\n    var node = function () {\n      var f = Global$1.getOrDie('Node');\n      return f;\n    };\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var ELEMENT$1 = ELEMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$1 = browser.isIE() ? ieContains : regularContains;\n    var is$1 = is;\n\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom().childNodes.length - 1);\n    };\n    var spot = Immutable('element', 'offset');\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var remove = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var clone = function (element) {\n      return foldl(element.dom().attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var set = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = Element.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var mutate = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      before(original, nu);\n      var children$1 = children(original);\n      append$1(nu, children$1);\n      remove(original);\n      return nu;\n    };\n\n    var joinSegment = function (parent, child) {\n      append(parent.item, child.list);\n    };\n    var joinSegments = function (segments) {\n      for (var i = 1; i < segments.length; i++) {\n        joinSegment(segments[i - 1], segments[i]);\n      }\n    };\n    var appendSegments = function (head$1, tail) {\n      lift2(last(head$1), head(tail), joinSegment);\n    };\n    var createSegment = function (scope, listType) {\n      var segment = {\n        list: Element.fromTag(listType, scope),\n        item: Element.fromTag('li', scope)\n      };\n      append(segment.list, segment.item);\n      return segment;\n    };\n    var createSegments = function (scope, entry, size) {\n      var segments = [];\n      for (var i = 0; i < size; i++) {\n        segments.push(createSegment(scope, entry.listType));\n      }\n      return segments;\n    };\n    var populateSegments = function (segments, entry) {\n      for (var i = 0; i < segments.length - 1; i++) {\n        set(segments[i].item, 'list-style-type', 'none');\n      }\n      last(segments).each(function (segment) {\n        setAll(segment.list, entry.listAttributes);\n        setAll(segment.item, entry.itemAttributes);\n        append$1(segment.item, entry.content);\n      });\n    };\n    var normalizeSegment = function (segment, entry) {\n      if (name(segment.list) !== entry.listType) {\n        segment.list = mutate(segment.list, entry.listType);\n      }\n      setAll(segment.list, entry.listAttributes);\n    };\n    var createItem = function (scope, attr, content) {\n      var item = Element.fromTag('li', scope);\n      setAll(item, attr);\n      append$1(item, content);\n      return item;\n    };\n    var appendItem = function (segment, item) {\n      append(segment.list, item);\n      segment.item = item;\n    };\n    var writeShallow = function (scope, cast, entry) {\n      var newCast = cast.slice(0, entry.depth);\n      last(newCast).each(function (segment) {\n        var item = createItem(scope, entry.itemAttributes, entry.content);\n        appendItem(segment, item);\n        normalizeSegment(segment, entry);\n      });\n      return newCast;\n    };\n    var writeDeep = function (scope, cast, entry) {\n      var segments = createSegments(scope, entry, entry.depth - cast.length);\n      joinSegments(segments);\n      populateSegments(segments, entry);\n      appendSegments(cast, segments);\n      return cast.concat(segments);\n    };\n    var composeList = function (scope, entries) {\n      var cast = foldl(entries, function (cast, entry) {\n        return entry.depth > cast.length ? writeDeep(scope, cast, entry) : writeShallow(scope, cast, entry);\n      }, []);\n      return head(cast).map(function (segment) {\n        return segment.list;\n      });\n    };\n\n    var isList$1 = function (el) {\n      return is$1(el, 'OL,UL');\n    };\n    var hasFirstChildList = function (el) {\n      return firstChild(el).map(isList$1).getOr(false);\n    };\n    var hasLastChildList = function (el) {\n      return lastChild(el).map(isList$1).getOr(false);\n    };\n\n    var isIndented = function (entry) {\n      return entry.depth > 0;\n    };\n    var isSelected = function (entry) {\n      return entry.isSelected;\n    };\n    var cloneItemContent = function (li) {\n      var children$1 = children(li);\n      var content = hasLastChildList(li) ? children$1.slice(0, -1) : children$1;\n      return map(content, deep);\n    };\n    var createEntry = function (li, depth, isSelected) {\n      return parent(li).filter(isElement).map(function (list) {\n        return {\n          depth: depth,\n          isSelected: isSelected,\n          content: cloneItemContent(li),\n          itemAttributes: clone(li),\n          listAttributes: clone(list),\n          listType: name(list)\n        };\n      });\n    };\n\n    var indentEntry = function (indentation, entry) {\n      switch (indentation) {\n      case 'Indent':\n        entry.depth++;\n        break;\n      case 'Outdent':\n        entry.depth--;\n        break;\n      case 'Flatten':\n        entry.depth = 0;\n      }\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow);\n\n    var cloneListProperties = function (target, source) {\n      target.listType = source.listType;\n      target.listAttributes = merge({}, source.listAttributes);\n    };\n    var previousSiblingEntry = function (entries, start) {\n      var depth = entries[start].depth;\n      for (var i = start - 1; i >= 0; i--) {\n        if (entries[i].depth === depth) {\n          return Option.some(entries[i]);\n        }\n        if (entries[i].depth < depth) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var normalizeEntries = function (entries) {\n      each(entries, function (entry, i) {\n        previousSiblingEntry(entries, i).each(function (matchingEntry) {\n          cloneListProperties(entry, matchingEntry);\n        });\n      });\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var parseItem = function (depth, itemSelection, selectionState, item) {\n      return firstChild(item).filter(isList$1).fold(function () {\n        itemSelection.each(function (selection) {\n          if (eq(selection.start, item)) {\n            selectionState.set(true);\n          }\n        });\n        var currentItemEntry = createEntry(item, depth, selectionState.get());\n        itemSelection.each(function (selection) {\n          if (eq(selection.end, item)) {\n            selectionState.set(false);\n          }\n        });\n        var childListEntries = lastChild(item).filter(isList$1).map(function (list) {\n          return parseList(depth, itemSelection, selectionState, list);\n        }).getOr([]);\n        return currentItemEntry.toArray().concat(childListEntries);\n      }, function (list) {\n        return parseList(depth, itemSelection, selectionState, list);\n      });\n    };\n    var parseList = function (depth, itemSelection, selectionState, list) {\n      return bind(children(list), function (element) {\n        var parser = isList$1(element) ? parseList : parseItem;\n        var newDepth = depth + 1;\n        return parser(newDepth, itemSelection, selectionState, element);\n      });\n    };\n    var parseLists = function (lists, itemSelection) {\n      var selectionState = Cell(false);\n      var initialDepth = 0;\n      return map(lists, function (list) {\n        return {\n          sourceList: list,\n          entries: parseList(initialDepth, itemSelection, selectionState, list)\n        };\n      });\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var createTextBlock = function (editor, contentNode) {\n      var dom = editor.dom;\n      var blockElements = editor.schema.getBlockElements();\n      var fragment = dom.createFragment();\n      var node, textBlock, blockName, hasContentNode;\n      if (editor.settings.forced_root_block) {\n        blockName = editor.settings.forced_root_block;\n      }\n      if (blockName) {\n        textBlock = dom.create(blockName);\n        if (textBlock.tagName === editor.settings.forced_root_block) {\n          dom.setAttribs(textBlock, editor.settings.forced_root_block_attrs);\n        }\n        if (!NodeType.isBlock(contentNode.firstChild, blockElements)) {\n          fragment.appendChild(textBlock);\n        }\n      }\n      if (contentNode) {\n        while (node = contentNode.firstChild) {\n          var nodeName = node.nodeName;\n          if (!hasContentNode && (nodeName !== 'SPAN' || node.getAttribute('data-mce-type') !== 'bookmark')) {\n            hasContentNode = true;\n          }\n          if (NodeType.isBlock(node, blockElements)) {\n            fragment.appendChild(node);\n            textBlock = null;\n          } else {\n            if (blockName) {\n              if (!textBlock) {\n                textBlock = dom.create(blockName);\n                fragment.appendChild(textBlock);\n              }\n              textBlock.appendChild(node);\n            } else {\n              fragment.appendChild(node);\n            }\n          }\n        }\n      }\n      if (!editor.settings.forced_root_block) {\n        fragment.appendChild(dom.create('br'));\n      } else {\n        if (!hasContentNode && (!global$8.ie || global$8.ie > 10)) {\n          textBlock.appendChild(dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      return fragment;\n    };\n\n    var outdentedComposer = function (editor, entries) {\n      return map(entries, function (entry) {\n        var content = fromElements(entry.content);\n        return Element.fromDom(createTextBlock(editor, content.dom()));\n      });\n    };\n    var indentedComposer = function (editor, entries) {\n      normalizeEntries(entries);\n      return composeList(editor.contentDocument, entries).toArray();\n    };\n    var composeEntries = function (editor, entries) {\n      return bind(groupBy(entries, isIndented), function (entries) {\n        var groupIsIndented = head(entries).map(isIndented).getOr(false);\n        return groupIsIndented ? indentedComposer(editor, entries) : outdentedComposer(editor, entries);\n      });\n    };\n    var indentSelectedEntries = function (entries, indentation) {\n      each(filter(entries, isSelected), function (entry) {\n        return indentEntry(indentation, entry);\n      });\n    };\n    var getItemSelection = function (editor) {\n      var selectedListItems = map(Selection.getSelectedListItems(editor), Element.fromDom);\n      return lift2(find(selectedListItems, not(hasFirstChildList)), find(reverse(selectedListItems), not(hasFirstChildList)), function (start, end) {\n        return {\n          start: start,\n          end: end\n        };\n      });\n    };\n    var listsIndentation = function (editor, lists, indentation) {\n      var entrySets = parseLists(lists, getItemSelection(editor));\n      each(entrySets, function (entrySet) {\n        indentSelectedEntries(entrySet.entries, indentation);\n        before$1(entrySet.sourceList, composeEntries(editor, entrySet.entries));\n        remove(entrySet.sourceList);\n      });\n    };\n\n    var DOM$1 = global$6.DOM;\n    var splitList = function (editor, ul, li) {\n      var tmpRng, fragment, bookmarks, node, newBlock;\n      var removeAndKeepBookmarks = function (targetNode) {\n        global$5.each(bookmarks, function (node) {\n          targetNode.parentNode.insertBefore(node, li.parentNode);\n        });\n        DOM$1.remove(targetNode);\n      };\n      bookmarks = DOM$1.select('span[data-mce-type=\"bookmark\"]', ul);\n      newBlock = createTextBlock(editor, li);\n      tmpRng = DOM$1.createRng();\n      tmpRng.setStartAfter(li);\n      tmpRng.setEndAfter(ul);\n      fragment = tmpRng.extractContents();\n      for (node = fragment.firstChild; node; node = node.firstChild) {\n        if (node.nodeName === 'LI' && editor.dom.isEmpty(node)) {\n          DOM$1.remove(node);\n          break;\n        }\n      }\n      if (!editor.dom.isEmpty(fragment)) {\n        DOM$1.insertAfter(fragment, ul);\n      }\n      DOM$1.insertAfter(newBlock, ul);\n      if (NodeType.isEmpty(editor.dom, li.parentNode)) {\n        removeAndKeepBookmarks(li.parentNode);\n      }\n      DOM$1.remove(li);\n      if (NodeType.isEmpty(editor.dom, ul)) {\n        DOM$1.remove(ul);\n      }\n    };\n    var SplitList = { splitList: splitList };\n\n    var outdentDlItem = function (editor, item) {\n      if (is$1(item, 'dd')) {\n        mutate(item, 'dt');\n      } else if (is$1(item, 'dt')) {\n        parent(item).each(function (dl) {\n          return SplitList.splitList(editor, dl.dom(), item.dom());\n        });\n      }\n    };\n    var indentDlItem = function (item) {\n      if (is$1(item, 'dt')) {\n        mutate(item, 'dd');\n      }\n    };\n    var dlIndentation = function (editor, indentation, dlItems) {\n      if (indentation === 'Indent') {\n        each(dlItems, indentDlItem);\n      } else {\n        each(dlItems, function (item) {\n          return outdentDlItem(editor, item);\n        });\n      }\n    };\n\n    var selectionIndentation = function (editor, indentation) {\n      var lists = map(Selection.getSelectedListRoots(editor), Element.fromDom);\n      var dlItems = map(Selection.getSelectedDlItems(editor), Element.fromDom);\n      var isHandled = false;\n      if (lists.length || dlItems.length) {\n        var bookmark = editor.selection.getBookmark();\n        listsIndentation(editor, lists, indentation);\n        dlIndentation(editor, indentation, dlItems);\n        editor.selection.moveToBookmark(bookmark);\n        editor.selection.setRng(Range.normalizeRange(editor.selection.getRng()));\n        editor.nodeChanged();\n        isHandled = true;\n      }\n      return isHandled;\n    };\n    var indentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Indent');\n    };\n    var outdentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Outdent');\n    };\n    var flattenListSelection = function (editor) {\n      return selectionIndentation(editor, 'Flatten');\n    };\n\n    var updateListStyle = function (dom, el, detail) {\n      var type = detail['list-style-type'] ? detail['list-style-type'] : null;\n      dom.setStyle(el, 'list-style-type', type);\n    };\n    var setAttribs = function (elm, attrs) {\n      global$5.each(attrs, function (value, key) {\n        elm.setAttribute(key, value);\n      });\n    };\n    var updateListAttrs = function (dom, el, detail) {\n      setAttribs(el, detail['list-attributes']);\n      global$5.each(dom.select('li', el), function (li) {\n        setAttribs(li, detail['list-item-attributes']);\n      });\n    };\n    var updateListWithDetails = function (dom, el, detail) {\n      updateListStyle(dom, el, detail);\n      updateListAttrs(dom, el, detail);\n    };\n    var removeStyles = function (dom, element, styles) {\n      global$5.each(styles, function (style) {\n        var _a;\n        return dom.setStyle(element, (_a = {}, _a[style] = '', _a));\n      });\n    };\n    var getEndPointNode = function (editor, rng, start, root) {\n      var container, offset;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (container.nodeType === 1) {\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n      }\n      if (!start && NodeType.isBr(container.nextSibling)) {\n        container = container.nextSibling;\n      }\n      while (container.parentNode !== root) {\n        if (NodeType.isTextBlock(editor, container)) {\n          return container;\n        }\n        if (/^(TD|TH)$/.test(container.parentNode.nodeName)) {\n          return container;\n        }\n        container = container.parentNode;\n      }\n      return container;\n    };\n    var getSelectedTextBlocks = function (editor, rng, root) {\n      var textBlocks = [], dom = editor.dom;\n      var startNode = getEndPointNode(editor, rng, true, root);\n      var endNode = getEndPointNode(editor, rng, false, root);\n      var block;\n      var siblings = [];\n      for (var node = startNode; node; node = node.nextSibling) {\n        siblings.push(node);\n        if (node === endNode) {\n          break;\n        }\n      }\n      global$5.each(siblings, function (node) {\n        if (NodeType.isTextBlock(editor, node)) {\n          textBlocks.push(node);\n          block = null;\n          return;\n        }\n        if (dom.isBlock(node) || NodeType.isBr(node)) {\n          if (NodeType.isBr(node)) {\n            dom.remove(node);\n          }\n          block = null;\n          return;\n        }\n        var nextSibling = node.nextSibling;\n        if (global$4.isBookmarkNode(node)) {\n          if (NodeType.isTextBlock(editor, nextSibling) || !nextSibling && node.parentNode === root) {\n            block = null;\n            return;\n          }\n        }\n        if (!block) {\n          block = dom.create('p');\n          node.parentNode.insertBefore(block, node);\n          textBlocks.push(block);\n        }\n        block.appendChild(node);\n      });\n      return textBlocks;\n    };\n    var hasCompatibleStyle = function (dom, sib, detail) {\n      var sibStyle = dom.getStyle(sib, 'list-style-type');\n      var detailStyle = detail ? detail['list-style-type'] : '';\n      detailStyle = detailStyle === null ? '' : detailStyle;\n      return sibStyle === detailStyle;\n    };\n    var applyList = function (editor, listName, detail) {\n      if (detail === void 0) {\n        detail = {};\n      }\n      var rng = editor.selection.getRng(true);\n      var bookmark;\n      var listItemName = 'LI';\n      var root = Selection.getClosestListRootElm(editor, editor.selection.getStart(true));\n      var dom = editor.dom;\n      if (dom.getContentEditable(editor.selection.getNode()) === 'false') {\n        return;\n      }\n      listName = listName.toUpperCase();\n      if (listName === 'DL') {\n        listItemName = 'DT';\n      }\n      bookmark = Bookmark.createBookmark(rng);\n      global$5.each(getSelectedTextBlocks(editor, rng, root), function (block) {\n        var listBlock, sibling;\n        sibling = block.previousSibling;\n        if (sibling && NodeType.isListNode(sibling) && sibling.nodeName === listName && hasCompatibleStyle(dom, sibling, detail)) {\n          listBlock = sibling;\n          block = dom.rename(block, listItemName);\n          sibling.appendChild(block);\n        } else {\n          listBlock = dom.create(listName);\n          block.parentNode.insertBefore(listBlock, block);\n          listBlock.appendChild(block);\n          block = dom.rename(block, listItemName);\n        }\n        removeStyles(dom, block, [\n          'margin',\n          'margin-right',\n          'margin-bottom',\n          'margin-left',\n          'margin-top',\n          'padding',\n          'padding-right',\n          'padding-bottom',\n          'padding-left',\n          'padding-top'\n        ]);\n        updateListWithDetails(dom, listBlock, detail);\n        mergeWithAdjacentLists(editor.dom, listBlock);\n      });\n      editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n    };\n    var isValidLists = function (list1, list2) {\n      return list1 && list2 && NodeType.isListNode(list1) && list1.nodeName === list2.nodeName;\n    };\n    var hasSameListStyle = function (dom, list1, list2) {\n      var targetStyle = dom.getStyle(list1, 'list-style-type', true);\n      var style = dom.getStyle(list2, 'list-style-type', true);\n      return targetStyle === style;\n    };\n    var hasSameClasses = function (elm1, elm2) {\n      return elm1.className === elm2.className;\n    };\n    var shouldMerge = function (dom, list1, list2) {\n      return isValidLists(list1, list2) && hasSameListStyle(dom, list1, list2) && hasSameClasses(list1, list2);\n    };\n    var mergeWithAdjacentLists = function (dom, listBlock) {\n      var sibling, node;\n      sibling = listBlock.nextSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.firstChild) {\n          listBlock.appendChild(node);\n        }\n        dom.remove(sibling);\n      }\n      sibling = listBlock.previousSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.lastChild) {\n          listBlock.insertBefore(node, listBlock.firstChild);\n        }\n        dom.remove(sibling);\n      }\n    };\n    var updateList = function (dom, list, listName, detail) {\n      if (list.nodeName !== listName) {\n        var newList = dom.rename(list, listName);\n        updateListWithDetails(dom, newList, detail);\n      } else {\n        updateListWithDetails(dom, list, detail);\n      }\n    };\n    var toggleMultipleLists = function (editor, parentList, lists, listName, detail) {\n      if (parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n        flattenListSelection(editor);\n      } else {\n        var bookmark = Bookmark.createBookmark(editor.selection.getRng(true));\n        global$5.each([parentList].concat(lists), function (elm) {\n          updateList(editor.dom, elm, listName, detail);\n        });\n        editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n      }\n    };\n    var hasListStyleDetail = function (detail) {\n      return 'list-style-type' in detail;\n    };\n    var toggleSingleList = function (editor, parentList, listName, detail) {\n      if (parentList === editor.getBody()) {\n        return;\n      }\n      if (parentList) {\n        if (parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n          flattenListSelection(editor);\n        } else {\n          var bookmark = Bookmark.createBookmark(editor.selection.getRng(true));\n          updateListWithDetails(editor.dom, parentList, detail);\n          mergeWithAdjacentLists(editor.dom, editor.dom.rename(parentList, listName));\n          editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n        }\n      } else {\n        applyList(editor, listName, detail);\n      }\n    };\n    var toggleList = function (editor, listName, detail) {\n      var parentList = Selection.getParentList(editor);\n      var selectedSubLists = Selection.getSelectedSubLists(editor);\n      detail = detail ? detail : {};\n      if (parentList && selectedSubLists.length > 0) {\n        toggleMultipleLists(editor, parentList, selectedSubLists, listName, detail);\n      } else {\n        toggleSingleList(editor, parentList, listName, detail);\n      }\n    };\n    var ToggleList = {\n      toggleList: toggleList,\n      mergeWithAdjacentLists: mergeWithAdjacentLists\n    };\n\n    var DOM$2 = global$6.DOM;\n    var normalizeList = function (dom, ul) {\n      var sibling;\n      var parentNode = ul.parentNode;\n      if (parentNode.nodeName === 'LI' && parentNode.firstChild === ul) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n          if (NodeType.isEmpty(dom, parentNode)) {\n            DOM$2.remove(parentNode);\n          }\n        } else {\n          DOM$2.setStyle(parentNode, 'listStyleType', 'none');\n        }\n      }\n      if (NodeType.isListNode(parentNode)) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n        }\n      }\n    };\n    var normalizeLists = function (dom, element) {\n      global$5.each(global$5.grep(dom.select('ol,ul', element)), function (ul) {\n        normalizeList(dom, ul);\n      });\n    };\n    var NormalizeLists = {\n      normalizeList: normalizeList,\n      normalizeLists: normalizeLists\n    };\n\n    var findNextCaretContainer = function (editor, rng, isForward, root) {\n      var node = rng.startContainer;\n      var offset = rng.startOffset;\n      var nonEmptyBlocks, walker;\n      if (node.nodeType === 3 && (isForward ? offset < node.data.length : offset > 0)) {\n        return node;\n      }\n      nonEmptyBlocks = editor.schema.getNonEmptyElements();\n      if (node.nodeType === 1) {\n        node = global$1.getNode(node, offset);\n      }\n      walker = new global$2(node, root);\n      if (isForward) {\n        if (NodeType.isBogusBr(editor.dom, node)) {\n          walker.next();\n        }\n      }\n      while (node = walker[isForward ? 'next' : 'prev2']()) {\n        if (node.nodeName === 'LI' && !node.hasChildNodes()) {\n          return node;\n        }\n        if (nonEmptyBlocks[node.nodeName]) {\n          return node;\n        }\n        if (node.nodeType === 3 && node.data.length > 0) {\n          return node;\n        }\n      }\n    };\n    var hasOnlyOneBlockChild = function (dom, elm) {\n      var childNodes = elm.childNodes;\n      return childNodes.length === 1 && !NodeType.isListNode(childNodes[0]) && dom.isBlock(childNodes[0]);\n    };\n    var unwrapSingleBlockChild = function (dom, elm) {\n      if (hasOnlyOneBlockChild(dom, elm)) {\n        dom.remove(elm.firstChild, true);\n      }\n    };\n    var moveChildren = function (dom, fromElm, toElm) {\n      var node, targetElm;\n      targetElm = hasOnlyOneBlockChild(dom, toElm) ? toElm.firstChild : toElm;\n      unwrapSingleBlockChild(dom, fromElm);\n      if (!NodeType.isEmpty(dom, fromElm, true)) {\n        while (node = fromElm.firstChild) {\n          targetElm.appendChild(node);\n        }\n      }\n    };\n    var mergeLiElements = function (dom, fromElm, toElm) {\n      var node, listNode;\n      var ul = fromElm.parentNode;\n      if (!NodeType.isChildOfBody(dom, fromElm) || !NodeType.isChildOfBody(dom, toElm)) {\n        return;\n      }\n      if (NodeType.isListNode(toElm.lastChild)) {\n        listNode = toElm.lastChild;\n      }\n      if (ul === toElm.lastChild) {\n        if (NodeType.isBr(ul.previousSibling)) {\n          dom.remove(ul.previousSibling);\n        }\n      }\n      node = toElm.lastChild;\n      if (node && NodeType.isBr(node) && fromElm.hasChildNodes()) {\n        dom.remove(node);\n      }\n      if (NodeType.isEmpty(dom, toElm, true)) {\n        dom.$(toElm).empty();\n      }\n      moveChildren(dom, fromElm, toElm);\n      if (listNode) {\n        toElm.appendChild(listNode);\n      }\n      var contains = contains$1(Element.fromDom(toElm), Element.fromDom(fromElm));\n      var nestedLists = contains ? dom.getParents(fromElm, NodeType.isListNode, toElm) : [];\n      dom.remove(fromElm);\n      each(nestedLists, function (list) {\n        if (NodeType.isEmpty(dom, list) && list !== dom.getRoot()) {\n          dom.remove(list);\n        }\n      });\n    };\n    var mergeIntoEmptyLi = function (editor, fromLi, toLi) {\n      editor.dom.$(toLi).empty();\n      mergeLiElements(editor.dom, fromLi, toLi);\n      editor.selection.setCursorLocation(toLi);\n    };\n    var mergeForward = function (editor, rng, fromLi, toLi) {\n      var dom = editor.dom;\n      if (dom.isEmpty(toLi)) {\n        mergeIntoEmptyLi(editor, fromLi, toLi);\n      } else {\n        var bookmark = Bookmark.createBookmark(rng);\n        mergeLiElements(dom, fromLi, toLi);\n        editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n      }\n    };\n    var mergeBackward = function (editor, rng, fromLi, toLi) {\n      var bookmark = Bookmark.createBookmark(rng);\n      mergeLiElements(editor.dom, fromLi, toLi);\n      var resolvedBookmark = Bookmark.resolveBookmark(bookmark);\n      editor.selection.setRng(resolvedBookmark);\n    };\n    var backspaceDeleteFromListToListCaret = function (editor, isForward) {\n      var dom = editor.dom, selection = editor.selection;\n      var selectionStartElm = selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var li = dom.getParent(selection.getStart(), 'LI', root);\n      var ul, rng, otherLi;\n      if (li) {\n        ul = li.parentNode;\n        if (ul === editor.getBody() && NodeType.isEmpty(dom, ul)) {\n          return true;\n        }\n        rng = Range.normalizeRange(selection.getRng(true));\n        otherLi = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n        if (otherLi && otherLi !== li) {\n          if (isForward) {\n            mergeForward(editor, rng, otherLi, li);\n          } else {\n            mergeBackward(editor, rng, li, otherLi);\n          }\n          return true;\n        } else if (!otherLi) {\n          if (!isForward) {\n            flattenListSelection(editor);\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var removeBlock = function (dom, block, root) {\n      var parentBlock = dom.getParent(block.parentNode, dom.isBlock, root);\n      dom.remove(block);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        dom.remove(parentBlock);\n      }\n    };\n    var backspaceDeleteIntoListCaret = function (editor, isForward) {\n      var dom = editor.dom;\n      var selectionStartElm = editor.selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var block = dom.getParent(selectionStartElm, dom.isBlock, root);\n      if (block && dom.isEmpty(block)) {\n        var rng = Range.normalizeRange(editor.selection.getRng(true));\n        var otherLi_1 = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n        if (otherLi_1) {\n          editor.undoManager.transact(function () {\n            removeBlock(dom, block, root);\n            ToggleList.mergeWithAdjacentLists(dom, otherLi_1.parentNode);\n            editor.selection.select(otherLi_1, true);\n            editor.selection.collapse(isForward);\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var backspaceDeleteCaret = function (editor, isForward) {\n      return backspaceDeleteFromListToListCaret(editor, isForward) || backspaceDeleteIntoListCaret(editor, isForward);\n    };\n    var backspaceDeleteRange = function (editor) {\n      var selectionStartElm = editor.selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var startListParent = editor.dom.getParent(selectionStartElm, 'LI,DT,DD', root);\n      if (startListParent || Selection.getSelectedListItems(editor).length > 0) {\n        editor.undoManager.transact(function () {\n          editor.execCommand('Delete');\n          NormalizeLists.normalizeLists(editor.dom, editor.getBody());\n        });\n        return true;\n      }\n      return false;\n    };\n    var backspaceDelete = function (editor, isForward) {\n      return editor.selection.isCollapsed() ? backspaceDeleteCaret(editor, isForward) : backspaceDeleteRange(editor);\n    };\n    var setup = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode === global$3.BACKSPACE) {\n          if (backspaceDelete(editor, false)) {\n            e.preventDefault();\n          }\n        } else if (e.keyCode === global$3.DELETE) {\n          if (backspaceDelete(editor, true)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n    var Delete = {\n      setup: setup,\n      backspaceDelete: backspaceDelete\n    };\n\n    var get = function (editor) {\n      return {\n        backspaceDelete: function (isForward) {\n          Delete.backspaceDelete(editor, isForward);\n        }\n      };\n    };\n    var Api = { get: get };\n\n    var queryListCommandState = function (editor, listName) {\n      return function () {\n        var parentList = editor.dom.getParent(editor.selection.getStart(), 'UL,OL,DL');\n        return parentList && parentList.nodeName === listName;\n      };\n    };\n    var register = function (editor) {\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd === 'indent') {\n          indentListSelection(editor);\n        } else if (cmd === 'outdent') {\n          outdentListSelection(editor);\n        }\n      });\n      editor.addCommand('InsertUnorderedList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'UL', detail);\n      });\n      editor.addCommand('InsertOrderedList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'OL', detail);\n      });\n      editor.addCommand('InsertDefinitionList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'DL', detail);\n      });\n      editor.addCommand('RemoveList', function () {\n        flattenListSelection(editor);\n      });\n      editor.addQueryStateHandler('InsertUnorderedList', queryListCommandState(editor, 'UL'));\n      editor.addQueryStateHandler('InsertOrderedList', queryListCommandState(editor, 'OL'));\n      editor.addQueryStateHandler('InsertDefinitionList', queryListCommandState(editor, 'DL'));\n    };\n    var Commands = { register: register };\n\n    var shouldIndentOnTab = function (editor) {\n      return editor.getParam('lists_indent_on_tab', true);\n    };\n    var Settings = { shouldIndentOnTab: shouldIndentOnTab };\n\n    var setupTabKey = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode !== global$3.TAB || global$3.metaKeyPressed(e)) {\n          return;\n        }\n        editor.undoManager.transact(function () {\n          if (e.shiftKey ? outdentListSelection(editor) : indentListSelection(editor)) {\n            e.preventDefault();\n          }\n        });\n      });\n    };\n    var setup$1 = function (editor) {\n      if (Settings.shouldIndentOnTab(editor)) {\n        setupTabKey(editor);\n      }\n      Delete.setup(editor);\n    };\n    var Keyboard = { setup: setup$1 };\n\n    var findIndex = function (list, predicate) {\n      for (var index = 0; index < list.length; index++) {\n        var element = list[index];\n        if (predicate(element)) {\n          return index;\n        }\n      }\n      return -1;\n    };\n    var listState = function (editor, listName) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('NodeChange', function (e) {\n          var tableCellIndex = findIndex(e.parents, NodeType.isTableCellNode);\n          var parents = tableCellIndex !== -1 ? e.parents.slice(0, tableCellIndex) : e.parents;\n          var lists = global$5.grep(parents, NodeType.isListNode);\n          ctrl.active(lists.length > 0 && lists[0].nodeName === listName);\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      var hasPlugin = function (editor, plugin) {\n        var plugins = editor.settings.plugins ? editor.settings.plugins : '';\n        return global$5.inArray(plugins.split(/[ ,]/), plugin) !== -1;\n      };\n      if (!hasPlugin(editor, 'advlist')) {\n        editor.addButton('numlist', {\n          active: false,\n          title: 'Numbered list',\n          cmd: 'InsertOrderedList',\n          onPostRender: listState(editor, 'OL')\n        });\n        editor.addButton('bullist', {\n          active: false,\n          title: 'Bullet list',\n          cmd: 'InsertUnorderedList',\n          onPostRender: listState(editor, 'UL')\n        });\n      }\n      editor.addButton('indent', {\n        icon: 'indent',\n        title: 'Increase indent',\n        cmd: 'Indent'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('lists', function (editor) {\n      Keyboard.setup(editor);\n      Buttons.register(editor);\n      Commands.register(editor);\n      return Api.get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","(function () {\nvar autolink = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getAutoLinkPattern = function (editor) {\n      return editor.getParam('autolink_pattern', /^(https?:\\/\\/|ssh:\\/\\/|ftp:\\/\\/|file:\\/|www\\.|(?:mailto:)?[A-Z0-9._%+\\-]+@)(.+)$/i);\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target', '');\n    };\n    var Settings = {\n      getAutoLinkPattern: getAutoLinkPattern,\n      getDefaultLinkTarget: getDefaultLinkTarget\n    };\n\n    var rangeEqualsDelimiterOrSpace = function (rangeString, delimiter) {\n      return rangeString === delimiter || rangeString === ' ' || rangeString.charCodeAt(0) === 160;\n    };\n    var handleEclipse = function (editor) {\n      parseCurrentLine(editor, -1, '(');\n    };\n    var handleSpacebar = function (editor) {\n      parseCurrentLine(editor, 0, '');\n    };\n    var handleEnter = function (editor) {\n      parseCurrentLine(editor, -1, '');\n    };\n    var scopeIndex = function (container, index) {\n      if (index < 0) {\n        index = 0;\n      }\n      if (container.nodeType === 3) {\n        var len = container.data.length;\n        if (index > len) {\n          index = len;\n        }\n      }\n      return index;\n    };\n    var setStart = function (rng, container, offset) {\n      if (container.nodeType !== 1 || container.hasChildNodes()) {\n        rng.setStart(container, scopeIndex(container, offset));\n      } else {\n        rng.setStartBefore(container);\n      }\n    };\n    var setEnd = function (rng, container, offset) {\n      if (container.nodeType !== 1 || container.hasChildNodes()) {\n        rng.setEnd(container, scopeIndex(container, offset));\n      } else {\n        rng.setEndAfter(container);\n      }\n    };\n    var parseCurrentLine = function (editor, endOffset, delimiter) {\n      var rng, end, start, endContainer, bookmark, text, matches, prev, len, rngText;\n      var autoLinkPattern = Settings.getAutoLinkPattern(editor);\n      var defaultLinkTarget = Settings.getDefaultLinkTarget(editor);\n      if (editor.selection.getNode().tagName === 'A') {\n        return;\n      }\n      rng = editor.selection.getRng(true).cloneRange();\n      if (rng.startOffset < 5) {\n        prev = rng.endContainer.previousSibling;\n        if (!prev) {\n          if (!rng.endContainer.firstChild || !rng.endContainer.firstChild.nextSibling) {\n            return;\n          }\n          prev = rng.endContainer.firstChild.nextSibling;\n        }\n        len = prev.length;\n        setStart(rng, prev, len);\n        setEnd(rng, prev, len);\n        if (rng.endOffset < 5) {\n          return;\n        }\n        end = rng.endOffset;\n        endContainer = prev;\n      } else {\n        endContainer = rng.endContainer;\n        if (endContainer.nodeType !== 3 && endContainer.firstChild) {\n          while (endContainer.nodeType !== 3 && endContainer.firstChild) {\n            endContainer = endContainer.firstChild;\n          }\n          if (endContainer.nodeType === 3) {\n            setStart(rng, endContainer, 0);\n            setEnd(rng, endContainer, endContainer.nodeValue.length);\n          }\n        }\n        if (rng.endOffset === 1) {\n          end = 2;\n        } else {\n          end = rng.endOffset - 1 - endOffset;\n        }\n      }\n      start = end;\n      do {\n        setStart(rng, endContainer, end >= 2 ? end - 2 : 0);\n        setEnd(rng, endContainer, end >= 1 ? end - 1 : 0);\n        end -= 1;\n        rngText = rng.toString();\n      } while (rngText !== ' ' && rngText !== '' && rngText.charCodeAt(0) !== 160 && end - 2 >= 0 && rngText !== delimiter);\n      if (rangeEqualsDelimiterOrSpace(rng.toString(), delimiter)) {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n        end += 1;\n      } else if (rng.startOffset === 0) {\n        setStart(rng, endContainer, 0);\n        setEnd(rng, endContainer, start);\n      } else {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n      }\n      text = rng.toString();\n      if (text.charAt(text.length - 1) === '.') {\n        setEnd(rng, endContainer, start - 1);\n      }\n      text = rng.toString().trim();\n      matches = text.match(autoLinkPattern);\n      if (matches) {\n        if (matches[1] === 'www.') {\n          matches[1] = 'http://www.';\n        } else if (/@$/.test(matches[1]) && !/^mailto:/.test(matches[1])) {\n          matches[1] = 'mailto:' + matches[1];\n        }\n        bookmark = editor.selection.getBookmark();\n        editor.selection.setRng(rng);\n        editor.execCommand('createlink', false, matches[1] + matches[2]);\n        if (defaultLinkTarget) {\n          editor.dom.setAttrib(editor.selection.getNode(), 'target', defaultLinkTarget);\n        }\n        editor.selection.moveToBookmark(bookmark);\n        editor.nodeChanged();\n      }\n    };\n    var setup = function (editor) {\n      var autoUrlDetectState;\n      editor.on('keydown', function (e) {\n        if (e.keyCode === 13) {\n          return handleEnter(editor);\n        }\n      });\n      if (global$1.ie) {\n        editor.on('focus', function () {\n          if (!autoUrlDetectState) {\n            autoUrlDetectState = true;\n            try {\n              editor.execCommand('AutoUrlDetect', false, true);\n            } catch (ex) {\n            }\n          }\n        });\n        return;\n      }\n      editor.on('keypress', function (e) {\n        if (e.keyCode === 41) {\n          return handleEclipse(editor);\n        }\n      });\n      editor.on('keyup', function (e) {\n        if (e.keyCode === 32) {\n          return handleSpacebar(editor);\n        }\n      });\n    };\n    var Keys = { setup: setup };\n\n    global.add('autolink', function (editor) {\n      Keys.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar searchreplace = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    function isContentEditableFalse(node) {\n      return node && node.nodeType === 1 && node.contentEditable === 'false';\n    }\n    function findAndReplaceDOMText(regex, node, replacementNode, captureGroup, schema) {\n      var m;\n      var matches = [];\n      var text, count = 0, doc;\n      var blockElementsMap, hiddenTextElementsMap, shortEndedElementsMap;\n      doc = node.ownerDocument;\n      blockElementsMap = schema.getBlockElements();\n      hiddenTextElementsMap = schema.getWhiteSpaceElements();\n      shortEndedElementsMap = schema.getShortEndedElements();\n      function getMatchIndexes(m, captureGroup) {\n        captureGroup = captureGroup || 0;\n        if (!m[0]) {\n          throw new Error('findAndReplaceDOMText cannot handle zero-length matches');\n        }\n        var index = m.index;\n        if (captureGroup > 0) {\n          var cg = m[captureGroup];\n          if (!cg) {\n            throw new Error('Invalid capture group');\n          }\n          index += m[0].indexOf(cg);\n          m[0] = cg;\n        }\n        return [\n          index,\n          index + m[0].length,\n          [m[0]]\n        ];\n      }\n      function getText(node) {\n        var txt;\n        if (node.nodeType === 3) {\n          return node.data;\n        }\n        if (hiddenTextElementsMap[node.nodeName] && !blockElementsMap[node.nodeName]) {\n          return '';\n        }\n        txt = '';\n        if (isContentEditableFalse(node)) {\n          return '\\n';\n        }\n        if (blockElementsMap[node.nodeName] || shortEndedElementsMap[node.nodeName]) {\n          txt += '\\n';\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.nextSibling);\n        }\n        return txt;\n      }\n      function stepThroughMatches(node, matches, replaceFn) {\n        var startNode, endNode, startNodeIndex, endNodeIndex, innerNodes = [], atIndex = 0, curNode = node, matchLocation = matches.shift(), matchIndex = 0;\n        out:\n          while (true) {\n            if (blockElementsMap[curNode.nodeName] || shortEndedElementsMap[curNode.nodeName] || isContentEditableFalse(curNode)) {\n              atIndex++;\n            }\n            if (curNode.nodeType === 3) {\n              if (!endNode && curNode.length + atIndex >= matchLocation[1]) {\n                endNode = curNode;\n                endNodeIndex = matchLocation[1] - atIndex;\n              } else if (startNode) {\n                innerNodes.push(curNode);\n              }\n              if (!startNode && curNode.length + atIndex > matchLocation[0]) {\n                startNode = curNode;\n                startNodeIndex = matchLocation[0] - atIndex;\n              }\n              atIndex += curNode.length;\n            }\n            if (startNode && endNode) {\n              curNode = replaceFn({\n                startNode: startNode,\n                startNodeIndex: startNodeIndex,\n                endNode: endNode,\n                endNodeIndex: endNodeIndex,\n                innerNodes: innerNodes,\n                match: matchLocation[2],\n                matchIndex: matchIndex\n              });\n              atIndex -= endNode.length - endNodeIndex;\n              startNode = null;\n              endNode = null;\n              innerNodes = [];\n              matchLocation = matches.shift();\n              matchIndex++;\n              if (!matchLocation) {\n                break;\n              }\n            } else if ((!hiddenTextElementsMap[curNode.nodeName] || blockElementsMap[curNode.nodeName]) && curNode.firstChild) {\n              if (!isContentEditableFalse(curNode)) {\n                curNode = curNode.firstChild;\n                continue;\n              }\n            } else if (curNode.nextSibling) {\n              curNode = curNode.nextSibling;\n              continue;\n            }\n            while (true) {\n              if (curNode.nextSibling) {\n                curNode = curNode.nextSibling;\n                break;\n              } else if (curNode.parentNode !== node) {\n                curNode = curNode.parentNode;\n              } else {\n                break out;\n              }\n            }\n          }\n      }\n      function genReplacer(nodeName) {\n        var makeReplacementNode;\n        if (typeof nodeName !== 'function') {\n          var stencilNode_1 = nodeName.nodeType ? nodeName : doc.createElement(nodeName);\n          makeReplacementNode = function (fill, matchIndex) {\n            var clone = stencilNode_1.cloneNode(false);\n            clone.setAttribute('data-mce-index', matchIndex);\n            if (fill) {\n              clone.appendChild(doc.createTextNode(fill));\n            }\n            return clone;\n          };\n        } else {\n          makeReplacementNode = nodeName;\n        }\n        return function (range) {\n          var before;\n          var after;\n          var parentNode;\n          var startNode = range.startNode;\n          var endNode = range.endNode;\n          var matchIndex = range.matchIndex;\n          if (startNode === endNode) {\n            var node_1 = startNode;\n            parentNode = node_1.parentNode;\n            if (range.startNodeIndex > 0) {\n              before = doc.createTextNode(node_1.data.substring(0, range.startNodeIndex));\n              parentNode.insertBefore(before, node_1);\n            }\n            var el = makeReplacementNode(range.match[0], matchIndex);\n            parentNode.insertBefore(el, node_1);\n            if (range.endNodeIndex < node_1.length) {\n              after = doc.createTextNode(node_1.data.substring(range.endNodeIndex));\n              parentNode.insertBefore(after, node_1);\n            }\n            node_1.parentNode.removeChild(node_1);\n            return el;\n          }\n          before = doc.createTextNode(startNode.data.substring(0, range.startNodeIndex));\n          after = doc.createTextNode(endNode.data.substring(range.endNodeIndex));\n          var elA = makeReplacementNode(startNode.data.substring(range.startNodeIndex), matchIndex);\n          for (var i = 0, l = range.innerNodes.length; i < l; ++i) {\n            var innerNode = range.innerNodes[i];\n            var innerEl = makeReplacementNode(innerNode.data, matchIndex);\n            innerNode.parentNode.replaceChild(innerEl, innerNode);\n          }\n          var elB = makeReplacementNode(endNode.data.substring(0, range.endNodeIndex), matchIndex);\n          parentNode = startNode.parentNode;\n          parentNode.insertBefore(before, startNode);\n          parentNode.insertBefore(elA, startNode);\n          parentNode.removeChild(startNode);\n          parentNode = endNode.parentNode;\n          parentNode.insertBefore(elB, endNode);\n          parentNode.insertBefore(after, endNode);\n          parentNode.removeChild(endNode);\n          return elB;\n        };\n      }\n      text = getText(node);\n      if (!text) {\n        return;\n      }\n      if (regex.global) {\n        while (m = regex.exec(text)) {\n          matches.push(getMatchIndexes(m, captureGroup));\n        }\n      } else {\n        m = text.match(regex);\n        matches.push(getMatchIndexes(m, captureGroup));\n      }\n      if (matches.length) {\n        count = matches.length;\n        stepThroughMatches(node, matches, genReplacer(replacementNode));\n      }\n      return count;\n    }\n    var FindReplaceText = { findAndReplaceDOMText: findAndReplaceDOMText };\n\n    var getElmIndex = function (elm) {\n      var value = elm.getAttribute('data-mce-index');\n      if (typeof value === 'number') {\n        return '' + value;\n      }\n      return value;\n    };\n    var markAllMatches = function (editor, currentIndexState, regex) {\n      var node, marker;\n      marker = editor.dom.create('span', { 'data-mce-bogus': 1 });\n      marker.className = 'mce-match-marker';\n      node = editor.getBody();\n      done(editor, currentIndexState, false);\n      return FindReplaceText.findAndReplaceDOMText(regex, node, marker, false, editor.schema);\n    };\n    var unwrap = function (node) {\n      var parentNode = node.parentNode;\n      if (node.firstChild) {\n        parentNode.insertBefore(node.firstChild, node);\n      }\n      node.parentNode.removeChild(node);\n    };\n    var findSpansByIndex = function (editor, index) {\n      var nodes;\n      var spans = [];\n      nodes = global$1.toArray(editor.getBody().getElementsByTagName('span'));\n      if (nodes.length) {\n        for (var i = 0; i < nodes.length; i++) {\n          var nodeIndex = getElmIndex(nodes[i]);\n          if (nodeIndex === null || !nodeIndex.length) {\n            continue;\n          }\n          if (nodeIndex === index.toString()) {\n            spans.push(nodes[i]);\n          }\n        }\n      }\n      return spans;\n    };\n    var moveSelection = function (editor, currentIndexState, forward) {\n      var testIndex = currentIndexState.get();\n      var dom = editor.dom;\n      forward = forward !== false;\n      if (forward) {\n        testIndex++;\n      } else {\n        testIndex--;\n      }\n      dom.removeClass(findSpansByIndex(editor, currentIndexState.get()), 'mce-match-marker-selected');\n      var spans = findSpansByIndex(editor, testIndex);\n      if (spans.length) {\n        dom.addClass(findSpansByIndex(editor, testIndex), 'mce-match-marker-selected');\n        editor.selection.scrollIntoView(spans[0]);\n        return testIndex;\n      }\n      return -1;\n    };\n    var removeNode = function (dom, node) {\n      var parent = node.parentNode;\n      dom.remove(node);\n      if (dom.isEmpty(parent)) {\n        dom.remove(parent);\n      }\n    };\n    var find = function (editor, currentIndexState, text, matchCase, wholeWord) {\n      text = text.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n      text = text.replace(/\\s/g, '[^\\\\S\\\\r\\\\n]');\n      text = wholeWord ? '\\\\b' + text + '\\\\b' : text;\n      var count = markAllMatches(editor, currentIndexState, new RegExp(text, matchCase ? 'g' : 'gi'));\n      if (count) {\n        currentIndexState.set(-1);\n        currentIndexState.set(moveSelection(editor, currentIndexState, true));\n      }\n      return count;\n    };\n    var next = function (editor, currentIndexState) {\n      var index = moveSelection(editor, currentIndexState, true);\n      if (index !== -1) {\n        currentIndexState.set(index);\n      }\n    };\n    var prev = function (editor, currentIndexState) {\n      var index = moveSelection(editor, currentIndexState, false);\n      if (index !== -1) {\n        currentIndexState.set(index);\n      }\n    };\n    var isMatchSpan = function (node) {\n      var matchIndex = getElmIndex(node);\n      return matchIndex !== null && matchIndex.length > 0;\n    };\n    var replace = function (editor, currentIndexState, text, forward, all) {\n      var i, nodes, node, matchIndex, currentMatchIndex, nextIndex = currentIndexState.get(), hasMore;\n      forward = forward !== false;\n      node = editor.getBody();\n      nodes = global$1.grep(global$1.toArray(node.getElementsByTagName('span')), isMatchSpan);\n      for (i = 0; i < nodes.length; i++) {\n        var nodeIndex = getElmIndex(nodes[i]);\n        matchIndex = currentMatchIndex = parseInt(nodeIndex, 10);\n        if (all || matchIndex === currentIndexState.get()) {\n          if (text.length) {\n            nodes[i].firstChild.nodeValue = text;\n            unwrap(nodes[i]);\n          } else {\n            removeNode(editor.dom, nodes[i]);\n          }\n          while (nodes[++i]) {\n            matchIndex = parseInt(getElmIndex(nodes[i]), 10);\n            if (matchIndex === currentMatchIndex) {\n              removeNode(editor.dom, nodes[i]);\n            } else {\n              i--;\n              break;\n            }\n          }\n          if (forward) {\n            nextIndex--;\n          }\n        } else if (currentMatchIndex > currentIndexState.get()) {\n          nodes[i].setAttribute('data-mce-index', currentMatchIndex - 1);\n        }\n      }\n      currentIndexState.set(nextIndex);\n      if (forward) {\n        hasMore = hasNext(editor, currentIndexState);\n        next(editor, currentIndexState);\n      } else {\n        hasMore = hasPrev(editor, currentIndexState);\n        prev(editor, currentIndexState);\n      }\n      return !all && hasMore;\n    };\n    var done = function (editor, currentIndexState, keepEditorSelection) {\n      var i, nodes, startContainer, endContainer;\n      nodes = global$1.toArray(editor.getBody().getElementsByTagName('span'));\n      for (i = 0; i < nodes.length; i++) {\n        var nodeIndex = getElmIndex(nodes[i]);\n        if (nodeIndex !== null && nodeIndex.length) {\n          if (nodeIndex === currentIndexState.get().toString()) {\n            if (!startContainer) {\n              startContainer = nodes[i].firstChild;\n            }\n            endContainer = nodes[i].firstChild;\n          }\n          unwrap(nodes[i]);\n        }\n      }\n      if (startContainer && endContainer) {\n        var rng = editor.dom.createRng();\n        rng.setStart(startContainer, 0);\n        rng.setEnd(endContainer, endContainer.data.length);\n        if (keepEditorSelection !== false) {\n          editor.selection.setRng(rng);\n        }\n        return rng;\n      }\n    };\n    var hasNext = function (editor, currentIndexState) {\n      return findSpansByIndex(editor, currentIndexState.get() + 1).length > 0;\n    };\n    var hasPrev = function (editor, currentIndexState) {\n      return findSpansByIndex(editor, currentIndexState.get() - 1).length > 0;\n    };\n    var Actions = {\n      done: done,\n      find: find,\n      next: next,\n      prev: prev,\n      replace: replace,\n      hasNext: hasNext,\n      hasPrev: hasPrev\n    };\n\n    var get = function (editor, currentIndexState) {\n      var done = function (keepEditorSelection) {\n        return Actions.done(editor, currentIndexState, keepEditorSelection);\n      };\n      var find = function (text, matchCase, wholeWord) {\n        return Actions.find(editor, currentIndexState, text, matchCase, wholeWord);\n      };\n      var next = function () {\n        return Actions.next(editor, currentIndexState);\n      };\n      var prev = function () {\n        return Actions.prev(editor, currentIndexState);\n      };\n      var replace = function (text, forward, all) {\n        return Actions.replace(editor, currentIndexState, text, forward, all);\n      };\n      return {\n        done: done,\n        find: find,\n        next: next,\n        prev: prev,\n        replace: replace\n      };\n    };\n    var Api = { get: get };\n\n    var open = function (editor, currentIndexState) {\n      var last = {}, selectedText;\n      editor.undoManager.add();\n      selectedText = global$1.trim(editor.selection.getContent({ format: 'text' }));\n      function updateButtonStates() {\n        win.statusbar.find('#next').disabled(Actions.hasNext(editor, currentIndexState) === false);\n        win.statusbar.find('#prev').disabled(Actions.hasPrev(editor, currentIndexState) === false);\n      }\n      function notFoundAlert() {\n        editor.windowManager.alert('Could not find the specified string.', function () {\n          win.find('#find')[0].focus();\n        });\n      }\n      var win = editor.windowManager.open({\n        layout: 'flex',\n        pack: 'center',\n        align: 'center',\n        onClose: function () {\n          editor.focus();\n          Actions.done(editor, currentIndexState);\n          editor.undoManager.add();\n        },\n        onSubmit: function (e) {\n          var count, caseState, text, wholeWord;\n          e.preventDefault();\n          caseState = win.find('#case').checked();\n          wholeWord = win.find('#words').checked();\n          text = win.find('#find').value();\n          if (!text.length) {\n            Actions.done(editor, currentIndexState, false);\n            win.statusbar.items().slice(1).disabled(true);\n            return;\n          }\n          if (last.text === text && last.caseState === caseState && last.wholeWord === wholeWord) {\n            if (!Actions.hasNext(editor, currentIndexState)) {\n              notFoundAlert();\n              return;\n            }\n            Actions.next(editor, currentIndexState);\n            updateButtonStates();\n            return;\n          }\n          count = Actions.find(editor, currentIndexState, text, caseState, wholeWord);\n          if (!count) {\n            notFoundAlert();\n          }\n          win.statusbar.items().slice(1).disabled(count === 0);\n          updateButtonStates();\n          last = {\n            text: text,\n            caseState: caseState,\n            wholeWord: wholeWord\n          };\n        },\n        buttons: [\n          {\n            text: 'Find',\n            subtype: 'primary',\n            onclick: function () {\n              win.submit();\n            }\n          },\n          {\n            text: 'Replace',\n            disabled: true,\n            onclick: function () {\n              if (!Actions.replace(editor, currentIndexState, win.find('#replace').value())) {\n                win.statusbar.items().slice(1).disabled(true);\n                currentIndexState.set(-1);\n                last = {};\n              }\n            }\n          },\n          {\n            text: 'Replace all',\n            disabled: true,\n            onclick: function () {\n              Actions.replace(editor, currentIndexState, win.find('#replace').value(), true, true);\n              win.statusbar.items().slice(1).disabled(true);\n              last = {};\n            }\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            text: 'Prev',\n            name: 'prev',\n            disabled: true,\n            onclick: function () {\n              Actions.prev(editor, currentIndexState);\n              updateButtonStates();\n            }\n          },\n          {\n            text: 'Next',\n            name: 'next',\n            disabled: true,\n            onclick: function () {\n              Actions.next(editor, currentIndexState);\n              updateButtonStates();\n            }\n          }\n        ],\n        title: 'Find and replace',\n        items: {\n          type: 'form',\n          padding: 20,\n          labelGap: 30,\n          spacing: 10,\n          items: [\n            {\n              type: 'textbox',\n              name: 'find',\n              size: 40,\n              label: 'Find',\n              value: selectedText\n            },\n            {\n              type: 'textbox',\n              name: 'replace',\n              size: 40,\n              label: 'Replace with'\n            },\n            {\n              type: 'checkbox',\n              name: 'case',\n              text: 'Match case',\n              label: ' '\n            },\n            {\n              type: 'checkbox',\n              name: 'words',\n              text: 'Whole words',\n              label: ' '\n            }\n          ]\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor, currentIndexState) {\n      editor.addCommand('SearchReplace', function () {\n        Dialog.open(editor, currentIndexState);\n      });\n    };\n    var Commands = { register: register };\n\n    var showDialog = function (editor, currentIndexState) {\n      return function () {\n        Dialog.open(editor, currentIndexState);\n      };\n    };\n    var register$1 = function (editor, currentIndexState) {\n      editor.addMenuItem('searchreplace', {\n        text: 'Find and replace',\n        shortcut: 'Meta+F',\n        onclick: showDialog(editor, currentIndexState),\n        separator: 'before',\n        context: 'edit'\n      });\n      editor.addButton('searchreplace', {\n        tooltip: 'Find and replace',\n        onclick: showDialog(editor, currentIndexState)\n      });\n      editor.shortcuts.add('Meta+F', '', showDialog(editor, currentIndexState));\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('searchreplace', function (editor) {\n      var currentIndexState = Cell(-1);\n      Commands.register(editor, currentIndexState);\n      Buttons.register(editor, currentIndexState);\n      return Api.get(editor, currentIndexState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","// Exports the \"hr\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/hr')\n//   ES2015:\n//     import 'tinymce/plugins/hr'\nrequire('./plugin.js');","const XMLHttpRequest = window.XMLHttpRequest; // eslint-disable-line\n\nmodule.exports = XMLHttpRequest;\n","// Exports the \"colorpicker\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/colorpicker')\n//   ES2015:\n//     import 'tinymce/plugins/colorpicker'\nrequire('./plugin.js');","// Exports the \"autolink\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/autolink')\n//   ES2015:\n//     import 'tinymce/plugins/autolink'\nrequire('./plugin.js');","(function () {\nvar colorpicker = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Color');\n\n    var showPreview = function (win, hexColor) {\n      win.find('#preview')[0].getEl().style.background = hexColor;\n    };\n    var setColor = function (win, value) {\n      var color = global$1(value), rgb = color.toRgb();\n      win.fromJSON({\n        r: rgb.r,\n        g: rgb.g,\n        b: rgb.b,\n        hex: color.toHex().substr(1)\n      });\n      showPreview(win, color.toHex());\n    };\n    var open = function (editor, callback, value) {\n      var win = editor.windowManager.open({\n        title: 'Color',\n        items: {\n          type: 'container',\n          layout: 'flex',\n          direction: 'row',\n          align: 'stretch',\n          padding: 5,\n          spacing: 10,\n          items: [\n            {\n              type: 'colorpicker',\n              value: value,\n              onchange: function () {\n                var rgb = this.rgb();\n                if (win) {\n                  win.find('#r').value(rgb.r);\n                  win.find('#g').value(rgb.g);\n                  win.find('#b').value(rgb.b);\n                  win.find('#hex').value(this.value().substr(1));\n                  showPreview(win, this.value());\n                }\n              }\n            },\n            {\n              type: 'form',\n              padding: 0,\n              labelGap: 5,\n              defaults: {\n                type: 'textbox',\n                size: 7,\n                value: '0',\n                flex: 1,\n                spellcheck: false,\n                onchange: function () {\n                  var colorPickerCtrl = win.find('colorpicker')[0];\n                  var name, value;\n                  name = this.name();\n                  value = this.value();\n                  if (name === 'hex') {\n                    value = '#' + value;\n                    setColor(win, value);\n                    colorPickerCtrl.value(value);\n                    return;\n                  }\n                  value = {\n                    r: win.find('#r').value(),\n                    g: win.find('#g').value(),\n                    b: win.find('#b').value()\n                  };\n                  colorPickerCtrl.value(value);\n                  setColor(win, value);\n                }\n              },\n              items: [\n                {\n                  name: 'r',\n                  label: 'R',\n                  autofocus: 1\n                },\n                {\n                  name: 'g',\n                  label: 'G'\n                },\n                {\n                  name: 'b',\n                  label: 'B'\n                },\n                {\n                  name: 'hex',\n                  label: '#',\n                  value: '000000'\n                },\n                {\n                  name: 'preview',\n                  type: 'container',\n                  border: 1\n                }\n              ]\n            }\n          ]\n        },\n        onSubmit: function () {\n          callback('#' + win.toJSON().hex);\n        }\n      });\n      setColor(win, value);\n    };\n    var Dialog = { open: open };\n\n    global.add('colorpicker', function (editor) {\n      if (!editor.settings.color_picker_callback) {\n        editor.settings.color_picker_callback = function (callback, value) {\n          Dialog.open(editor, callback, value);\n        };\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"fullscreen\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/fullscreen')\n//   ES2015:\n//     import 'tinymce/plugins/fullscreen'\nrequire('./plugin.js');","// Exports the \"textcolor\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/textcolor')\n//   ES2015:\n//     import 'tinymce/plugins/textcolor'\nrequire('./plugin.js');","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"admin\"},[(_vm.logged)?_c('v-card',[_c('v-tabs',{model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},[_vm._l((_vm.tabs),function(tab){return _c('v-tab',{key:tab.id},[_vm._v(\" \"+_vm._s(tab.name)+\" \")])}),_c('v-tab-item',[_c('v-card',{attrs:{\"flat\":\"\"}},[(_vm.adminCity)?_c('span',[_c('ContentTable')],1):_c('span',[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"md\":\"8\",\"sm\":\"12\"}},[_c('CityTable')],1)],1)],1),(_vm.adminCity)?_c('v-container',{staticClass:\"pt-0\"},[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{staticClass:\"pt-0\",attrs:{\"cols\":\"10\"}},[_c('ContentEditor')],1)],1)],1):_vm._e()],1)],1),_c('v-tab-item',[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"md\":\"4\",\"sm\":\"12\"}},[_c('CategoryTable')],1)],1)],1)],1),_c('v-tab-item',[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"md\":\"4\",\"sm\":\"12\"}},[_c('SendTokens')],1)],1)],1)],1),_c('v-tab-item',[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"md\":\"4\",\"sm\":\"12\"}},[_c('CustomContent')],1)],1)],1)],1),_c('v-tab-item',[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"md\":\"4\",\"sm\":\"12\"}},[_c('Promo')],1)],1)],1)],1),_c('v-tab-item',[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"md\":\"8\",\"sm\":\"12\"}},[_c('Emails')],1)],1)],1)],1)],2)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.changeAddBtnState}},[_vm._v(_vm._s(_vm.btnText))]),(_vm.showEditor)?_c('v-btn',{staticClass:\"ml\",attrs:{\"color\":\"secondary\",\"loading\":_vm.ipfsPushing},on:{\"click\":_vm.addToIPFS}},[_vm._v(\"Add to IPFS\")]):_vm._e(),(_vm.html_content)?_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.html_content)}}):_vm._e(),(_vm.showEditor)?_c('tinymce',{attrs:{\"id\":\"tinyEditor\",\"other_options\":_vm.options},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}}):_vm._e(),_c('div',{staticClass:\"pb-200\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('textarea',{attrs:{\"id\":_vm.id}},[_vm._v(_vm._s(_vm.content))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n      <textarea :id=\"id\">{{ content }}</textarea>\n  </div>\n</template>\n\n<script>\n   // Import TinyMCE\n    import tinymce from 'tinymce/tinymce';\n\n    // A theme is also required\n    import 'tinymce/themes/modern/theme';\n\n    // Any plugins you want to use has to be imported\n    import 'tinymce/plugins/advlist';\n    import 'tinymce/plugins/wordcount';\n    import 'tinymce/plugins/autolink';\n    import 'tinymce/plugins/autosave';\n    import 'tinymce/plugins/charmap';\n    import 'tinymce/plugins/codesample';\n    import 'tinymce/plugins/contextmenu';\n    import 'tinymce/plugins/emoticons';\n    import 'tinymce/plugins/fullscreen';\n    import 'tinymce/plugins/hr';\n    import 'tinymce/plugins/imagetools';\n    import 'tinymce/plugins/insertdatetime';\n    import 'tinymce/plugins/link';\n    import 'tinymce/plugins/media';\n    import 'tinymce/plugins/noneditable';\n    import 'tinymce/plugins/paste';\n    import 'tinymce/plugins/print';\n    import 'tinymce/plugins/searchreplace';\n    import 'tinymce/plugins/tabfocus';\n    import 'tinymce/plugins/template';\n    import 'tinymce/plugins/textpattern';\n    import 'tinymce/plugins/visualblocks';\n    import 'tinymce/plugins/anchor';\n    import 'tinymce/plugins/autoresize';\n    import 'tinymce/plugins/bbcode';\n    import 'tinymce/plugins/code';\n    import 'tinymce/plugins/colorpicker';\n    import 'tinymce/plugins/directionality';\n    import 'tinymce/plugins/fullpage';\n    import 'tinymce/plugins/help';\n    import 'tinymce/plugins/image';\n    import 'tinymce/plugins/importcss';\n    import 'tinymce/plugins/legacyoutput';\n    import 'tinymce/plugins/lists';\n    import 'tinymce/plugins/nonbreaking';\n    import 'tinymce/plugins/pagebreak';\n    import 'tinymce/plugins/preview';\n    import 'tinymce/plugins/save';\n    import 'tinymce/plugins/spellchecker';\n    import 'tinymce/plugins/table';\n    import 'tinymce/plugins/textcolor';\n    import 'tinymce/plugins/toc';\n    import 'tinymce/plugins/visualchars';\n    \n    import 'tinymce/skins/lightgray/skin.min.css'\n   \n    export default {\n        name: 'tinymce',\n        props: { \n                id : {\n                    type : String,\n                    required : true\n                },\n                htmlClass : { default : '', type : String},\n                value : { default : '' },\n                plugins : { default : function(){ \n                                    return [\n                                        'advlist autolink lists link image charmap print preview hr anchor pagebreak',\n                                        'searchreplace wordcount visualblocks visualchars code fullscreen',\n                                        'insertdatetime media nonbreaking save table contextmenu directionality',\n                                        'template paste textcolor colorpicker textpattern imagetools toc help emoticons hr codesample'\n                                    ];\n                                } , type: Array\n                            },\n                toolbar1: { default :'formatselect | bold italic  strikethrough  forecolor backcolor | link | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat', type: String},\n                toolbar2: { default : '', type: String },\n                other_options: { default : function() { return {}; }, type: Object},\n                readonly: { default: false, type: Boolean }\n        },\n        data(){\n            return {\n                content : '',\n                editor : null,\n                cTinyMce : null,\n                checkerTimeout: null,\n                isTyping : false\n            }; \n        },\n        mounted(){\n            this.content = this.value;\n            this.init();  \n        },\n        beforeDestroy () {\n            this.editor.destroy();\n        },\n        watch: {\n            value : function (newValue){\n                if(!this.isTyping){\n                    if(this.editor !== null)\n                        this.editor.setContent(newValue);\n                    else\n                        this.content = newValue;\n                }\n            },\n            readonly(value){\n                if(value){\n                    this.editor.setMode('readonly');\n                } else {\n                    this.editor.setMode('design');\n                }\n            }\n        },\n        methods: {\n            init(){\n                let options = {\n                    selector: '#' + this.id,\n                    skin: false,\n                    toolbar1: this.toolbar1,\n                    toolbar2: this.toolbar2,\n                    plugins: this.plugins,\n                    init_instance_callback : this.initEditor\n                };\n                tinymce.init(this.concatAssciativeArrays(options, this.other_options));\n            },\n            initEditor(editor) {\n                this.editor = editor;\n                editor.on('KeyUp', (e) => {\n                    this.submitNewContent();\n                });\n                editor.on('Change', (e) => {\n                    if(this.editor.getContent() !== this.value){\n                        this.submitNewContent();\n                    }\n                    this.$emit('editorChange', e);\n                });\n                editor.on('init', (e) => {\n                    editor.setContent(this.content);\n                    this.$emit('input', this.content);\n                });\n                if(this.readonly){\n                    this.editor.setMode('readonly');\n                } else {\n                    this.editor.setMode('design');\n                }\n\n                this.$emit('editorInit', editor);\n            },\n            concatAssciativeArrays(array1, array2){\n                if(array2.length === 0) return array1;\n                if(array1.length === 0) return array2;\n                let dest = [];\n                for ( let key in array1) dest[key] = array1[key];\n                for ( let key in array2) dest[key] = array2[key];\n                return dest;\n            },\n            submitNewContent(){\n                this.isTyping = true;\n                if(this.checkerTimeout !== null)\n                    clearTimeout(this.checkerTimeout);\n                    this.checkerTimeout = setTimeout(()=>{\n                        this.isTyping = false;\n                    }, 300);\n\n                this.$emit('input', this.editor.getContent());\n            }\n        }\n    }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\n</style>\n","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--12-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--0-0!../../../vue-loader/lib/index.js??vue-loader-options!./TinymceVue.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--12-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--0-0!../../../vue-loader/lib/index.js??vue-loader-options!./TinymceVue.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TinymceVue.vue?vue&type=template&id=7a7628c1&scoped=true&\"\nimport script from \"./TinymceVue.vue?vue&type=script&lang=js&\"\nexport * from \"./TinymceVue.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a7628c1\",\n  null\n  \n)\n\nexport default component.exports","import tinymce from './components/TinymceVue'\n\nexport default tinymce\nexport { tinymce }","<template>\n  <div>\n    <v-btn color=\"primary\" @click=\"changeAddBtnState\">{{ btnText }}</v-btn>\n    <v-btn\n      class=\"ml\"\n      v-if=\"showEditor\"\n      color=\"secondary\"\n      :loading=\"ipfsPushing\"\n      @click=\"addToIPFS\"\n    >Add to IPFS</v-btn>\n    <div v-if=\"html_content\" v-html=\"html_content\"></div>\n    <tinymce id=\"tinyEditor\" v-if=\"showEditor\" v-model=\"content\" :other_options=\"options\"></tinymce>\n    <div class=\"pb-200\"></div>\n  </div>\n</template>\n\n<script>\nimport moment from \"moment\";\nconst IPFS = require(\"ipfs-mini\");\nconst ipfs = new IPFS({\n  host: \"ipfs.infura.io\",\n  port: 5001,\n  protocol: \"https\"\n});\nimport tinymce from \"vue-tinymce-editor\";\nexport default {\n  name: \"ContentEditor\",\n  components: {\n    tinymce: tinymce\n  },\n  data() {\n    return {\n      btnText: \"Create content\",\n      content: \"\",\n      html_content: \"\",\n      showEditor: false,\n      lastDocumentHash: \"\",\n      ipfsPushing: false,\n      options: {\n        paste_data_images: true,\n        height: 500\n      }\n    };\n  },\n  methods: {\n    addToIPFS() {\n      if (this.content != \"\") {\n        this.ipfsPushing = true;\n        ipfs.add(this.content, (err, result) => {\n          if (result) {\n            const cleanText = this.content\n                .replace(/<\\/?[^>]+(>|$)/g, \"\")\n                .replace(\"&nbsp;\", \" \")\n                .replace(\"&nbsp;\", \" \")\n                .trim();\n            const title = cleanText.slice(0, 35);\n            this.lastDocumentHash = result;\n            let allSrc = this.content.match(/<img.*?src=\"(.*?)\"/);\n            let img = allSrc != null ? allSrc[1] : '';\n            this.$store.dispatch(\"setIPFSData\", {\n              title: title,\n              text: cleanText,\n              key: result,\n              category: \"\",\n              img: img,\n              xyr: \"\",\n              eth: \"\",\n              created: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\n            });\n          }\n          if (err) console.log(err);\n          this.ipfsPushing = false;\n        });\n      }\n    },\n    readIPFS() {\n      if (this.lastDocumentHash != \"\") {\n        ipfs.cat(this.lastDocumentHash, (err, result) => {\n          if (result) this.html_content = result;\n          console.log(err, result);\n        });\n      }\n    },\n    changeAddBtnState() {\n      this.showEditor = !this.showEditor;\n      this.showEditor == true\n        ? (this.btnText = \"Close editor\")\n        : (this.btnText = \"Create content\");\n      if (this.showEditor) this.content = \"\";\n    }\n  },\n  props: {\n    city: String\n  }\n};\n</script>\n<style scoped>\n.ml {\n  margin-left: 5px;\n}\n.pb-200 {\n  padding-bottom: 200px;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContentEditor.vue?vue&type=template&id=26d86a20&scoped=true&\"\nimport script from \"./ContentEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./ContentEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContentEditor.vue?vue&type=style&index=0&id=26d86a20&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26d86a20\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"CityTable\"},[_c('v-container',[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.cities,\"sort-by\":\"name\"},on:{\"click:row\":_vm.selectItem},scopedSlots:_vm._u([{key:\"top\",fn:function(){return [_c('v-toolbar',{attrs:{\"flat\":\"\",\"color\":\"white\"}},[_c('v-toolbar-title',[_vm._v(\"The United States\")]),_c('v-divider',{staticClass:\"mx-4\",attrs:{\"inset\":\"\",\"vertical\":\"\"}}),_c('v-spacer'),_c('v-dialog',{attrs:{\"max-width\":\"500px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"mb-2\",attrs:{\"small\":\"\",\"color\":\"primary\",\"dark\":\"\"}},'v-btn',attrs,false),on),[_vm._v(\"add city\")])]}}]),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.formTitle))])]),_c('v-card-text',[_c('v-container',[(_vm.editedIndex === -1)?_c('v-row',[_c('v-col',[_c('v-text-field',{attrs:{\"label\":\"City\"},model:{value:(_vm.editedItem.name),callback:function ($$v) {_vm.$set(_vm.editedItem, \"name\", $$v)},expression:\"editedItem.name\"}})],1)],1):_vm._e(),_c('v-row',[_c('v-col',[_c('v-text-field',{attrs:{\"label\":\"Image\"},model:{value:(_vm.editedItem.img),callback:function ($$v) {_vm.$set(_vm.editedItem, \"img\", $$v)},expression:\"editedItem.img\"}})],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.close()}}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.save()}}},[_vm._v(\"Save\")])],1)],1)],1)],1)]},proxy:true},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.editItem(item)}}},[_vm._v(\"mdi-image-edit\")]),_c('v-icon',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.deleteItem(item)}}},[_vm._v(\"mdi-delete\")])]}}],null,true)})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"CityTable\">\n    <v-container>\n      <v-row justify=\"center\">\n        <v-col cols=\"12\">\n          <v-data-table\n            :headers=\"headers\"\n            :items=\"cities\"\n            sort-by=\"name\"\n            class=\"elevation-1\"\n            @click:row=\"selectItem\"\n          >\n            <template v-slot:top>\n              <v-toolbar flat color=\"white\">\n                <v-toolbar-title>The United States</v-toolbar-title>\n                <v-divider class=\"mx-4\" inset vertical></v-divider>\n                <v-spacer></v-spacer>\n                <v-dialog v-model=\"dialog\" max-width=\"500px\">\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn small color=\"primary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\">add city</v-btn>\n                  </template>\n                  <v-card>\n                    <v-card-title>\n                      <span class=\"headline\">{{ formTitle }}</span>\n                    </v-card-title>\n\n                    <v-card-text>\n                      <v-container>\n                        <v-row v-if=\"editedIndex === -1\">\n                          <v-col>\n                            <v-text-field v-model=\"editedItem.name\" label=\"City\"></v-text-field>\n                          </v-col>\n                        </v-row>\n                        <v-row>\n                          <v-col>\n                            <v-text-field v-model=\"editedItem.img\" label=\"Image\"></v-text-field>\n                          </v-col>\n                        </v-row>\n                      </v-container>\n                    </v-card-text>\n\n                    <v-card-actions>\n                      <v-spacer></v-spacer>\n                      <v-btn color=\"blue darken-1\" text @click=\"close()\">Cancel</v-btn>\n                      <v-btn color=\"blue darken-1\" text @click=\"save()\">Save</v-btn>\n                    </v-card-actions>\n                  </v-card>\n                </v-dialog>\n              </v-toolbar>\n            </template>\n            <template v-slot:[`item.actions`]=\"{ item }\">\n              <v-icon small class=\"mr-2\" @click.stop=\"editItem(item)\">mdi-image-edit</v-icon>\n              <v-icon small @click=\"deleteItem(item)\">mdi-delete</v-icon>\n            </template>\n          </v-data-table>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nexport default {\n  data: () => ({\n    dialog: false,\n    headers: [\n      { text: \"City\", value: \"name\", align: \"start\", sortable: true },\n      { text: \"Actions\", value: \"actions\", align: \"end\", sortable: false }\n    ],\n    editedIndex: -1,\n    editedItem: {\n      name: \"\",\n      url: \"\",\n      img: \"\",\n    },\n    defaultItem: {\n      name: \"\",\n      url: \"\",\n      img: \"\",\n    },\n    deletedingCity: '',\n  }),\n\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? \"New\" : \"Edit\";\n    },\n    cities() {\n      return this.$store.state.cities;\n    }\n  },\n\n  watch: {\n    dialog(val) {\n      val || this.close();\n    }\n  },\n\n  methods: {\n    selectItem(item) {\n      let adminCity = this.cities[this.cities.indexOf(item)][\"name\"];\n      if (this.deletedingCity == '') {\n        this.$store.commit(\"setAdminCity\", adminCity);\n      }\n      this.deletedingCity = ''\n    },\n    editItem(item) {\n      this.editedIndex = this.cities.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialog = true;\n    },\n    deleteItem(item) {\n      let adminCity = this.cities[this.cities.indexOf(item)][\"name\"];\n      const index = this.cities.indexOf(item);\n      if (confirm(\"Are you sure you want to delete \" + adminCity + \"?\")) {\n        this.deleteCity(adminCity);\n        this.cities.splice(index, 1);\n        this.$store.commit(\"setCities\", this.cities);\n      }\n      this.deletedingCity = adminCity;\n    },\n    close() {\n      this.dialog = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n    setCity(item, edited) {\n      let exists = false;\n      this.cities.forEach(element => {\n        if (element.name.toLowerCase() == item.name.toLowerCase()) {\n          exists = true;\n          if (!edited) alert(item.name + \" already exists.\");\n        }\n      });\n      if ((!exists || edited) && item.name.trim().toLowerCase() != 'cities' && item.name.trim() != '') {\n        this.$http.post(this.$HOST + '/api/set/cities' + '?uid=' + this.$cookie.get('uid'), JSON.stringify({\n          key: item.name, img: this.editedItem.img\n        }), { withCredentials: true })\n        if (!edited) {\n          this.editedItem.url = this.editedItem.name.toLowerCase().replace(' ', '')\n          this.cities.push(this.editedItem);\n          this.$store.commit(\"setCities\", this.cities);\n        }\n      }\n    },\n    deleteCity(name) {\n      this.$http.post(this.$HOST + '/api/delete/cities/' + name + '?uid=' + this.$cookie.get('uid'), JSON.stringify({}), { withCredentials: true })\n    },\n    save() {\n      if (this.editedIndex > -1) {\n        this.setCity(this.editedItem, true);\n        Object.assign(this.cities[this.editedIndex], this.editedItem);\n      } else {\n        this.setCity(this.editedItem);\n      }\n      this.close();\n    }\n  }\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CityTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CityTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CityTable.vue?vue&type=template&id=0a01993d&\"\nimport script from \"./CityTable.vue?vue&type=script&lang=js&\"\nexport * from \"./CityTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"CategoryTable\"},[_c('v-container',[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.categories,\"sort-by\":\"name\",\"items-per-page\":5},scopedSlots:_vm._u([{key:\"top\",fn:function(){return [_c('v-toolbar',{attrs:{\"flat\":\"\",\"color\":\"white\"}},[_c('v-toolbar-title',[_vm._v(\"Category\")]),_c('v-divider',{staticClass:\"mx-4\",attrs:{\"inset\":\"\",\"vertical\":\"\"}}),_c('v-spacer'),_c('v-dialog',{attrs:{\"max-width\":\"500px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"mb-2\",attrs:{\"small\":\"\",\"color\":\"orange darken-3\",\"dark\":\"\"}},'v-btn',attrs,false),on),[_vm._v(\"add category\")])]}}]),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.formTitle))])]),_c('v-card-text',[_c('v-container',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"4\"}},[_c('v-text-field',{attrs:{\"label\":\"Category\"},model:{value:(_vm.editedItem.name),callback:function ($$v) {_vm.$set(_vm.editedItem, \"name\", $$v)},expression:\"editedItem.name\"}})],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.close}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"Save\")])],1)],1)],1)],1)]},proxy:true},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-icon',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.deleteItem(item)}}},[_vm._v(\"mdi-delete\")])]}}],null,true)})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"CategoryTable\">\n    <v-container>\n      <v-row justify=\"center\">\n        <v-col cols=\"12\">\n          <v-data-table\n            :headers=\"headers\"\n            :items=\"categories\"\n            sort-by=\"name\"\n            :items-per-page=\"5\"\n            class=\"elevation-1\"\n          >\n            <template v-slot:top>\n              <v-toolbar flat color=\"white\">\n                <v-toolbar-title>Category</v-toolbar-title>\n                <v-divider class=\"mx-4\" inset vertical></v-divider>\n                <v-spacer></v-spacer>\n                <v-dialog v-model=\"dialog\" max-width=\"500px\">\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn small color=\"orange darken-3\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\">add category</v-btn>\n                  </template>\n                  <v-card>\n                    <v-card-title>\n                      <span class=\"headline\">{{ formTitle }}</span>\n                    </v-card-title>\n\n                    <v-card-text>\n                      <v-container>\n                        <v-row>\n                          <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                            <v-text-field v-model=\"editedItem.name\" label=\"Category\"></v-text-field>\n                          </v-col>\n                        </v-row>\n                      </v-container>\n                    </v-card-text>\n\n                    <v-card-actions>\n                      <v-spacer></v-spacer>\n                      <v-btn color=\"blue darken-1\" text @click=\"close\">Cancel</v-btn>\n                      <v-btn color=\"blue darken-1\" text @click=\"save\">Save</v-btn>\n                    </v-card-actions>\n                  </v-card>\n                </v-dialog>\n              </v-toolbar>\n            </template>\n            <template v-slot:[`item.actions`]=\"{ item }\">\n              <v-icon small @click=\"deleteItem(item)\">mdi-delete</v-icon>\n            </template>\n          </v-data-table>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nexport default {\n  data: () => ({\n    dialog: false,\n    headers: [\n      { text: \"Category\", value: \"name\", align: \"start\", sortable: true },\n      { text: \"Actions\", value: \"actions\", align: \"end\", sortable: false }\n    ],\n    editedIndex: -1,\n    editedItem: {\n      name: \"\",\n    },\n    defaultItem: {\n      name: \"\",\n    },\n    deletedingCategory: '',\n  }),\n\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? \"New\" : \"Edit\";\n    },\n    categories() {\n      return this.$store.state.categories;\n    },\n  },\n\n  watch: {\n    dialog(val) {\n      val || this.close();\n    }\n  },\n\n  methods: {\n    deleteItem(item) {\n      let adminCategory = this.categories[this.categories.indexOf(item)][\"name\"];\n      const index = this.categories.indexOf(item);\n      if (confirm(\"Are you sure you want to delete \" + adminCategory + \"?\")) {\n        this.deleteCategory(adminCategory);\n        this.categories.splice(index, 1);\n        this.$store.commit(\"setCategories\", this.categories);\n      }\n      this.deletedingCategory = adminCategory;\n    },\n    close() {\n      this.dialog = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n    addCategory(name) {\n      let exists = false;\n      this.categories.forEach(element => {\n        if (element.name.toLowerCase() == name.toLowerCase()) {\n          exists = true;\n          alert(name + \" already exists.\");\n        }\n      });\n      if (!exists && name.trim().toLowerCase() != 'categories' && name.trim() != '') {\n        this.$http.post(this.$HOST + '/api/set/categories' + '?uid=' + this.$cookie.get('uid'), JSON.stringify({key: name}), { withCredentials: true })\n        this.categories.push(this.editedItem);\n        this.$store.commit(\"setCategories\", this.categories);\n      }\n    },\n    deleteCategory(name) {\n      this.$http.post(this.$HOST + '/api/delete/categories/' + name + '?uid=' + this.$cookie.get('uid'), JSON.stringify({}), { withCredentials: true })\n    },\n    save() {\n      if (this.editedIndex > -1) {\n        Object.assign(this.categories[this.editedIndex], this.editedItem);\n      } else {\n        this.addCategory(this.editedItem.name);\n      }\n      this.close();\n    }\n  }\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategoryTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategoryTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CategoryTable.vue?vue&type=template&id=6a4c3efa&\"\nimport script from \"./CategoryTable.vue?vue&type=script&lang=js&\"\nexport * from \"./CategoryTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ContentTable\"},[_c('v-container',[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{attrs:{\"cols\":\"10\"}},[_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.content,\"sort-by\":\"title\"},scopedSlots:_vm._u([{key:\"item.key\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('a',{attrs:{\"href\":'https://gateway.ipfs.io/ipfs/' + item.key,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm._f(\"truncate\")(item.key,18, '...')))])]}},{key:\"top\",fn:function(){return [_c('v-toolbar',{attrs:{\"flat\":\"\",\"color\":\"white\"}},[_c('v-icon',{staticClass:\"mr-2\",on:{\"click\":_vm.clearAdminCity}},[_vm._v(\"mdi-arrow-left\")]),_c('v-toolbar-title',{domProps:{\"textContent\":_vm._s(_vm.adminCity)}}),_c('v-divider',{staticClass:\"mx-4\",attrs:{\"inset\":\"\",\"vertical\":\"\"}}),_c('v-spacer'),_c('v-dialog',{attrs:{\"max-width\":\"500px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"mb-2\",attrs:{\"loading\":_vm.loading,\"small\":\"\",\"color\":\"secondary\",\"dark\":\"\"}},'v-btn',attrs,false),on),[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-plus\")]),_vm._v(\"hash \")],1)]}}]),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.formTitle))])]),_c('v-card-text',[_c('v-container',[_c('v-row',[_c('v-col',{attrs:{\"sm\":\"6\",\"md\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Title\"},model:{value:(_vm.editedItem.title),callback:function ($$v) {_vm.$set(_vm.editedItem, \"title\", $$v)},expression:\"editedItem.title\"}})],1),_c('v-col',{attrs:{\"sm\":\"6\",\"md\":\"6\"}},[_c('v-select',{attrs:{\"items\":_vm.categories,\"label\":\"Category\"},model:{value:(_vm.editedItem.category),callback:function ($$v) {_vm.$set(_vm.editedItem, \"category\", $$v)},expression:\"editedItem.category\"}})],1)],1),_c('v-row',[_c('v-col',{attrs:{\"sm\":\"6\",\"md\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"xyr\"},model:{value:(_vm.editedItem.xyr),callback:function ($$v) {_vm.$set(_vm.editedItem, \"xyr\", $$v)},expression:\"editedItem.xyr\"}})],1),_c('v-col',{attrs:{\"sm\":\"6\",\"md\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"eth\"},model:{value:(_vm.editedItem.eth),callback:function ($$v) {_vm.$set(_vm.editedItem, \"eth\", $$v)},expression:\"editedItem.eth\"}})],1)],1),_c('v-row',[_c('v-col',[_c('v-text-field',{attrs:{\"label\":\"Image\"},model:{value:(_vm.editedItem.img),callback:function ($$v) {_vm.$set(_vm.editedItem, \"img\", $$v)},expression:\"editedItem.img\"}})],1)],1),(_vm.editedIndex === -1)?_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\",\"md\":\"12\"}},[_c('v-text-field',{attrs:{\"label\":\"Hash\"},model:{value:(_vm.editedItem.key),callback:function ($$v) {_vm.$set(_vm.editedItem, \"key\", $$v)},expression:\"editedItem.key\"}})],1)],1):_vm._e()],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.close()}}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.save()}}},[_vm._v(\"Save\")])],1)],1)],1)],1)]},proxy:true},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editItem(item)}}},[_vm._v(\"mdi-pencil\")]),_c('v-icon',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.deleteItem(item)}}},[_vm._v(\"mdi-delete\")])]}}],null,true)})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ContentTable\">\n    <v-container>\n      <v-row justify=\"center\">\n        <v-col cols=\"10\">\n          <v-data-table :headers=\"headers\" :items=\"content\" sort-by=\"title\" class=\"elevation-1\">\n            <template v-slot:[`item.key`]=\"{ item }\">\n              <a\n                :href=\"'https://gateway.ipfs.io/ipfs/' + item.key\"\n                target=\"_blank\"\n              >{{item.key | truncate(18, '...')}}</a>\n            </template>\n            <template v-slot:top>\n              <v-toolbar flat color=\"white\">\n                <v-icon class=\"mr-2\" @click=\"clearAdminCity\">mdi-arrow-left</v-icon>\n                <v-toolbar-title v-text=\"adminCity\"></v-toolbar-title>\n                <v-divider class=\"mx-4\" inset vertical></v-divider>\n                <v-spacer></v-spacer>\n                <v-dialog v-model=\"dialog\" max-width=\"500px\">\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn :loading=\"loading\" small color=\"secondary\" dark class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\">\n                      <v-icon left>mdi-plus</v-icon>hash\n                    </v-btn>\n                  </template>\n                  <v-card>\n                    <v-card-title>\n                      <span class=\"headline\">{{ formTitle }}</span>\n                    </v-card-title>\n\n                    <v-card-text>\n                      <v-container>\n                        <v-row>\n                          <v-col sm=\"6\" md=\"6\">\n                            <v-text-field v-model=\"editedItem.title\" label=\"Title\"></v-text-field>\n                          </v-col>\n                          <v-col sm=\"6\" md=\"6\">\n                            <v-select\n                              :items=\"categories\"\n                              label=\"Category\"\n                              v-model=\"editedItem.category\"\n                            ></v-select>\n                          </v-col>\n                        </v-row>\n                        <v-row>\n                          <v-col sm=\"6\" md=\"6\">\n                            <v-text-field v-model=\"editedItem.xyr\" label=\"xyr\"></v-text-field>\n                          </v-col>\n                          <v-col sm=\"6\" md=\"6\">\n                            <v-text-field v-model=\"editedItem.eth\" label=\"eth\"></v-text-field>\n                          </v-col>\n                        </v-row>\n                        <v-row>\n                          <v-col>\n                            <v-text-field v-model=\"editedItem.img\" label=\"Image\"></v-text-field>\n                          </v-col>\n                        </v-row>\n                        <v-row v-if=\"editedIndex === -1\">\n                          <v-col cols=\"12\" sm=\"12\" md=\"12\">\n                            <v-text-field v-model=\"editedItem.key\" label=\"Hash\"></v-text-field>\n                          </v-col>\n                        </v-row>\n                      </v-container>\n                    </v-card-text>\n\n                    <v-card-actions>\n                      <v-spacer></v-spacer>\n                      <v-btn color=\"blue darken-1\" text @click=\"close()\">Cancel</v-btn>\n                      <v-btn color=\"blue darken-1\" text @click=\"save()\">Save</v-btn>\n                    </v-card-actions>\n                  </v-card>\n                </v-dialog>\n              </v-toolbar>\n            </template>\n            <template v-slot:[`item.actions`]=\"{ item }\">\n              <v-icon small class=\"mr-2\" @click=\"editItem(item)\">mdi-pencil</v-icon>\n              <v-icon small @click=\"deleteItem(item)\">mdi-delete</v-icon>\n            </template>\n          </v-data-table>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport moment from \"moment\";\nconst IPFS = require(\"ipfs-mini\");\nconst ipfs = new IPFS({\n  host: \"ipfs.infura.io\",\n  port: 5001,\n  protocol: \"https\"\n});\nexport default {\n  data: () => ({\n    dialog: false,\n    loading: false,\n    headers: [\n      { text: \"Title\", value: \"title\", align: \"start\", sortable: true },\n      { text: \"Category\", value: \"category\", align: \"start\", sortable: true },\n      { text: \"Hash\", value: \"key\", align: \"start\", sortable: false },\n      { text: \"XYR\", value: \"xyr\", align: \"start\", sortable: true },\n      { text: \"ETH\", value: \"eth\", align: \"start\", sortable: true },\n      { text: \"Created\", value: \"created\", align: \"start\", sortable: true },\n      { text: \"Actions\", value: \"actions\", align: \"end\", sortable: false }\n    ],\n    content: [],\n    editedIndex: -1,\n    editedItem: {\n      title: \"\",\n      text: \"\",\n      key: \"\",\n      created: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\n      category: \"\",\n      img: \"\",\n      xyr: \"\",\n      eth: \"\",\n    },\n    defaultItem: {\n      title: \"\",\n      text: \"\",\n      key: \"\",\n      created: \"\",\n      category: \"\",\n      img: \"\",\n      xyr: \"\",\n      eth: \"\",\n    }\n  }),\n  computed: {\n    IPFSData() {\n      return this.$store.state.IPFSData;\n    },\n    formTitle() {\n      return this.editedIndex === -1 ? \"New Content\" : \"Edit\";\n    },\n    adminCity() {\n      return this.$store.state.adminCity;\n    },\n    categories() {\n      let categoryNames = [\"\"];\n      this.$store.state.categories.forEach(element => {\n        categoryNames.push(element.name);\n      });\n      return categoryNames;\n    }\n  },\n  filters: {\n    truncate: function(text, length, suffix) {\n      return text.substring(0, length) + suffix;\n    }\n  },\n  watch: {\n    dialog(val) {\n      val || this.close();\n    },\n    IPFSData(newData) {\n      this.setContent(newData);\n    }\n  },\n\n  created() {\n    this.getIPFSContent();\n  },\n\n  methods: {\n    readIPFS(hash) {\n      const savedItem = this.editedItem;\n      if (hash != \"\") {\n        this.loading = true;\n        ipfs.cat(hash, (err, result) => {\n          if (result) {\n            let allSrc = result.match(/<img.*?src=\"(.*?)\"/);\n            savedItem.text = result\n              .replace(/<\\/?[^>]+(>|$)/g, \"\")\n              .replace(\"&nbsp;\", \" \")\n              .replace(\"&nbsp;\", \" \")\n              .trim();\n            savedItem.img = allSrc != null ? allSrc[1] : '';\n            if (savedItem.text) this.setContent(savedItem);\n          }\n          if (err) console.log(err)\n          this.loading = false;\n        });\n      }\n    },\n    getIPFSContent() {\n      const city = this.adminCity\n        .trim()\n        .toLowerCase()\n        .replace(\" \", \"\");\n      this.$http\n        .get(\n          this.$HOST +\n            \"/api/search/content?args=\" +\n            JSON.stringify({ city: city }),\n          { withCredentials: true }\n        )\n        .then(resp => {\n          this.content = resp.data;\n        });\n    },\n    deleteIPFSContent(contentData) {\n      if (contentData) {\n        this.$http.post(\n          this.$HOST +\n            \"/api/delete/content/\" +\n            contentData.key +\n            \"?uid=\" +\n            this.$cookie.get(\"uid\"),\n          JSON.stringify({}),\n          { withCredentials: true }\n        );\n      }\n    },\n    setContent(newData, edited) {\n      if (newData  && newData.key.trim() != '') {\n        var data = {\n          key: newData.key,\n          city: this.adminCity\n            .trim()\n            .toLowerCase()\n            .replace(\" \", \"\"),\n          img: newData.img,\n          title: newData.title,\n          text: newData.text,\n          created: newData.created,\n          category: newData.category,\n          xyr: newData.xyr,\n          eth: newData.eth\n        };\n        this.$http.post(\n          this.$HOST + \"/api/set/content\" + \"?uid=\" + this.$cookie.get(\"uid\"),\n          JSON.stringify(data),\n          { withCredentials: true }\n        );\n        if (!edited) this.content.push(newData);\n      }\n    },\n    clearAdminCity() {\n      this.$store.commit(\"setAdminCity\", \"\");\n    },\n    editItem(item) {\n      this.editedIndex = this.content.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialog = true;\n    },\n    deleteItem(item) {\n      let selectedContentTitle = this.content[this.content.indexOf(item)][\n        \"title\"\n      ];\n      const index = this.content.indexOf(item);\n      if (\n        confirm(\"Are you sure you want to delete \" + selectedContentTitle + \"?\")\n      ) {\n        this.deleteIPFSContent(this.content[index]);\n        this.content.splice(index, 1);\n      }\n    },\n    close() {\n      this.dialog = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n    async save() {\n      if (this.editedIndex > -1) {\n        // EDIT\n        this.setContent(this.editedItem, true);\n        Object.assign(this.content[this.editedIndex], this.editedItem);\n      } else {\n        // ADD A NEW\n        var exists = false;\n        this.content.forEach(element => {\n          if (element.key == this.editedItem.key) {\n            exists = true;\n            alert(element.key + \" already exists.\");\n          }\n        });\n        if (!exists) {\n          this.editedItem.created = moment().format(\"YYYY-MM-DD HH:mm:ss\");\n          this.readIPFS(this.editedItem.key);\n        }\n      }\n      this.close();\n    }\n  }\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContentTable.vue?vue&type=template&id=027bcbfa&\"\nimport script from \"./ContentTable.vue?vue&type=script&lang=js&\"\nexport * from \"./ContentTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-sheet',{staticClass:\"pa-5 mt-4\",attrs:{\"elevation\":\"12\"}},[_c('div',{},[_vm._v(_vm._s(_vm.info))]),_c('v-text-field',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"type\":\"text\",\"autocomplete\":\"off\",\"label\":\"Account\"},model:{value:(_vm.account),callback:function ($$v) {_vm.account=$$v},expression:\"account\"}}),_c('v-text-field',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"type\":\"password\",\"autocomplete\":\"new-password\",\"label\":\"Private key\"},model:{value:(_vm.pkey),callback:function ($$v) {_vm.pkey=$$v},expression:\"pkey\"}}),_c('v-text-field',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"type\":\"text\",\"label\":\"Gas price\"},model:{value:(_vm.gasPrice),callback:function ($$v) {_vm.gasPrice=$$v},expression:\"gasPrice\"}}),_c('v-textarea',{attrs:{\"label\":\"Each recipient in a new line\",\"loading\":_vm.loading,\"no-resize\":_vm.noResize,\"outlined\":\"\",\"placeholder\":_vm.placeholder,\"row-height\":_vm.rowHeight,\"rows\":_vm.rows},model:{value:(_vm.fieldModel),callback:function ($$v) {_vm.fieldModel=$$v},expression:\"fieldModel\"}}),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.sendTx}},[_vm._v(\"Send\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SendTokens.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SendTokens.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SendTokens.vue?vue&type=template&id=fca42ca6&\"\nimport script from \"./SendTokens.vue?vue&type=script&lang=js&\"\nexport * from \"./SendTokens.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-sheet',{staticClass:\"pa-5 mt-4\",attrs:{\"elevation\":\"12\"}},[_c('v-text-field',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"type\":\"text\",\"autocomplete\":\"off\",\"label\":\"Promo title\"},model:{value:(_vm.form.promoTitle),callback:function ($$v) {_vm.$set(_vm.form, \"promoTitle\", $$v)},expression:\"form.promoTitle\"}}),_c('v-text-field',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"type\":\"text\",\"autocomplete\":\"off\",\"label\":\"Promo image URL/Base64\"},model:{value:(_vm.form.promoImg),callback:function ($$v) {_vm.$set(_vm.form, \"promoImg\", $$v)},expression:\"form.promoImg\"}}),_c('v-text-field',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"type\":\"text\",\"autocomplete\":\"off\",\"label\":\"Promo text\"},model:{value:(_vm.form.promoText),callback:function ($$v) {_vm.$set(_vm.form, \"promoText\", $$v)},expression:\"form.promoText\"}}),_c('v-text-field',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"type\":\"text\",\"autocomplete\":\"off\",\"label\":\"Skip button text\"},model:{value:(_vm.form.skipBtnText),callback:function ($$v) {_vm.$set(_vm.form, \"skipBtnText\", $$v)},expression:\"form.skipBtnText\"}}),_c('v-text-field',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"type\":\"text\",\"autocomplete\":\"off\",\"label\":\"Submit button text\"},model:{value:(_vm.form.submitBtnText),callback:function ($$v) {_vm.$set(_vm.form, \"submitBtnText\", $$v)},expression:\"form.submitBtnText\"}}),_c('v-btn',{staticClass:\"mr-5\",attrs:{\"outlined\":\"\",\"loading\":_vm.loading,\"color\":\"primary\"},on:{\"click\":function($event){_vm.dialog = true}}},[_vm._v(\"Test\")]),_c('v-btn',{attrs:{\"loading\":_vm.loading,\"color\":\"primary\"},on:{\"click\":_vm.post}},[_vm._v(\"POST\")])],1),_c('PromoDialog',{attrs:{\"show\":_vm.dialog,\"callback\":_vm.dialogAction,\"promoData\":_vm.form}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid>\n    <v-sheet elevation=\"12\" class=\"pa-5 mt-4\">\n      <v-text-field outlined dense v-model=\"form.promoTitle\" type=\"text\" autocomplete=\"off\" label=\"Promo title\"></v-text-field>\n      <v-text-field outlined dense v-model=\"form.promoImg\" type=\"text\" autocomplete=\"off\" label=\"Promo image URL/Base64\"></v-text-field>\n      <v-text-field outlined dense v-model=\"form.promoText\" type=\"text\" autocomplete=\"off\" label=\"Promo text\"></v-text-field>\n      <v-text-field outlined dense v-model=\"form.skipBtnText\" type=\"text\" autocomplete=\"off\" label=\"Skip button text\"></v-text-field>\n      <v-text-field outlined dense v-model=\"form.submitBtnText\" type=\"text\" autocomplete=\"off\" label=\"Submit button text\"></v-text-field>\n      <v-btn outlined :loading=\"loading\" @click=\"dialog = true\" color=\"primary\" class=\"mr-5\">Test</v-btn>\n      <v-btn :loading=\"loading\" @click=\"post\" color=\"primary\">POST</v-btn>\n    </v-sheet>\n    <PromoDialog :show=\"dialog\" :callback=\"dialogAction\" :promoData=\"form\"/>\n  </v-container>\n</template>\n\n<script>\n\nimport PromoDialog from \"@/components/PromoDialog.vue\";\n\nexport default {\n  components: {\n    PromoDialog\n  },\n  data: () => ({\n    loading: false,\n    dialog: false,\n    form: {\n      promoTitle: 'Promo title',\n      promoImg: 'Promo image',\n      promoText: 'Promo text',\n      skipBtnText: 'Skip button text',\n      submitBtnText: 'Submit button text',\n    }\n  }),\n  watch: {},\n  methods: {\n    post() {\n      this.loading = true;\n      this.$http.post(\n        this.$HOST + \"/api/set/static\" + \"?uid=\" + this.$cookie.get(\"uid\"),\n        JSON.stringify({ key: \"coupon_popup\", val: this.form }),\n        { withCredentials: true }\n      );\n      this.loading = false;\n    },\n    dialogAction() {\n      this.dialog = false;\n    },\n    loadData() {\n      this.$http\n        .get(this.$HOST + \"/api/get/static/coupon_popup\", {\n          withCredentials: true,\n        })\n        .then((resp) => {\n          this.form = resp.data.val;\n        });\n    },\n  },\n  mounted() {\n    this.loadData()\n  },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Promo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Promo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Promo.vue?vue&type=template&id=59589715&\"\nimport script from \"./Promo.vue?vue&type=script&lang=js&\"\nexport * from \"./Promo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-sheet',{staticClass:\"pa-5 mt-4\",attrs:{\"elevation\":\"12\"}},[_c('v-textarea',{attrs:{\"label\":\"Emails\",\"no-resize\":false,\"outlined\":\"\",\"placeholder\":\"date,email,address,campaign,uid\",\"row-height\":16,\"rows\":20,\"readonly\":\"\"},model:{value:(_vm.emailsCSV),callback:function ($$v) {_vm.emailsCSV=$$v},expression:\"emailsCSV\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid>\n    <v-sheet elevation=\"12\" class=\"pa-5 mt-4\">\n      <v-textarea\n        v-model=\"emailsCSV\"\n        label=\"Emails\"\n        :no-resize=\"false\"\n        outlined\n        placeholder=\"date,email,address,campaign,uid\"\n        :row-height=\"16\"\n        :rows=\"20\"\n        readonly\n      ></v-textarea>\n    </v-sheet>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  data: () => ({\n    emailsCSV: \"\",\n  }),\n  watch: {\n    activeTab(num) {\n      if (num == 6) {\n        this.loadEmails();\n      }\n    }\n  },\n  methods: {\n    loadEmails() {\n      this.$http\n        .get(\n          this.$HOST + \"/api/db/emails\" + \"?uid=\" + this.$cookie.get(\"uid\"),\n          {\n            withCredentials: true,\n          }\n        )\n        .then((resp) => {\n          this.emailsCSV = \"date,email,address,campaign,uid\\n\";\n          this.emailsCSV += resp.data;\n        });\n    },\n  },\n  mounted() {\n    this.loadEmails();\n  },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Emails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Emails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Emails.vue?vue&type=template&id=6794f44c&\"\nimport script from \"./Emails.vue?vue&type=script&lang=js&\"\nexport * from \"./Emails.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-sheet',{staticClass:\"pa-5 mt-4\",attrs:{\"elevation\":\"12\"}},[_c('v-select',{attrs:{\"items\":_vm.staticItems,\"label\":\"Content\"},model:{value:(_vm.selectedItem),callback:function ($$v) {_vm.selectedItem=$$v},expression:\"selectedItem\"}}),_c('v-text-field',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"type\":\"text\",\"autocomplete\":\"off\",\"label\":_vm.label},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),_c('v-btn',{attrs:{\"loading\":_vm.loading,\"color\":\"primary\"},on:{\"click\":_vm.post}},[_vm._v(\"POST\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid>\n    <v-sheet elevation=\"12\" class=\"pa-5 mt-4\">\n      <v-select\n        :items=\"staticItems\"\n        label=\"Content\"\n        v-model=\"selectedItem\"\n      ></v-select>\n      <v-text-field\n        outlined\n        dense\n        v-model=\"value\"\n        type=\"text\"\n        autocomplete=\"off\"\n        :label=\"label\"\n      ></v-text-field>\n      <v-btn :loading=\"loading\" @click=\"post\" color=\"primary\">POST</v-btn>\n    </v-sheet>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  data: () => ({\n    staticItems: [\"About\", \"Banner\", \"Homepage Video\"],\n    selectedItem: \"About\",\n    value: \"\",\n    label: \"Text/HTML\",\n    loading: false,\n  }),\n  watch: {\n    selectedItem(newVal) {\n      if (newVal == \"Banner\") {\n        this.label = \"URL/Base64\";\n      } else if (newVal == \"Homepage Video\") {\n        this.label = \"Youtube iframe\";\n      } else if (newVal == \"About\") {\n        this.label = \"Text/HTML\";\n      }\n      this.getStatic();\n    },\n  },\n  methods: {\n    getKey() {\n      if (this.selectedItem == \"Banner\") return \"banner\";\n      if (this.selectedItem == \"Homepage Video\") return \"video\";\n      if (this.selectedItem == \"About\") return \"about\";\n    },\n    getStatic() {\n      this.$http\n        .get(this.$HOST + \"/api/get/static/\" + this.getKey(), {\n          withCredentials: true,\n        })\n        .then((resp) => {\n          this.value = resp.data.val;\n        });\n    },\n    post() {\n      let key = this.getKey();\n      if (key) {\n        this.loading = true;\n        this.$http.post(\n          this.$HOST + \"/api/set/static\" + \"?uid=\" + this.$cookie.get(\"uid\"),\n          JSON.stringify({ key: key, val: this.value }),\n          { withCredentials: true }\n        );\n        this.loading = false;\n      }\n    },\n  },\n  mounted() {\n    this.getStatic();\n  },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomContent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CustomContent.vue?vue&type=template&id=74aed7c3&\"\nimport script from \"./CustomContent.vue?vue&type=script&lang=js&\"\nexport * from \"./CustomContent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"admin\">\n    <v-card v-if=\"logged\">\n      <v-tabs v-model=\"activeTab\">\n        <v-tab v-for=\"tab of tabs\" :key=\"tab.id\">\n          {{tab.name}}\n        </v-tab>\n\n        <v-tab-item>\n          <v-card flat>\n            <span v-if=\"adminCity\">\n              <ContentTable />\n            </span>\n            <span v-else>\n              <v-row justify=\"center\">\n                <v-col md=\"8\" sm=\"12\">\n                  <CityTable />\n                </v-col>\n              </v-row>\n            </span>\n            <v-container v-if=\"adminCity\" class=\"pt-0\">\n              <v-row justify=\"center\">\n                <v-col cols=\"10\" class=\"pt-0\">\n                  <ContentEditor />\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-card>\n        </v-tab-item>\n\n        <v-tab-item>\n          <v-card flat>\n            <v-row justify=\"center\">\n              <v-col md=\"4\" sm=\"12\">\n                <CategoryTable />\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-tab-item>\n\n        <v-tab-item>\n          <v-card flat>\n            <v-row justify=\"center\">\n              <v-col md=\"4\" sm=\"12\">\n                <SendTokens />\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-tab-item>\n\n        <v-tab-item>\n          <v-card flat>\n            <v-row justify=\"center\">\n              <v-col md=\"4\" sm=\"12\">\n                <CustomContent />\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-tab-item>\n\n        <v-tab-item>\n          <v-card flat>\n            <v-row justify=\"center\">\n              <v-col md=\"4\" sm=\"12\">\n                <Promo />\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-tab-item>\n\n        <v-tab-item>\n          <v-card flat>\n            <v-row justify=\"center\">\n              <v-col md=\"8\" sm=\"12\">\n                <Emails />\n              </v-col>\n            </v-row>\n          </v-card>\n        </v-tab-item>\n\n      </v-tabs>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport ContentEditor from \"@/components/admin/ContentEditor.vue\";\nimport CityTable from \"@/components/table/CityTable.vue\";\nimport CategoryTable from \"@/components/table/CategoryTable.vue\";\nimport ContentTable from \"@/components/table/ContentTable.vue\";\nimport SendTokens from \"@/components/admin/SendTokens.vue\";\nimport Promo from \"@/components/admin/Promo.vue\";\nimport Emails from \"@/components/admin/Emails.vue\";\nimport CustomContent from \"@/components/admin/CustomContent.vue\";\n\nexport default {\n  name: \"Admin\",\n  components: {\n    ContentEditor,\n    CityTable,\n    CategoryTable,\n    ContentTable,\n    SendTokens,\n    Promo,\n    Emails,\n    CustomContent,\n  },\n  data() {\n    return {\n      activeTab: this.$store.state.adminActiveTab,\n      tabs: [\n        { id: 1, name: 'Cities' },\n        { id: 2, name: 'Category' },\n        { id: 3, name: 'Send Tokens' },\n        { id: 4, name: 'About/Banner/Video' },\n        { id: 5, name: 'Promo Pop-Up' },\n        { id: 6, name: 'Emails' },\n      ]\n    };\n  },\n  methods: {\n  },\n  mounted() {},\n  computed: {\n    logged() {\n      return this.$store.state.profile.uid || this.$cookie.get(\"uid\");\n    },\n    adminCity() {\n      return this.$store.state.adminCity;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.v-tab {\n  justify-content: none;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Admin.vue?vue&type=template&id=014ded50&scoped=true&\"\nimport script from \"./Admin.vue?vue&type=script&lang=js&\"\nexport * from \"./Admin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Admin.vue?vue&type=style&index=0&id=014ded50&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"014ded50\",\n  null\n  \n)\n\nexport default component.exports","// Exports the \"visualchars\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/visualchars')\n//   ES2015:\n//     import 'tinymce/plugins/visualchars'\nrequire('./plugin.js');","(function () {\nvar media = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getScripts = function (editor) {\n      return editor.getParam('media_scripts');\n    };\n    var getAudioTemplateCallback = function (editor) {\n      return editor.getParam('audio_template_callback');\n    };\n    var getVideoTemplateCallback = function (editor) {\n      return editor.getParam('video_template_callback');\n    };\n    var hasLiveEmbeds = function (editor) {\n      return editor.getParam('media_live_embeds', true);\n    };\n    var shouldFilterHtml = function (editor) {\n      return editor.getParam('media_filter_html', true);\n    };\n    var getUrlResolver = function (editor) {\n      return editor.getParam('media_url_resolver');\n    };\n    var hasAltSource = function (editor) {\n      return editor.getParam('media_alt_source', true);\n    };\n    var hasPoster = function (editor) {\n      return editor.getParam('media_poster', true);\n    };\n    var hasDimensions = function (editor) {\n      return editor.getParam('media_dimensions', true);\n    };\n    var Settings = {\n      getScripts: getScripts,\n      getAudioTemplateCallback: getAudioTemplateCallback,\n      getVideoTemplateCallback: getVideoTemplateCallback,\n      hasLiveEmbeds: hasLiveEmbeds,\n      shouldFilterHtml: shouldFilterHtml,\n      getUrlResolver: getUrlResolver,\n      hasAltSource: hasAltSource,\n      hasPoster: hasPoster,\n      hasDimensions: hasDimensions\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var hasOwnProperty = Object.hasOwnProperty;\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.html.SaxParser');\n\n    var getVideoScriptMatch = function (prefixes, src) {\n      if (prefixes) {\n        for (var i = 0; i < prefixes.length; i++) {\n          if (src.indexOf(prefixes[i].filter) !== -1) {\n            return prefixes[i];\n          }\n        }\n      }\n    };\n    var VideoScript = { getVideoScriptMatch: getVideoScriptMatch };\n\n    var DOM = global$3.DOM;\n    var trimPx = function (value) {\n      return value.replace(/px$/, '');\n    };\n    var getEphoxEmbedData = function (attrs) {\n      var style = attrs.map.style;\n      var styles = style ? DOM.parseStyle(style) : {};\n      return {\n        type: 'ephox-embed-iri',\n        source1: attrs.map['data-ephox-embed-iri'],\n        source2: '',\n        poster: '',\n        width: get(styles, 'max-width').map(trimPx).getOr(''),\n        height: get(styles, 'max-height').map(trimPx).getOr('')\n      };\n    };\n    var htmlToData = function (prefixes, html) {\n      var isEphoxEmbed = Cell(false);\n      var data = {};\n      global$4({\n        validate: false,\n        allow_conditional_comments: true,\n        special: 'script,noscript',\n        start: function (name, attrs) {\n          if (isEphoxEmbed.get()) ; else if (has(attrs.map, 'data-ephox-embed-iri')) {\n            isEphoxEmbed.set(true);\n            data = getEphoxEmbedData(attrs);\n          } else {\n            if (!data.source1 && name === 'param') {\n              data.source1 = attrs.map.movie;\n            }\n            if (name === 'iframe' || name === 'object' || name === 'embed' || name === 'video' || name === 'audio') {\n              if (!data.type) {\n                data.type = name;\n              }\n              data = global$2.extend(attrs.map, data);\n            }\n            if (name === 'script') {\n              var videoScript = VideoScript.getVideoScriptMatch(prefixes, attrs.map.src);\n              if (!videoScript) {\n                return;\n              }\n              data = {\n                type: 'script',\n                source1: attrs.map.src,\n                width: videoScript.width,\n                height: videoScript.height\n              };\n            }\n            if (name === 'source') {\n              if (!data.source1) {\n                data.source1 = attrs.map.src;\n              } else if (!data.source2) {\n                data.source2 = attrs.map.src;\n              }\n            }\n            if (name === 'img' && !data.poster) {\n              data.poster = attrs.map.src;\n            }\n          }\n        }\n      }).parse(html);\n      data.source1 = data.source1 || data.src || data.data;\n      data.source2 = data.source2 || '';\n      data.poster = data.poster || '';\n      return data;\n    };\n    var HtmlToData = { htmlToData: htmlToData };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var guess = function (url) {\n      var mimes = {\n        mp3: 'audio/mpeg',\n        wav: 'audio/wav',\n        mp4: 'video/mp4',\n        webm: 'video/webm',\n        ogg: 'video/ogg',\n        swf: 'application/x-shockwave-flash'\n      };\n      var fileEnd = url.toLowerCase().split('.').pop();\n      var mime = mimes[fileEnd];\n      return mime ? mime : '';\n    };\n    var Mime = { guess: guess };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.Writer');\n\n    var DOM$1 = global$3.DOM;\n    var addPx = function (value) {\n      return /^[0-9.]+$/.test(value) ? value + 'px' : value;\n    };\n    var setAttributes = function (attrs, updatedAttrs) {\n      for (var name in updatedAttrs) {\n        var value = '' + updatedAttrs[name];\n        if (attrs.map[name]) {\n          var i = attrs.length;\n          while (i--) {\n            var attr = attrs[i];\n            if (attr.name === name) {\n              if (value) {\n                attrs.map[name] = value;\n                attr.value = value;\n              } else {\n                delete attrs.map[name];\n                attrs.splice(i, 1);\n              }\n            }\n          }\n        } else if (value) {\n          attrs.push({\n            name: name,\n            value: value\n          });\n          attrs.map[name] = value;\n        }\n      }\n    };\n    var updateEphoxEmbed = function (data, attrs) {\n      var style = attrs.map.style;\n      var styleMap = style ? DOM$1.parseStyle(style) : {};\n      styleMap['max-width'] = addPx(data.width);\n      styleMap['max-height'] = addPx(data.height);\n      setAttributes(attrs, { style: DOM$1.serializeStyle(styleMap) });\n    };\n    var updateHtml = function (html, data, updateAll) {\n      var writer = global$7();\n      var isEphoxEmbed = Cell(false);\n      var sourceCount = 0;\n      var hasImage;\n      global$4({\n        validate: false,\n        allow_conditional_comments: true,\n        special: 'script,noscript',\n        comment: function (text) {\n          writer.comment(text);\n        },\n        cdata: function (text) {\n          writer.cdata(text);\n        },\n        text: function (text, raw) {\n          writer.text(text, raw);\n        },\n        start: function (name, attrs, empty) {\n          if (isEphoxEmbed.get()) ; else if (has(attrs.map, 'data-ephox-embed-iri')) {\n            isEphoxEmbed.set(true);\n            updateEphoxEmbed(data, attrs);\n          } else {\n            switch (name) {\n            case 'video':\n            case 'object':\n            case 'embed':\n            case 'img':\n            case 'iframe':\n              if (data.height !== undefined && data.width !== undefined) {\n                setAttributes(attrs, {\n                  width: data.width,\n                  height: data.height\n                });\n              }\n              break;\n            }\n            if (updateAll) {\n              switch (name) {\n              case 'video':\n                setAttributes(attrs, {\n                  poster: data.poster,\n                  src: ''\n                });\n                if (data.source2) {\n                  setAttributes(attrs, { src: '' });\n                }\n                break;\n              case 'iframe':\n                setAttributes(attrs, { src: data.source1 });\n                break;\n              case 'source':\n                sourceCount++;\n                if (sourceCount <= 2) {\n                  setAttributes(attrs, {\n                    src: data['source' + sourceCount],\n                    type: data['source' + sourceCount + 'mime']\n                  });\n                  if (!data['source' + sourceCount]) {\n                    return;\n                  }\n                }\n                break;\n              case 'img':\n                if (!data.poster) {\n                  return;\n                }\n                hasImage = true;\n                break;\n              }\n            }\n          }\n          writer.start(name, attrs, empty);\n        },\n        end: function (name) {\n          if (!isEphoxEmbed.get()) {\n            if (name === 'video' && updateAll) {\n              for (var index = 1; index <= 2; index++) {\n                if (data['source' + index]) {\n                  var attrs = [];\n                  attrs.map = {};\n                  if (sourceCount < index) {\n                    setAttributes(attrs, {\n                      src: data['source' + index],\n                      type: data['source' + index + 'mime']\n                    });\n                    writer.start('source', attrs, true);\n                  }\n                }\n              }\n            }\n            if (data.poster && name === 'object' && updateAll && !hasImage) {\n              var imgAttrs = [];\n              imgAttrs.map = {};\n              setAttributes(imgAttrs, {\n                src: data.poster,\n                width: data.width,\n                height: data.height\n              });\n              writer.start('img', imgAttrs, true);\n            }\n          }\n          writer.end(name);\n        }\n      }, global$6({})).parse(html);\n      return writer.getContent();\n    };\n    var UpdateHtml = { updateHtml: updateHtml };\n\n    var urlPatterns = [\n      {\n        regex: /youtu\\.be\\/([\\w\\-_\\?&=.]+)/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: '//www.youtube.com/embed/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /youtube\\.com(.+)v=([^&]+)(&([a-z0-9&=\\-_]+))?/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: '//www.youtube.com/embed/$2?$4',\n        allowFullscreen: true\n      },\n      {\n        regex: /youtube.com\\/embed\\/([a-z0-9\\?&=\\-_]+)/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: '//www.youtube.com/embed/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /vimeo\\.com\\/([0-9]+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: '//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc',\n        allowFullscreen: true\n      },\n      {\n        regex: /vimeo\\.com\\/(.*)\\/([0-9]+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: '//player.vimeo.com/video/$2?title=0&amp;byline=0',\n        allowFullscreen: true\n      },\n      {\n        regex: /maps\\.google\\.([a-z]{2,3})\\/maps\\/(.+)msid=(.+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: '//maps.google.com/maps/ms?msid=$2&output=embed\"',\n        allowFullscreen: false\n      },\n      {\n        regex: /dailymotion\\.com\\/video\\/([^_]+)/,\n        type: 'iframe',\n        w: 480,\n        h: 270,\n        url: '//www.dailymotion.com/embed/video/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /dai\\.ly\\/([^_]+)/,\n        type: 'iframe',\n        w: 480,\n        h: 270,\n        url: '//www.dailymotion.com/embed/video/$1',\n        allowFullscreen: true\n      }\n    ];\n    var getUrl = function (pattern, url) {\n      var match = pattern.regex.exec(url);\n      var newUrl = pattern.url;\n      var _loop_1 = function (i) {\n        newUrl = newUrl.replace('$' + i, function () {\n          return match[i] ? match[i] : '';\n        });\n      };\n      for (var i = 0; i < match.length; i++) {\n        _loop_1(i);\n      }\n      return newUrl.replace(/\\?$/, '');\n    };\n    var matchPattern = function (url) {\n      var pattern = urlPatterns.filter(function (pattern) {\n        return pattern.regex.test(url);\n      });\n      if (pattern.length > 0) {\n        return global$2.extend({}, pattern[0], { url: getUrl(pattern[0], url) });\n      } else {\n        return null;\n      }\n    };\n\n    var getIframeHtml = function (data) {\n      var allowFullscreen = data.allowFullscreen ? ' allowFullscreen=\"1\"' : '';\n      return '<iframe src=\"' + data.source1 + '\" width=\"' + data.width + '\" height=\"' + data.height + '\"' + allowFullscreen + '></iframe>';\n    };\n    var getFlashHtml = function (data) {\n      var html = '<object data=\"' + data.source1 + '\" width=\"' + data.width + '\" height=\"' + data.height + '\" type=\"application/x-shockwave-flash\">';\n      if (data.poster) {\n        html += '<img src=\"' + data.poster + '\" width=\"' + data.width + '\" height=\"' + data.height + '\" />';\n      }\n      html += '</object>';\n      return html;\n    };\n    var getAudioHtml = function (data, audioTemplateCallback) {\n      if (audioTemplateCallback) {\n        return audioTemplateCallback(data);\n      } else {\n        return '<audio controls=\"controls\" src=\"' + data.source1 + '\">' + (data.source2 ? '\\n<source src=\"' + data.source2 + '\"' + (data.source2mime ? ' type=\"' + data.source2mime + '\"' : '') + ' />\\n' : '') + '</audio>';\n      }\n    };\n    var getVideoHtml = function (data, videoTemplateCallback) {\n      if (videoTemplateCallback) {\n        return videoTemplateCallback(data);\n      } else {\n        return '<video width=\"' + data.width + '\" height=\"' + data.height + '\"' + (data.poster ? ' poster=\"' + data.poster + '\"' : '') + ' controls=\"controls\">\\n' + '<source src=\"' + data.source1 + '\"' + (data.source1mime ? ' type=\"' + data.source1mime + '\"' : '') + ' />\\n' + (data.source2 ? '<source src=\"' + data.source2 + '\"' + (data.source2mime ? ' type=\"' + data.source2mime + '\"' : '') + ' />\\n' : '') + '</video>';\n      }\n    };\n    var getScriptHtml = function (data) {\n      return '<script src=\"' + data.source1 + '\"></script>';\n    };\n    var dataToHtml = function (editor, dataIn) {\n      var data = global$2.extend({}, dataIn);\n      if (!data.source1) {\n        global$2.extend(data, HtmlToData.htmlToData(Settings.getScripts(editor), data.embed));\n        if (!data.source1) {\n          return '';\n        }\n      }\n      if (!data.source2) {\n        data.source2 = '';\n      }\n      if (!data.poster) {\n        data.poster = '';\n      }\n      data.source1 = editor.convertURL(data.source1, 'source');\n      data.source2 = editor.convertURL(data.source2, 'source');\n      data.source1mime = Mime.guess(data.source1);\n      data.source2mime = Mime.guess(data.source2);\n      data.poster = editor.convertURL(data.poster, 'poster');\n      var pattern = matchPattern(data.source1);\n      if (pattern) {\n        data.source1 = pattern.url;\n        data.type = pattern.type;\n        data.allowFullscreen = pattern.allowFullscreen;\n        data.width = data.width || pattern.w;\n        data.height = data.height || pattern.h;\n      }\n      if (data.embed) {\n        return UpdateHtml.updateHtml(data.embed, data, true);\n      } else {\n        var videoScript = VideoScript.getVideoScriptMatch(Settings.getScripts(editor), data.source1);\n        if (videoScript) {\n          data.type = 'script';\n          data.width = videoScript.width;\n          data.height = videoScript.height;\n        }\n        var audioTemplateCallback = Settings.getAudioTemplateCallback(editor);\n        var videoTemplateCallback = Settings.getVideoTemplateCallback(editor);\n        data.width = data.width || 300;\n        data.height = data.height || 150;\n        global$2.each(data, function (value, key) {\n          data[key] = editor.dom.encode(value);\n        });\n        if (data.type === 'iframe') {\n          return getIframeHtml(data);\n        } else if (data.source1mime === 'application/x-shockwave-flash') {\n          return getFlashHtml(data);\n        } else if (data.source1mime.indexOf('audio') !== -1) {\n          return getAudioHtml(data, audioTemplateCallback);\n        } else if (data.type === 'script') {\n          return getScriptHtml(data);\n        } else {\n          return getVideoHtml(data, videoTemplateCallback);\n        }\n      }\n    };\n    var DataToHtml = { dataToHtml: dataToHtml };\n\n    var cache = {};\n    var embedPromise = function (data, dataToHtml, handler) {\n      return new global$5(function (res, rej) {\n        var wrappedResolve = function (response) {\n          if (response.html) {\n            cache[data.source1] = response;\n          }\n          return res({\n            url: data.source1,\n            html: response.html ? response.html : dataToHtml(data)\n          });\n        };\n        if (cache[data.source1]) {\n          wrappedResolve(cache[data.source1]);\n        } else {\n          handler({ url: data.source1 }, wrappedResolve, rej);\n        }\n      });\n    };\n    var defaultPromise = function (data, dataToHtml) {\n      return new global$5(function (res) {\n        res({\n          html: dataToHtml(data),\n          url: data.source1\n        });\n      });\n    };\n    var loadedData = function (editor) {\n      return function (data) {\n        return DataToHtml.dataToHtml(editor, data);\n      };\n    };\n    var getEmbedHtml = function (editor, data) {\n      var embedHandler = Settings.getUrlResolver(editor);\n      return embedHandler ? embedPromise(data, loadedData(editor), embedHandler) : defaultPromise(data, loadedData(editor));\n    };\n    var isCached = function (url) {\n      return cache.hasOwnProperty(url);\n    };\n    var Service = {\n      getEmbedHtml: getEmbedHtml,\n      isCached: isCached\n    };\n\n    var trimPx$1 = function (value) {\n      return value.replace(/px$/, '');\n    };\n    var addPx$1 = function (value) {\n      return /^[0-9.]+$/.test(value) ? value + 'px' : value;\n    };\n    var getSize = function (name) {\n      return function (elm) {\n        return elm ? trimPx$1(elm.style[name]) : '';\n      };\n    };\n    var setSize = function (name) {\n      return function (elm, value) {\n        if (elm) {\n          elm.style[name] = addPx$1(value);\n        }\n      };\n    };\n    var Size = {\n      getMaxWidth: getSize('maxWidth'),\n      getMaxHeight: getSize('maxHeight'),\n      setMaxWidth: setSize('maxWidth'),\n      setMaxHeight: setSize('maxHeight')\n    };\n\n    var doSyncSize = function (widthCtrl, heightCtrl) {\n      widthCtrl.state.set('oldVal', widthCtrl.value());\n      heightCtrl.state.set('oldVal', heightCtrl.value());\n    };\n    var doSizeControls = function (win, f) {\n      var widthCtrl = win.find('#width')[0];\n      var heightCtrl = win.find('#height')[0];\n      var constrained = win.find('#constrain')[0];\n      if (widthCtrl && heightCtrl && constrained) {\n        f(widthCtrl, heightCtrl, constrained.checked());\n      }\n    };\n    var doUpdateSize = function (widthCtrl, heightCtrl, isContrained) {\n      var oldWidth = widthCtrl.state.get('oldVal');\n      var oldHeight = heightCtrl.state.get('oldVal');\n      var newWidth = widthCtrl.value();\n      var newHeight = heightCtrl.value();\n      if (isContrained && oldWidth && oldHeight && newWidth && newHeight) {\n        if (newWidth !== oldWidth) {\n          newHeight = Math.round(newWidth / oldWidth * newHeight);\n          if (!isNaN(newHeight)) {\n            heightCtrl.value(newHeight);\n          }\n        } else {\n          newWidth = Math.round(newHeight / oldHeight * newWidth);\n          if (!isNaN(newWidth)) {\n            widthCtrl.value(newWidth);\n          }\n        }\n      }\n      doSyncSize(widthCtrl, heightCtrl);\n    };\n    var syncSize = function (win) {\n      doSizeControls(win, doSyncSize);\n    };\n    var updateSize = function (win) {\n      doSizeControls(win, doUpdateSize);\n    };\n    var createUi = function (onChange) {\n      var recalcSize = function () {\n        onChange(function (win) {\n          updateSize(win);\n        });\n      };\n      return {\n        type: 'container',\n        label: 'Dimensions',\n        layout: 'flex',\n        align: 'center',\n        spacing: 5,\n        items: [\n          {\n            name: 'width',\n            type: 'textbox',\n            maxLength: 5,\n            size: 5,\n            onchange: recalcSize,\n            ariaLabel: 'Width'\n          },\n          {\n            type: 'label',\n            text: 'x'\n          },\n          {\n            name: 'height',\n            type: 'textbox',\n            maxLength: 5,\n            size: 5,\n            onchange: recalcSize,\n            ariaLabel: 'Height'\n          },\n          {\n            name: 'constrain',\n            type: 'checkbox',\n            checked: true,\n            text: 'Constrain proportions'\n          }\n        ]\n      };\n    };\n    var SizeManager = {\n      createUi: createUi,\n      syncSize: syncSize,\n      updateSize: updateSize\n    };\n\n    var embedChange = global$1.ie && global$1.ie <= 8 ? 'onChange' : 'onInput';\n    var handleError = function (editor) {\n      return function (error) {\n        var errorMessage = error && error.msg ? 'Media embed handler error: ' + error.msg : 'Media embed handler threw unknown error.';\n        editor.notificationManager.open({\n          type: 'error',\n          text: errorMessage\n        });\n      };\n    };\n    var getData = function (editor) {\n      var element = editor.selection.getNode();\n      var dataEmbed = element.getAttribute('data-ephox-embed-iri');\n      if (dataEmbed) {\n        return {\n          'source1': dataEmbed,\n          'data-ephox-embed-iri': dataEmbed,\n          'width': Size.getMaxWidth(element),\n          'height': Size.getMaxHeight(element)\n        };\n      }\n      return element.getAttribute('data-mce-object') ? HtmlToData.htmlToData(Settings.getScripts(editor), editor.serializer.serialize(element, { selection: true })) : {};\n    };\n    var getSource = function (editor) {\n      var elm = editor.selection.getNode();\n      if (elm.getAttribute('data-mce-object') || elm.getAttribute('data-ephox-embed-iri')) {\n        return editor.selection.getContent();\n      }\n    };\n    var addEmbedHtml = function (win, editor) {\n      return function (response) {\n        var html = response.html;\n        var embed = win.find('#embed')[0];\n        var data = global$2.extend(HtmlToData.htmlToData(Settings.getScripts(editor), html), { source1: response.url });\n        win.fromJSON(data);\n        if (embed) {\n          embed.value(html);\n          SizeManager.updateSize(win);\n        }\n      };\n    };\n    var selectPlaceholder = function (editor, beforeObjects) {\n      var i;\n      var y;\n      var afterObjects = editor.dom.select('img[data-mce-object]');\n      for (i = 0; i < beforeObjects.length; i++) {\n        for (y = afterObjects.length - 1; y >= 0; y--) {\n          if (beforeObjects[i] === afterObjects[y]) {\n            afterObjects.splice(y, 1);\n          }\n        }\n      }\n      editor.selection.select(afterObjects[0]);\n    };\n    var handleInsert = function (editor, html) {\n      var beforeObjects = editor.dom.select('img[data-mce-object]');\n      editor.insertContent(html);\n      selectPlaceholder(editor, beforeObjects);\n      editor.nodeChanged();\n    };\n    var submitForm = function (win, editor) {\n      var data = win.toJSON();\n      data.embed = UpdateHtml.updateHtml(data.embed, data);\n      if (data.embed && Service.isCached(data.source1)) {\n        handleInsert(editor, data.embed);\n      } else {\n        Service.getEmbedHtml(editor, data).then(function (response) {\n          handleInsert(editor, response.html);\n        }).catch(handleError(editor));\n      }\n    };\n    var populateMeta = function (win, meta) {\n      global$2.each(meta, function (value, key) {\n        win.find('#' + key).value(value);\n      });\n    };\n    var showDialog = function (editor) {\n      var win;\n      var data;\n      var generalFormItems = [{\n          name: 'source1',\n          type: 'filepicker',\n          filetype: 'media',\n          size: 40,\n          autofocus: true,\n          label: 'Source',\n          onpaste: function () {\n            setTimeout(function () {\n              Service.getEmbedHtml(editor, win.toJSON()).then(addEmbedHtml(win, editor)).catch(handleError(editor));\n            }, 1);\n          },\n          onchange: function (e) {\n            Service.getEmbedHtml(editor, win.toJSON()).then(addEmbedHtml(win, editor)).catch(handleError(editor));\n            populateMeta(win, e.meta);\n          },\n          onbeforecall: function (e) {\n            e.meta = win.toJSON();\n          }\n        }];\n      var advancedFormItems = [];\n      var reserialise = function (update) {\n        update(win);\n        data = win.toJSON();\n        win.find('#embed').value(UpdateHtml.updateHtml(data.embed, data));\n      };\n      if (Settings.hasAltSource(editor)) {\n        advancedFormItems.push({\n          name: 'source2',\n          type: 'filepicker',\n          filetype: 'media',\n          size: 40,\n          label: 'Alternative source'\n        });\n      }\n      if (Settings.hasPoster(editor)) {\n        advancedFormItems.push({\n          name: 'poster',\n          type: 'filepicker',\n          filetype: 'image',\n          size: 40,\n          label: 'Poster'\n        });\n      }\n      if (Settings.hasDimensions(editor)) {\n        var control = SizeManager.createUi(reserialise);\n        generalFormItems.push(control);\n      }\n      data = getData(editor);\n      var embedTextBox = {\n        id: 'mcemediasource',\n        type: 'textbox',\n        flex: 1,\n        name: 'embed',\n        value: getSource(editor),\n        multiline: true,\n        rows: 5,\n        label: 'Source'\n      };\n      var updateValueOnChange = function () {\n        data = global$2.extend({}, HtmlToData.htmlToData(Settings.getScripts(editor), this.value()));\n        this.parent().parent().fromJSON(data);\n      };\n      embedTextBox[embedChange] = updateValueOnChange;\n      var body = [\n        {\n          title: 'General',\n          type: 'form',\n          items: generalFormItems\n        },\n        {\n          title: 'Embed',\n          type: 'container',\n          layout: 'flex',\n          direction: 'column',\n          align: 'stretch',\n          padding: 10,\n          spacing: 10,\n          items: [\n            {\n              type: 'label',\n              text: 'Paste your embed code below:',\n              forId: 'mcemediasource'\n            },\n            embedTextBox\n          ]\n        }\n      ];\n      if (advancedFormItems.length > 0) {\n        body.push({\n          title: 'Advanced',\n          type: 'form',\n          items: advancedFormItems\n        });\n      }\n      win = editor.windowManager.open({\n        title: 'Insert/edit media',\n        data: data,\n        bodyType: 'tabpanel',\n        body: body,\n        onSubmit: function () {\n          SizeManager.updateSize(win);\n          submitForm(win, editor);\n        }\n      });\n      SizeManager.syncSize(win);\n    };\n    var Dialog = { showDialog: showDialog };\n\n    var get$1 = function (editor) {\n      var showDialog = function () {\n        Dialog.showDialog(editor);\n      };\n      return { showDialog: showDialog };\n    };\n    var Api = { get: get$1 };\n\n    var register = function (editor) {\n      var showDialog = function () {\n        Dialog.showDialog(editor);\n      };\n      editor.addCommand('mceMedia', showDialog);\n    };\n    var Commands = { register: register };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var sanitize = function (editor, html) {\n      if (Settings.shouldFilterHtml(editor) === false) {\n        return html;\n      }\n      var writer = global$7();\n      var blocked;\n      global$4({\n        validate: false,\n        allow_conditional_comments: false,\n        special: 'script,noscript',\n        comment: function (text) {\n          writer.comment(text);\n        },\n        cdata: function (text) {\n          writer.cdata(text);\n        },\n        text: function (text, raw) {\n          writer.text(text, raw);\n        },\n        start: function (name, attrs, empty) {\n          blocked = true;\n          if (name === 'script' || name === 'noscript' || name === 'svg') {\n            return;\n          }\n          for (var i = attrs.length - 1; i >= 0; i--) {\n            var attrName = attrs[i].name;\n            if (attrName.indexOf('on') === 0) {\n              delete attrs.map[attrName];\n              attrs.splice(i, 1);\n            }\n            if (attrName === 'style') {\n              attrs[i].value = editor.dom.serializeStyle(editor.dom.parseStyle(attrs[i].value), name);\n            }\n          }\n          writer.start(name, attrs, empty);\n          blocked = false;\n        },\n        end: function (name) {\n          if (blocked) {\n            return;\n          }\n          writer.end(name);\n        }\n      }, global$6({})).parse(html);\n      return writer.getContent();\n    };\n    var Sanitize = { sanitize: sanitize };\n\n    var createPlaceholderNode = function (editor, node) {\n      var placeHolder;\n      var name = node.name;\n      placeHolder = new global$8('img', 1);\n      placeHolder.shortEnded = true;\n      retainAttributesAndInnerHtml(editor, node, placeHolder);\n      placeHolder.attr({\n        'width': node.attr('width') || '300',\n        'height': node.attr('height') || (name === 'audio' ? '30' : '150'),\n        'style': node.attr('style'),\n        'src': global$1.transparentSrc,\n        'data-mce-object': name,\n        'class': 'mce-object mce-object-' + name\n      });\n      return placeHolder;\n    };\n    var createPreviewIframeNode = function (editor, node) {\n      var previewWrapper;\n      var previewNode;\n      var shimNode;\n      var name = node.name;\n      previewWrapper = new global$8('span', 1);\n      previewWrapper.attr({\n        'contentEditable': 'false',\n        'style': node.attr('style'),\n        'data-mce-object': name,\n        'class': 'mce-preview-object mce-object-' + name\n      });\n      retainAttributesAndInnerHtml(editor, node, previewWrapper);\n      previewNode = new global$8(name, 1);\n      previewNode.attr({\n        src: node.attr('src'),\n        allowfullscreen: node.attr('allowfullscreen'),\n        style: node.attr('style'),\n        class: node.attr('class'),\n        width: node.attr('width'),\n        height: node.attr('height'),\n        frameborder: '0'\n      });\n      shimNode = new global$8('span', 1);\n      shimNode.attr('class', 'mce-shim');\n      previewWrapper.append(previewNode);\n      previewWrapper.append(shimNode);\n      return previewWrapper;\n    };\n    var retainAttributesAndInnerHtml = function (editor, sourceNode, targetNode) {\n      var attrName;\n      var attrValue;\n      var attribs;\n      var ai;\n      var innerHtml;\n      attribs = sourceNode.attributes;\n      ai = attribs.length;\n      while (ai--) {\n        attrName = attribs[ai].name;\n        attrValue = attribs[ai].value;\n        if (attrName !== 'width' && attrName !== 'height' && attrName !== 'style') {\n          if (attrName === 'data' || attrName === 'src') {\n            attrValue = editor.convertURL(attrValue, attrName);\n          }\n          targetNode.attr('data-mce-p-' + attrName, attrValue);\n        }\n      }\n      innerHtml = sourceNode.firstChild && sourceNode.firstChild.value;\n      if (innerHtml) {\n        targetNode.attr('data-mce-html', escape(Sanitize.sanitize(editor, innerHtml)));\n        targetNode.firstChild = null;\n      }\n    };\n    var isWithinEphoxEmbed = function (node) {\n      while (node = node.parent) {\n        if (node.attr('data-ephox-embed-iri')) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var placeHolderConverter = function (editor) {\n      return function (nodes) {\n        var i = nodes.length;\n        var node;\n        var videoScript;\n        while (i--) {\n          node = nodes[i];\n          if (!node.parent) {\n            continue;\n          }\n          if (node.parent.attr('data-mce-object')) {\n            continue;\n          }\n          if (node.name === 'script') {\n            videoScript = VideoScript.getVideoScriptMatch(Settings.getScripts(editor), node.attr('src'));\n            if (!videoScript) {\n              continue;\n            }\n          }\n          if (videoScript) {\n            if (videoScript.width) {\n              node.attr('width', videoScript.width.toString());\n            }\n            if (videoScript.height) {\n              node.attr('height', videoScript.height.toString());\n            }\n          }\n          if (node.name === 'iframe' && Settings.hasLiveEmbeds(editor) && global$1.ceFalse) {\n            if (!isWithinEphoxEmbed(node)) {\n              node.replace(createPreviewIframeNode(editor, node));\n            }\n          } else {\n            if (!isWithinEphoxEmbed(node)) {\n              node.replace(createPlaceholderNode(editor, node));\n            }\n          }\n        }\n      };\n    };\n    var Nodes = {\n      createPreviewIframeNode: createPreviewIframeNode,\n      createPlaceholderNode: createPlaceholderNode,\n      placeHolderConverter: placeHolderConverter\n    };\n\n    var setup = function (editor) {\n      editor.on('preInit', function () {\n        var specialElements = editor.schema.getSpecialElements();\n        global$2.each('video audio iframe object'.split(' '), function (name) {\n          specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n        });\n        var boolAttrs = editor.schema.getBoolAttrs();\n        global$2.each('webkitallowfullscreen mozallowfullscreen allowfullscreen'.split(' '), function (name) {\n          boolAttrs[name] = {};\n        });\n        editor.parser.addNodeFilter('iframe,video,audio,object,embed,script', Nodes.placeHolderConverter(editor));\n        editor.serializer.addAttributeFilter('data-mce-object', function (nodes, name) {\n          var i = nodes.length;\n          var node;\n          var realElm;\n          var ai;\n          var attribs;\n          var innerHtml;\n          var innerNode;\n          var realElmName;\n          var className;\n          while (i--) {\n            node = nodes[i];\n            if (!node.parent) {\n              continue;\n            }\n            realElmName = node.attr(name);\n            realElm = new global$8(realElmName, 1);\n            if (realElmName !== 'audio' && realElmName !== 'script') {\n              className = node.attr('class');\n              if (className && className.indexOf('mce-preview-object') !== -1) {\n                realElm.attr({\n                  width: node.firstChild.attr('width'),\n                  height: node.firstChild.attr('height')\n                });\n              } else {\n                realElm.attr({\n                  width: node.attr('width'),\n                  height: node.attr('height')\n                });\n              }\n            }\n            realElm.attr({ style: node.attr('style') });\n            attribs = node.attributes;\n            ai = attribs.length;\n            while (ai--) {\n              var attrName = attribs[ai].name;\n              if (attrName.indexOf('data-mce-p-') === 0) {\n                realElm.attr(attrName.substr(11), attribs[ai].value);\n              }\n            }\n            if (realElmName === 'script') {\n              realElm.attr('type', 'text/javascript');\n            }\n            innerHtml = node.attr('data-mce-html');\n            if (innerHtml) {\n              innerNode = new global$8('#text', 3);\n              innerNode.raw = true;\n              innerNode.value = Sanitize.sanitize(editor, unescape(innerHtml));\n              realElm.append(innerNode);\n            }\n            node.replace(realElm);\n          }\n        });\n      });\n      editor.on('setContent', function () {\n        editor.$('span.mce-preview-object').each(function (index, elm) {\n          var $elm = editor.$(elm);\n          if ($elm.find('span.mce-shim', elm).length === 0) {\n            $elm.append('<span class=\"mce-shim\"></span>');\n          }\n        });\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var setup$1 = function (editor) {\n      editor.on('ResolveName', function (e) {\n        var name;\n        if (e.target.nodeType === 1 && (name = e.target.getAttribute('data-mce-object'))) {\n          e.name = name;\n        }\n      });\n    };\n    var ResolveName = { setup: setup$1 };\n\n    var setup$2 = function (editor) {\n      editor.on('click keyup', function () {\n        var selectedNode = editor.selection.getNode();\n        if (selectedNode && editor.dom.hasClass(selectedNode, 'mce-preview-object')) {\n          if (editor.dom.getAttrib(selectedNode, 'data-mce-selected')) {\n            selectedNode.setAttribute('data-mce-selected', '2');\n          }\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        var objectType = e.target.getAttribute('data-mce-object');\n        if (objectType === 'audio' || objectType === 'script') {\n          e.preventDefault();\n        }\n      });\n      editor.on('objectResized', function (e) {\n        var target = e.target;\n        var html;\n        if (target.getAttribute('data-mce-object')) {\n          html = target.getAttribute('data-mce-html');\n          if (html) {\n            html = unescape(html);\n            target.setAttribute('data-mce-html', escape(UpdateHtml.updateHtml(html, {\n              width: e.width,\n              height: e.height\n            })));\n          }\n        }\n      });\n    };\n    var Selection = { setup: setup$2 };\n\n    var register$1 = function (editor) {\n      editor.addButton('media', {\n        tooltip: 'Insert/edit media',\n        cmd: 'mceMedia',\n        stateSelector: [\n          'img[data-mce-object]',\n          'span[data-mce-object]',\n          'div[data-ephox-embed-iri]'\n        ]\n      });\n      editor.addMenuItem('media', {\n        icon: 'media',\n        text: 'Media',\n        cmd: 'mceMedia',\n        context: 'insert',\n        prependToContext: true\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('media', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      ResolveName.setup(editor);\n      FilterContent.setup(editor);\n      Selection.setup(editor);\n      return Api.get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar importcss = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var shouldMergeClasses = function (editor) {\n      return editor.getParam('importcss_merge_classes');\n    };\n    var shouldImportExclusive = function (editor) {\n      return editor.getParam('importcss_exclusive');\n    };\n    var getSelectorConverter = function (editor) {\n      return editor.getParam('importcss_selector_converter');\n    };\n    var getSelectorFilter = function (editor) {\n      return editor.getParam('importcss_selector_filter');\n    };\n    var getCssGroups = function (editor) {\n      return editor.getParam('importcss_groups');\n    };\n    var shouldAppend = function (editor) {\n      return editor.getParam('importcss_append');\n    };\n    var getFileFilter = function (editor) {\n      return editor.getParam('importcss_file_filter');\n    };\n    var Settings = {\n      shouldMergeClasses: shouldMergeClasses,\n      shouldImportExclusive: shouldImportExclusive,\n      getSelectorConverter: getSelectorConverter,\n      getSelectorFilter: getSelectorFilter,\n      getCssGroups: getCssGroups,\n      shouldAppend: shouldAppend,\n      getFileFilter: getFileFilter\n    };\n\n    var removeCacheSuffix = function (url) {\n      var cacheSuffix = global$3.cacheSuffix;\n      if (typeof url === 'string') {\n        url = url.replace('?' + cacheSuffix, '').replace('&' + cacheSuffix, '');\n      }\n      return url;\n    };\n    var isSkinContentCss = function (editor, href) {\n      var settings = editor.settings, skin = settings.skin !== false ? settings.skin || 'lightgray' : false;\n      if (skin) {\n        var skinUrl = settings.skin_url ? editor.documentBaseURI.toAbsolute(settings.skin_url) : global$2.baseURL + '/skins/' + skin;\n        return href === skinUrl + '/content' + (editor.inline ? '.inline' : '') + '.min.css';\n      }\n      return false;\n    };\n    var compileFilter = function (filter) {\n      if (typeof filter === 'string') {\n        return function (value) {\n          return value.indexOf(filter) !== -1;\n        };\n      } else if (filter instanceof RegExp) {\n        return function (value) {\n          return filter.test(value);\n        };\n      }\n      return filter;\n    };\n    var getSelectors = function (editor, doc, fileFilter) {\n      var selectors = [], contentCSSUrls = {};\n      function append(styleSheet, imported) {\n        var href = styleSheet.href, rules;\n        href = removeCacheSuffix(href);\n        if (!href || !fileFilter(href, imported) || isSkinContentCss(editor, href)) {\n          return;\n        }\n        global$4.each(styleSheet.imports, function (styleSheet) {\n          append(styleSheet, true);\n        });\n        try {\n          rules = styleSheet.cssRules || styleSheet.rules;\n        } catch (e) {\n        }\n        global$4.each(rules, function (cssRule) {\n          if (cssRule.styleSheet) {\n            append(cssRule.styleSheet, true);\n          } else if (cssRule.selectorText) {\n            global$4.each(cssRule.selectorText.split(','), function (selector) {\n              selectors.push(global$4.trim(selector));\n            });\n          }\n        });\n      }\n      global$4.each(editor.contentCSS, function (url) {\n        contentCSSUrls[url] = true;\n      });\n      if (!fileFilter) {\n        fileFilter = function (href, imported) {\n          return imported || contentCSSUrls[href];\n        };\n      }\n      try {\n        global$4.each(doc.styleSheets, function (styleSheet) {\n          append(styleSheet);\n        });\n      } catch (e) {\n      }\n      return selectors;\n    };\n    var defaultConvertSelectorToFormat = function (editor, selectorText) {\n      var format;\n      var selector = /^(?:([a-z0-9\\-_]+))?(\\.[a-z0-9_\\-\\.]+)$/i.exec(selectorText);\n      if (!selector) {\n        return;\n      }\n      var elementName = selector[1];\n      var classes = selector[2].substr(1).split('.').join(' ');\n      var inlineSelectorElements = global$4.makeMap('a,img');\n      if (selector[1]) {\n        format = { title: selectorText };\n        if (editor.schema.getTextBlockElements()[elementName]) {\n          format.block = elementName;\n        } else if (editor.schema.getBlockElements()[elementName] || inlineSelectorElements[elementName.toLowerCase()]) {\n          format.selector = elementName;\n        } else {\n          format.inline = elementName;\n        }\n      } else if (selector[2]) {\n        format = {\n          inline: 'span',\n          title: selectorText.substr(1),\n          classes: classes\n        };\n      }\n      if (Settings.shouldMergeClasses(editor) !== false) {\n        format.classes = classes;\n      } else {\n        format.attributes = { class: classes };\n      }\n      return format;\n    };\n    var getGroupsBySelector = function (groups, selector) {\n      return global$4.grep(groups, function (group) {\n        return !group.filter || group.filter(selector);\n      });\n    };\n    var compileUserDefinedGroups = function (groups) {\n      return global$4.map(groups, function (group) {\n        return global$4.extend({}, group, {\n          original: group,\n          selectors: {},\n          filter: compileFilter(group.filter),\n          item: {\n            text: group.title,\n            menu: []\n          }\n        });\n      });\n    };\n    var isExclusiveMode = function (editor, group) {\n      return group === null || Settings.shouldImportExclusive(editor) !== false;\n    };\n    var isUniqueSelector = function (editor, selector, group, globallyUniqueSelectors) {\n      return !(isExclusiveMode(editor, group) ? selector in globallyUniqueSelectors : selector in group.selectors);\n    };\n    var markUniqueSelector = function (editor, selector, group, globallyUniqueSelectors) {\n      if (isExclusiveMode(editor, group)) {\n        globallyUniqueSelectors[selector] = true;\n      } else {\n        group.selectors[selector] = true;\n      }\n    };\n    var convertSelectorToFormat = function (editor, plugin, selector, group) {\n      var selectorConverter;\n      if (group && group.selector_converter) {\n        selectorConverter = group.selector_converter;\n      } else if (Settings.getSelectorConverter(editor)) {\n        selectorConverter = Settings.getSelectorConverter(editor);\n      } else {\n        selectorConverter = function () {\n          return defaultConvertSelectorToFormat(editor, selector);\n        };\n      }\n      return selectorConverter.call(plugin, selector, group);\n    };\n    var setup = function (editor) {\n      editor.on('renderFormatsMenu', function (e) {\n        var globallyUniqueSelectors = {};\n        var selectorFilter = compileFilter(Settings.getSelectorFilter(editor)), ctrl = e.control;\n        var groups = compileUserDefinedGroups(Settings.getCssGroups(editor));\n        var processSelector = function (selector, group) {\n          if (isUniqueSelector(editor, selector, group, globallyUniqueSelectors)) {\n            markUniqueSelector(editor, selector, group, globallyUniqueSelectors);\n            var format = convertSelectorToFormat(editor, editor.plugins.importcss, selector, group);\n            if (format) {\n              var formatName = format.name || global$1.DOM.uniqueId();\n              editor.formatter.register(formatName, format);\n              return global$4.extend({}, ctrl.settings.itemDefaults, {\n                text: format.title,\n                format: formatName\n              });\n            }\n          }\n          return null;\n        };\n        if (!Settings.shouldAppend(editor)) {\n          ctrl.items().remove();\n        }\n        global$4.each(getSelectors(editor, e.doc || editor.getDoc(), compileFilter(Settings.getFileFilter(editor))), function (selector) {\n          if (selector.indexOf('.mce-') === -1) {\n            if (!selectorFilter || selectorFilter(selector)) {\n              var selectorGroups = getGroupsBySelector(groups, selector);\n              if (selectorGroups.length > 0) {\n                global$4.each(selectorGroups, function (group) {\n                  var menuItem = processSelector(selector, group);\n                  if (menuItem) {\n                    group.item.menu.push(menuItem);\n                  }\n                });\n              } else {\n                var menuItem = processSelector(selector, null);\n                if (menuItem) {\n                  ctrl.add(menuItem);\n                }\n              }\n            }\n          }\n        });\n        global$4.each(groups, function (group) {\n          if (group.item.menu.length > 0) {\n            ctrl.add(group.item);\n          }\n        });\n        e.control.renderNew();\n      });\n    };\n    var ImportCss = {\n      defaultConvertSelectorToFormat: defaultConvertSelectorToFormat,\n      setup: setup\n    };\n\n    var get = function (editor) {\n      var convertSelectorToFormat = function (selectorText) {\n        return ImportCss.defaultConvertSelectorToFormat(editor, selectorText);\n      };\n      return { convertSelectorToFormat: convertSelectorToFormat };\n    };\n    var Api = { get: get };\n\n    global.add('importcss', function (editor) {\n      ImportCss.setup(editor);\n      return Api.get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar textpattern = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var hasOwnProperty = Object.hasOwnProperty;\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var isInlinePattern = function (pattern) {\n      return has(pattern, 'start') && has(pattern, 'end');\n    };\n    var isBlockPattern = function (pattern) {\n      return !has(pattern, 'end') && !has(pattern, 'replacement');\n    };\n    var isReplacementPattern = function (pattern) {\n      return has(pattern, 'replacement');\n    };\n    var sortPatterns = function (patterns) {\n      return sort(patterns, function (a, b) {\n        if (a.start.length === b.start.length) {\n          return 0;\n        }\n        return a.start.length > b.start.length ? -1 : 1;\n      });\n    };\n    var createPatternSet = function (patterns) {\n      return {\n        inlinePatterns: sortPatterns(filter(patterns, isInlinePattern)),\n        blockPatterns: sortPatterns(filter(patterns, isBlockPattern)),\n        replacementPatterns: filter(patterns, isReplacementPattern)\n      };\n    };\n\n    var get$1 = function (patternsState) {\n      var setPatterns = function (newPatterns) {\n        patternsState.set(createPatternSet(newPatterns));\n      };\n      var getPatterns = function () {\n        return __spreadArrays(patternsState.get().inlinePatterns, patternsState.get().blockPatterns, patternsState.get().replacementPatterns);\n      };\n      return {\n        setPatterns: setPatterns,\n        getPatterns: getPatterns\n      };\n    };\n    var Api = { get: get$1 };\n\n    var defaultPatterns = [\n      {\n        start: '*',\n        end: '*',\n        format: 'italic'\n      },\n      {\n        start: '**',\n        end: '**',\n        format: 'bold'\n      },\n      {\n        start: '***',\n        end: '***',\n        format: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        start: '#',\n        format: 'h1'\n      },\n      {\n        start: '##',\n        format: 'h2'\n      },\n      {\n        start: '###',\n        format: 'h3'\n      },\n      {\n        start: '####',\n        format: 'h4'\n      },\n      {\n        start: '#####',\n        format: 'h5'\n      },\n      {\n        start: '######',\n        format: 'h6'\n      },\n      {\n        start: '1. ',\n        cmd: 'InsertOrderedList'\n      },\n      {\n        start: '* ',\n        cmd: 'InsertUnorderedList'\n      },\n      {\n        start: '- ',\n        cmd: 'InsertUnorderedList'\n      }\n    ];\n    var getPatternSet = function (editorSettings) {\n      var patterns = get(editorSettings, 'textpattern_patterns').getOr(defaultPatterns);\n      return createPatternSet(patterns);\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var findPattern = function (patterns, text) {\n      for (var i = 0; i < patterns.length; i++) {\n        var pattern = patterns[i];\n        if (text.indexOf(pattern.start) !== 0) {\n          continue;\n        }\n        if (pattern.end && text.lastIndexOf(pattern.end) !== text.length - pattern.end.length) {\n          continue;\n        }\n        return pattern;\n      }\n    };\n    var isMatchingPattern = function (pattern, text, offset, delta) {\n      var textEnd = text.substr(offset - pattern.end.length - delta, pattern.end.length);\n      return textEnd === pattern.end;\n    };\n    var hasContent = function (offset, delta, pattern) {\n      return offset - delta - pattern.end.length - pattern.start.length > 0;\n    };\n    var findEndPattern = function (patterns, text, offset, delta) {\n      var pattern, i;\n      for (i = 0; i < patterns.length; i++) {\n        pattern = patterns[i];\n        if (pattern.end !== undefined && isMatchingPattern(pattern, text, offset, delta) && hasContent(offset, delta, pattern)) {\n          return pattern;\n        }\n      }\n    };\n    var findInlinePattern = function (patterns, rng, space) {\n      if (rng.collapsed === false) {\n        return;\n      }\n      var container = rng.startContainer;\n      var text = container.data;\n      var delta = space === true ? 1 : 0;\n      if (container.nodeType !== 3) {\n        return;\n      }\n      var endPattern = findEndPattern(patterns, text, rng.startOffset, delta);\n      if (endPattern === undefined) {\n        return;\n      }\n      var endOffset = text.lastIndexOf(endPattern.end, rng.startOffset - delta);\n      var startOffset = text.lastIndexOf(endPattern.start, endOffset - endPattern.end.length);\n      endOffset = text.indexOf(endPattern.end, startOffset + endPattern.start.length);\n      if (startOffset === -1) {\n        return;\n      }\n      var patternRng = domGlobals.document.createRange();\n      patternRng.setStart(container, startOffset);\n      patternRng.setEnd(container, endOffset + endPattern.end.length);\n      var startPattern = findPattern(patterns, patternRng.toString());\n      if (endPattern === undefined || startPattern !== endPattern || container.data.length <= endPattern.start.length + endPattern.end.length) {\n        return;\n      }\n      return {\n        pattern: endPattern,\n        startOffset: startOffset,\n        endOffset: endOffset\n      };\n    };\n    var findReplacementPattern = function (patterns, startSearch, text) {\n      for (var i = 0; i < patterns.length; i++) {\n        var index = text.lastIndexOf(patterns[i].start, startSearch);\n        if (index !== -1) {\n          return Option.some({\n            pattern: patterns[i],\n            startOffset: index\n          });\n        }\n      }\n      return Option.none();\n    };\n\n    var isText = function (node) {\n      return node && node.nodeType === 3;\n    };\n    var setSelection = function (editor, textNode, offset) {\n      var newRng = editor.dom.createRng();\n      newRng.setStart(textNode, offset);\n      newRng.setEnd(textNode, offset);\n      editor.selection.setRng(newRng);\n    };\n    var splitContainer = function (container, pattern, endOffset, startOffset) {\n      container = startOffset > 0 ? container.splitText(startOffset) : container;\n      container.splitText(endOffset - startOffset + pattern.end.length);\n      container.deleteData(0, pattern.start.length);\n      container.deleteData(container.data.length - pattern.end.length, pattern.end.length);\n      return container;\n    };\n    var splitAndApply = function (editor, container, found, inline) {\n      var formatArray = global$4.isArray(found.pattern.format) ? found.pattern.format : [found.pattern.format];\n      var validFormats = global$4.grep(formatArray, function (formatName) {\n        var format = editor.formatter.get(formatName);\n        return format && format[0].inline;\n      });\n      if (validFormats.length !== 0) {\n        editor.undoManager.transact(function () {\n          container = splitContainer(container, found.pattern, found.endOffset, found.startOffset);\n          if (inline) {\n            editor.selection.setCursorLocation(container.nextSibling, 1);\n          }\n          formatArray.forEach(function (format) {\n            editor.formatter.apply(format, {}, container);\n          });\n        });\n        return container;\n      }\n    };\n    var applyInlinePattern = function (editor, patterns, inline) {\n      var rng = editor.selection.getRng();\n      return Option.from(findInlinePattern(patterns, rng, inline)).map(function (foundPattern) {\n        return splitAndApply(editor, rng.startContainer, foundPattern, inline);\n      });\n    };\n    var applyInlinePatternSpace = function (editor, patterns) {\n      applyInlinePattern(editor, patterns, true).each(function (wrappedTextNode) {\n        var lastChar = wrappedTextNode.data.slice(-1);\n        if (/[\\u00a0 ]/.test(lastChar)) {\n          wrappedTextNode.deleteData(wrappedTextNode.data.length - 1, 1);\n          var lastCharNode = editor.dom.doc.createTextNode(lastChar);\n          editor.dom.insertAfter(lastCharNode, wrappedTextNode.parentNode);\n          setSelection(editor, lastCharNode, 1);\n        }\n      });\n    };\n    var applyInlinePatternEnter = function (editor, patterns) {\n      applyInlinePattern(editor, patterns, false).each(function (wrappedTextNode) {\n        setSelection(editor, wrappedTextNode, wrappedTextNode.data.length);\n      });\n    };\n    var applyBlockPattern = function (editor, patterns) {\n      var selection, dom, container, firstTextNode, node, format, textBlockElm, pattern, walker, rng, offset;\n      selection = editor.selection;\n      dom = editor.dom;\n      if (!selection.isCollapsed()) {\n        return;\n      }\n      textBlockElm = dom.getParent(selection.getStart(), 'p');\n      if (textBlockElm) {\n        walker = new global$3(textBlockElm, textBlockElm);\n        while (node = walker.next()) {\n          if (isText(node)) {\n            firstTextNode = node;\n            break;\n          }\n        }\n        if (firstTextNode) {\n          pattern = findPattern(patterns, firstTextNode.data);\n          if (!pattern) {\n            return;\n          }\n          rng = selection.getRng(true);\n          container = rng.startContainer;\n          offset = rng.startOffset;\n          if (firstTextNode === container) {\n            offset = Math.max(0, offset - pattern.start.length);\n          }\n          if (global$4.trim(firstTextNode.data).length === pattern.start.length) {\n            return;\n          }\n          if (pattern.format) {\n            format = editor.formatter.get(pattern.format);\n            if (format && format[0].block) {\n              firstTextNode.deleteData(0, pattern.start.length);\n              editor.formatter.apply(pattern.format, {}, firstTextNode);\n              rng.setStart(container, offset);\n              rng.collapse(true);\n              selection.setRng(rng);\n            }\n          }\n          if (pattern.cmd) {\n            editor.undoManager.transact(function () {\n              firstTextNode.deleteData(0, pattern.start.length);\n              editor.execCommand(pattern.cmd);\n            });\n          }\n        }\n      }\n    };\n    var selectionInsertText = function (editor, string) {\n      var rng = editor.selection.getRng();\n      var container = rng.startContainer;\n      if (isText(container)) {\n        var offset = rng.startOffset;\n        container.insertData(offset, string);\n        setSelection(editor, container, offset + string.length);\n      } else {\n        var newNode = editor.dom.doc.createTextNode(string);\n        rng.insertNode(newNode);\n        setSelection(editor, newNode, newNode.length);\n      }\n    };\n    var applyReplacement = function (editor, target, match) {\n      target.deleteData(match.startOffset, match.pattern.start.length);\n      editor.insertContent(match.pattern.replacement);\n      Option.from(target.nextSibling).filter(isText).each(function (nextSibling) {\n        nextSibling.insertData(0, target.data);\n        editor.dom.remove(target);\n      });\n    };\n    var extractChar = function (node, match) {\n      var offset = match.startOffset + match.pattern.start.length;\n      var char = node.data.slice(offset, offset + 1);\n      node.deleteData(offset, 1);\n      return char;\n    };\n    var applyReplacementPattern = function (editor, patterns, inline) {\n      var rng = editor.selection.getRng();\n      var container = rng.startContainer;\n      if (rng.collapsed && isText(container)) {\n        findReplacementPattern(patterns, rng.startOffset, container.data).each(function (match) {\n          var char = inline ? Option.some(extractChar(container, match)) : Option.none();\n          applyReplacement(editor, container, match);\n          char.each(function (ch) {\n            return selectionInsertText(editor, ch);\n          });\n        });\n      }\n    };\n    var applyReplacementPatternSpace = function (editor, patterns) {\n      applyReplacementPattern(editor, patterns, true);\n    };\n    var applyReplacementPatternEnter = function (editor, patterns) {\n      applyReplacementPattern(editor, patterns, false);\n    };\n\n    var handleEnter = function (editor, patternSet) {\n      applyReplacementPatternEnter(editor, patternSet.replacementPatterns);\n      applyInlinePatternEnter(editor, patternSet.inlinePatterns);\n      applyBlockPattern(editor, patternSet.blockPatterns);\n    };\n    var handleInlineKey = function (editor, patternSet) {\n      applyReplacementPatternSpace(editor, patternSet.replacementPatterns);\n      applyInlinePatternSpace(editor, patternSet.inlinePatterns);\n    };\n    var checkKeyEvent = function (codes, event, predicate) {\n      for (var i = 0; i < codes.length; i++) {\n        if (predicate(codes[i], event)) {\n          return true;\n        }\n      }\n    };\n    var checkKeyCode = function (codes, event) {\n      return checkKeyEvent(codes, event, function (code, event) {\n        return code === event.keyCode && global$2.modifierPressed(event) === false;\n      });\n    };\n    var checkCharCode = function (chars, event) {\n      return checkKeyEvent(chars, event, function (chr, event) {\n        return chr.charCodeAt(0) === event.charCode;\n      });\n    };\n    var KeyHandler = {\n      handleEnter: handleEnter,\n      handleInlineKey: handleInlineKey,\n      checkCharCode: checkCharCode,\n      checkKeyCode: checkKeyCode\n    };\n\n    var setup = function (editor, patternsState) {\n      var charCodes = [\n        ',',\n        '.',\n        ';',\n        ':',\n        '!',\n        '?'\n      ];\n      var keyCodes = [32];\n      editor.on('keydown', function (e) {\n        if (e.keyCode === 13 && !global$2.modifierPressed(e)) {\n          KeyHandler.handleEnter(editor, patternsState.get());\n        }\n      }, true);\n      editor.on('keyup', function (e) {\n        if (KeyHandler.checkKeyCode(keyCodes, e)) {\n          KeyHandler.handleInlineKey(editor, patternsState.get());\n        }\n      });\n      editor.on('keypress', function (e) {\n        if (KeyHandler.checkCharCode(charCodes, e)) {\n          global$1.setEditorTimeout(editor, function () {\n            KeyHandler.handleInlineKey(editor, patternsState.get());\n          });\n        }\n      });\n    };\n    var Keyboard = { setup: setup };\n\n    global.add('textpattern', function (editor) {\n      var patternsState = Cell(getPatternSet(editor.settings));\n      Keyboard.setup(editor, patternsState);\n      return Api.get(patternsState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","// Exports the \"media\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/media')\n//   ES2015:\n//     import 'tinymce/plugins/media'\nrequire('./plugin.js');","(function () {\nvar help = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var meta = global$2.mac ? '\\u2318' : 'Ctrl';\n    var access = global$2.mac ? 'Ctrl + Alt' : 'Shift + Alt';\n    var shortcuts = [\n      {\n        shortcut: meta + ' + B',\n        action: 'Bold'\n      },\n      {\n        shortcut: meta + ' + I',\n        action: 'Italic'\n      },\n      {\n        shortcut: meta + ' + U',\n        action: 'Underline'\n      },\n      {\n        shortcut: meta + ' + A',\n        action: 'Select all'\n      },\n      {\n        shortcut: meta + ' + Y or ' + meta + ' + Shift + Z',\n        action: 'Redo'\n      },\n      {\n        shortcut: meta + ' + Z',\n        action: 'Undo'\n      },\n      {\n        shortcut: access + ' + 1',\n        action: 'Header 1'\n      },\n      {\n        shortcut: access + ' + 2',\n        action: 'Header 2'\n      },\n      {\n        shortcut: access + ' + 3',\n        action: 'Header 3'\n      },\n      {\n        shortcut: access + ' + 4',\n        action: 'Header 4'\n      },\n      {\n        shortcut: access + ' + 5',\n        action: 'Header 5'\n      },\n      {\n        shortcut: access + ' + 6',\n        action: 'Header 6'\n      },\n      {\n        shortcut: access + ' + 7',\n        action: 'Paragraph'\n      },\n      {\n        shortcut: access + ' + 8',\n        action: 'Div'\n      },\n      {\n        shortcut: access + ' + 9',\n        action: 'Address'\n      },\n      {\n        shortcut: 'Alt + F9',\n        action: 'Focus to menubar'\n      },\n      {\n        shortcut: 'Alt + F10',\n        action: 'Focus to toolbar'\n      },\n      {\n        shortcut: 'Alt + F11',\n        action: 'Focus to element path'\n      },\n      {\n        shortcut: 'Ctrl + F9',\n        action: 'Focus to contextual toolbar'\n      },\n      {\n        shortcut: meta + ' + K',\n        action: 'Insert link (if link plugin activated)'\n      },\n      {\n        shortcut: meta + ' + S',\n        action: 'Save (if save plugin activated)'\n      },\n      {\n        shortcut: meta + ' + F',\n        action: 'Find (if searchreplace plugin activated)'\n      }\n    ];\n    var KeyboardShortcuts = { shortcuts: shortcuts };\n\n    var makeTab = function () {\n      var makeAriaLabel = function (shortcut) {\n        return 'aria-label=\"Action: ' + shortcut.action + ', Shortcut: ' + shortcut.shortcut.replace(/Ctrl/g, 'Control') + '\"';\n      };\n      var shortcutLisString = map(KeyboardShortcuts.shortcuts, function (shortcut) {\n        return '<tr data-mce-tabstop=\"1\" tabindex=\"-1\" ' + makeAriaLabel(shortcut) + '>' + '<td>' + global$1.translate(shortcut.action) + '</td>' + '<td>' + shortcut.shortcut + '</td>' + '</tr>';\n      }).join('');\n      return {\n        title: 'Handy Shortcuts',\n        type: 'container',\n        style: 'overflow-y: auto; overflow-x: hidden; max-height: 250px',\n        items: [{\n            type: 'container',\n            html: '<div>' + '<table class=\"mce-table-striped\">' + '<thead>' + '<th>' + global$1.translate('Action') + '</th>' + '<th>' + global$1.translate('Shortcut') + '</th>' + '</thead>' + shortcutLisString + '</table>' + '</div>'\n          }]\n      };\n    };\n    var KeyboardShortcutsTab = { makeTab: makeTab };\n\n    var keys = Object.keys;\n\n    var supplant = function (str, obj) {\n      var isStringOrNumber = function (a) {\n        var t = typeof a;\n        return t === 'string' || t === 'number';\n      };\n      return str.replace(/\\$\\{([^{}]*)\\}/g, function (fullMatch, key) {\n        var value = obj[key];\n        return isStringOrNumber(value) ? value.toString() : fullMatch;\n      });\n    };\n\n    var urls = [\n      {\n        key: 'advlist',\n        name: 'Advanced List'\n      },\n      {\n        key: 'anchor',\n        name: 'Anchor'\n      },\n      {\n        key: 'autolink',\n        name: 'Autolink'\n      },\n      {\n        key: 'autoresize',\n        name: 'Autoresize'\n      },\n      {\n        key: 'autosave',\n        name: 'Autosave'\n      },\n      {\n        key: 'bbcode',\n        name: 'BBCode'\n      },\n      {\n        key: 'charmap',\n        name: 'Character Map'\n      },\n      {\n        key: 'code',\n        name: 'Code'\n      },\n      {\n        key: 'codesample',\n        name: 'Code Sample'\n      },\n      {\n        key: 'colorpicker',\n        name: 'Color Picker'\n      },\n      {\n        key: 'compat3x',\n        name: '3.x Compatibility'\n      },\n      {\n        key: 'contextmenu',\n        name: 'Context Menu'\n      },\n      {\n        key: 'directionality',\n        name: 'Directionality'\n      },\n      {\n        key: 'emoticons',\n        name: 'Emoticons'\n      },\n      {\n        key: 'fullpage',\n        name: 'Full Page'\n      },\n      {\n        key: 'fullscreen',\n        name: 'Full Screen'\n      },\n      {\n        key: 'help',\n        name: 'Help'\n      },\n      {\n        key: 'hr',\n        name: 'Horizontal Rule'\n      },\n      {\n        key: 'image',\n        name: 'Image'\n      },\n      {\n        key: 'imagetools',\n        name: 'Image Tools'\n      },\n      {\n        key: 'importcss',\n        name: 'Import CSS'\n      },\n      {\n        key: 'insertdatetime',\n        name: 'Insert Date/Time'\n      },\n      {\n        key: 'legacyoutput',\n        name: 'Legacy Output'\n      },\n      {\n        key: 'link',\n        name: 'Link'\n      },\n      {\n        key: 'lists',\n        name: 'Lists'\n      },\n      {\n        key: 'media',\n        name: 'Media'\n      },\n      {\n        key: 'nonbreaking',\n        name: 'Nonbreaking'\n      },\n      {\n        key: 'noneditable',\n        name: 'Noneditable'\n      },\n      {\n        key: 'pagebreak',\n        name: 'Page Break'\n      },\n      {\n        key: 'paste',\n        name: 'Paste'\n      },\n      {\n        key: 'preview',\n        name: 'Preview'\n      },\n      {\n        key: 'print',\n        name: 'Print'\n      },\n      {\n        key: 'save',\n        name: 'Save'\n      },\n      {\n        key: 'searchreplace',\n        name: 'Search and Replace'\n      },\n      {\n        key: 'spellchecker',\n        name: 'Spell Checker'\n      },\n      {\n        key: 'tabfocus',\n        name: 'Tab Focus'\n      },\n      {\n        key: 'table',\n        name: 'Table'\n      },\n      {\n        key: 'template',\n        name: 'Template'\n      },\n      {\n        key: 'textcolor',\n        name: 'Text Color'\n      },\n      {\n        key: 'textpattern',\n        name: 'Text Pattern'\n      },\n      {\n        key: 'toc',\n        name: 'Table of Contents'\n      },\n      {\n        key: 'visualblocks',\n        name: 'Visual Blocks'\n      },\n      {\n        key: 'visualchars',\n        name: 'Visual Characters'\n      },\n      {\n        key: 'wordcount',\n        name: 'Word Count'\n      }\n    ];\n    var PluginUrls = { urls: urls };\n\n    var makeLink = curry(supplant, '<a href=\"${url}\" target=\"_blank\" rel=\"noopener\">${name}</a>');\n    var maybeUrlize = function (editor, key) {\n      return find(PluginUrls.urls, function (x) {\n        return x.key === key;\n      }).fold(function () {\n        var getMetadata = editor.plugins[key].getMetadata;\n        return typeof getMetadata === 'function' ? makeLink(getMetadata()) : key;\n      }, function (x) {\n        return makeLink({\n          name: x.name,\n          url: 'https://www.tinymce.com/docs/plugins/' + x.key\n        });\n      });\n    };\n    var getPluginKeys = function (editor) {\n      var keys$1 = keys(editor.plugins);\n      return editor.settings.forced_plugins === undefined ? keys$1 : filter(keys$1, not(curry(contains, editor.settings.forced_plugins)));\n    };\n    var pluginLister = function (editor) {\n      var pluginKeys = getPluginKeys(editor);\n      var pluginLis = map(pluginKeys, function (key) {\n        return '<li>' + maybeUrlize(editor, key) + '</li>';\n      });\n      var count = pluginLis.length;\n      var pluginsString = pluginLis.join('');\n      return '<p><b>' + global$1.translate([\n        'Plugins installed ({0}):',\n        count\n      ]) + '</b></p>' + '<ul>' + pluginsString + '</ul>';\n    };\n    var installedPlugins = function (editor) {\n      return {\n        type: 'container',\n        html: '<div style=\"overflow-y: auto; overflow-x: hidden; max-height: 230px; height: 230px;\" data-mce-tabstop=\"1\" tabindex=\"-1\">' + pluginLister(editor) + '</div>',\n        flex: 1\n      };\n    };\n    var availablePlugins = function () {\n      return {\n        type: 'container',\n        html: '<div style=\"padding: 10px; background: #e3e7f4; height: 100%;\" data-mce-tabstop=\"1\" tabindex=\"-1\">' + '<p><b>' + global$1.translate('Premium plugins:') + '</b></p>' + '<ul>' + '<li>PowerPaste</li>' + '<li>Spell Checker Pro</li>' + '<li>Accessibility Checker</li>' + '<li>Advanced Code Editor</li>' + '<li>Enhanced Media Embed</li>' + '<li>Link Checker</li>' + '</ul><br />' + '<p style=\"float: right;\"><a href=\"https://www.tinymce.com/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce\" target=\"_blank\">' + global$1.translate('Learn more...') + '</a></p>' + '</div>',\n        flex: 1\n      };\n    };\n    var makeTab$1 = function (editor) {\n      return {\n        title: 'Plugins',\n        type: 'container',\n        style: 'overflow-y: auto; overflow-x: hidden;',\n        layout: 'flex',\n        padding: 10,\n        spacing: 10,\n        items: [\n          installedPlugins(editor),\n          availablePlugins()\n        ]\n      };\n    };\n    var PluginsTab = { makeTab: makeTab$1 };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getVersion = function (major, minor) {\n      return major.indexOf('@') === 0 ? 'X.X.X' : major + '.' + minor;\n    };\n    var makeRow = function () {\n      var version = getVersion(global$3.majorVersion, global$3.minorVersion);\n      var changeLogLink = '<a href=\"https://www.tinymce.com/docs/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce\" target=\"_blank\">TinyMCE ' + version + '</a>';\n      return [\n        {\n          type: 'label',\n          html: global$1.translate([\n            'You are using {0}',\n            changeLogLink\n          ])\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          text: 'Close',\n          onclick: function () {\n            this.parent().parent().close();\n          }\n        }\n      ];\n    };\n    var ButtonsRow = { makeRow: makeRow };\n\n    var open = function (editor, pluginUrl) {\n      return function () {\n        editor.windowManager.open({\n          title: 'Help',\n          bodyType: 'tabpanel',\n          layout: 'flex',\n          body: [\n            KeyboardShortcutsTab.makeTab(),\n            PluginsTab.makeTab(editor)\n          ],\n          buttons: ButtonsRow.makeRow(),\n          onPostRender: function () {\n            var title = this.getEl('title');\n            title.innerHTML = '<img src=\"' + pluginUrl + '/img/logo.png\" alt=\"TinyMCE Logo\" style=\"display: inline-block; width: 200px; height: 50px\">';\n          }\n        });\n      };\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor, pluginUrl) {\n      editor.addCommand('mceHelp', Dialog.open(editor, pluginUrl));\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor, pluginUrl) {\n      editor.addButton('help', {\n        icon: 'help',\n        onclick: Dialog.open(editor, pluginUrl)\n      });\n      editor.addMenuItem('help', {\n        text: 'Help',\n        icon: 'help',\n        context: 'help',\n        onclick: Dialog.open(editor, pluginUrl)\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('help', function (editor, pluginUrl) {\n      Buttons.register(editor, pluginUrl);\n      Commands.register(editor, pluginUrl);\n      editor.shortcuts.add('Alt+0', 'Open help dialog', 'mceHelp');\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","(function () {\nvar noneditable = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getNonEditableClass = function (editor) {\n      return editor.getParam('noneditable_noneditable_class', 'mceNonEditable');\n    };\n    var getEditableClass = function (editor) {\n      return editor.getParam('noneditable_editable_class', 'mceEditable');\n    };\n    var getNonEditableRegExps = function (editor) {\n      var nonEditableRegExps = editor.getParam('noneditable_regexp', []);\n      if (nonEditableRegExps && nonEditableRegExps.constructor === RegExp) {\n        return [nonEditableRegExps];\n      } else {\n        return nonEditableRegExps;\n      }\n    };\n    var Settings = {\n      getNonEditableClass: getNonEditableClass,\n      getEditableClass: getEditableClass,\n      getNonEditableRegExps: getNonEditableRegExps\n    };\n\n    var hasClass = function (checkClassName) {\n      return function (node) {\n        return (' ' + node.attr('class') + ' ').indexOf(checkClassName) !== -1;\n      };\n    };\n    var replaceMatchWithSpan = function (editor, content, cls) {\n      return function (match) {\n        var args = arguments, index = args[args.length - 2];\n        var prevChar = index > 0 ? content.charAt(index - 1) : '';\n        if (prevChar === '\"') {\n          return match;\n        }\n        if (prevChar === '>') {\n          var findStartTagIndex = content.lastIndexOf('<', index);\n          if (findStartTagIndex !== -1) {\n            var tagHtml = content.substring(findStartTagIndex, index);\n            if (tagHtml.indexOf('contenteditable=\"false\"') !== -1) {\n              return match;\n            }\n          }\n        }\n        return '<span class=\"' + cls + '\" data-mce-content=\"' + editor.dom.encode(args[0]) + '\">' + editor.dom.encode(typeof args[1] === 'string' ? args[1] : args[0]) + '</span>';\n      };\n    };\n    var convertRegExpsToNonEditable = function (editor, nonEditableRegExps, e) {\n      var i = nonEditableRegExps.length, content = e.content;\n      if (e.format === 'raw') {\n        return;\n      }\n      while (i--) {\n        content = content.replace(nonEditableRegExps[i], replaceMatchWithSpan(editor, content, Settings.getNonEditableClass(editor)));\n      }\n      e.content = content;\n    };\n    var setup = function (editor) {\n      var editClass, nonEditClass;\n      var contentEditableAttrName = 'contenteditable';\n      editClass = ' ' + global$1.trim(Settings.getEditableClass(editor)) + ' ';\n      nonEditClass = ' ' + global$1.trim(Settings.getNonEditableClass(editor)) + ' ';\n      var hasEditClass = hasClass(editClass);\n      var hasNonEditClass = hasClass(nonEditClass);\n      var nonEditableRegExps = Settings.getNonEditableRegExps(editor);\n      editor.on('PreInit', function () {\n        if (nonEditableRegExps.length > 0) {\n          editor.on('BeforeSetContent', function (e) {\n            convertRegExpsToNonEditable(editor, nonEditableRegExps, e);\n          });\n        }\n        editor.parser.addAttributeFilter('class', function (nodes) {\n          var i = nodes.length, node;\n          while (i--) {\n            node = nodes[i];\n            if (hasEditClass(node)) {\n              node.attr(contentEditableAttrName, 'true');\n            } else if (hasNonEditClass(node)) {\n              node.attr(contentEditableAttrName, 'false');\n            }\n          }\n        });\n        editor.serializer.addAttributeFilter(contentEditableAttrName, function (nodes) {\n          var i = nodes.length, node;\n          while (i--) {\n            node = nodes[i];\n            if (!hasEditClass(node) && !hasNonEditClass(node)) {\n              continue;\n            }\n            if (nonEditableRegExps.length > 0 && node.attr('data-mce-content')) {\n              node.name = '#text';\n              node.type = 3;\n              node.raw = true;\n              node.value = node.attr('data-mce-content');\n            } else {\n              node.attr(contentEditableAttrName, null);\n            }\n          }\n        });\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    global.add('noneditable', function (editor) {\n      FilterContent.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@match logic\nfixRegExpWellKnownSymbolLogic('match', 1, function (MATCH, nativeMatch, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = requireObjectCoercible(this);\n      var matcher = regexp == undefined ? undefined : regexp[MATCH];\n      return matcher !== undefined ? matcher.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@match\n    function (regexp) {\n      var res = maybeCallNative(nativeMatch, regexp, this);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      if (!rx.global) return regExpExec(rx, S);\n\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = String(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n","// Exports the \"insertdatetime\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/insertdatetime')\n//   ES2015:\n//     import 'tinymce/plugins/insertdatetime'\nrequire('./plugin.js');","(function () {\nvar visualblocks = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var fireVisualBlocks = function (editor, state) {\n      editor.fire('VisualBlocks', { state: state });\n    };\n    var Events = { fireVisualBlocks: fireVisualBlocks };\n\n    var isEnabledByDefault = function (editor) {\n      return editor.getParam('visualblocks_default_state', false);\n    };\n    var getContentCss = function (editor) {\n      return editor.settings.visualblocks_content_css;\n    };\n    var Settings = {\n      isEnabledByDefault: isEnabledByDefault,\n      getContentCss: getContentCss\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var cssId = global$1.DOM.uniqueId();\n    var load = function (doc, url) {\n      var linkElements = global$2.toArray(doc.getElementsByTagName('link'));\n      var matchingLinkElms = global$2.grep(linkElements, function (head) {\n        return head.id === cssId;\n      });\n      if (matchingLinkElms.length === 0) {\n        var linkElm = global$1.DOM.create('link', {\n          id: cssId,\n          rel: 'stylesheet',\n          href: url\n        });\n        doc.getElementsByTagName('head')[0].appendChild(linkElm);\n      }\n    };\n    var LoadCss = { load: load };\n\n    var toggleVisualBlocks = function (editor, pluginUrl, enabledState) {\n      var dom = editor.dom;\n      var contentCss = Settings.getContentCss(editor);\n      LoadCss.load(editor.getDoc(), contentCss ? contentCss : pluginUrl + '/css/visualblocks.css');\n      dom.toggleClass(editor.getBody(), 'mce-visualblocks');\n      enabledState.set(!enabledState.get());\n      Events.fireVisualBlocks(editor, enabledState.get());\n    };\n    var VisualBlocks = { toggleVisualBlocks: toggleVisualBlocks };\n\n    var register = function (editor, pluginUrl, enabledState) {\n      editor.addCommand('mceVisualBlocks', function () {\n        VisualBlocks.toggleVisualBlocks(editor, pluginUrl, enabledState);\n      });\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor, pluginUrl, enabledState) {\n      editor.on('PreviewFormats AfterPreviewFormats', function (e) {\n        if (enabledState.get()) {\n          editor.dom.toggleClass(editor.getBody(), 'mce-visualblocks', e.type === 'afterpreviewformats');\n        }\n      });\n      editor.on('init', function () {\n        if (Settings.isEnabledByDefault(editor)) {\n          VisualBlocks.toggleVisualBlocks(editor, pluginUrl, enabledState);\n        }\n      });\n      editor.on('remove', function () {\n        editor.dom.removeClass(editor.getBody(), 'mce-visualblocks');\n      });\n    };\n    var Bindings = { setup: setup };\n\n    var toggleActiveState = function (editor, enabledState) {\n      return function (e) {\n        var ctrl = e.control;\n        ctrl.active(enabledState.get());\n        editor.on('VisualBlocks', function (e) {\n          ctrl.active(e.state);\n        });\n      };\n    };\n    var register$1 = function (editor, enabledState) {\n      editor.addButton('visualblocks', {\n        active: false,\n        title: 'Show blocks',\n        cmd: 'mceVisualBlocks',\n        onPostRender: toggleActiveState(editor, enabledState)\n      });\n      editor.addMenuItem('visualblocks', {\n        text: 'Show blocks',\n        cmd: 'mceVisualBlocks',\n        onPostRender: toggleActiveState(editor, enabledState),\n        selectable: true,\n        context: 'view',\n        prependToContext: true\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('visualblocks', function (editor, pluginUrl) {\n      var enabledState = Cell(false);\n      Commands.register(editor, pluginUrl, enabledState);\n      Buttons.register(editor, enabledState);\n      Bindings.setup(editor, pluginUrl, enabledState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"legacyoutput\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/legacyoutput')\n//   ES2015:\n//     import 'tinymce/plugins/legacyoutput'\nrequire('./plugin.js');","// Exports the \"image\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/image')\n//   ES2015:\n//     import 'tinymce/plugins/image'\nrequire('./plugin.js');","// Exports the \"tabfocus\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/tabfocus')\n//   ES2015:\n//     import 'tinymce/plugins/tabfocus'\nrequire('./plugin.js');","(function () {\nvar contextmenu = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get = function (visibleState) {\n      var isContextMenuVisible = function () {\n        return visibleState.get();\n      };\n      return { isContextMenuVisible: isContextMenuVisible };\n    };\n    var Api = { get: get };\n\n    var shouldNeverUseNative = function (editor) {\n      return editor.settings.contextmenu_never_use_native;\n    };\n    var getContextMenu = function (editor) {\n      return editor.getParam('contextmenu', 'link openlink image inserttable | cell row column deletetable');\n    };\n    var Settings = {\n      shouldNeverUseNative: shouldNeverUseNative,\n      getContextMenu: getContextMenu\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var getUiContainer = function (editor) {\n      return global$1.DOM.select(editor.settings.ui_container)[0];\n    };\n\n    var nu = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var transpose = function (pos, dx, dy) {\n      return nu(pos.x + dx, pos.y + dy);\n    };\n    var fromPageXY = function (e) {\n      return nu(e.pageX, e.pageY);\n    };\n    var fromClientXY = function (e) {\n      return nu(e.clientX, e.clientY);\n    };\n    var transposeUiContainer = function (element, pos) {\n      if (element && global$1.DOM.getStyle(element, 'position', true) !== 'static') {\n        var containerPos = global$1.DOM.getPos(element);\n        var dx = containerPos.x - element.scrollLeft;\n        var dy = containerPos.y - element.scrollTop;\n        return transpose(pos, -dx, -dy);\n      } else {\n        return transpose(pos, 0, 0);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$1.DOM.getPos(element);\n      return transpose(pos, containerPos.x, containerPos.y);\n    };\n    var getPos = function (editor, e) {\n      if (editor.inline) {\n        return transposeUiContainer(getUiContainer(editor), fromPageXY(e));\n      } else {\n        var iframePos = transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        return transposeUiContainer(getUiContainer(editor), iframePos);\n      }\n    };\n    var Coords = { getPos: getPos };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var renderMenu = function (editor, visibleState) {\n      var menu, contextmenu;\n      var items = [];\n      contextmenu = Settings.getContextMenu(editor);\n      global$3.each(contextmenu.split(/[ ,]/), function (name) {\n        var item = editor.menuItems[name];\n        if (name === '|') {\n          item = { text: name };\n        }\n        if (item) {\n          item.shortcut = '';\n          items.push(item);\n        }\n      });\n      for (var i = 0; i < items.length; i++) {\n        if (items[i].text === '|') {\n          if (i === 0 || i === items.length - 1) {\n            items.splice(i, 1);\n          }\n        }\n      }\n      menu = global$2.create('menu', {\n        items: items,\n        context: 'contextmenu',\n        classes: 'contextmenu'\n      });\n      menu.uiContainer = getUiContainer(editor);\n      menu.renderTo(getUiContainer(editor));\n      menu.on('hide', function (e) {\n        if (e.control === this) {\n          visibleState.set(false);\n        }\n      });\n      editor.on('remove', function () {\n        menu.remove();\n        menu = null;\n      });\n      return menu;\n    };\n    var show = function (editor, pos, visibleState, menu) {\n      if (menu.get() === null) {\n        menu.set(renderMenu(editor, visibleState));\n      } else {\n        menu.get().show();\n      }\n      menu.get().moveTo(pos.x, pos.y);\n      visibleState.set(true);\n    };\n    var ContextMenu = { show: show };\n\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !Settings.shouldNeverUseNative(editor);\n    };\n    var setup = function (editor, visibleState, menu) {\n      editor.on('contextmenu', function (e) {\n        if (isNativeOverrideKeyEvent(editor, e)) {\n          return;\n        }\n        e.preventDefault();\n        ContextMenu.show(editor, Coords.getPos(editor, e), visibleState, menu);\n      });\n    };\n    var Bind = { setup: setup };\n\n    global.add('contextmenu', function (editor) {\n      var menu = Cell(null), visibleState = Cell(false);\n      Bind.setup(editor, visibleState, menu);\n      return Api.get(visibleState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"searchreplace\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/searchreplace')\n//   ES2015:\n//     import 'tinymce/plugins/searchreplace'\nrequire('./plugin.js');","// Exports the \"code\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/code')\n//   ES2015:\n//     import 'tinymce/plugins/code'\nrequire('./plugin.js');","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admin.vue?vue&type=style&index=0&id=014ded50&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admin.vue?vue&type=style&index=0&id=014ded50&scoped=true&lang=css&\"","// Exports the \"save\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/save')\n//   ES2015:\n//     import 'tinymce/plugins/save'\nrequire('./plugin.js');","(function () {\nvar preview = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getPreviewDialogWidth = function (editor) {\n      return parseInt(editor.getParam('plugin_preview_width', '650'), 10);\n    };\n    var getPreviewDialogHeight = function (editor) {\n      return parseInt(editor.getParam('plugin_preview_height', '500'), 10);\n    };\n    var getContentStyle = function (editor) {\n      return editor.getParam('content_style', '');\n    };\n    var Settings = {\n      getPreviewDialogWidth: getPreviewDialogWidth,\n      getPreviewDialogHeight: getPreviewDialogHeight,\n      getContentStyle: getContentStyle\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getPreviewHtml = function (editor) {\n      var previewHtml;\n      var headHtml = '';\n      var encode = editor.dom.encode;\n      var contentStyle = Settings.getContentStyle(editor);\n      headHtml += '<base href=\"' + encode(editor.documentBaseURI.getURI()) + '\">';\n      if (contentStyle) {\n        headHtml += '<style type=\"text/css\">' + contentStyle + '</style>';\n      }\n      global$2.each(editor.contentCSS, function (url) {\n        headHtml += '<link type=\"text/css\" rel=\"stylesheet\" href=\"' + encode(editor.documentBaseURI.toAbsolute(url)) + '\">';\n      });\n      var bodyId = editor.settings.body_id || 'tinymce';\n      if (bodyId.indexOf('=') !== -1) {\n        bodyId = editor.getParam('body_id', '', 'hash');\n        bodyId = bodyId[editor.id] || bodyId;\n      }\n      var bodyClass = editor.settings.body_class || '';\n      if (bodyClass.indexOf('=') !== -1) {\n        bodyClass = editor.getParam('body_class', '', 'hash');\n        bodyClass = bodyClass[editor.id] || '';\n      }\n      var preventClicksOnLinksScript = '<script>' + 'document.addEventListener && document.addEventListener(\"click\", function(e) {' + 'for (var elm = e.target; elm; elm = elm.parentNode) {' + 'if (elm.nodeName === \"A\") {' + 'e.preventDefault();' + '}' + '}' + '}, false);' + '</script> ';\n      var dirAttr = editor.settings.directionality ? ' dir=\"' + editor.settings.directionality + '\"' : '';\n      previewHtml = '<!DOCTYPE html>' + '<html>' + '<head>' + headHtml + '</head>' + '<body id=\"' + encode(bodyId) + '\" class=\"mce-content-body ' + encode(bodyClass) + '\"' + encode(dirAttr) + '>' + editor.getContent() + preventClicksOnLinksScript + '</body>' + '</html>';\n      return previewHtml;\n    };\n    var injectIframeContent = function (editor, iframe, sandbox) {\n      var previewHtml = getPreviewHtml(editor);\n      if (!sandbox) {\n        var doc = iframe.contentWindow.document;\n        doc.open();\n        doc.write(previewHtml);\n        doc.close();\n      } else {\n        iframe.src = 'data:text/html;charset=utf-8,' + encodeURIComponent(previewHtml);\n      }\n    };\n    var IframeContent = {\n      getPreviewHtml: getPreviewHtml,\n      injectIframeContent: injectIframeContent\n    };\n\n    var open = function (editor) {\n      var sandbox = !global$1.ie;\n      var dialogHtml = '<iframe src=\"\" frameborder=\"0\"' + (sandbox ? ' sandbox=\"allow-scripts\"' : '') + '></iframe>';\n      var dialogWidth = Settings.getPreviewDialogWidth(editor);\n      var dialogHeight = Settings.getPreviewDialogHeight(editor);\n      editor.windowManager.open({\n        title: 'Preview',\n        width: dialogWidth,\n        height: dialogHeight,\n        html: dialogHtml,\n        buttons: {\n          text: 'Close',\n          onclick: function (e) {\n            e.control.parent().parent().close();\n          }\n        },\n        onPostRender: function (e) {\n          var iframeElm = e.control.getEl('body').firstChild;\n          IframeContent.injectIframeContent(editor, iframeElm, sandbox);\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mcePreview', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('preview', {\n        title: 'Preview',\n        cmd: 'mcePreview'\n      });\n      editor.addMenuItem('preview', {\n        text: 'Preview',\n        cmd: 'mcePreview',\n        context: 'view'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('preview', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"emoticons\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/emoticons')\n//   ES2015:\n//     import 'tinymce/plugins/emoticons'\nrequire('./plugin.js');","(function () {\nvar fullpage = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    var shouldHideInSourceView = function (editor) {\n      return editor.getParam('fullpage_hide_in_source_view');\n    };\n    var getDefaultXmlPi = function (editor) {\n      return editor.getParam('fullpage_default_xml_pi');\n    };\n    var getDefaultEncoding = function (editor) {\n      return editor.getParam('fullpage_default_encoding');\n    };\n    var getDefaultFontFamily = function (editor) {\n      return editor.getParam('fullpage_default_font_family');\n    };\n    var getDefaultFontSize = function (editor) {\n      return editor.getParam('fullpage_default_font_size');\n    };\n    var getDefaultTextColor = function (editor) {\n      return editor.getParam('fullpage_default_text_color');\n    };\n    var getDefaultTitle = function (editor) {\n      return editor.getParam('fullpage_default_title');\n    };\n    var getDefaultDocType = function (editor) {\n      return editor.getParam('fullpage_default_doctype', '<!DOCTYPE html>');\n    };\n    var Settings = {\n      shouldHideInSourceView: shouldHideInSourceView,\n      getDefaultXmlPi: getDefaultXmlPi,\n      getDefaultEncoding: getDefaultEncoding,\n      getDefaultFontFamily: getDefaultFontFamily,\n      getDefaultFontSize: getDefaultFontSize,\n      getDefaultTextColor: getDefaultTextColor,\n      getDefaultTitle: getDefaultTitle,\n      getDefaultDocType: getDefaultDocType\n    };\n\n    var parseHeader = function (head) {\n      return global$2({\n        validate: false,\n        root_name: '#document'\n      }).parse(head);\n    };\n    var htmlToData = function (editor, head) {\n      var headerFragment = parseHeader(head);\n      var data = {};\n      var elm, matches;\n      function getAttr(elm, name) {\n        var value = elm.attr(name);\n        return value || '';\n      }\n      data.fontface = Settings.getDefaultFontFamily(editor);\n      data.fontsize = Settings.getDefaultFontSize(editor);\n      elm = headerFragment.firstChild;\n      if (elm.type === 7) {\n        data.xml_pi = true;\n        matches = /encoding=\"([^\"]+)\"/.exec(elm.value);\n        if (matches) {\n          data.docencoding = matches[1];\n        }\n      }\n      elm = headerFragment.getAll('#doctype')[0];\n      if (elm) {\n        data.doctype = '<!DOCTYPE' + elm.value + '>';\n      }\n      elm = headerFragment.getAll('title')[0];\n      if (elm && elm.firstChild) {\n        data.title = elm.firstChild.value;\n      }\n      global$1.each(headerFragment.getAll('meta'), function (meta) {\n        var name = meta.attr('name');\n        var httpEquiv = meta.attr('http-equiv');\n        var matches;\n        if (name) {\n          data[name.toLowerCase()] = meta.attr('content');\n        } else if (httpEquiv === 'Content-Type') {\n          matches = /charset\\s*=\\s*(.*)\\s*/gi.exec(meta.attr('content'));\n          if (matches) {\n            data.docencoding = matches[1];\n          }\n        }\n      });\n      elm = headerFragment.getAll('html')[0];\n      if (elm) {\n        data.langcode = getAttr(elm, 'lang') || getAttr(elm, 'xml:lang');\n      }\n      data.stylesheets = [];\n      global$1.each(headerFragment.getAll('link'), function (link) {\n        if (link.attr('rel') === 'stylesheet') {\n          data.stylesheets.push(link.attr('href'));\n        }\n      });\n      elm = headerFragment.getAll('body')[0];\n      if (elm) {\n        data.langdir = getAttr(elm, 'dir');\n        data.style = getAttr(elm, 'style');\n        data.visited_color = getAttr(elm, 'vlink');\n        data.link_color = getAttr(elm, 'link');\n        data.active_color = getAttr(elm, 'alink');\n      }\n      return data;\n    };\n    var dataToHtml = function (editor, data, head) {\n      var headerFragment, headElement, html, elm, value;\n      var dom = editor.dom;\n      function setAttr(elm, name, value) {\n        elm.attr(name, value ? value : undefined);\n      }\n      function addHeadNode(node) {\n        if (headElement.firstChild) {\n          headElement.insert(node, headElement.firstChild);\n        } else {\n          headElement.append(node);\n        }\n      }\n      headerFragment = parseHeader(head);\n      headElement = headerFragment.getAll('head')[0];\n      if (!headElement) {\n        elm = headerFragment.getAll('html')[0];\n        headElement = new global$3('head', 1);\n        if (elm.firstChild) {\n          elm.insert(headElement, elm.firstChild, true);\n        } else {\n          elm.append(headElement);\n        }\n      }\n      elm = headerFragment.firstChild;\n      if (data.xml_pi) {\n        value = 'version=\"1.0\"';\n        if (data.docencoding) {\n          value += ' encoding=\"' + data.docencoding + '\"';\n        }\n        if (elm.type !== 7) {\n          elm = new global$3('xml', 7);\n          headerFragment.insert(elm, headerFragment.firstChild, true);\n        }\n        elm.value = value;\n      } else if (elm && elm.type === 7) {\n        elm.remove();\n      }\n      elm = headerFragment.getAll('#doctype')[0];\n      if (data.doctype) {\n        if (!elm) {\n          elm = new global$3('#doctype', 10);\n          if (data.xml_pi) {\n            headerFragment.insert(elm, headerFragment.firstChild);\n          } else {\n            addHeadNode(elm);\n          }\n        }\n        elm.value = data.doctype.substring(9, data.doctype.length - 1);\n      } else if (elm) {\n        elm.remove();\n      }\n      elm = null;\n      global$1.each(headerFragment.getAll('meta'), function (meta) {\n        if (meta.attr('http-equiv') === 'Content-Type') {\n          elm = meta;\n        }\n      });\n      if (data.docencoding) {\n        if (!elm) {\n          elm = new global$3('meta', 1);\n          elm.attr('http-equiv', 'Content-Type');\n          elm.shortEnded = true;\n          addHeadNode(elm);\n        }\n        elm.attr('content', 'text/html; charset=' + data.docencoding);\n      } else if (elm) {\n        elm.remove();\n      }\n      elm = headerFragment.getAll('title')[0];\n      if (data.title) {\n        if (!elm) {\n          elm = new global$3('title', 1);\n          addHeadNode(elm);\n        } else {\n          elm.empty();\n        }\n        elm.append(new global$3('#text', 3)).value = data.title;\n      } else if (elm) {\n        elm.remove();\n      }\n      global$1.each('keywords,description,author,copyright,robots'.split(','), function (name) {\n        var nodes = headerFragment.getAll('meta');\n        var i, meta;\n        var value = data[name];\n        for (i = 0; i < nodes.length; i++) {\n          meta = nodes[i];\n          if (meta.attr('name') === name) {\n            if (value) {\n              meta.attr('content', value);\n            } else {\n              meta.remove();\n            }\n            return;\n          }\n        }\n        if (value) {\n          elm = new global$3('meta', 1);\n          elm.attr('name', name);\n          elm.attr('content', value);\n          elm.shortEnded = true;\n          addHeadNode(elm);\n        }\n      });\n      var currentStyleSheetsMap = {};\n      global$1.each(headerFragment.getAll('link'), function (stylesheet) {\n        if (stylesheet.attr('rel') === 'stylesheet') {\n          currentStyleSheetsMap[stylesheet.attr('href')] = stylesheet;\n        }\n      });\n      global$1.each(data.stylesheets, function (stylesheet) {\n        if (!currentStyleSheetsMap[stylesheet]) {\n          elm = new global$3('link', 1);\n          elm.attr({\n            rel: 'stylesheet',\n            text: 'text/css',\n            href: stylesheet\n          });\n          elm.shortEnded = true;\n          addHeadNode(elm);\n        }\n        delete currentStyleSheetsMap[stylesheet];\n      });\n      global$1.each(currentStyleSheetsMap, function (stylesheet) {\n        stylesheet.remove();\n      });\n      elm = headerFragment.getAll('body')[0];\n      if (elm) {\n        setAttr(elm, 'dir', data.langdir);\n        setAttr(elm, 'style', data.style);\n        setAttr(elm, 'vlink', data.visited_color);\n        setAttr(elm, 'link', data.link_color);\n        setAttr(elm, 'alink', data.active_color);\n        dom.setAttribs(editor.getBody(), {\n          style: data.style,\n          dir: data.dir,\n          vLink: data.visited_color,\n          link: data.link_color,\n          aLink: data.active_color\n        });\n      }\n      elm = headerFragment.getAll('html')[0];\n      if (elm) {\n        setAttr(elm, 'lang', data.langcode);\n        setAttr(elm, 'xml:lang', data.langcode);\n      }\n      if (!headElement.firstChild) {\n        headElement.remove();\n      }\n      html = global$4({\n        validate: false,\n        indent: true,\n        apply_source_formatting: true,\n        indent_before: 'head,html,body,meta,title,script,link,style',\n        indent_after: 'head,html,body,meta,title,script,link,style'\n      }).serialize(headerFragment);\n      return html.substring(0, html.indexOf('</body>'));\n    };\n    var Parser = {\n      parseHeader: parseHeader,\n      htmlToData: htmlToData,\n      dataToHtml: dataToHtml\n    };\n\n    var open = function (editor, headState) {\n      var data = Parser.htmlToData(editor, headState.get());\n      editor.windowManager.open({\n        title: 'Document properties',\n        data: data,\n        defaults: {\n          type: 'textbox',\n          size: 40\n        },\n        body: [\n          {\n            name: 'title',\n            label: 'Title'\n          },\n          {\n            name: 'keywords',\n            label: 'Keywords'\n          },\n          {\n            name: 'description',\n            label: 'Description'\n          },\n          {\n            name: 'robots',\n            label: 'Robots'\n          },\n          {\n            name: 'author',\n            label: 'Author'\n          },\n          {\n            name: 'docencoding',\n            label: 'Encoding'\n          }\n        ],\n        onSubmit: function (e) {\n          var headHtml = Parser.dataToHtml(editor, global$1.extend(data, e.data), headState.get());\n          headState.set(headHtml);\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor, headState) {\n      editor.addCommand('mceFullPageProperties', function () {\n        Dialog.open(editor, headState);\n      });\n    };\n    var Commands = { register: register };\n\n    var protectHtml = function (protect, html) {\n      global$1.each(protect, function (pattern) {\n        html = html.replace(pattern, function (str) {\n          return '<!--mce:protected ' + escape(str) + '-->';\n        });\n      });\n      return html;\n    };\n    var unprotectHtml = function (html) {\n      return html.replace(/<!--mce:protected ([\\s\\S]*?)-->/g, function (a, m) {\n        return unescape(m);\n      });\n    };\n    var Protect = {\n      protectHtml: protectHtml,\n      unprotectHtml: unprotectHtml\n    };\n\n    var each = global$1.each;\n    var low = function (s) {\n      return s.replace(/<\\/?[A-Z]+/g, function (a) {\n        return a.toLowerCase();\n      });\n    };\n    var handleSetContent = function (editor, headState, footState, evt) {\n      var startPos, endPos, content, headerFragment, styles = '';\n      var dom = editor.dom;\n      var elm;\n      if (evt.selection) {\n        return;\n      }\n      content = Protect.protectHtml(editor.settings.protect, evt.content);\n      if (evt.format === 'raw' && headState.get()) {\n        return;\n      }\n      if (evt.source_view && Settings.shouldHideInSourceView(editor)) {\n        return;\n      }\n      if (content.length === 0 && !evt.source_view) {\n        content = global$1.trim(headState.get()) + '\\n' + global$1.trim(content) + '\\n' + global$1.trim(footState.get());\n      }\n      content = content.replace(/<(\\/?)BODY/gi, '<$1body');\n      startPos = content.indexOf('<body');\n      if (startPos !== -1) {\n        startPos = content.indexOf('>', startPos);\n        headState.set(low(content.substring(0, startPos + 1)));\n        endPos = content.indexOf('</body', startPos);\n        if (endPos === -1) {\n          endPos = content.length;\n        }\n        evt.content = global$1.trim(content.substring(startPos + 1, endPos));\n        footState.set(low(content.substring(endPos)));\n      } else {\n        headState.set(getDefaultHeader(editor));\n        footState.set('\\n</body>\\n</html>');\n      }\n      headerFragment = Parser.parseHeader(headState.get());\n      each(headerFragment.getAll('style'), function (node) {\n        if (node.firstChild) {\n          styles += node.firstChild.value;\n        }\n      });\n      elm = headerFragment.getAll('body')[0];\n      if (elm) {\n        dom.setAttribs(editor.getBody(), {\n          style: elm.attr('style') || '',\n          dir: elm.attr('dir') || '',\n          vLink: elm.attr('vlink') || '',\n          link: elm.attr('link') || '',\n          aLink: elm.attr('alink') || ''\n        });\n      }\n      dom.remove('fullpage_styles');\n      var headElm = editor.getDoc().getElementsByTagName('head')[0];\n      if (styles) {\n        dom.add(headElm, 'style', { id: 'fullpage_styles' }, styles);\n        elm = dom.get('fullpage_styles');\n        if (elm.styleSheet) {\n          elm.styleSheet.cssText = styles;\n        }\n      }\n      var currentStyleSheetsMap = {};\n      global$1.each(headElm.getElementsByTagName('link'), function (stylesheet) {\n        if (stylesheet.rel === 'stylesheet' && stylesheet.getAttribute('data-mce-fullpage')) {\n          currentStyleSheetsMap[stylesheet.href] = stylesheet;\n        }\n      });\n      global$1.each(headerFragment.getAll('link'), function (stylesheet) {\n        var href = stylesheet.attr('href');\n        if (!href) {\n          return true;\n        }\n        if (!currentStyleSheetsMap[href] && stylesheet.attr('rel') === 'stylesheet') {\n          dom.add(headElm, 'link', {\n            'rel': 'stylesheet',\n            'text': 'text/css',\n            'href': href,\n            'data-mce-fullpage': '1'\n          });\n        }\n        delete currentStyleSheetsMap[href];\n      });\n      global$1.each(currentStyleSheetsMap, function (stylesheet) {\n        stylesheet.parentNode.removeChild(stylesheet);\n      });\n    };\n    var getDefaultHeader = function (editor) {\n      var header = '', value, styles = '';\n      if (Settings.getDefaultXmlPi(editor)) {\n        var piEncoding = Settings.getDefaultEncoding(editor);\n        header += '<?xml version=\"1.0\" encoding=\"' + (piEncoding ? piEncoding : 'ISO-8859-1') + '\" ?>\\n';\n      }\n      header += Settings.getDefaultDocType(editor);\n      header += '\\n<html>\\n<head>\\n';\n      if (value = Settings.getDefaultTitle(editor)) {\n        header += '<title>' + value + '</title>\\n';\n      }\n      if (value = Settings.getDefaultEncoding(editor)) {\n        header += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=' + value + '\" />\\n';\n      }\n      if (value = Settings.getDefaultFontFamily(editor)) {\n        styles += 'font-family: ' + value + ';';\n      }\n      if (value = Settings.getDefaultFontSize(editor)) {\n        styles += 'font-size: ' + value + ';';\n      }\n      if (value = Settings.getDefaultTextColor(editor)) {\n        styles += 'color: ' + value + ';';\n      }\n      header += '</head>\\n<body' + (styles ? ' style=\"' + styles + '\"' : '') + '>\\n';\n      return header;\n    };\n    var handleGetContent = function (editor, head, foot, evt) {\n      if (!evt.selection && (!evt.source_view || !Settings.shouldHideInSourceView(editor))) {\n        evt.content = Protect.unprotectHtml(global$1.trim(head) + '\\n' + global$1.trim(evt.content) + '\\n' + global$1.trim(foot));\n      }\n    };\n    var setup = function (editor, headState, footState) {\n      editor.on('BeforeSetContent', function (evt) {\n        handleSetContent(editor, headState, footState, evt);\n      });\n      editor.on('GetContent', function (evt) {\n        handleGetContent(editor, headState.get(), footState.get(), evt);\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.addButton('fullpage', {\n        title: 'Document properties',\n        cmd: 'mceFullPageProperties'\n      });\n      editor.addMenuItem('fullpage', {\n        text: 'Document properties',\n        cmd: 'mceFullPageProperties',\n        context: 'file'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('fullpage', function (editor) {\n      var headState = Cell(''), footState = Cell('');\n      Commands.register(editor, headState);\n      Buttons.register(editor);\n      FilterContent.setup(editor, headState, footState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar legacyoutput = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var overrideFormats = function (editor) {\n      var alignElements = 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', fontSizes = global$1.explode(editor.settings.font_size_style_values), schema = editor.schema;\n      editor.formatter.register({\n        alignleft: {\n          selector: alignElements,\n          attributes: { align: 'left' }\n        },\n        aligncenter: {\n          selector: alignElements,\n          attributes: { align: 'center' }\n        },\n        alignright: {\n          selector: alignElements,\n          attributes: { align: 'right' }\n        },\n        alignjustify: {\n          selector: alignElements,\n          attributes: { align: 'justify' }\n        },\n        bold: [\n          {\n            inline: 'b',\n            remove: 'all'\n          },\n          {\n            inline: 'strong',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          }\n        ],\n        italic: [\n          {\n            inline: 'i',\n            remove: 'all'\n          },\n          {\n            inline: 'em',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          }\n        ],\n        underline: [\n          {\n            inline: 'u',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'strike',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          }\n        ],\n        fontname: {\n          inline: 'font',\n          attributes: { face: '%value' }\n        },\n        fontsize: {\n          inline: 'font',\n          attributes: {\n            size: function (vars) {\n              return global$1.inArray(fontSizes, vars.value) + 1;\n            }\n          }\n        },\n        forecolor: {\n          inline: 'font',\n          attributes: { color: '%value' }\n        },\n        hilitecolor: {\n          inline: 'font',\n          styles: { backgroundColor: '%value' }\n        }\n      });\n      global$1.each('b,i,u,strike'.split(','), function (name) {\n        schema.addValidElements(name + '[*]');\n      });\n      if (!schema.getElementRule('font')) {\n        schema.addValidElements('font[face|size|color|style]');\n      }\n      global$1.each(alignElements.split(','), function (name) {\n        var rule = schema.getElementRule(name);\n        if (rule) {\n          if (!rule.attributes.align) {\n            rule.attributes.align = {};\n            rule.attributesOrder.push('align');\n          }\n        }\n      });\n    };\n    var setup = function (editor) {\n      editor.settings.inline_styles = false;\n      editor.on('init', function () {\n        overrideFormats(editor);\n      });\n    };\n    var Formats = { setup: setup };\n\n    var register = function (editor) {\n      editor.addButton('fontsizeselect', function () {\n        var items = [], defaultFontsizeFormats = '8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7';\n        var fontsizeFormats = editor.settings.fontsizeFormats || defaultFontsizeFormats;\n        editor.$.each(fontsizeFormats.split(' '), function (i, item) {\n          var text = item, value = item;\n          var values = item.split('=');\n          if (values.length > 1) {\n            text = values[0];\n            value = values[1];\n          }\n          items.push({\n            text: text,\n            value: value\n          });\n        });\n        return {\n          type: 'listbox',\n          text: 'Font Sizes',\n          tooltip: 'Font Sizes',\n          values: items,\n          fixedWidth: true,\n          onPostRender: function () {\n            var self = this;\n            editor.on('NodeChange', function () {\n              var fontElm;\n              fontElm = editor.dom.getParent(editor.selection.getNode(), 'font');\n              if (fontElm) {\n                self.value(fontElm.size);\n              } else {\n                self.value('');\n              }\n            });\n          },\n          onclick: function (e) {\n            if (e.control.settings.value) {\n              editor.execCommand('FontSize', false, e.control.settings.value);\n            }\n          }\n        };\n      });\n      editor.addButton('fontselect', function () {\n        function createFormats(formats) {\n          formats = formats.replace(/;$/, '').split(';');\n          var i = formats.length;\n          while (i--) {\n            formats[i] = formats[i].split('=');\n          }\n          return formats;\n        }\n        var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n        var items = [], fonts = createFormats(editor.settings.font_formats || defaultFontsFormats);\n        editor.$.each(fonts, function (i, font) {\n          items.push({\n            text: { raw: font[0] },\n            value: font[1],\n            textStyle: font[1].indexOf('dings') === -1 ? 'font-family:' + font[1] : ''\n          });\n        });\n        return {\n          type: 'listbox',\n          text: 'Font Family',\n          tooltip: 'Font Family',\n          values: items,\n          fixedWidth: true,\n          onPostRender: function () {\n            var self = this;\n            editor.on('NodeChange', function () {\n              var fontElm;\n              fontElm = editor.dom.getParent(editor.selection.getNode(), 'font');\n              if (fontElm) {\n                self.value(fontElm.face);\n              } else {\n                self.value('');\n              }\n            });\n          },\n          onselect: function (e) {\n            if (e.control.settings.value) {\n              editor.execCommand('FontName', false, e.control.settings.value);\n            }\n          }\n        };\n      });\n    };\n    var Buttons = { register: register };\n\n    global.add('legacyoutput', function (editor) {\n      Formats.setup(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"autoresize\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/autoresize')\n//   ES2015:\n//     import 'tinymce/plugins/autoresize'\nrequire('./plugin.js');","(function () {\nvar save = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var enableWhenDirty = function (editor) {\n      return editor.getParam('save_enablewhendirty', true);\n    };\n    var hasOnSaveCallback = function (editor) {\n      return !!editor.getParam('save_onsavecallback');\n    };\n    var hasOnCancelCallback = function (editor) {\n      return !!editor.getParam('save_oncancelcallback');\n    };\n    var Settings = {\n      enableWhenDirty: enableWhenDirty,\n      hasOnSaveCallback: hasOnSaveCallback,\n      hasOnCancelCallback: hasOnCancelCallback\n    };\n\n    var displayErrorMessage = function (editor, message) {\n      editor.notificationManager.open({\n        text: editor.translate(message),\n        type: 'error'\n      });\n    };\n    var save = function (editor) {\n      var formObj;\n      formObj = global$1.DOM.getParent(editor.id, 'form');\n      if (Settings.enableWhenDirty(editor) && !editor.isDirty()) {\n        return;\n      }\n      editor.save();\n      if (Settings.hasOnSaveCallback(editor)) {\n        editor.execCallback('save_onsavecallback', editor);\n        editor.nodeChanged();\n        return;\n      }\n      if (formObj) {\n        editor.setDirty(false);\n        if (!formObj.onsubmit || formObj.onsubmit()) {\n          if (typeof formObj.submit === 'function') {\n            formObj.submit();\n          } else {\n            displayErrorMessage(editor, 'Error: Form submit field collision.');\n          }\n        }\n        editor.nodeChanged();\n      } else {\n        displayErrorMessage(editor, 'Error: No form element found.');\n      }\n    };\n    var cancel = function (editor) {\n      var h = global$2.trim(editor.startContent);\n      if (Settings.hasOnCancelCallback(editor)) {\n        editor.execCallback('save_oncancelcallback', editor);\n        return;\n      }\n      editor.setContent(h);\n      editor.undoManager.clear();\n      editor.nodeChanged();\n    };\n    var Actions = {\n      save: save,\n      cancel: cancel\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceSave', function () {\n        Actions.save(editor);\n      });\n      editor.addCommand('mceCancel', function () {\n        Actions.cancel(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var stateToggle = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('nodeChange dirty', function () {\n          ctrl.disabled(Settings.enableWhenDirty(editor) && !editor.isDirty());\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addButton('save', {\n        icon: 'save',\n        text: 'Save',\n        cmd: 'mceSave',\n        disabled: true,\n        onPostRender: stateToggle(editor)\n      });\n      editor.addButton('cancel', {\n        text: 'Cancel',\n        icon: false,\n        cmd: 'mceCancel',\n        disabled: true,\n        onPostRender: stateToggle(editor)\n      });\n      editor.addShortcut('Meta+S', '', 'mceSave');\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('save', function (editor) {\n      Buttons.register(editor);\n      Commands.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"textpattern\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/textpattern')\n//   ES2015:\n//     import 'tinymce/plugins/textpattern'\nrequire('./plugin.js');","(function () {\nvar modern = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var isBrandingEnabled = function (editor) {\n      return editor.getParam('branding', true, 'boolean');\n    };\n    var hasMenubar = function (editor) {\n      return getMenubar(editor) !== false;\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var hasStatusbar = function (editor) {\n      return editor.getParam('statusbar', true, 'boolean');\n    };\n    var getToolbarSize = function (editor) {\n      return editor.getParam('toolbar_items_size');\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var getFixedToolbarContainer = function (editor) {\n      return editor.getParam('fixed_toolbar_container');\n    };\n    var getInlineToolbarPositionHandler = function (editor) {\n      return editor.getParam('inline_toolbar_position_handler');\n    };\n    var getMenu = function (editor) {\n      return editor.getParam('menu');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var getMinWidth = function (editor) {\n      return editor.getParam('min_width', 100, 'number');\n    };\n    var getMinHeight = function (editor) {\n      return editor.getParam('min_height', 100, 'number');\n    };\n    var getMaxWidth = function (editor) {\n      return editor.getParam('max_width', 65535, 'number');\n    };\n    var getMaxHeight = function (editor) {\n      return editor.getParam('max_height', 65535, 'number');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.settings.skin === false;\n    };\n    var isInline = function (editor) {\n      return editor.getParam('inline', false, 'boolean');\n    };\n    var getResize = function (editor) {\n      var resize = editor.getParam('resize', 'vertical');\n      if (resize === false) {\n        return 'none';\n      } else if (resize === 'both') {\n        return 'both';\n      } else {\n        return 'vertical';\n      }\n    };\n    var getSkinUrl = function (editor) {\n      var settings = editor.settings;\n      var skin = settings.skin;\n      var skinUrl = settings.skin_url;\n      if (skin !== false) {\n        var skinName = skin ? skin : 'lightgray';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$1.baseURL + '/skins/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var getIndexedToolbars = function (settings, defaultToolbar) {\n      var toolbars = [];\n      for (var i = 1; i < 10; i++) {\n        var toolbar = settings['toolbar' + i];\n        if (!toolbar) {\n          break;\n        }\n        toolbars.push(toolbar);\n      }\n      var mainToolbar = settings.toolbar ? [settings.toolbar] : [defaultToolbar];\n      return toolbars.length > 0 ? toolbars : mainToolbar;\n    };\n    var getToolbars = function (editor) {\n      var toolbar = editor.getParam('toolbar');\n      var defaultToolbar = 'undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image';\n      if (toolbar === false) {\n        return [];\n      } else if (global$2.isArray(toolbar)) {\n        return global$2.grep(toolbar, function (toolbar) {\n          return toolbar.length > 0;\n        });\n      } else {\n        return getIndexedToolbars(editor.settings, defaultToolbar);\n      }\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var fireSkinLoaded = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireBeforeRenderUI = function (editor) {\n      return editor.fire('BeforeRenderUI');\n    };\n    var Events = {\n      fireSkinLoaded: fireSkinLoaded,\n      fireResizeEditor: fireResizeEditor,\n      fireBeforeRenderUI: fireBeforeRenderUI\n    };\n\n    var focus = function (panel, type) {\n      return function () {\n        var item = panel.find(type)[0];\n        if (item) {\n          item.focus(true);\n        }\n      };\n    };\n    var addKeys = function (editor, panel) {\n      editor.shortcuts.add('Alt+F9', '', focus(panel, 'menubar'));\n      editor.shortcuts.add('Alt+F10,F10', '', focus(panel, 'toolbar'));\n      editor.shortcuts.add('Alt+F11', '', focus(panel, 'elementpath'));\n      panel.on('cancel', function () {\n        editor.focus();\n      });\n    };\n    var A11y = { addKeys: addKeys };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var getUiContainerDelta = function (ctrl) {\n      var uiContainer = getUiContainer(ctrl);\n      if (uiContainer && global$3.DOM.getStyle(uiContainer, 'position', true) !== 'static') {\n        var containerPos = global$3.DOM.getPos(uiContainer);\n        var dx = uiContainer.scrollLeft - containerPos.x;\n        var dy = uiContainer.scrollTop - containerPos.y;\n        return Option.some({\n          x: dx,\n          y: dy\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var setUiContainer = function (editor, ctrl) {\n      var uiContainer = global$3.DOM.select(editor.settings.ui_container)[0];\n      ctrl.getRoot().uiContainer = uiContainer;\n    };\n    var getUiContainer = function (ctrl) {\n      return ctrl ? ctrl.getRoot().uiContainer : null;\n    };\n    var inheritUiContainer = function (fromCtrl, toCtrl) {\n      return toCtrl.uiContainer = getUiContainer(fromCtrl);\n    };\n    var UiContainer = {\n      getUiContainerDelta: getUiContainerDelta,\n      setUiContainer: setUiContainer,\n      getUiContainer: getUiContainer,\n      inheritUiContainer: inheritUiContainer\n    };\n\n    var createToolbar = function (editor, items, size) {\n      var toolbarItems = [];\n      var buttonGroup;\n      if (!items) {\n        return;\n      }\n      global$2.each(items.split(/[ ,]/), function (item) {\n        var itemName;\n        var bindSelectorChanged = function () {\n          var selection = editor.selection;\n          if (item.settings.stateSelector) {\n            selection.selectorChanged(item.settings.stateSelector, function (state) {\n              item.active(state);\n            }, true);\n          }\n          if (item.settings.disabledStateSelector) {\n            selection.selectorChanged(item.settings.disabledStateSelector, function (state) {\n              item.disabled(state);\n            });\n          }\n        };\n        if (item === '|') {\n          buttonGroup = null;\n        } else {\n          if (!buttonGroup) {\n            buttonGroup = {\n              type: 'buttongroup',\n              items: []\n            };\n            toolbarItems.push(buttonGroup);\n          }\n          if (editor.buttons[item]) {\n            itemName = item;\n            item = editor.buttons[itemName];\n            if (typeof item === 'function') {\n              item = item();\n            }\n            item.type = item.type || 'button';\n            item.size = size;\n            item = global$4.create(item);\n            buttonGroup.items.push(item);\n            if (editor.initialized) {\n              bindSelectorChanged();\n            } else {\n              editor.on('init', bindSelectorChanged);\n            }\n          }\n        }\n      });\n      return {\n        type: 'toolbar',\n        layout: 'flow',\n        items: toolbarItems\n      };\n    };\n    var createToolbars = function (editor, size) {\n      var toolbars = [];\n      var addToolbar = function (items) {\n        if (items) {\n          toolbars.push(createToolbar(editor, items, size));\n        }\n      };\n      global$2.each(getToolbars(editor), function (toolbar) {\n        addToolbar(toolbar);\n      });\n      if (toolbars.length) {\n        return {\n          type: 'panel',\n          layout: 'stack',\n          classes: 'toolbar-grp',\n          ariaRoot: true,\n          ariaRemember: true,\n          items: toolbars\n        };\n      }\n    };\n    var Toolbar = {\n      createToolbar: createToolbar,\n      createToolbars: createToolbars\n    };\n\n    var DOM = global$3.DOM;\n    var toClientRect = function (geomRect) {\n      return {\n        left: geomRect.x,\n        top: geomRect.y,\n        width: geomRect.w,\n        height: geomRect.h,\n        right: geomRect.x + geomRect.w,\n        bottom: geomRect.y + geomRect.h\n      };\n    };\n    var hideAllFloatingPanels = function (editor) {\n      global$2.each(editor.contextToolbars, function (toolbar) {\n        if (toolbar.panel) {\n          toolbar.panel.hide();\n        }\n      });\n    };\n    var movePanelTo = function (panel, pos) {\n      panel.moveTo(pos.left, pos.top);\n    };\n    var togglePositionClass = function (panel, relPos, predicate) {\n      relPos = relPos ? relPos.substr(0, 2) : '';\n      global$2.each({\n        t: 'down',\n        b: 'up'\n      }, function (cls, pos) {\n        panel.classes.toggle('arrow-' + cls, predicate(pos, relPos.substr(0, 1)));\n      });\n      global$2.each({\n        l: 'left',\n        r: 'right'\n      }, function (cls, pos) {\n        panel.classes.toggle('arrow-' + cls, predicate(pos, relPos.substr(1, 1)));\n      });\n    };\n    var userConstrain = function (handler, x, y, elementRect, contentAreaRect, panelRect) {\n      panelRect = toClientRect({\n        x: x,\n        y: y,\n        w: panelRect.w,\n        h: panelRect.h\n      });\n      if (handler) {\n        panelRect = handler({\n          elementRect: toClientRect(elementRect),\n          contentAreaRect: toClientRect(contentAreaRect),\n          panelRect: panelRect\n        });\n      }\n      return panelRect;\n    };\n    var addContextualToolbars = function (editor) {\n      var scrollContainer;\n      var getContextToolbars = function () {\n        return editor.contextToolbars || [];\n      };\n      var getElementRect = function (elm) {\n        var pos, targetRect, root;\n        pos = DOM.getPos(editor.getContentAreaContainer());\n        targetRect = editor.dom.getRect(elm);\n        root = editor.dom.getRoot();\n        if (root.nodeName === 'BODY') {\n          targetRect.x -= root.ownerDocument.documentElement.scrollLeft || root.scrollLeft;\n          targetRect.y -= root.ownerDocument.documentElement.scrollTop || root.scrollTop;\n        }\n        targetRect.x += pos.x;\n        targetRect.y += pos.y;\n        return targetRect;\n      };\n      var reposition = function (match, shouldShow) {\n        var relPos, panelRect, elementRect, contentAreaRect, panel, relRect, testPositions, smallElementWidthThreshold;\n        var handler = getInlineToolbarPositionHandler(editor);\n        if (editor.removed) {\n          return;\n        }\n        if (!match || !match.toolbar.panel) {\n          hideAllFloatingPanels(editor);\n          return;\n        }\n        testPositions = [\n          'bc-tc',\n          'tc-bc',\n          'tl-bl',\n          'bl-tl',\n          'tr-br',\n          'br-tr'\n        ];\n        panel = match.toolbar.panel;\n        if (shouldShow) {\n          panel.show();\n        }\n        elementRect = getElementRect(match.element);\n        panelRect = DOM.getRect(panel.getEl());\n        contentAreaRect = DOM.getRect(editor.getContentAreaContainer() || editor.getBody());\n        var delta = UiContainer.getUiContainerDelta(panel).getOr({\n          x: 0,\n          y: 0\n        });\n        elementRect.x += delta.x;\n        elementRect.y += delta.y;\n        panelRect.x += delta.x;\n        panelRect.y += delta.y;\n        contentAreaRect.x += delta.x;\n        contentAreaRect.y += delta.y;\n        smallElementWidthThreshold = 25;\n        if (DOM.getStyle(match.element, 'display', true) !== 'inline') {\n          var clientRect = match.element.getBoundingClientRect();\n          elementRect.w = clientRect.width;\n          elementRect.h = clientRect.height;\n        }\n        if (!editor.inline) {\n          contentAreaRect.w = editor.getDoc().documentElement.offsetWidth;\n        }\n        if (editor.selection.controlSelection.isResizable(match.element) && elementRect.w < smallElementWidthThreshold) {\n          elementRect = global$6.inflate(elementRect, 0, 8);\n        }\n        relPos = global$6.findBestRelativePosition(panelRect, elementRect, contentAreaRect, testPositions);\n        elementRect = global$6.clamp(elementRect, contentAreaRect);\n        if (relPos) {\n          relRect = global$6.relativePosition(panelRect, elementRect, relPos);\n          movePanelTo(panel, userConstrain(handler, relRect.x, relRect.y, elementRect, contentAreaRect, panelRect));\n        } else {\n          contentAreaRect.h += panelRect.h;\n          elementRect = global$6.intersect(contentAreaRect, elementRect);\n          if (elementRect) {\n            relPos = global$6.findBestRelativePosition(panelRect, elementRect, contentAreaRect, [\n              'bc-tc',\n              'bl-tl',\n              'br-tr'\n            ]);\n            if (relPos) {\n              relRect = global$6.relativePosition(panelRect, elementRect, relPos);\n              movePanelTo(panel, userConstrain(handler, relRect.x, relRect.y, elementRect, contentAreaRect, panelRect));\n            } else {\n              movePanelTo(panel, userConstrain(handler, elementRect.x, elementRect.y, elementRect, contentAreaRect, panelRect));\n            }\n          } else {\n            panel.hide();\n          }\n        }\n        togglePositionClass(panel, relPos, function (pos1, pos2) {\n          return pos1 === pos2;\n        });\n      };\n      var repositionHandler = function (show) {\n        return function () {\n          var execute = function () {\n            if (editor.selection) {\n              reposition(findFrontMostMatch(editor.selection.getNode()), show);\n            }\n          };\n          global$7.requestAnimationFrame(execute);\n        };\n      };\n      var bindScrollEvent = function (panel) {\n        if (!scrollContainer) {\n          var reposition_1 = repositionHandler(true);\n          var uiContainer_1 = UiContainer.getUiContainer(panel);\n          scrollContainer = editor.selection.getScrollContainer() || editor.getWin();\n          DOM.bind(scrollContainer, 'scroll', reposition_1);\n          DOM.bind(uiContainer_1, 'scroll', reposition_1);\n          editor.on('remove', function () {\n            DOM.unbind(scrollContainer, 'scroll', reposition_1);\n            DOM.unbind(uiContainer_1, 'scroll', reposition_1);\n          });\n        }\n      };\n      var showContextToolbar = function (match) {\n        var panel;\n        if (match.toolbar.panel) {\n          match.toolbar.panel.show();\n          reposition(match);\n          return;\n        }\n        panel = global$4.create({\n          type: 'floatpanel',\n          role: 'dialog',\n          classes: 'tinymce tinymce-inline arrow',\n          ariaLabel: 'Inline toolbar',\n          layout: 'flex',\n          direction: 'column',\n          align: 'stretch',\n          autohide: false,\n          autofix: true,\n          fixed: true,\n          border: 1,\n          items: Toolbar.createToolbar(editor, match.toolbar.items),\n          oncancel: function () {\n            editor.focus();\n          }\n        });\n        UiContainer.setUiContainer(editor, panel);\n        bindScrollEvent(panel);\n        match.toolbar.panel = panel;\n        panel.renderTo().reflow();\n        reposition(match);\n      };\n      var hideAllContextToolbars = function () {\n        global$2.each(getContextToolbars(), function (toolbar) {\n          if (toolbar.panel) {\n            toolbar.panel.hide();\n          }\n        });\n      };\n      var findFrontMostMatch = function (targetElm) {\n        var i, y, parentsAndSelf;\n        var toolbars = getContextToolbars();\n        parentsAndSelf = editor.$(targetElm).parents().add(targetElm);\n        for (i = parentsAndSelf.length - 1; i >= 0; i--) {\n          for (y = toolbars.length - 1; y >= 0; y--) {\n            if (toolbars[y].predicate(parentsAndSelf[i])) {\n              return {\n                toolbar: toolbars[y],\n                element: parentsAndSelf[i]\n              };\n            }\n          }\n        }\n        return null;\n      };\n      editor.on('click keyup setContent ObjectResized', function (e) {\n        if (e.type === 'setcontent' && !e.selection) {\n          return;\n        }\n        global$7.setEditorTimeout(editor, function () {\n          var match;\n          match = findFrontMostMatch(editor.selection.getNode());\n          if (match) {\n            hideAllContextToolbars();\n            showContextToolbar(match);\n          } else {\n            hideAllContextToolbars();\n          }\n        });\n      });\n      editor.on('blur hide contextmenu', hideAllContextToolbars);\n      editor.on('ObjectResizeStart', function () {\n        var match = findFrontMostMatch(editor.selection.getNode());\n        if (match && match.toolbar.panel) {\n          match.toolbar.panel.hide();\n        }\n      });\n      editor.on('ResizeEditor ResizeWindow', repositionHandler(true));\n      editor.on('nodeChange', repositionHandler(false));\n      editor.on('remove', function () {\n        global$2.each(getContextToolbars(), function (toolbar) {\n          if (toolbar.panel) {\n            toolbar.panel.remove();\n          }\n        });\n        editor.contextToolbars = {};\n      });\n      editor.shortcuts.add('ctrl+F9', '', function () {\n        var match = findFrontMostMatch(editor.selection.getNode());\n        if (match && match.toolbar.panel) {\n          match.toolbar.panel.items()[0].focus();\n        }\n      });\n    };\n    var ContextToolbars = { addContextualToolbars: addContextualToolbars };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isArray = isType('array');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Option.none() : Option.some(r);\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | print'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code'\n      },\n      table: { title: 'Table' },\n      help: { title: 'Help' }\n    };\n    var delimiterMenuNamePair = function () {\n      return {\n        name: '|',\n        item: { text: '|' }\n      };\n    };\n    var createMenuNameItemPair = function (name, item) {\n      var menuItem = item ? {\n        name: name,\n        item: item\n      } : null;\n      return name === '|' ? delimiterMenuNamePair() : menuItem;\n    };\n    var hasItemName = function (namedMenuItems, name) {\n      return findIndex(namedMenuItems, function (namedMenuItem) {\n        return namedMenuItem.name === name;\n      }).isSome();\n    };\n    var isSeparator = function (namedMenuItem) {\n      return namedMenuItem && namedMenuItem.item.text === '|';\n    };\n    var cleanupMenu = function (namedMenuItems, removedMenuItems) {\n      var menuItemsPass1 = filter(namedMenuItems, function (namedMenuItem) {\n        return removedMenuItems.hasOwnProperty(namedMenuItem.name) === false;\n      });\n      var menuItemsPass2 = filter(menuItemsPass1, function (namedMenuItem, i) {\n        return !isSeparator(namedMenuItem) || !isSeparator(menuItemsPass1[i - 1]);\n      });\n      return filter(menuItemsPass2, function (namedMenuItem, i) {\n        return !isSeparator(namedMenuItem) || i > 0 && i < menuItemsPass2.length - 1;\n      });\n    };\n    var createMenu = function (editorMenuItems, menus, removedMenuItems, context) {\n      var menuButton, menu, namedMenuItems, isUserDefined;\n      if (menus) {\n        menu = menus[context];\n        isUserDefined = true;\n      } else {\n        menu = defaultMenus[context];\n      }\n      if (menu) {\n        menuButton = { text: menu.title };\n        namedMenuItems = [];\n        global$2.each((menu.items || '').split(/[ ,]/), function (name) {\n          var namedMenuItem = createMenuNameItemPair(name, editorMenuItems[name]);\n          if (namedMenuItem) {\n            namedMenuItems.push(namedMenuItem);\n          }\n        });\n        if (!isUserDefined) {\n          global$2.each(editorMenuItems, function (item, name) {\n            if (item.context === context && !hasItemName(namedMenuItems, name)) {\n              if (item.separator === 'before') {\n                namedMenuItems.push(delimiterMenuNamePair());\n              }\n              if (item.prependToContext) {\n                namedMenuItems.unshift(createMenuNameItemPair(name, item));\n              } else {\n                namedMenuItems.push(createMenuNameItemPair(name, item));\n              }\n              if (item.separator === 'after') {\n                namedMenuItems.push(delimiterMenuNamePair());\n              }\n            }\n          });\n        }\n        menuButton.menu = map(cleanupMenu(namedMenuItems, removedMenuItems), function (menuItem) {\n          return menuItem.item;\n        });\n        if (!menuButton.menu.length) {\n          return null;\n        }\n      }\n      return menuButton;\n    };\n    var getDefaultMenubar = function (editor) {\n      var name;\n      var defaultMenuBar = [];\n      var menu = getMenu(editor);\n      if (menu) {\n        for (name in menu) {\n          defaultMenuBar.push(name);\n        }\n      } else {\n        for (name in defaultMenus) {\n          defaultMenuBar.push(name);\n        }\n      }\n      return defaultMenuBar;\n    };\n    var createMenuButtons = function (editor) {\n      var menuButtons = [];\n      var defaultMenuBar = getDefaultMenubar(editor);\n      var removedMenuItems = global$2.makeMap(getRemovedMenuItems(editor).split(/[ ,]/));\n      var menubar = getMenubar(editor);\n      var enabledMenuNames = typeof menubar === 'string' ? menubar.split(/[ ,]/) : defaultMenuBar;\n      for (var i = 0; i < enabledMenuNames.length; i++) {\n        var menuItems = enabledMenuNames[i];\n        var menu = createMenu(editor.menuItems, getMenu(editor), removedMenuItems, menuItems);\n        if (menu) {\n          menuButtons.push(menu);\n        }\n      }\n      return menuButtons;\n    };\n    var Menubar = { createMenuButtons: createMenuButtons };\n\n    var DOM$1 = global$3.DOM;\n    var getSize = function (elm) {\n      return {\n        width: elm.clientWidth,\n        height: elm.clientHeight\n      };\n    };\n    var resizeTo = function (editor, width, height) {\n      var containerElm, iframeElm, containerSize, iframeSize;\n      containerElm = editor.getContainer();\n      iframeElm = editor.getContentAreaContainer().firstChild;\n      containerSize = getSize(containerElm);\n      iframeSize = getSize(iframeElm);\n      if (width !== null) {\n        width = Math.max(getMinWidth(editor), width);\n        width = Math.min(getMaxWidth(editor), width);\n        DOM$1.setStyle(containerElm, 'width', width + (containerSize.width - iframeSize.width));\n        DOM$1.setStyle(iframeElm, 'width', width);\n      }\n      height = Math.max(getMinHeight(editor), height);\n      height = Math.min(getMaxHeight(editor), height);\n      DOM$1.setStyle(iframeElm, 'height', height);\n      Events.fireResizeEditor(editor);\n    };\n    var resizeBy = function (editor, dw, dh) {\n      var elm = editor.getContentAreaContainer();\n      resizeTo(editor, elm.clientWidth + dw, elm.clientHeight + dh);\n    };\n    var Resize = {\n      resizeTo: resizeTo,\n      resizeBy: resizeBy\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var api = function (elm) {\n      return {\n        element: function () {\n          return elm;\n        }\n      };\n    };\n    var trigger = function (sidebar, panel, callbackName) {\n      var callback = sidebar.settings[callbackName];\n      if (callback) {\n        callback(api(panel.getEl('body')));\n      }\n    };\n    var hidePanels = function (name, container, sidebars) {\n      global$2.each(sidebars, function (sidebar) {\n        var panel = container.items().filter('#' + sidebar.name)[0];\n        if (panel && panel.visible() && sidebar.name !== name) {\n          trigger(sidebar, panel, 'onhide');\n          panel.visible(false);\n        }\n      });\n    };\n    var deactivateButtons = function (toolbar) {\n      toolbar.items().each(function (ctrl) {\n        ctrl.active(false);\n      });\n    };\n    var findSidebar = function (sidebars, name) {\n      return global$2.grep(sidebars, function (sidebar) {\n        return sidebar.name === name;\n      })[0];\n    };\n    var showPanel = function (editor, name, sidebars) {\n      return function (e) {\n        var btnCtrl = e.control;\n        var container = btnCtrl.parents().filter('panel')[0];\n        var panel = container.find('#' + name)[0];\n        var sidebar = findSidebar(sidebars, name);\n        hidePanels(name, container, sidebars);\n        deactivateButtons(btnCtrl.parent());\n        if (panel && panel.visible()) {\n          trigger(sidebar, panel, 'onhide');\n          panel.hide();\n          btnCtrl.active(false);\n        } else {\n          if (panel) {\n            panel.show();\n            trigger(sidebar, panel, 'onshow');\n          } else {\n            panel = global$4.create({\n              type: 'container',\n              name: name,\n              layout: 'stack',\n              classes: 'sidebar-panel',\n              html: ''\n            });\n            container.prepend(panel);\n            trigger(sidebar, panel, 'onrender');\n            trigger(sidebar, panel, 'onshow');\n          }\n          btnCtrl.active(true);\n        }\n        Events.fireResizeEditor(editor);\n      };\n    };\n    var isModernBrowser = function () {\n      return !global$8.ie || global$8.ie >= 11;\n    };\n    var hasSidebar = function (editor) {\n      return isModernBrowser() && editor.sidebars ? editor.sidebars.length > 0 : false;\n    };\n    var createSidebar = function (editor) {\n      var buttons = global$2.map(editor.sidebars, function (sidebar) {\n        var settings = sidebar.settings;\n        return {\n          type: 'button',\n          icon: settings.icon,\n          image: settings.image,\n          tooltip: settings.tooltip,\n          onclick: showPanel(editor, sidebar.name, editor.sidebars)\n        };\n      });\n      return {\n        type: 'panel',\n        name: 'sidebar',\n        layout: 'stack',\n        classes: 'sidebar',\n        items: [{\n            type: 'toolbar',\n            layout: 'stack',\n            classes: 'sidebar-toolbar',\n            items: buttons\n          }]\n      };\n    };\n    var Sidebar = {\n      hasSidebar: hasSidebar,\n      createSidebar: createSidebar\n    };\n\n    var fireSkinLoaded$1 = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        Events.fireSkinLoaded(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var SkinLoaded = { fireSkinLoaded: fireSkinLoaded$1 };\n\n    var DOM$2 = global$3.DOM;\n    var switchMode = function (panel) {\n      return function (e) {\n        panel.find('*').disabled(e.mode === 'readonly');\n      };\n    };\n    var editArea = function (border) {\n      return {\n        type: 'panel',\n        name: 'iframe',\n        layout: 'stack',\n        classes: 'edit-area',\n        border: border,\n        html: ''\n      };\n    };\n    var editAreaContainer = function (editor) {\n      return {\n        type: 'panel',\n        layout: 'stack',\n        classes: 'edit-aria-container',\n        border: '1 0 0 0',\n        items: [\n          editArea('0'),\n          Sidebar.createSidebar(editor)\n        ]\n      };\n    };\n    var render = function (editor, theme, args) {\n      var panel, resizeHandleCtrl, startSize;\n      if (isSkinDisabled(editor) === false && args.skinUiCss) {\n        DOM$2.styleSheetLoader.load(args.skinUiCss, SkinLoaded.fireSkinLoaded(editor));\n      } else {\n        SkinLoaded.fireSkinLoaded(editor)();\n      }\n      panel = theme.panel = global$4.create({\n        type: 'panel',\n        role: 'application',\n        classes: 'tinymce',\n        style: 'visibility: hidden',\n        layout: 'stack',\n        border: 1,\n        items: [\n          {\n            type: 'container',\n            classes: 'top-part',\n            items: [\n              hasMenubar(editor) === false ? null : {\n                type: 'menubar',\n                border: '0 0 1 0',\n                items: Menubar.createMenuButtons(editor)\n              },\n              Toolbar.createToolbars(editor, getToolbarSize(editor))\n            ]\n          },\n          Sidebar.hasSidebar(editor) ? editAreaContainer(editor) : editArea('1 0 0 0')\n        ]\n      });\n      UiContainer.setUiContainer(editor, panel);\n      if (getResize(editor) !== 'none') {\n        resizeHandleCtrl = {\n          type: 'resizehandle',\n          direction: getResize(editor),\n          onResizeStart: function () {\n            var elm = editor.getContentAreaContainer().firstChild;\n            startSize = {\n              width: elm.clientWidth,\n              height: elm.clientHeight\n            };\n          },\n          onResize: function (e) {\n            if (getResize(editor) === 'both') {\n              Resize.resizeTo(editor, startSize.width + e.deltaX, startSize.height + e.deltaY);\n            } else {\n              Resize.resizeTo(editor, null, startSize.height + e.deltaY);\n            }\n          }\n        };\n      }\n      if (hasStatusbar(editor)) {\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce\" rel=\"noopener\" target=\"_blank\" role=\"presentation\" tabindex=\"-1\">Tiny</a>';\n        var html = global$5.translate([\n          'Powered by {0}',\n          linkHtml\n        ]);\n        var brandingLabel = isBrandingEnabled(editor) ? {\n          type: 'label',\n          classes: 'branding',\n          html: ' ' + html\n        } : null;\n        panel.add({\n          type: 'panel',\n          name: 'statusbar',\n          classes: 'statusbar',\n          layout: 'flow',\n          border: '1 0 0 0',\n          ariaRoot: true,\n          items: [\n            {\n              type: 'elementpath',\n              editor: editor\n            },\n            resizeHandleCtrl,\n            brandingLabel\n          ]\n        });\n      }\n      Events.fireBeforeRenderUI(editor);\n      editor.on('SwitchMode', switchMode(panel));\n      panel.renderBefore(args.targetNode).reflow();\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n      if (args.width) {\n        DOM$2.setStyle(panel.getEl(), 'width', args.width);\n      }\n      editor.on('remove', function () {\n        panel.remove();\n        panel = null;\n      });\n      A11y.addKeys(editor, panel);\n      ContextToolbars.addContextualToolbars(editor);\n      return {\n        iframeContainer: panel.find('#iframe')[0].getEl(),\n        editorContainer: panel.getEl()\n      };\n    };\n    var Iframe = { render: render };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var count = 0;\n    var funcs = {\n      id: function () {\n        return 'mceu_' + count++;\n      },\n      create: function (name, attrs, children) {\n        var elm = domGlobals.document.createElement(name);\n        global$3.DOM.setAttribs(elm, attrs);\n        if (typeof children === 'string') {\n          elm.innerHTML = children;\n        } else {\n          global$2.each(children, function (child) {\n            if (child.nodeType) {\n              elm.appendChild(child);\n            }\n          });\n        }\n        return elm;\n      },\n      createFragment: function (html) {\n        return global$3.DOM.createFragment(html);\n      },\n      getWindowSize: function () {\n        return global$3.DOM.getViewPort();\n      },\n      getSize: function (elm) {\n        var width, height;\n        if (elm.getBoundingClientRect) {\n          var rect = elm.getBoundingClientRect();\n          width = Math.max(rect.width || rect.right - rect.left, elm.offsetWidth);\n          height = Math.max(rect.height || rect.bottom - rect.bottom, elm.offsetHeight);\n        } else {\n          width = elm.offsetWidth;\n          height = elm.offsetHeight;\n        }\n        return {\n          width: width,\n          height: height\n        };\n      },\n      getPos: function (elm, root) {\n        return global$3.DOM.getPos(elm, root || funcs.getContainer());\n      },\n      getContainer: function () {\n        return global$8.container ? global$8.container : domGlobals.document.body;\n      },\n      getViewPort: function (win) {\n        return global$3.DOM.getViewPort(win);\n      },\n      get: function (id) {\n        return domGlobals.document.getElementById(id);\n      },\n      addClass: function (elm, cls) {\n        return global$3.DOM.addClass(elm, cls);\n      },\n      removeClass: function (elm, cls) {\n        return global$3.DOM.removeClass(elm, cls);\n      },\n      hasClass: function (elm, cls) {\n        return global$3.DOM.hasClass(elm, cls);\n      },\n      toggleClass: function (elm, cls, state) {\n        return global$3.DOM.toggleClass(elm, cls, state);\n      },\n      css: function (elm, name, value) {\n        return global$3.DOM.setStyle(elm, name, value);\n      },\n      getRuntimeStyle: function (elm, name) {\n        return global$3.DOM.getStyle(elm, name, true);\n      },\n      on: function (target, name, callback, scope) {\n        return global$3.DOM.bind(target, name, callback, scope);\n      },\n      off: function (target, name, callback) {\n        return global$3.DOM.unbind(target, name, callback);\n      },\n      fire: function (target, name, args) {\n        return global$3.DOM.fire(target, name, args);\n      },\n      innerHtml: function (elm, html) {\n        global$3.DOM.setHTML(elm, html);\n      }\n    };\n\n    var isStatic = function (elm) {\n      return funcs.getRuntimeStyle(elm, 'position') === 'static';\n    };\n    var isFixed = function (ctrl) {\n      return ctrl.state.get('fixed');\n    };\n    function calculateRelativePosition(ctrl, targetElm, rel) {\n      var ctrlElm, pos, x, y, selfW, selfH, targetW, targetH, viewport, size;\n      viewport = getWindowViewPort();\n      pos = funcs.getPos(targetElm, UiContainer.getUiContainer(ctrl));\n      x = pos.x;\n      y = pos.y;\n      if (isFixed(ctrl) && isStatic(domGlobals.document.body)) {\n        x -= viewport.x;\n        y -= viewport.y;\n      }\n      ctrlElm = ctrl.getEl();\n      size = funcs.getSize(ctrlElm);\n      selfW = size.width;\n      selfH = size.height;\n      size = funcs.getSize(targetElm);\n      targetW = size.width;\n      targetH = size.height;\n      rel = (rel || '').split('');\n      if (rel[0] === 'b') {\n        y += targetH;\n      }\n      if (rel[1] === 'r') {\n        x += targetW;\n      }\n      if (rel[0] === 'c') {\n        y += Math.round(targetH / 2);\n      }\n      if (rel[1] === 'c') {\n        x += Math.round(targetW / 2);\n      }\n      if (rel[3] === 'b') {\n        y -= selfH;\n      }\n      if (rel[4] === 'r') {\n        x -= selfW;\n      }\n      if (rel[3] === 'c') {\n        y -= Math.round(selfH / 2);\n      }\n      if (rel[4] === 'c') {\n        x -= Math.round(selfW / 2);\n      }\n      return {\n        x: x,\n        y: y,\n        w: selfW,\n        h: selfH\n      };\n    }\n    var getUiContainerViewPort = function (customUiContainer) {\n      return {\n        x: 0,\n        y: 0,\n        w: customUiContainer.scrollWidth - 1,\n        h: customUiContainer.scrollHeight - 1\n      };\n    };\n    var getWindowViewPort = function () {\n      var win = domGlobals.window;\n      var x = Math.max(win.pageXOffset, domGlobals.document.body.scrollLeft, domGlobals.document.documentElement.scrollLeft);\n      var y = Math.max(win.pageYOffset, domGlobals.document.body.scrollTop, domGlobals.document.documentElement.scrollTop);\n      var w = win.innerWidth || domGlobals.document.documentElement.clientWidth;\n      var h = win.innerHeight || domGlobals.document.documentElement.clientHeight;\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var getViewPortRect = function (ctrl) {\n      var customUiContainer = UiContainer.getUiContainer(ctrl);\n      return customUiContainer && !isFixed(ctrl) ? getUiContainerViewPort(customUiContainer) : getWindowViewPort();\n    };\n    var Movable = {\n      testMoveRel: function (elm, rels) {\n        var viewPortRect = getViewPortRect(this);\n        for (var i = 0; i < rels.length; i++) {\n          var pos = calculateRelativePosition(this, elm, rels[i]);\n          if (isFixed(this)) {\n            if (pos.x > 0 && pos.x + pos.w < viewPortRect.w && pos.y > 0 && pos.y + pos.h < viewPortRect.h) {\n              return rels[i];\n            }\n          } else {\n            if (pos.x > viewPortRect.x && pos.x + pos.w < viewPortRect.w + viewPortRect.x && pos.y > viewPortRect.y && pos.y + pos.h < viewPortRect.h + viewPortRect.y) {\n              return rels[i];\n            }\n          }\n        }\n        return rels[0];\n      },\n      moveRel: function (elm, rel) {\n        if (typeof rel !== 'string') {\n          rel = this.testMoveRel(elm, rel);\n        }\n        var pos = calculateRelativePosition(this, elm, rel);\n        return this.moveTo(pos.x, pos.y);\n      },\n      moveBy: function (dx, dy) {\n        var self = this, rect = self.layoutRect();\n        self.moveTo(rect.x + dx, rect.y + dy);\n        return self;\n      },\n      moveTo: function (x, y) {\n        var self = this;\n        function constrain(value, max, size) {\n          if (value < 0) {\n            return 0;\n          }\n          if (value + size > max) {\n            value = max - size;\n            return value < 0 ? 0 : value;\n          }\n          return value;\n        }\n        if (self.settings.constrainToViewport) {\n          var viewPortRect = getViewPortRect(this);\n          var layoutRect = self.layoutRect();\n          x = constrain(x, viewPortRect.w + viewPortRect.x, layoutRect.w);\n          y = constrain(y, viewPortRect.h + viewPortRect.y, layoutRect.h);\n        }\n        var uiContainer = UiContainer.getUiContainer(self);\n        if (uiContainer && isStatic(uiContainer) && !isFixed(self)) {\n          x -= uiContainer.scrollLeft;\n          y -= uiContainer.scrollTop;\n        }\n        if (uiContainer) {\n          x += 1;\n          y += 1;\n        }\n        if (self.state.get('rendered')) {\n          self.layoutRect({\n            x: x,\n            y: y\n          }).repaint();\n        } else {\n          self.settings.x = x;\n          self.settings.y = y;\n        }\n        self.fire('move', {\n          x: x,\n          y: y\n        });\n        return self;\n      }\n    };\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.util.Class');\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.util.EventDispatcher');\n\n    var BoxUtils = {\n      parseBox: function (value) {\n        var len;\n        var radix = 10;\n        if (!value) {\n          return;\n        }\n        if (typeof value === 'number') {\n          value = value || 0;\n          return {\n            top: value,\n            left: value,\n            bottom: value,\n            right: value\n          };\n        }\n        value = value.split(' ');\n        len = value.length;\n        if (len === 1) {\n          value[1] = value[2] = value[3] = value[0];\n        } else if (len === 2) {\n          value[2] = value[0];\n          value[3] = value[1];\n        } else if (len === 3) {\n          value[3] = value[1];\n        }\n        return {\n          top: parseInt(value[0], radix) || 0,\n          right: parseInt(value[1], radix) || 0,\n          bottom: parseInt(value[2], radix) || 0,\n          left: parseInt(value[3], radix) || 0\n        };\n      },\n      measureBox: function (elm, prefix) {\n        function getStyle(name) {\n          var defaultView = elm.ownerDocument.defaultView;\n          if (defaultView) {\n            var computedStyle = defaultView.getComputedStyle(elm, null);\n            if (computedStyle) {\n              name = name.replace(/[A-Z]/g, function (a) {\n                return '-' + a;\n              });\n              return computedStyle.getPropertyValue(name);\n            } else {\n              return null;\n            }\n          }\n          return elm.currentStyle[name];\n        }\n        function getSide(name) {\n          var val = parseFloat(getStyle(name));\n          return isNaN(val) ? 0 : val;\n        }\n        return {\n          top: getSide(prefix + 'TopWidth'),\n          right: getSide(prefix + 'RightWidth'),\n          bottom: getSide(prefix + 'BottomWidth'),\n          left: getSide(prefix + 'LeftWidth')\n        };\n      }\n    };\n\n    function noop$1() {\n    }\n    function ClassList(onchange) {\n      this.cls = [];\n      this.cls._map = {};\n      this.onchange = onchange || noop$1;\n      this.prefix = '';\n    }\n    global$2.extend(ClassList.prototype, {\n      add: function (cls) {\n        if (cls && !this.contains(cls)) {\n          this.cls._map[cls] = true;\n          this.cls.push(cls);\n          this._change();\n        }\n        return this;\n      },\n      remove: function (cls) {\n        if (this.contains(cls)) {\n          var i = void 0;\n          for (i = 0; i < this.cls.length; i++) {\n            if (this.cls[i] === cls) {\n              break;\n            }\n          }\n          this.cls.splice(i, 1);\n          delete this.cls._map[cls];\n          this._change();\n        }\n        return this;\n      },\n      toggle: function (cls, state) {\n        var curState = this.contains(cls);\n        if (curState !== state) {\n          if (curState) {\n            this.remove(cls);\n          } else {\n            this.add(cls);\n          }\n          this._change();\n        }\n        return this;\n      },\n      contains: function (cls) {\n        return !!this.cls._map[cls];\n      },\n      _change: function () {\n        delete this.clsValue;\n        this.onchange.call(this);\n      }\n    });\n    ClassList.prototype.toString = function () {\n      var value;\n      if (this.clsValue) {\n        return this.clsValue;\n      }\n      value = '';\n      for (var i = 0; i < this.cls.length; i++) {\n        if (i > 0) {\n          value += ' ';\n        }\n        value += this.prefix + this.cls[i];\n      }\n      return value;\n    };\n\n    function unique(array) {\n      var uniqueItems = [];\n      var i = array.length, item;\n      while (i--) {\n        item = array[i];\n        if (!item.__checked) {\n          uniqueItems.push(item);\n          item.__checked = 1;\n        }\n      }\n      i = uniqueItems.length;\n      while (i--) {\n        delete uniqueItems[i].__checked;\n      }\n      return uniqueItems;\n    }\n    var expression = /^([\\w\\\\*]+)?(?:#([\\w\\-\\\\]+))?(?:\\.([\\w\\\\\\.]+))?(?:\\[\\@?([\\w\\\\]+)([\\^\\$\\*!~]?=)([\\w\\\\]+)\\])?(?:\\:(.+))?/i;\n    var chunker = /((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^\\[\\]]*\\]|['\"][^'\"]*['\"]|[^\\[\\]'\"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?((?:.|\\r|\\n)*)/g;\n    var whiteSpace = /^\\s*|\\s*$/g;\n    var Collection;\n    var Selector = global$a.extend({\n      init: function (selector) {\n        var match = this.match;\n        function compileNameFilter(name) {\n          if (name) {\n            name = name.toLowerCase();\n            return function (item) {\n              return name === '*' || item.type === name;\n            };\n          }\n        }\n        function compileIdFilter(id) {\n          if (id) {\n            return function (item) {\n              return item._name === id;\n            };\n          }\n        }\n        function compileClassesFilter(classes) {\n          if (classes) {\n            classes = classes.split('.');\n            return function (item) {\n              var i = classes.length;\n              while (i--) {\n                if (!item.classes.contains(classes[i])) {\n                  return false;\n                }\n              }\n              return true;\n            };\n          }\n        }\n        function compileAttrFilter(name, cmp, check) {\n          if (name) {\n            return function (item) {\n              var value = item[name] ? item[name]() : '';\n              return !cmp ? !!check : cmp === '=' ? value === check : cmp === '*=' ? value.indexOf(check) >= 0 : cmp === '~=' ? (' ' + value + ' ').indexOf(' ' + check + ' ') >= 0 : cmp === '!=' ? value !== check : cmp === '^=' ? value.indexOf(check) === 0 : cmp === '$=' ? value.substr(value.length - check.length) === check : false;\n            };\n          }\n        }\n        function compilePsuedoFilter(name) {\n          var notSelectors;\n          if (name) {\n            name = /(?:not\\((.+)\\))|(.+)/i.exec(name);\n            if (!name[1]) {\n              name = name[2];\n              return function (item, index, length) {\n                return name === 'first' ? index === 0 : name === 'last' ? index === length - 1 : name === 'even' ? index % 2 === 0 : name === 'odd' ? index % 2 === 1 : item[name] ? item[name]() : false;\n              };\n            }\n            notSelectors = parseChunks(name[1], []);\n            return function (item) {\n              return !match(item, notSelectors);\n            };\n          }\n        }\n        function compile(selector, filters, direct) {\n          var parts;\n          function add(filter) {\n            if (filter) {\n              filters.push(filter);\n            }\n          }\n          parts = expression.exec(selector.replace(whiteSpace, ''));\n          add(compileNameFilter(parts[1]));\n          add(compileIdFilter(parts[2]));\n          add(compileClassesFilter(parts[3]));\n          add(compileAttrFilter(parts[4], parts[5], parts[6]));\n          add(compilePsuedoFilter(parts[7]));\n          filters.pseudo = !!parts[7];\n          filters.direct = direct;\n          return filters;\n        }\n        function parseChunks(selector, selectors) {\n          var parts = [];\n          var extra, matches, i;\n          do {\n            chunker.exec('');\n            matches = chunker.exec(selector);\n            if (matches) {\n              selector = matches[3];\n              parts.push(matches[1]);\n              if (matches[2]) {\n                extra = matches[3];\n                break;\n              }\n            }\n          } while (matches);\n          if (extra) {\n            parseChunks(extra, selectors);\n          }\n          selector = [];\n          for (i = 0; i < parts.length; i++) {\n            if (parts[i] !== '>') {\n              selector.push(compile(parts[i], [], parts[i - 1] === '>'));\n            }\n          }\n          selectors.push(selector);\n          return selectors;\n        }\n        this._selectors = parseChunks(selector, []);\n      },\n      match: function (control, selectors) {\n        var i, l, si, sl, selector, fi, fl, filters, index, length, siblings, count, item;\n        selectors = selectors || this._selectors;\n        for (i = 0, l = selectors.length; i < l; i++) {\n          selector = selectors[i];\n          sl = selector.length;\n          item = control;\n          count = 0;\n          for (si = sl - 1; si >= 0; si--) {\n            filters = selector[si];\n            while (item) {\n              if (filters.pseudo) {\n                siblings = item.parent().items();\n                index = length = siblings.length;\n                while (index--) {\n                  if (siblings[index] === item) {\n                    break;\n                  }\n                }\n              }\n              for (fi = 0, fl = filters.length; fi < fl; fi++) {\n                if (!filters[fi](item, index, length)) {\n                  fi = fl + 1;\n                  break;\n                }\n              }\n              if (fi === fl) {\n                count++;\n                break;\n              } else {\n                if (si === sl - 1) {\n                  break;\n                }\n              }\n              item = item.parent();\n            }\n          }\n          if (count === sl) {\n            return true;\n          }\n        }\n        return false;\n      },\n      find: function (container) {\n        var matches = [], i, l;\n        var selectors = this._selectors;\n        function collect(items, selector, index) {\n          var i, l, fi, fl, item;\n          var filters = selector[index];\n          for (i = 0, l = items.length; i < l; i++) {\n            item = items[i];\n            for (fi = 0, fl = filters.length; fi < fl; fi++) {\n              if (!filters[fi](item, i, l)) {\n                fi = fl + 1;\n                break;\n              }\n            }\n            if (fi === fl) {\n              if (index === selector.length - 1) {\n                matches.push(item);\n              } else {\n                if (item.items) {\n                  collect(item.items(), selector, index + 1);\n                }\n              }\n            } else if (filters.direct) {\n              return;\n            }\n            if (item.items) {\n              collect(item.items(), selector, index);\n            }\n          }\n        }\n        if (container.items) {\n          for (i = 0, l = selectors.length; i < l; i++) {\n            collect(container.items(), selectors[i], 0);\n          }\n          if (l > 1) {\n            matches = unique(matches);\n          }\n        }\n        if (!Collection) {\n          Collection = Selector.Collection;\n        }\n        return new Collection(matches);\n      }\n    });\n\n    var Collection$1, proto;\n    var push = Array.prototype.push, slice = Array.prototype.slice;\n    proto = {\n      length: 0,\n      init: function (items) {\n        if (items) {\n          this.add(items);\n        }\n      },\n      add: function (items) {\n        var self = this;\n        if (!global$2.isArray(items)) {\n          if (items instanceof Collection$1) {\n            self.add(items.toArray());\n          } else {\n            push.call(self, items);\n          }\n        } else {\n          push.apply(self, items);\n        }\n        return self;\n      },\n      set: function (items) {\n        var self = this;\n        var len = self.length;\n        var i;\n        self.length = 0;\n        self.add(items);\n        for (i = self.length; i < len; i++) {\n          delete self[i];\n        }\n        return self;\n      },\n      filter: function (selector) {\n        var self = this;\n        var i, l;\n        var matches = [];\n        var item, match;\n        if (typeof selector === 'string') {\n          selector = new Selector(selector);\n          match = function (item) {\n            return selector.match(item);\n          };\n        } else {\n          match = selector;\n        }\n        for (i = 0, l = self.length; i < l; i++) {\n          item = self[i];\n          if (match(item)) {\n            matches.push(item);\n          }\n        }\n        return new Collection$1(matches);\n      },\n      slice: function () {\n        return new Collection$1(slice.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      each: function (callback) {\n        global$2.each(this, callback);\n        return this;\n      },\n      toArray: function () {\n        return global$2.toArray(this);\n      },\n      indexOf: function (ctrl) {\n        var self = this;\n        var i = self.length;\n        while (i--) {\n          if (self[i] === ctrl) {\n            break;\n          }\n        }\n        return i;\n      },\n      reverse: function () {\n        return new Collection$1(global$2.toArray(this).reverse());\n      },\n      hasClass: function (cls) {\n        return this[0] ? this[0].classes.contains(cls) : false;\n      },\n      prop: function (name, value) {\n        var self = this;\n        var item;\n        if (value !== undefined) {\n          self.each(function (item) {\n            if (item[name]) {\n              item[name](value);\n            }\n          });\n          return self;\n        }\n        item = self[0];\n        if (item && item[name]) {\n          return item[name]();\n        }\n      },\n      exec: function (name) {\n        var self = this, args = global$2.toArray(arguments).slice(1);\n        self.each(function (item) {\n          if (item[name]) {\n            item[name].apply(item, args);\n          }\n        });\n        return self;\n      },\n      remove: function () {\n        var i = this.length;\n        while (i--) {\n          this[i].remove();\n        }\n        return this;\n      },\n      addClass: function (cls) {\n        return this.each(function (item) {\n          item.classes.add(cls);\n        });\n      },\n      removeClass: function (cls) {\n        return this.each(function (item) {\n          item.classes.remove(cls);\n        });\n      }\n    };\n    global$2.each('fire on off show hide append prepend before after reflow'.split(' '), function (name) {\n      proto[name] = function () {\n        var args = global$2.toArray(arguments);\n        this.each(function (ctrl) {\n          if (name in ctrl) {\n            ctrl[name].apply(ctrl, args);\n          }\n        });\n        return this;\n      };\n    });\n    global$2.each('text name disabled active selected checked visible parent value data'.split(' '), function (name) {\n      proto[name] = function (value) {\n        return this.prop(name, value);\n      };\n    });\n    Collection$1 = global$a.extend(proto);\n    Selector.Collection = Collection$1;\n    var Collection$2 = Collection$1;\n\n    var Binding = function (settings) {\n      this.create = settings.create;\n    };\n    Binding.create = function (model, name) {\n      return new Binding({\n        create: function (otherModel, otherName) {\n          var bindings;\n          var fromSelfToOther = function (e) {\n            otherModel.set(otherName, e.value);\n          };\n          var fromOtherToSelf = function (e) {\n            model.set(name, e.value);\n          };\n          otherModel.on('change:' + otherName, fromOtherToSelf);\n          model.on('change:' + name, fromSelfToOther);\n          bindings = otherModel._bindings;\n          if (!bindings) {\n            bindings = otherModel._bindings = [];\n            otherModel.on('destroy', function () {\n              var i = bindings.length;\n              while (i--) {\n                bindings[i]();\n              }\n            });\n          }\n          bindings.push(function () {\n            model.off('change:' + name, fromSelfToOther);\n          });\n          return model.get(name);\n        }\n      });\n    };\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    function isNode(node) {\n      return node.nodeType > 0;\n    }\n    function isEqual(a, b) {\n      var k, checked;\n      if (a === b) {\n        return true;\n      }\n      if (a === null || b === null) {\n        return a === b;\n      }\n      if (typeof a !== 'object' || typeof b !== 'object') {\n        return a === b;\n      }\n      if (global$2.isArray(b)) {\n        if (a.length !== b.length) {\n          return false;\n        }\n        k = a.length;\n        while (k--) {\n          if (!isEqual(a[k], b[k])) {\n            return false;\n          }\n        }\n      }\n      if (isNode(a) || isNode(b)) {\n        return a === b;\n      }\n      checked = {};\n      for (k in b) {\n        if (!isEqual(a[k], b[k])) {\n          return false;\n        }\n        checked[k] = true;\n      }\n      for (k in a) {\n        if (!checked[k] && !isEqual(a[k], b[k])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    var ObservableObject = global$a.extend({\n      Mixins: [global$c],\n      init: function (data) {\n        var name, value;\n        data = data || {};\n        for (name in data) {\n          value = data[name];\n          if (value instanceof Binding) {\n            data[name] = value.create(this, name);\n          }\n        }\n        this.data = data;\n      },\n      set: function (name, value) {\n        var key, args;\n        var oldValue = this.data[name];\n        if (value instanceof Binding) {\n          value = value.create(this, name);\n        }\n        if (typeof name === 'object') {\n          for (key in name) {\n            this.set(key, name[key]);\n          }\n          return this;\n        }\n        if (!isEqual(oldValue, value)) {\n          this.data[name] = value;\n          args = {\n            target: this,\n            name: name,\n            value: value,\n            oldValue: oldValue\n          };\n          this.fire('change:' + name, args);\n          this.fire('change', args);\n        }\n        return this;\n      },\n      get: function (name) {\n        return this.data[name];\n      },\n      has: function (name) {\n        return name in this.data;\n      },\n      bind: function (name) {\n        return Binding.create(this, name);\n      },\n      destroy: function () {\n        this.fire('destroy');\n      }\n    });\n\n    var dirtyCtrls = {}, animationFrameRequested;\n    var ReflowQueue = {\n      add: function (ctrl) {\n        var parent = ctrl.parent();\n        if (parent) {\n          if (!parent._layout || parent._layout.isNative()) {\n            return;\n          }\n          if (!dirtyCtrls[parent._id]) {\n            dirtyCtrls[parent._id] = parent;\n          }\n          if (!animationFrameRequested) {\n            animationFrameRequested = true;\n            global$7.requestAnimationFrame(function () {\n              var id, ctrl;\n              animationFrameRequested = false;\n              for (id in dirtyCtrls) {\n                ctrl = dirtyCtrls[id];\n                if (ctrl.state.get('rendered')) {\n                  ctrl.reflow();\n                }\n              }\n              dirtyCtrls = {};\n            }, domGlobals.document.body);\n          }\n        }\n      },\n      remove: function (ctrl) {\n        if (dirtyCtrls[ctrl._id]) {\n          delete dirtyCtrls[ctrl._id];\n        }\n      }\n    };\n\n    var hasMouseWheelEventSupport = 'onmousewheel' in domGlobals.document;\n    var hasWheelEventSupport = false;\n    var classPrefix = 'mce-';\n    var Control, idCounter = 0;\n    var proto$1 = {\n      Statics: { classPrefix: classPrefix },\n      isRtl: function () {\n        return Control.rtl;\n      },\n      classPrefix: classPrefix,\n      init: function (settings) {\n        var self = this;\n        var classes, defaultClasses;\n        function applyClasses(classes) {\n          var i;\n          classes = classes.split(' ');\n          for (i = 0; i < classes.length; i++) {\n            self.classes.add(classes[i]);\n          }\n        }\n        self.settings = settings = global$2.extend({}, self.Defaults, settings);\n        self._id = settings.id || 'mceu_' + idCounter++;\n        self._aria = { role: settings.role };\n        self._elmCache = {};\n        self.$ = global$9;\n        self.state = new ObservableObject({\n          visible: true,\n          active: false,\n          disabled: false,\n          value: ''\n        });\n        self.data = new ObservableObject(settings.data);\n        self.classes = new ClassList(function () {\n          if (self.state.get('rendered')) {\n            self.getEl().className = this.toString();\n          }\n        });\n        self.classes.prefix = self.classPrefix;\n        classes = settings.classes;\n        if (classes) {\n          if (self.Defaults) {\n            defaultClasses = self.Defaults.classes;\n            if (defaultClasses && classes !== defaultClasses) {\n              applyClasses(defaultClasses);\n            }\n          }\n          applyClasses(classes);\n        }\n        global$2.each('title text name visible disabled active value'.split(' '), function (name) {\n          if (name in settings) {\n            self[name](settings[name]);\n          }\n        });\n        self.on('click', function () {\n          if (self.disabled()) {\n            return false;\n          }\n        });\n        self.settings = settings;\n        self.borderBox = BoxUtils.parseBox(settings.border);\n        self.paddingBox = BoxUtils.parseBox(settings.padding);\n        self.marginBox = BoxUtils.parseBox(settings.margin);\n        if (settings.hidden) {\n          self.hide();\n        }\n      },\n      Properties: 'parent,name',\n      getContainerElm: function () {\n        var uiContainer = UiContainer.getUiContainer(this);\n        return uiContainer ? uiContainer : funcs.getContainer();\n      },\n      getParentCtrl: function (elm) {\n        var ctrl;\n        var lookup = this.getRoot().controlIdLookup;\n        while (elm && lookup) {\n          ctrl = lookup[elm.id];\n          if (ctrl) {\n            break;\n          }\n          elm = elm.parentNode;\n        }\n        return ctrl;\n      },\n      initLayoutRect: function () {\n        var self = this;\n        var settings = self.settings;\n        var borderBox, layoutRect;\n        var elm = self.getEl();\n        var width, height, minWidth, minHeight, autoResize;\n        var startMinWidth, startMinHeight, initialSize;\n        borderBox = self.borderBox = self.borderBox || BoxUtils.measureBox(elm, 'border');\n        self.paddingBox = self.paddingBox || BoxUtils.measureBox(elm, 'padding');\n        self.marginBox = self.marginBox || BoxUtils.measureBox(elm, 'margin');\n        initialSize = funcs.getSize(elm);\n        startMinWidth = settings.minWidth;\n        startMinHeight = settings.minHeight;\n        minWidth = startMinWidth || initialSize.width;\n        minHeight = startMinHeight || initialSize.height;\n        width = settings.width;\n        height = settings.height;\n        autoResize = settings.autoResize;\n        autoResize = typeof autoResize !== 'undefined' ? autoResize : !width && !height;\n        width = width || minWidth;\n        height = height || minHeight;\n        var deltaW = borderBox.left + borderBox.right;\n        var deltaH = borderBox.top + borderBox.bottom;\n        var maxW = settings.maxWidth || 65535;\n        var maxH = settings.maxHeight || 65535;\n        self._layoutRect = layoutRect = {\n          x: settings.x || 0,\n          y: settings.y || 0,\n          w: width,\n          h: height,\n          deltaW: deltaW,\n          deltaH: deltaH,\n          contentW: width - deltaW,\n          contentH: height - deltaH,\n          innerW: width - deltaW,\n          innerH: height - deltaH,\n          startMinWidth: startMinWidth || 0,\n          startMinHeight: startMinHeight || 0,\n          minW: Math.min(minWidth, maxW),\n          minH: Math.min(minHeight, maxH),\n          maxW: maxW,\n          maxH: maxH,\n          autoResize: autoResize,\n          scrollW: 0\n        };\n        self._lastLayoutRect = {};\n        return layoutRect;\n      },\n      layoutRect: function (newRect) {\n        var self = this;\n        var curRect = self._layoutRect, lastLayoutRect, size, deltaWidth, deltaHeight, repaintControls;\n        if (!curRect) {\n          curRect = self.initLayoutRect();\n        }\n        if (newRect) {\n          deltaWidth = curRect.deltaW;\n          deltaHeight = curRect.deltaH;\n          if (newRect.x !== undefined) {\n            curRect.x = newRect.x;\n          }\n          if (newRect.y !== undefined) {\n            curRect.y = newRect.y;\n          }\n          if (newRect.minW !== undefined) {\n            curRect.minW = newRect.minW;\n          }\n          if (newRect.minH !== undefined) {\n            curRect.minH = newRect.minH;\n          }\n          size = newRect.w;\n          if (size !== undefined) {\n            size = size < curRect.minW ? curRect.minW : size;\n            size = size > curRect.maxW ? curRect.maxW : size;\n            curRect.w = size;\n            curRect.innerW = size - deltaWidth;\n          }\n          size = newRect.h;\n          if (size !== undefined) {\n            size = size < curRect.minH ? curRect.minH : size;\n            size = size > curRect.maxH ? curRect.maxH : size;\n            curRect.h = size;\n            curRect.innerH = size - deltaHeight;\n          }\n          size = newRect.innerW;\n          if (size !== undefined) {\n            size = size < curRect.minW - deltaWidth ? curRect.minW - deltaWidth : size;\n            size = size > curRect.maxW - deltaWidth ? curRect.maxW - deltaWidth : size;\n            curRect.innerW = size;\n            curRect.w = size + deltaWidth;\n          }\n          size = newRect.innerH;\n          if (size !== undefined) {\n            size = size < curRect.minH - deltaHeight ? curRect.minH - deltaHeight : size;\n            size = size > curRect.maxH - deltaHeight ? curRect.maxH - deltaHeight : size;\n            curRect.innerH = size;\n            curRect.h = size + deltaHeight;\n          }\n          if (newRect.contentW !== undefined) {\n            curRect.contentW = newRect.contentW;\n          }\n          if (newRect.contentH !== undefined) {\n            curRect.contentH = newRect.contentH;\n          }\n          lastLayoutRect = self._lastLayoutRect;\n          if (lastLayoutRect.x !== curRect.x || lastLayoutRect.y !== curRect.y || lastLayoutRect.w !== curRect.w || lastLayoutRect.h !== curRect.h) {\n            repaintControls = Control.repaintControls;\n            if (repaintControls) {\n              if (repaintControls.map && !repaintControls.map[self._id]) {\n                repaintControls.push(self);\n                repaintControls.map[self._id] = true;\n              }\n            }\n            lastLayoutRect.x = curRect.x;\n            lastLayoutRect.y = curRect.y;\n            lastLayoutRect.w = curRect.w;\n            lastLayoutRect.h = curRect.h;\n          }\n          return self;\n        }\n        return curRect;\n      },\n      repaint: function () {\n        var self = this;\n        var style, bodyStyle, bodyElm, rect, borderBox;\n        var borderW, borderH, lastRepaintRect, round, value;\n        round = !domGlobals.document.createRange ? Math.round : function (value) {\n          return value;\n        };\n        style = self.getEl().style;\n        rect = self._layoutRect;\n        lastRepaintRect = self._lastRepaintRect || {};\n        borderBox = self.borderBox;\n        borderW = borderBox.left + borderBox.right;\n        borderH = borderBox.top + borderBox.bottom;\n        if (rect.x !== lastRepaintRect.x) {\n          style.left = round(rect.x) + 'px';\n          lastRepaintRect.x = rect.x;\n        }\n        if (rect.y !== lastRepaintRect.y) {\n          style.top = round(rect.y) + 'px';\n          lastRepaintRect.y = rect.y;\n        }\n        if (rect.w !== lastRepaintRect.w) {\n          value = round(rect.w - borderW);\n          style.width = (value >= 0 ? value : 0) + 'px';\n          lastRepaintRect.w = rect.w;\n        }\n        if (rect.h !== lastRepaintRect.h) {\n          value = round(rect.h - borderH);\n          style.height = (value >= 0 ? value : 0) + 'px';\n          lastRepaintRect.h = rect.h;\n        }\n        if (self._hasBody && rect.innerW !== lastRepaintRect.innerW) {\n          value = round(rect.innerW);\n          bodyElm = self.getEl('body');\n          if (bodyElm) {\n            bodyStyle = bodyElm.style;\n            bodyStyle.width = (value >= 0 ? value : 0) + 'px';\n          }\n          lastRepaintRect.innerW = rect.innerW;\n        }\n        if (self._hasBody && rect.innerH !== lastRepaintRect.innerH) {\n          value = round(rect.innerH);\n          bodyElm = bodyElm || self.getEl('body');\n          if (bodyElm) {\n            bodyStyle = bodyStyle || bodyElm.style;\n            bodyStyle.height = (value >= 0 ? value : 0) + 'px';\n          }\n          lastRepaintRect.innerH = rect.innerH;\n        }\n        self._lastRepaintRect = lastRepaintRect;\n        self.fire('repaint', {}, false);\n      },\n      updateLayoutRect: function () {\n        var self = this;\n        self.parent()._lastRect = null;\n        funcs.css(self.getEl(), {\n          width: '',\n          height: ''\n        });\n        self._layoutRect = self._lastRepaintRect = self._lastLayoutRect = null;\n        self.initLayoutRect();\n      },\n      on: function (name, callback) {\n        var self = this;\n        function resolveCallbackName(name) {\n          var callback, scope;\n          if (typeof name !== 'string') {\n            return name;\n          }\n          return function (e) {\n            if (!callback) {\n              self.parentsAndSelf().each(function (ctrl) {\n                var callbacks = ctrl.settings.callbacks;\n                if (callbacks && (callback = callbacks[name])) {\n                  scope = ctrl;\n                  return false;\n                }\n              });\n            }\n            if (!callback) {\n              e.action = name;\n              this.fire('execute', e);\n              return;\n            }\n            return callback.call(scope, e);\n          };\n        }\n        getEventDispatcher(self).on(name, resolveCallbackName(callback));\n        return self;\n      },\n      off: function (name, callback) {\n        getEventDispatcher(this).off(name, callback);\n        return this;\n      },\n      fire: function (name, args, bubble) {\n        var self = this;\n        args = args || {};\n        if (!args.control) {\n          args.control = self;\n        }\n        args = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent = self.parent();\n          while (parent && !args.isPropagationStopped()) {\n            parent.fire(name, args, false);\n            parent = parent.parent();\n          }\n        }\n        return args;\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      },\n      parents: function (selector) {\n        var self = this;\n        var ctrl, parents = new Collection$2();\n        for (ctrl = self.parent(); ctrl; ctrl = ctrl.parent()) {\n          parents.add(ctrl);\n        }\n        if (selector) {\n          parents = parents.filter(selector);\n        }\n        return parents;\n      },\n      parentsAndSelf: function (selector) {\n        return new Collection$2(this).add(this.parents(selector));\n      },\n      next: function () {\n        var parentControls = this.parent().items();\n        return parentControls[parentControls.indexOf(this) + 1];\n      },\n      prev: function () {\n        var parentControls = this.parent().items();\n        return parentControls[parentControls.indexOf(this) - 1];\n      },\n      innerHtml: function (html) {\n        this.$el.html(html);\n        return this;\n      },\n      getEl: function (suffix) {\n        var id = suffix ? this._id + '-' + suffix : this._id;\n        if (!this._elmCache[id]) {\n          this._elmCache[id] = global$9('#' + id)[0];\n        }\n        return this._elmCache[id];\n      },\n      show: function () {\n        return this.visible(true);\n      },\n      hide: function () {\n        return this.visible(false);\n      },\n      focus: function () {\n        try {\n          this.getEl().focus();\n        } catch (ex) {\n        }\n        return this;\n      },\n      blur: function () {\n        this.getEl().blur();\n        return this;\n      },\n      aria: function (name, value) {\n        var self = this, elm = self.getEl(self.ariaTarget);\n        if (typeof value === 'undefined') {\n          return self._aria[name];\n        }\n        self._aria[name] = value;\n        if (self.state.get('rendered')) {\n          elm.setAttribute(name === 'role' ? name : 'aria-' + name, value);\n        }\n        return self;\n      },\n      encode: function (text, translate) {\n        if (translate !== false) {\n          text = this.translate(text);\n        }\n        return (text || '').replace(/[&<>\"]/g, function (match) {\n          return '&#' + match.charCodeAt(0) + ';';\n        });\n      },\n      translate: function (text) {\n        return Control.translate ? Control.translate(text) : text;\n      },\n      before: function (items) {\n        var self = this, parent = self.parent();\n        if (parent) {\n          parent.insert(items, parent.items().indexOf(self), true);\n        }\n        return self;\n      },\n      after: function (items) {\n        var self = this, parent = self.parent();\n        if (parent) {\n          parent.insert(items, parent.items().indexOf(self));\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var elm = self.getEl();\n        var parent = self.parent();\n        var newItems, i;\n        if (self.items) {\n          var controls = self.items().toArray();\n          i = controls.length;\n          while (i--) {\n            controls[i].remove();\n          }\n        }\n        if (parent && parent.items) {\n          newItems = [];\n          parent.items().each(function (item) {\n            if (item !== self) {\n              newItems.push(item);\n            }\n          });\n          parent.items().set(newItems);\n          parent._lastRect = null;\n        }\n        if (self._eventsRoot && self._eventsRoot === self) {\n          global$9(elm).off();\n        }\n        var lookup = self.getRoot().controlIdLookup;\n        if (lookup) {\n          delete lookup[self._id];\n        }\n        if (elm && elm.parentNode) {\n          elm.parentNode.removeChild(elm);\n        }\n        self.state.set('rendered', false);\n        self.state.destroy();\n        self.fire('remove');\n        return self;\n      },\n      renderBefore: function (elm) {\n        global$9(elm).before(this.renderHtml());\n        this.postRender();\n        return this;\n      },\n      renderTo: function (elm) {\n        global$9(elm || this.getContainerElm()).append(this.renderHtml());\n        this.postRender();\n        return this;\n      },\n      preRender: function () {\n      },\n      render: function () {\n      },\n      renderHtml: function () {\n        return '<div id=\"' + this._id + '\" class=\"' + this.classes + '\"></div>';\n      },\n      postRender: function () {\n        var self = this;\n        var settings = self.settings;\n        var elm, box, parent, name, parentEventsRoot;\n        self.$el = global$9(self.getEl());\n        self.state.set('rendered', true);\n        for (name in settings) {\n          if (name.indexOf('on') === 0) {\n            self.on(name.substr(2), settings[name]);\n          }\n        }\n        if (self._eventsRoot) {\n          for (parent = self.parent(); !parentEventsRoot && parent; parent = parent.parent()) {\n            parentEventsRoot = parent._eventsRoot;\n          }\n          if (parentEventsRoot) {\n            for (name in parentEventsRoot._nativeEvents) {\n              self._nativeEvents[name] = true;\n            }\n          }\n        }\n        bindPendingEvents(self);\n        if (settings.style) {\n          elm = self.getEl();\n          if (elm) {\n            elm.setAttribute('style', settings.style);\n            elm.style.cssText = settings.style;\n          }\n        }\n        if (self.settings.border) {\n          box = self.borderBox;\n          self.$el.css({\n            'border-top-width': box.top,\n            'border-right-width': box.right,\n            'border-bottom-width': box.bottom,\n            'border-left-width': box.left\n          });\n        }\n        var root = self.getRoot();\n        if (!root.controlIdLookup) {\n          root.controlIdLookup = {};\n        }\n        root.controlIdLookup[self._id] = self;\n        for (var key in self._aria) {\n          self.aria(key, self._aria[key]);\n        }\n        if (self.state.get('visible') === false) {\n          self.getEl().style.display = 'none';\n        }\n        self.bindStates();\n        self.state.on('change:visible', function (e) {\n          var state = e.value;\n          var parentCtrl;\n          if (self.state.get('rendered')) {\n            self.getEl().style.display = state === false ? 'none' : '';\n            self.getEl().getBoundingClientRect();\n          }\n          parentCtrl = self.parent();\n          if (parentCtrl) {\n            parentCtrl._lastRect = null;\n          }\n          self.fire(state ? 'show' : 'hide');\n          ReflowQueue.add(self);\n        });\n        self.fire('postrender', {}, false);\n      },\n      bindStates: function () {\n      },\n      scrollIntoView: function (align) {\n        function getOffset(elm, rootElm) {\n          var x, y, parent = elm;\n          x = y = 0;\n          while (parent && parent !== rootElm && parent.nodeType) {\n            x += parent.offsetLeft || 0;\n            y += parent.offsetTop || 0;\n            parent = parent.offsetParent;\n          }\n          return {\n            x: x,\n            y: y\n          };\n        }\n        var elm = this.getEl(), parentElm = elm.parentNode;\n        var x, y, width, height, parentWidth, parentHeight;\n        var pos = getOffset(elm, parentElm);\n        x = pos.x;\n        y = pos.y;\n        width = elm.offsetWidth;\n        height = elm.offsetHeight;\n        parentWidth = parentElm.clientWidth;\n        parentHeight = parentElm.clientHeight;\n        if (align === 'end') {\n          x -= parentWidth - width;\n          y -= parentHeight - height;\n        } else if (align === 'center') {\n          x -= parentWidth / 2 - width / 2;\n          y -= parentHeight / 2 - height / 2;\n        }\n        parentElm.scrollLeft = x;\n        parentElm.scrollTop = y;\n        return this;\n      },\n      getRoot: function () {\n        var ctrl = this, rootControl;\n        var parents = [];\n        while (ctrl) {\n          if (ctrl.rootControl) {\n            rootControl = ctrl.rootControl;\n            break;\n          }\n          parents.push(ctrl);\n          rootControl = ctrl;\n          ctrl = ctrl.parent();\n        }\n        if (!rootControl) {\n          rootControl = this;\n        }\n        var i = parents.length;\n        while (i--) {\n          parents[i].rootControl = rootControl;\n        }\n        return rootControl;\n      },\n      reflow: function () {\n        ReflowQueue.remove(this);\n        var parent = this.parent();\n        if (parent && parent._layout && !parent._layout.isNative()) {\n          parent.reflow();\n        }\n        return this;\n      }\n    };\n    global$2.each('text title visible disabled active value'.split(' '), function (name) {\n      proto$1[name] = function (value) {\n        if (arguments.length === 0) {\n          return this.state.get(name);\n        }\n        if (typeof value !== 'undefined') {\n          this.state.set(name, value);\n        }\n        return this;\n      };\n    });\n    Control = global$a.extend(proto$1);\n    function getEventDispatcher(obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new global$b({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (state && global$b.isNative(name)) {\n              if (!obj._nativeEvents) {\n                obj._nativeEvents = {};\n              }\n              obj._nativeEvents[name] = true;\n              if (obj.state.get('rendered')) {\n                bindPendingEvents(obj);\n              }\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    }\n    function bindPendingEvents(eventCtrl) {\n      var i, l, parents, eventRootCtrl, nativeEvents, name;\n      function delegate(e) {\n        var control = eventCtrl.getParentCtrl(e.target);\n        if (control) {\n          control.fire(e.type, e);\n        }\n      }\n      function mouseLeaveHandler() {\n        var ctrl = eventRootCtrl._lastHoverCtrl;\n        if (ctrl) {\n          ctrl.fire('mouseleave', { target: ctrl.getEl() });\n          ctrl.parents().each(function (ctrl) {\n            ctrl.fire('mouseleave', { target: ctrl.getEl() });\n          });\n          eventRootCtrl._lastHoverCtrl = null;\n        }\n      }\n      function mouseEnterHandler(e) {\n        var ctrl = eventCtrl.getParentCtrl(e.target), lastCtrl = eventRootCtrl._lastHoverCtrl, idx = 0, i, parents, lastParents;\n        if (ctrl !== lastCtrl) {\n          eventRootCtrl._lastHoverCtrl = ctrl;\n          parents = ctrl.parents().toArray().reverse();\n          parents.push(ctrl);\n          if (lastCtrl) {\n            lastParents = lastCtrl.parents().toArray().reverse();\n            lastParents.push(lastCtrl);\n            for (idx = 0; idx < lastParents.length; idx++) {\n              if (parents[idx] !== lastParents[idx]) {\n                break;\n              }\n            }\n            for (i = lastParents.length - 1; i >= idx; i--) {\n              lastCtrl = lastParents[i];\n              lastCtrl.fire('mouseleave', { target: lastCtrl.getEl() });\n            }\n          }\n          for (i = idx; i < parents.length; i++) {\n            ctrl = parents[i];\n            ctrl.fire('mouseenter', { target: ctrl.getEl() });\n          }\n        }\n      }\n      function fixWheelEvent(e) {\n        e.preventDefault();\n        if (e.type === 'mousewheel') {\n          e.deltaY = -1 / 40 * e.wheelDelta;\n          if (e.wheelDeltaX) {\n            e.deltaX = -1 / 40 * e.wheelDeltaX;\n          }\n        } else {\n          e.deltaX = 0;\n          e.deltaY = e.detail;\n        }\n        e = eventCtrl.fire('wheel', e);\n      }\n      nativeEvents = eventCtrl._nativeEvents;\n      if (nativeEvents) {\n        parents = eventCtrl.parents().toArray();\n        parents.unshift(eventCtrl);\n        for (i = 0, l = parents.length; !eventRootCtrl && i < l; i++) {\n          eventRootCtrl = parents[i]._eventsRoot;\n        }\n        if (!eventRootCtrl) {\n          eventRootCtrl = parents[parents.length - 1] || eventCtrl;\n        }\n        eventCtrl._eventsRoot = eventRootCtrl;\n        for (l = i, i = 0; i < l; i++) {\n          parents[i]._eventsRoot = eventRootCtrl;\n        }\n        var eventRootDelegates = eventRootCtrl._delegates;\n        if (!eventRootDelegates) {\n          eventRootDelegates = eventRootCtrl._delegates = {};\n        }\n        for (name in nativeEvents) {\n          if (!nativeEvents) {\n            return false;\n          }\n          if (name === 'wheel' && !hasWheelEventSupport) {\n            if (hasMouseWheelEventSupport) {\n              global$9(eventCtrl.getEl()).on('mousewheel', fixWheelEvent);\n            } else {\n              global$9(eventCtrl.getEl()).on('DOMMouseScroll', fixWheelEvent);\n            }\n            continue;\n          }\n          if (name === 'mouseenter' || name === 'mouseleave') {\n            if (!eventRootCtrl._hasMouseEnter) {\n              global$9(eventRootCtrl.getEl()).on('mouseleave', mouseLeaveHandler).on('mouseover', mouseEnterHandler);\n              eventRootCtrl._hasMouseEnter = 1;\n            }\n          } else if (!eventRootDelegates[name]) {\n            global$9(eventRootCtrl.getEl()).on(name, delegate);\n            eventRootDelegates[name] = true;\n          }\n          nativeEvents[name] = false;\n        }\n      }\n    }\n    var Control$1 = Control;\n\n    var hasTabstopData = function (elm) {\n      return elm.getAttribute('data-mce-tabstop') ? true : false;\n    };\n    function KeyboardNavigation (settings) {\n      var root = settings.root;\n      var focusedElement, focusedControl;\n      function isElement(node) {\n        return node && node.nodeType === 1;\n      }\n      try {\n        focusedElement = domGlobals.document.activeElement;\n      } catch (ex) {\n        focusedElement = domGlobals.document.body;\n      }\n      focusedControl = root.getParentCtrl(focusedElement);\n      function getRole(elm) {\n        elm = elm || focusedElement;\n        if (isElement(elm)) {\n          return elm.getAttribute('role');\n        }\n        return null;\n      }\n      function getParentRole(elm) {\n        var role, parent = elm || focusedElement;\n        while (parent = parent.parentNode) {\n          if (role = getRole(parent)) {\n            return role;\n          }\n        }\n      }\n      function getAriaProp(name) {\n        var elm = focusedElement;\n        if (isElement(elm)) {\n          return elm.getAttribute('aria-' + name);\n        }\n      }\n      function isTextInputElement(elm) {\n        var tagName = elm.tagName.toUpperCase();\n        return tagName === 'INPUT' || tagName === 'TEXTAREA' || tagName === 'SELECT';\n      }\n      function canFocus(elm) {\n        if (isTextInputElement(elm) && !elm.hidden) {\n          return true;\n        }\n        if (hasTabstopData(elm)) {\n          return true;\n        }\n        if (/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(getRole(elm))) {\n          return true;\n        }\n        return false;\n      }\n      function getFocusElements(elm) {\n        var elements = [];\n        function collect(elm) {\n          if (elm.nodeType !== 1 || elm.style.display === 'none' || elm.disabled) {\n            return;\n          }\n          if (canFocus(elm)) {\n            elements.push(elm);\n          }\n          for (var i = 0; i < elm.childNodes.length; i++) {\n            collect(elm.childNodes[i]);\n          }\n        }\n        collect(elm || root.getEl());\n        return elements;\n      }\n      function getNavigationRoot(targetControl) {\n        var navigationRoot, controls;\n        targetControl = targetControl || focusedControl;\n        controls = targetControl.parents().toArray();\n        controls.unshift(targetControl);\n        for (var i = 0; i < controls.length; i++) {\n          navigationRoot = controls[i];\n          if (navigationRoot.settings.ariaRoot) {\n            break;\n          }\n        }\n        return navigationRoot;\n      }\n      function focusFirst(targetControl) {\n        var navigationRoot = getNavigationRoot(targetControl);\n        var focusElements = getFocusElements(navigationRoot.getEl());\n        if (navigationRoot.settings.ariaRemember && 'lastAriaIndex' in navigationRoot) {\n          moveFocusToIndex(navigationRoot.lastAriaIndex, focusElements);\n        } else {\n          moveFocusToIndex(0, focusElements);\n        }\n      }\n      function moveFocusToIndex(idx, elements) {\n        if (idx < 0) {\n          idx = elements.length - 1;\n        } else if (idx >= elements.length) {\n          idx = 0;\n        }\n        if (elements[idx]) {\n          elements[idx].focus();\n        }\n        return idx;\n      }\n      function moveFocus(dir, elements) {\n        var idx = -1;\n        var navigationRoot = getNavigationRoot();\n        elements = elements || getFocusElements(navigationRoot.getEl());\n        for (var i = 0; i < elements.length; i++) {\n          if (elements[i] === focusedElement) {\n            idx = i;\n          }\n        }\n        idx += dir;\n        navigationRoot.lastAriaIndex = moveFocusToIndex(idx, elements);\n      }\n      function left() {\n        var parentRole = getParentRole();\n        if (parentRole === 'tablist') {\n          moveFocus(-1, getFocusElements(focusedElement.parentNode));\n        } else if (focusedControl.parent().submenu) {\n          cancel();\n        } else {\n          moveFocus(-1);\n        }\n      }\n      function right() {\n        var role = getRole(), parentRole = getParentRole();\n        if (parentRole === 'tablist') {\n          moveFocus(1, getFocusElements(focusedElement.parentNode));\n        } else if (role === 'menuitem' && parentRole === 'menu' && getAriaProp('haspopup')) {\n          enter();\n        } else {\n          moveFocus(1);\n        }\n      }\n      function up() {\n        moveFocus(-1);\n      }\n      function down() {\n        var role = getRole(), parentRole = getParentRole();\n        if (role === 'menuitem' && parentRole === 'menubar') {\n          enter();\n        } else if (role === 'button' && getAriaProp('haspopup')) {\n          enter({ key: 'down' });\n        } else {\n          moveFocus(1);\n        }\n      }\n      function tab(e) {\n        var parentRole = getParentRole();\n        if (parentRole === 'tablist') {\n          var elm = getFocusElements(focusedControl.getEl('body'))[0];\n          if (elm) {\n            elm.focus();\n          }\n        } else {\n          moveFocus(e.shiftKey ? -1 : 1);\n        }\n      }\n      function cancel() {\n        focusedControl.fire('cancel');\n      }\n      function enter(aria) {\n        aria = aria || {};\n        focusedControl.fire('click', {\n          target: focusedElement,\n          aria: aria\n        });\n      }\n      root.on('keydown', function (e) {\n        function handleNonTabOrEscEvent(e, handler) {\n          if (isTextInputElement(focusedElement) || hasTabstopData(focusedElement)) {\n            return;\n          }\n          if (getRole(focusedElement) === 'slider') {\n            return;\n          }\n          if (handler(e) !== false) {\n            e.preventDefault();\n          }\n        }\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        switch (e.keyCode) {\n        case 37:\n          handleNonTabOrEscEvent(e, left);\n          break;\n        case 39:\n          handleNonTabOrEscEvent(e, right);\n          break;\n        case 38:\n          handleNonTabOrEscEvent(e, up);\n          break;\n        case 40:\n          handleNonTabOrEscEvent(e, down);\n          break;\n        case 27:\n          cancel();\n          break;\n        case 14:\n        case 13:\n        case 32:\n          handleNonTabOrEscEvent(e, enter);\n          break;\n        case 9:\n          tab(e);\n          e.preventDefault();\n          break;\n        }\n      });\n      root.on('focusin', function (e) {\n        focusedElement = e.target;\n        focusedControl = e.control;\n      });\n      return { focusFirst: focusFirst };\n    }\n\n    var selectorCache = {};\n    var Container = Control$1.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        settings = self.settings;\n        if (settings.fixed) {\n          self.state.set('fixed', true);\n        }\n        self._items = new Collection$2();\n        if (self.isRtl()) {\n          self.classes.add('rtl');\n        }\n        self.bodyClasses = new ClassList(function () {\n          if (self.state.get('rendered')) {\n            self.getEl('body').className = this.toString();\n          }\n        });\n        self.bodyClasses.prefix = self.classPrefix;\n        self.classes.add('container');\n        self.bodyClasses.add('container-body');\n        if (settings.containerCls) {\n          self.classes.add(settings.containerCls);\n        }\n        self._layout = global$4.create((settings.layout || '') + 'layout');\n        if (self.settings.items) {\n          self.add(self.settings.items);\n        } else {\n          self.add(self.render());\n        }\n        self._hasBody = true;\n      },\n      items: function () {\n        return this._items;\n      },\n      find: function (selector) {\n        selector = selectorCache[selector] = selectorCache[selector] || new Selector(selector);\n        return selector.find(this);\n      },\n      add: function (items) {\n        var self = this;\n        self.items().add(self.create(items)).parent(self);\n        return self;\n      },\n      focus: function (keyboard) {\n        var self = this;\n        var focusCtrl, keyboardNav, items;\n        if (keyboard) {\n          keyboardNav = self.keyboardNav || self.parents().eq(-1)[0].keyboardNav;\n          if (keyboardNav) {\n            keyboardNav.focusFirst(self);\n            return;\n          }\n        }\n        items = self.find('*');\n        if (self.statusbar) {\n          items.add(self.statusbar.items());\n        }\n        items.each(function (ctrl) {\n          if (ctrl.settings.autofocus) {\n            focusCtrl = null;\n            return false;\n          }\n          if (ctrl.canFocus) {\n            focusCtrl = focusCtrl || ctrl;\n          }\n        });\n        if (focusCtrl) {\n          focusCtrl.focus();\n        }\n        return self;\n      },\n      replace: function (oldItem, newItem) {\n        var ctrlElm;\n        var items = this.items();\n        var i = items.length;\n        while (i--) {\n          if (items[i] === oldItem) {\n            items[i] = newItem;\n            break;\n          }\n        }\n        if (i >= 0) {\n          ctrlElm = newItem.getEl();\n          if (ctrlElm) {\n            ctrlElm.parentNode.removeChild(ctrlElm);\n          }\n          ctrlElm = oldItem.getEl();\n          if (ctrlElm) {\n            ctrlElm.parentNode.removeChild(ctrlElm);\n          }\n        }\n        newItem.parent(this);\n      },\n      create: function (items) {\n        var self = this;\n        var settings;\n        var ctrlItems = [];\n        if (!global$2.isArray(items)) {\n          items = [items];\n        }\n        global$2.each(items, function (item) {\n          if (item) {\n            if (!(item instanceof Control$1)) {\n              if (typeof item === 'string') {\n                item = { type: item };\n              }\n              settings = global$2.extend({}, self.settings.defaults, item);\n              item.type = settings.type = settings.type || item.type || self.settings.defaultType || (settings.defaults ? settings.defaults.type : null);\n              item = global$4.create(settings);\n            }\n            ctrlItems.push(item);\n          }\n        });\n        return ctrlItems;\n      },\n      renderNew: function () {\n        var self = this;\n        self.items().each(function (ctrl, index) {\n          var containerElm;\n          ctrl.parent(self);\n          if (!ctrl.state.get('rendered')) {\n            containerElm = self.getEl('body');\n            if (containerElm.hasChildNodes() && index <= containerElm.childNodes.length - 1) {\n              global$9(containerElm.childNodes[index]).before(ctrl.renderHtml());\n            } else {\n              global$9(containerElm).append(ctrl.renderHtml());\n            }\n            ctrl.postRender();\n            ReflowQueue.add(ctrl);\n          }\n        });\n        self._layout.applyClasses(self.items().filter(':visible'));\n        self._lastRect = null;\n        return self;\n      },\n      append: function (items) {\n        return this.add(items).renderNew();\n      },\n      prepend: function (items) {\n        var self = this;\n        self.items().set(self.create(items).concat(self.items().toArray()));\n        return self.renderNew();\n      },\n      insert: function (items, index, before) {\n        var self = this;\n        var curItems, beforeItems, afterItems;\n        items = self.create(items);\n        curItems = self.items();\n        if (!before && index < curItems.length - 1) {\n          index += 1;\n        }\n        if (index >= 0 && index < curItems.length) {\n          beforeItems = curItems.slice(0, index).toArray();\n          afterItems = curItems.slice(index).toArray();\n          curItems.set(beforeItems.concat(items, afterItems));\n        }\n        return self.renderNew();\n      },\n      fromJSON: function (data) {\n        var self = this;\n        for (var name in data) {\n          self.find('#' + name).value(data[name]);\n        }\n        return self;\n      },\n      toJSON: function () {\n        var self = this, data = {};\n        self.find('*').each(function (ctrl) {\n          var name = ctrl.name(), value = ctrl.value();\n          if (name && typeof value !== 'undefined') {\n            data[name] = value;\n          }\n        });\n        return data;\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout, role = this.settings.role;\n        self.preRender();\n        layout.preRender(self);\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\"' + (role ? ' role=\"' + this.settings.role + '\"' : '') + '>' + '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + (self.settings.html || '') + layout.renderHtml(self) + '</div>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        var box;\n        self.items().exec('postRender');\n        self._super();\n        self._layout.postRender(self);\n        self.state.set('rendered', true);\n        if (self.settings.style) {\n          self.$el.css(self.settings.style);\n        }\n        if (self.settings.border) {\n          box = self.borderBox;\n          self.$el.css({\n            'border-top-width': box.top,\n            'border-right-width': box.right,\n            'border-bottom-width': box.bottom,\n            'border-left-width': box.left\n          });\n        }\n        if (!self.parent()) {\n          self.keyboardNav = KeyboardNavigation({ root: self });\n        }\n        return self;\n      },\n      initLayoutRect: function () {\n        var self = this, layoutRect = self._super();\n        self._layout.recalc(self);\n        return layoutRect;\n      },\n      recalc: function () {\n        var self = this;\n        var rect = self._layoutRect;\n        var lastRect = self._lastRect;\n        if (!lastRect || lastRect.w !== rect.w || lastRect.h !== rect.h) {\n          self._layout.recalc(self);\n          rect = self.layoutRect();\n          self._lastRect = {\n            x: rect.x,\n            y: rect.y,\n            w: rect.w,\n            h: rect.h\n          };\n          return true;\n        }\n      },\n      reflow: function () {\n        var i;\n        ReflowQueue.remove(this);\n        if (this.visible()) {\n          Control$1.repaintControls = [];\n          Control$1.repaintControls.map = {};\n          this.recalc();\n          i = Control$1.repaintControls.length;\n          while (i--) {\n            Control$1.repaintControls[i].repaint();\n          }\n          if (this.settings.layout !== 'flow' && this.settings.layout !== 'stack') {\n            this.repaint();\n          }\n          Control$1.repaintControls = [];\n        }\n        return this;\n      }\n    });\n\n    function getDocumentSize(doc) {\n      var documentElement, body, scrollWidth, clientWidth;\n      var offsetWidth, scrollHeight, clientHeight, offsetHeight;\n      var max = Math.max;\n      documentElement = doc.documentElement;\n      body = doc.body;\n      scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    }\n    function updateWithTouchData(e) {\n      var keys, i;\n      if (e.changedTouches) {\n        keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    }\n    function DragHelper (id, settings) {\n      var $eventOverlay;\n      var doc = settings.document || domGlobals.document;\n      var downButton;\n      var start, stop, drag, startX, startY;\n      settings = settings || {};\n      var handleElement = doc.getElementById(settings.handle || id);\n      start = function (e) {\n        var docSize = getDocumentSize(doc);\n        var handleElm, cursor;\n        updateWithTouchData(e);\n        e.preventDefault();\n        downButton = e.button;\n        handleElm = handleElement;\n        startX = e.screenX;\n        startY = e.screenY;\n        if (domGlobals.window.getComputedStyle) {\n          cursor = domGlobals.window.getComputedStyle(handleElm, null).getPropertyValue('cursor');\n        } else {\n          cursor = handleElm.runtimeStyle.cursor;\n        }\n        $eventOverlay = global$9('<div></div>').css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: docSize.width,\n          height: docSize.height,\n          zIndex: 2147483647,\n          opacity: 0.0001,\n          cursor: cursor\n        }).appendTo(doc.body);\n        global$9(doc).on('mousemove touchmove', drag).on('mouseup touchend', stop);\n        settings.start(e);\n      };\n      drag = function (e) {\n        updateWithTouchData(e);\n        if (e.button !== downButton) {\n          return stop(e);\n        }\n        e.deltaX = e.screenX - startX;\n        e.deltaY = e.screenY - startY;\n        e.preventDefault();\n        settings.drag(e);\n      };\n      stop = function (e) {\n        updateWithTouchData(e);\n        global$9(doc).off('mousemove touchmove', drag).off('mouseup touchend', stop);\n        $eventOverlay.remove();\n        if (settings.stop) {\n          settings.stop(e);\n        }\n      };\n      this.destroy = function () {\n        global$9(handleElement).off();\n      };\n      global$9(handleElement).on('mousedown touchstart', start);\n    }\n\n    var Scrollable = {\n      init: function () {\n        var self = this;\n        self.on('repaint', self.renderScroll);\n      },\n      renderScroll: function () {\n        var self = this, margin = 2;\n        function repaintScroll() {\n          var hasScrollH, hasScrollV, bodyElm;\n          function repaintAxis(axisName, posName, sizeName, contentSizeName, hasScroll, ax) {\n            var containerElm, scrollBarElm, scrollThumbElm;\n            var containerSize, scrollSize, ratio, rect;\n            var posNameLower, sizeNameLower;\n            scrollBarElm = self.getEl('scroll' + axisName);\n            if (scrollBarElm) {\n              posNameLower = posName.toLowerCase();\n              sizeNameLower = sizeName.toLowerCase();\n              global$9(self.getEl('absend')).css(posNameLower, self.layoutRect()[contentSizeName] - 1);\n              if (!hasScroll) {\n                global$9(scrollBarElm).css('display', 'none');\n                return;\n              }\n              global$9(scrollBarElm).css('display', 'block');\n              containerElm = self.getEl('body');\n              scrollThumbElm = self.getEl('scroll' + axisName + 't');\n              containerSize = containerElm['client' + sizeName] - margin * 2;\n              containerSize -= hasScrollH && hasScrollV ? scrollBarElm['client' + ax] : 0;\n              scrollSize = containerElm['scroll' + sizeName];\n              ratio = containerSize / scrollSize;\n              rect = {};\n              rect[posNameLower] = containerElm['offset' + posName] + margin;\n              rect[sizeNameLower] = containerSize;\n              global$9(scrollBarElm).css(rect);\n              rect = {};\n              rect[posNameLower] = containerElm['scroll' + posName] * ratio;\n              rect[sizeNameLower] = containerSize * ratio;\n              global$9(scrollThumbElm).css(rect);\n            }\n          }\n          bodyElm = self.getEl('body');\n          hasScrollH = bodyElm.scrollWidth > bodyElm.clientWidth;\n          hasScrollV = bodyElm.scrollHeight > bodyElm.clientHeight;\n          repaintAxis('h', 'Left', 'Width', 'contentW', hasScrollH, 'Height');\n          repaintAxis('v', 'Top', 'Height', 'contentH', hasScrollV, 'Width');\n        }\n        function addScroll() {\n          function addScrollAxis(axisName, posName, sizeName, deltaPosName, ax) {\n            var scrollStart;\n            var axisId = self._id + '-scroll' + axisName, prefix = self.classPrefix;\n            global$9(self.getEl()).append('<div id=\"' + axisId + '\" class=\"' + prefix + 'scrollbar ' + prefix + 'scrollbar-' + axisName + '\">' + '<div id=\"' + axisId + 't\" class=\"' + prefix + 'scrollbar-thumb\"></div>' + '</div>');\n            self.draghelper = new DragHelper(axisId + 't', {\n              start: function () {\n                scrollStart = self.getEl('body')['scroll' + posName];\n                global$9('#' + axisId).addClass(prefix + 'active');\n              },\n              drag: function (e) {\n                var ratio, hasScrollH, hasScrollV, containerSize;\n                var layoutRect = self.layoutRect();\n                hasScrollH = layoutRect.contentW > layoutRect.innerW;\n                hasScrollV = layoutRect.contentH > layoutRect.innerH;\n                containerSize = self.getEl('body')['client' + sizeName] - margin * 2;\n                containerSize -= hasScrollH && hasScrollV ? self.getEl('scroll' + axisName)['client' + ax] : 0;\n                ratio = containerSize / self.getEl('body')['scroll' + sizeName];\n                self.getEl('body')['scroll' + posName] = scrollStart + e['delta' + deltaPosName] / ratio;\n              },\n              stop: function () {\n                global$9('#' + axisId).removeClass(prefix + 'active');\n              }\n            });\n          }\n          self.classes.add('scroll');\n          addScrollAxis('v', 'Top', 'Height', 'Y', 'Width');\n          addScrollAxis('h', 'Left', 'Width', 'X', 'Height');\n        }\n        if (self.settings.autoScroll) {\n          if (!self._hasScroll) {\n            self._hasScroll = true;\n            addScroll();\n            self.on('wheel', function (e) {\n              var bodyEl = self.getEl('body');\n              bodyEl.scrollLeft += (e.deltaX || 0) * 10;\n              bodyEl.scrollTop += e.deltaY * 10;\n              repaintScroll();\n            });\n            global$9(self.getEl('body')).on('scroll', repaintScroll);\n          }\n          repaintScroll();\n        }\n      }\n    };\n\n    var Panel = Container.extend({\n      Defaults: {\n        layout: 'fit',\n        containerCls: 'panel'\n      },\n      Mixins: [Scrollable],\n      renderHtml: function () {\n        var self = this;\n        var layout = self._layout;\n        var innerHtml = self.settings.html;\n        self.preRender();\n        layout.preRender(self);\n        if (typeof innerHtml === 'undefined') {\n          innerHtml = '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + layout.renderHtml(self) + '</div>';\n        } else {\n          if (typeof innerHtml === 'function') {\n            innerHtml = innerHtml.call(self);\n          }\n          self._hasBody = false;\n        }\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\" hidefocus=\"1\" tabindex=\"-1\" role=\"group\">' + (self._preBodyHtml || '') + innerHtml + '</div>';\n      }\n    });\n\n    var Resizable = {\n      resizeToContent: function () {\n        this._layoutRect.autoResize = true;\n        this._lastRect = null;\n        this.reflow();\n      },\n      resizeTo: function (w, h) {\n        if (w <= 1 || h <= 1) {\n          var rect = funcs.getWindowSize();\n          w = w <= 1 ? w * rect.w : w;\n          h = h <= 1 ? h * rect.h : h;\n        }\n        this._layoutRect.autoResize = false;\n        return this.layoutRect({\n          minW: w,\n          minH: h,\n          w: w,\n          h: h\n        }).reflow();\n      },\n      resizeBy: function (dw, dh) {\n        var self = this, rect = self.layoutRect();\n        return self.resizeTo(rect.w + dw, rect.h + dh);\n      }\n    };\n\n    var documentClickHandler, documentScrollHandler, windowResizeHandler;\n    var visiblePanels = [];\n    var zOrder = [];\n    var hasModal;\n    function isChildOf(ctrl, parent) {\n      while (ctrl) {\n        if (ctrl === parent) {\n          return true;\n        }\n        ctrl = ctrl.parent();\n      }\n    }\n    function skipOrHidePanels(e) {\n      var i = visiblePanels.length;\n      while (i--) {\n        var panel = visiblePanels[i], clickCtrl = panel.getParentCtrl(e.target);\n        if (panel.settings.autohide) {\n          if (clickCtrl) {\n            if (isChildOf(clickCtrl, panel) || panel.parent() === clickCtrl) {\n              continue;\n            }\n          }\n          e = panel.fire('autohide', { target: e.target });\n          if (!e.isDefaultPrevented()) {\n            panel.hide();\n          }\n        }\n      }\n    }\n    function bindDocumentClickHandler() {\n      if (!documentClickHandler) {\n        documentClickHandler = function (e) {\n          if (e.button === 2) {\n            return;\n          }\n          skipOrHidePanels(e);\n        };\n        global$9(domGlobals.document).on('click touchstart', documentClickHandler);\n      }\n    }\n    function bindDocumentScrollHandler() {\n      if (!documentScrollHandler) {\n        documentScrollHandler = function () {\n          var i;\n          i = visiblePanels.length;\n          while (i--) {\n            repositionPanel(visiblePanels[i]);\n          }\n        };\n        global$9(domGlobals.window).on('scroll', documentScrollHandler);\n      }\n    }\n    function bindWindowResizeHandler() {\n      if (!windowResizeHandler) {\n        var docElm_1 = domGlobals.document.documentElement;\n        var clientWidth_1 = docElm_1.clientWidth, clientHeight_1 = docElm_1.clientHeight;\n        windowResizeHandler = function () {\n          if (!domGlobals.document.all || clientWidth_1 !== docElm_1.clientWidth || clientHeight_1 !== docElm_1.clientHeight) {\n            clientWidth_1 = docElm_1.clientWidth;\n            clientHeight_1 = docElm_1.clientHeight;\n            FloatPanel.hideAll();\n          }\n        };\n        global$9(domGlobals.window).on('resize', windowResizeHandler);\n      }\n    }\n    function repositionPanel(panel) {\n      var scrollY = funcs.getViewPort().y;\n      function toggleFixedChildPanels(fixed, deltaY) {\n        var parent;\n        for (var i = 0; i < visiblePanels.length; i++) {\n          if (visiblePanels[i] !== panel) {\n            parent = visiblePanels[i].parent();\n            while (parent && (parent = parent.parent())) {\n              if (parent === panel) {\n                visiblePanels[i].fixed(fixed).moveBy(0, deltaY).repaint();\n              }\n            }\n          }\n        }\n      }\n      if (panel.settings.autofix) {\n        if (!panel.state.get('fixed')) {\n          panel._autoFixY = panel.layoutRect().y;\n          if (panel._autoFixY < scrollY) {\n            panel.fixed(true).layoutRect({ y: 0 }).repaint();\n            toggleFixedChildPanels(true, scrollY - panel._autoFixY);\n          }\n        } else {\n          if (panel._autoFixY > scrollY) {\n            panel.fixed(false).layoutRect({ y: panel._autoFixY }).repaint();\n            toggleFixedChildPanels(false, panel._autoFixY - scrollY);\n          }\n        }\n      }\n    }\n    function addRemove(add, ctrl) {\n      var i, zIndex = FloatPanel.zIndex || 65535, topModal;\n      if (add) {\n        zOrder.push(ctrl);\n      } else {\n        i = zOrder.length;\n        while (i--) {\n          if (zOrder[i] === ctrl) {\n            zOrder.splice(i, 1);\n          }\n        }\n      }\n      if (zOrder.length) {\n        for (i = 0; i < zOrder.length; i++) {\n          if (zOrder[i].modal) {\n            zIndex++;\n            topModal = zOrder[i];\n          }\n          zOrder[i].getEl().style.zIndex = zIndex;\n          zOrder[i].zIndex = zIndex;\n          zIndex++;\n        }\n      }\n      var modalBlockEl = global$9('#' + ctrl.classPrefix + 'modal-block', ctrl.getContainerElm())[0];\n      if (topModal) {\n        global$9(modalBlockEl).css('z-index', topModal.zIndex - 1);\n      } else if (modalBlockEl) {\n        modalBlockEl.parentNode.removeChild(modalBlockEl);\n        hasModal = false;\n      }\n      FloatPanel.currentZIndex = zIndex;\n    }\n    var FloatPanel = Panel.extend({\n      Mixins: [\n        Movable,\n        Resizable\n      ],\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self._eventsRoot = self;\n        self.classes.add('floatpanel');\n        if (settings.autohide) {\n          bindDocumentClickHandler();\n          bindWindowResizeHandler();\n          visiblePanels.push(self);\n        }\n        if (settings.autofix) {\n          bindDocumentScrollHandler();\n          self.on('move', function () {\n            repositionPanel(this);\n          });\n        }\n        self.on('postrender show', function (e) {\n          if (e.control === self) {\n            var $modalBlockEl_1;\n            var prefix_1 = self.classPrefix;\n            if (self.modal && !hasModal) {\n              $modalBlockEl_1 = global$9('#' + prefix_1 + 'modal-block', self.getContainerElm());\n              if (!$modalBlockEl_1[0]) {\n                $modalBlockEl_1 = global$9('<div id=\"' + prefix_1 + 'modal-block\" class=\"' + prefix_1 + 'reset ' + prefix_1 + 'fade\"></div>').appendTo(self.getContainerElm());\n              }\n              global$7.setTimeout(function () {\n                $modalBlockEl_1.addClass(prefix_1 + 'in');\n                global$9(self.getEl()).addClass(prefix_1 + 'in');\n              });\n              hasModal = true;\n            }\n            addRemove(true, self);\n          }\n        });\n        self.on('show', function () {\n          self.parents().each(function (ctrl) {\n            if (ctrl.state.get('fixed')) {\n              self.fixed(true);\n              return false;\n            }\n          });\n        });\n        if (settings.popover) {\n          self._preBodyHtml = '<div class=\"' + self.classPrefix + 'arrow\"></div>';\n          self.classes.add('popover').add('bottom').add(self.isRtl() ? 'end' : 'start');\n        }\n        self.aria('label', settings.ariaLabel);\n        self.aria('labelledby', self._id);\n        self.aria('describedby', self.describedBy || self._id + '-none');\n      },\n      fixed: function (state) {\n        var self = this;\n        if (self.state.get('fixed') !== state) {\n          if (self.state.get('rendered')) {\n            var viewport = funcs.getViewPort();\n            if (state) {\n              self.layoutRect().y -= viewport.y;\n            } else {\n              self.layoutRect().y += viewport.y;\n            }\n          }\n          self.classes.toggle('fixed', state);\n          self.state.set('fixed', state);\n        }\n        return self;\n      },\n      show: function () {\n        var self = this;\n        var i;\n        var state = self._super();\n        i = visiblePanels.length;\n        while (i--) {\n          if (visiblePanels[i] === self) {\n            break;\n          }\n        }\n        if (i === -1) {\n          visiblePanels.push(self);\n        }\n        return state;\n      },\n      hide: function () {\n        removeVisiblePanel(this);\n        addRemove(false, this);\n        return this._super();\n      },\n      hideAll: function () {\n        FloatPanel.hideAll();\n      },\n      close: function () {\n        var self = this;\n        if (!self.fire('close').isDefaultPrevented()) {\n          self.remove();\n          addRemove(false, self);\n        }\n        return self;\n      },\n      remove: function () {\n        removeVisiblePanel(this);\n        this._super();\n      },\n      postRender: function () {\n        var self = this;\n        if (self.settings.bodyRole) {\n          this.getEl('body').setAttribute('role', self.settings.bodyRole);\n        }\n        return self._super();\n      }\n    });\n    FloatPanel.hideAll = function () {\n      var i = visiblePanels.length;\n      while (i--) {\n        var panel = visiblePanels[i];\n        if (panel && panel.settings.autohide) {\n          panel.hide();\n          visiblePanels.splice(i, 1);\n        }\n      }\n    };\n    function removeVisiblePanel(panel) {\n      var i;\n      i = visiblePanels.length;\n      while (i--) {\n        if (visiblePanels[i] === panel) {\n          visiblePanels.splice(i, 1);\n        }\n      }\n      i = zOrder.length;\n      while (i--) {\n        if (zOrder[i] === panel) {\n          zOrder.splice(i, 1);\n        }\n      }\n    }\n\n    var isFixed$1 = function (inlineToolbarContainer, editor) {\n      return !!(inlineToolbarContainer && !editor.settings.ui_container);\n    };\n    var render$1 = function (editor, theme, args) {\n      var panel, inlineToolbarContainer;\n      var DOM = global$3.DOM;\n      var fixedToolbarContainer = getFixedToolbarContainer(editor);\n      if (fixedToolbarContainer) {\n        inlineToolbarContainer = DOM.select(fixedToolbarContainer)[0];\n      }\n      var reposition = function () {\n        if (panel && panel.moveRel && panel.visible() && !panel._fixed) {\n          var scrollContainer = editor.selection.getScrollContainer(), body = editor.getBody();\n          var deltaX = 0, deltaY = 0;\n          if (scrollContainer) {\n            var bodyPos = DOM.getPos(body), scrollContainerPos = DOM.getPos(scrollContainer);\n            deltaX = Math.max(0, scrollContainerPos.x - bodyPos.x);\n            deltaY = Math.max(0, scrollContainerPos.y - bodyPos.y);\n          }\n          panel.fixed(false).moveRel(body, editor.rtl ? [\n            'tr-br',\n            'br-tr'\n          ] : [\n            'tl-bl',\n            'bl-tl',\n            'tr-br'\n          ]).moveBy(deltaX, deltaY);\n        }\n      };\n      var show = function () {\n        if (panel) {\n          panel.show();\n          reposition();\n          DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        }\n      };\n      var hide = function () {\n        if (panel) {\n          panel.hide();\n          FloatPanel.hideAll();\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n      };\n      var render = function () {\n        if (panel) {\n          if (!panel.visible()) {\n            show();\n          }\n          return;\n        }\n        panel = theme.panel = global$4.create({\n          type: inlineToolbarContainer ? 'panel' : 'floatpanel',\n          role: 'application',\n          classes: 'tinymce tinymce-inline',\n          layout: 'flex',\n          direction: 'column',\n          align: 'stretch',\n          autohide: false,\n          autofix: true,\n          fixed: isFixed$1(inlineToolbarContainer, editor),\n          border: 1,\n          items: [\n            hasMenubar(editor) === false ? null : {\n              type: 'menubar',\n              border: '0 0 1 0',\n              items: Menubar.createMenuButtons(editor)\n            },\n            Toolbar.createToolbars(editor, getToolbarSize(editor))\n          ]\n        });\n        UiContainer.setUiContainer(editor, panel);\n        Events.fireBeforeRenderUI(editor);\n        if (inlineToolbarContainer) {\n          panel.renderTo(inlineToolbarContainer).reflow();\n        } else {\n          panel.renderTo().reflow();\n        }\n        A11y.addKeys(editor, panel);\n        show();\n        ContextToolbars.addContextualToolbars(editor);\n        editor.on('nodeChange', reposition);\n        editor.on('ResizeWindow', reposition);\n        editor.on('activate', show);\n        editor.on('deactivate', hide);\n        editor.nodeChanged();\n      };\n      editor.settings.content_editable = true;\n      editor.on('focus', function () {\n        if (isSkinDisabled(editor) === false && args.skinUiCss) {\n          DOM.styleSheetLoader.load(args.skinUiCss, render, render);\n        } else {\n          render();\n        }\n      });\n      editor.on('blur hide', hide);\n      editor.on('remove', function () {\n        if (panel) {\n          panel.remove();\n          panel = null;\n        }\n      });\n      if (isSkinDisabled(editor) === false && args.skinUiCss) {\n        DOM.styleSheetLoader.load(args.skinUiCss, SkinLoaded.fireSkinLoaded(editor));\n      } else {\n        SkinLoaded.fireSkinLoaded(editor)();\n      }\n      return {};\n    };\n    var Inline = { render: render$1 };\n\n    function Throbber (elm, inline) {\n      var self = this;\n      var state;\n      var classPrefix = Control$1.classPrefix;\n      var timer;\n      self.show = function (time, callback) {\n        function render() {\n          if (state) {\n            global$9(elm).append('<div class=\"' + classPrefix + 'throbber' + (inline ? ' ' + classPrefix + 'throbber-inline' : '') + '\"></div>');\n            if (callback) {\n              callback();\n            }\n          }\n        }\n        self.hide();\n        state = true;\n        if (time) {\n          timer = global$7.setTimeout(render, time);\n        } else {\n          render();\n        }\n        return self;\n      };\n      self.hide = function () {\n        var child = elm.lastChild;\n        global$7.clearTimeout(timer);\n        if (child && child.className.indexOf('throbber') !== -1) {\n          child.parentNode.removeChild(child);\n        }\n        state = false;\n        return self;\n      };\n    }\n\n    var setup = function (editor, theme) {\n      var throbber;\n      editor.on('ProgressState', function (e) {\n        throbber = throbber || new Throbber(theme.panel.getEl('body'));\n        if (e.state) {\n          throbber.show(e.time);\n        } else {\n          throbber.hide();\n        }\n      });\n    };\n    var ProgressState = { setup: setup };\n\n    var renderUI = function (editor, theme, args) {\n      var skinUrl = getSkinUrl(editor);\n      if (skinUrl) {\n        args.skinUiCss = skinUrl + '/skin.min.css';\n        editor.contentCSS.push(skinUrl + '/content' + (editor.inline ? '.inline' : '') + '.min.css');\n      }\n      ProgressState.setup(editor, theme);\n      return isInline(editor) ? Inline.render(editor, theme, args) : Iframe.render(editor, theme, args);\n    };\n    var Render = { renderUI: renderUI };\n\n    var Tooltip = Control$1.extend({\n      Mixins: [Movable],\n      Defaults: { classes: 'widget tooltip tooltip-n' },\n      renderHtml: function () {\n        var self = this, prefix = self.classPrefix;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\" role=\"presentation\">' + '<div class=\"' + prefix + 'tooltip-arrow\"></div>' + '<div class=\"' + prefix + 'tooltip-inner\">' + self.encode(self.state.get('text')) + '</div>' + '</div>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:text', function (e) {\n          self.getEl().lastChild.innerHTML = self.encode(e.value);\n        });\n        return self._super();\n      },\n      repaint: function () {\n        var self = this;\n        var style, rect;\n        style = self.getEl().style;\n        rect = self._layoutRect;\n        style.left = rect.x + 'px';\n        style.top = rect.y + 'px';\n        style.zIndex = 65535 + 65535;\n      }\n    });\n\n    var Widget = Control$1.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        settings = self.settings;\n        self.canFocus = true;\n        if (settings.tooltip && Widget.tooltips !== false) {\n          self.on('mouseenter', function (e) {\n            var tooltip = self.tooltip().moveTo(-65535);\n            if (e.control === self) {\n              var rel = tooltip.text(settings.tooltip).show().testMoveRel(self.getEl(), [\n                'bc-tc',\n                'bc-tl',\n                'bc-tr'\n              ]);\n              tooltip.classes.toggle('tooltip-n', rel === 'bc-tc');\n              tooltip.classes.toggle('tooltip-nw', rel === 'bc-tl');\n              tooltip.classes.toggle('tooltip-ne', rel === 'bc-tr');\n              tooltip.moveRel(self.getEl(), rel);\n            } else {\n              tooltip.hide();\n            }\n          });\n          self.on('mouseleave mousedown click', function () {\n            self.tooltip().remove();\n            self._tooltip = null;\n          });\n        }\n        self.aria('label', settings.ariaLabel || settings.tooltip);\n      },\n      tooltip: function () {\n        if (!this._tooltip) {\n          this._tooltip = new Tooltip({ type: 'tooltip' });\n          UiContainer.inheritUiContainer(this, this._tooltip);\n          this._tooltip.renderTo();\n        }\n        return this._tooltip;\n      },\n      postRender: function () {\n        var self = this, settings = self.settings;\n        self._super();\n        if (!self.parent() && (settings.width || settings.height)) {\n          self.initLayoutRect();\n          self.repaint();\n        }\n        if (settings.autofocus) {\n          self.focus();\n        }\n      },\n      bindStates: function () {\n        var self = this;\n        function disable(state) {\n          self.aria('disabled', state);\n          self.classes.toggle('disabled', state);\n        }\n        function active(state) {\n          self.aria('pressed', state);\n          self.classes.toggle('active', state);\n        }\n        self.state.on('change:disabled', function (e) {\n          disable(e.value);\n        });\n        self.state.on('change:active', function (e) {\n          active(e.value);\n        });\n        if (self.state.get('disabled')) {\n          disable(true);\n        }\n        if (self.state.get('active')) {\n          active(true);\n        }\n        return self._super();\n      },\n      remove: function () {\n        this._super();\n        if (this._tooltip) {\n          this._tooltip.remove();\n          this._tooltip = null;\n        }\n      }\n    });\n\n    var Progress = Widget.extend({\n      Defaults: { value: 0 },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('progress');\n        if (!self.settings.filter) {\n          self.settings.filter = function (value) {\n            return Math.round(value);\n          };\n        }\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = this.classPrefix;\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\">' + '<div class=\"' + prefix + 'bar-container\">' + '<div class=\"' + prefix + 'bar\"></div>' + '</div>' + '<div class=\"' + prefix + 'text\">0%</div>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        self._super();\n        self.value(self.settings.value);\n        return self;\n      },\n      bindStates: function () {\n        var self = this;\n        function setValue(value) {\n          value = self.settings.filter(value);\n          self.getEl().lastChild.innerHTML = value + '%';\n          self.getEl().firstChild.firstChild.style.width = value + '%';\n        }\n        self.state.on('change:value', function (e) {\n          setValue(e.value);\n        });\n        setValue(self.state.get('value'));\n        return self._super();\n      }\n    });\n\n    var updateLiveRegion = function (ctx, text) {\n      ctx.getEl().lastChild.textContent = text + (ctx.progressBar ? ' ' + ctx.progressBar.value() + '%' : '');\n    };\n    var Notification = Control$1.extend({\n      Mixins: [Movable],\n      Defaults: { classes: 'widget notification' },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.maxWidth = settings.maxWidth;\n        if (settings.text) {\n          self.text(settings.text);\n        }\n        if (settings.icon) {\n          self.icon = settings.icon;\n        }\n        if (settings.color) {\n          self.color = settings.color;\n        }\n        if (settings.type) {\n          self.classes.add('notification-' + settings.type);\n        }\n        if (settings.timeout && (settings.timeout < 0 || settings.timeout > 0) && !settings.closeButton) {\n          self.closeButton = false;\n        } else {\n          self.classes.add('has-close');\n          self.closeButton = true;\n        }\n        if (settings.progressBar) {\n          self.progressBar = new Progress();\n        }\n        self.on('click', function (e) {\n          if (e.target.className.indexOf(self.classPrefix + 'close') !== -1) {\n            self.close();\n          }\n        });\n      },\n      renderHtml: function () {\n        var self = this;\n        var prefix = self.classPrefix;\n        var icon = '', closeButton = '', progressBar = '', notificationStyle = '';\n        if (self.icon) {\n          icon = '<i class=\"' + prefix + 'ico' + ' ' + prefix + 'i-' + self.icon + '\"></i>';\n        }\n        notificationStyle = ' style=\"max-width: ' + self.maxWidth + 'px;' + (self.color ? 'background-color: ' + self.color + ';\"' : '\"');\n        if (self.closeButton) {\n          closeButton = '<button type=\"button\" class=\"' + prefix + 'close\" aria-hidden=\"true\">\\xD7</button>';\n        }\n        if (self.progressBar) {\n          progressBar = self.progressBar.renderHtml();\n        }\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\"' + notificationStyle + ' role=\"presentation\">' + icon + '<div class=\"' + prefix + 'notification-inner\">' + self.state.get('text') + '</div>' + progressBar + closeButton + '<div style=\"clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;\"' + ' aria-live=\"assertive\" aria-relevant=\"additions\" aria-atomic=\"true\"></div>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        global$7.setTimeout(function () {\n          self.$el.addClass(self.classPrefix + 'in');\n          updateLiveRegion(self, self.state.get('text'));\n        }, 100);\n        return self._super();\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:text', function (e) {\n          self.getEl().firstChild.innerHTML = e.value;\n          updateLiveRegion(self, e.value);\n        });\n        if (self.progressBar) {\n          self.progressBar.bindStates();\n          self.progressBar.state.on('change:value', function (e) {\n            updateLiveRegion(self, self.state.get('text'));\n          });\n        }\n        return self._super();\n      },\n      close: function () {\n        var self = this;\n        if (!self.fire('close').isDefaultPrevented()) {\n          self.remove();\n        }\n        return self;\n      },\n      repaint: function () {\n        var self = this;\n        var style, rect;\n        style = self.getEl().style;\n        rect = self._layoutRect;\n        style.left = rect.x + 'px';\n        style.top = rect.y + 'px';\n        style.zIndex = 65535 - 1;\n      }\n    });\n\n    function NotificationManagerImpl (editor) {\n      var getEditorContainer = function (editor) {\n        return editor.inline ? editor.getElement() : editor.getContentAreaContainer();\n      };\n      var getContainerWidth = function () {\n        var container = getEditorContainer(editor);\n        return funcs.getSize(container).width;\n      };\n      var prePositionNotifications = function (notifications) {\n        each(notifications, function (notification) {\n          notification.moveTo(0, 0);\n        });\n      };\n      var positionNotifications = function (notifications) {\n        if (notifications.length > 0) {\n          var firstItem = notifications.slice(0, 1)[0];\n          var container = getEditorContainer(editor);\n          firstItem.moveRel(container, 'tc-tc');\n          each(notifications, function (notification, index) {\n            if (index > 0) {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var reposition = function (notifications) {\n        prePositionNotifications(notifications);\n        positionNotifications(notifications);\n      };\n      var open = function (args, closeCallback) {\n        var extendedArgs = global$2.extend(args, { maxWidth: getContainerWidth() });\n        var notif = new Notification(extendedArgs);\n        notif.args = extendedArgs;\n        if (extendedArgs.timeout > 0) {\n          notif.timer = setTimeout(function () {\n            notif.close();\n            closeCallback();\n          }, extendedArgs.timeout);\n        }\n        notif.on('close', function () {\n          closeCallback();\n        });\n        notif.renderTo();\n        return notif;\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.args;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var windows = [];\n    var oldMetaValue = '';\n    function toggleFullScreenState(state) {\n      var noScaleMetaValue = 'width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0';\n      var viewport = global$9('meta[name=viewport]')[0], contentValue;\n      if (global$8.overrideViewPort === false) {\n        return;\n      }\n      if (!viewport) {\n        viewport = domGlobals.document.createElement('meta');\n        viewport.setAttribute('name', 'viewport');\n        domGlobals.document.getElementsByTagName('head')[0].appendChild(viewport);\n      }\n      contentValue = viewport.getAttribute('content');\n      if (contentValue && typeof oldMetaValue !== 'undefined') {\n        oldMetaValue = contentValue;\n      }\n      viewport.setAttribute('content', state ? noScaleMetaValue : oldMetaValue);\n    }\n    function toggleBodyFullScreenClasses(classPrefix, state) {\n      if (checkFullscreenWindows() && state === false) {\n        global$9([\n          domGlobals.document.documentElement,\n          domGlobals.document.body\n        ]).removeClass(classPrefix + 'fullscreen');\n      }\n    }\n    function checkFullscreenWindows() {\n      for (var i = 0; i < windows.length; i++) {\n        if (windows[i]._fullscreen) {\n          return true;\n        }\n      }\n      return false;\n    }\n    function handleWindowResize() {\n      if (!global$8.desktop) {\n        var lastSize_1 = {\n          w: domGlobals.window.innerWidth,\n          h: domGlobals.window.innerHeight\n        };\n        global$7.setInterval(function () {\n          var w = domGlobals.window.innerWidth, h = domGlobals.window.innerHeight;\n          if (lastSize_1.w !== w || lastSize_1.h !== h) {\n            lastSize_1 = {\n              w: w,\n              h: h\n            };\n            global$9(domGlobals.window).trigger('resize');\n          }\n        }, 100);\n      }\n      function reposition() {\n        var i;\n        var rect = funcs.getWindowSize();\n        var layoutRect;\n        for (i = 0; i < windows.length; i++) {\n          layoutRect = windows[i].layoutRect();\n          windows[i].moveTo(windows[i].settings.x || Math.max(0, rect.w / 2 - layoutRect.w / 2), windows[i].settings.y || Math.max(0, rect.h / 2 - layoutRect.h / 2));\n        }\n      }\n      global$9(domGlobals.window).on('resize', reposition);\n    }\n    var Window = FloatPanel.extend({\n      modal: true,\n      Defaults: {\n        border: 1,\n        layout: 'flex',\n        containerCls: 'panel',\n        role: 'dialog',\n        callbacks: {\n          submit: function () {\n            this.fire('submit', { data: this.toJSON() });\n          },\n          close: function () {\n            this.close();\n          }\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        if (self.isRtl()) {\n          self.classes.add('rtl');\n        }\n        self.classes.add('window');\n        self.bodyClasses.add('window-body');\n        self.state.set('fixed', true);\n        if (settings.buttons) {\n          self.statusbar = new Panel({\n            layout: 'flex',\n            border: '1 0 0 0',\n            spacing: 3,\n            padding: 10,\n            align: 'center',\n            pack: self.isRtl() ? 'start' : 'end',\n            defaults: { type: 'button' },\n            items: settings.buttons\n          });\n          self.statusbar.classes.add('foot');\n          self.statusbar.parent(self);\n        }\n        self.on('click', function (e) {\n          var closeClass = self.classPrefix + 'close';\n          if (funcs.hasClass(e.target, closeClass) || funcs.hasClass(e.target.parentNode, closeClass)) {\n            self.close();\n          }\n        });\n        self.on('cancel', function () {\n          self.close();\n        });\n        self.on('move', function (e) {\n          if (e.control === self) {\n            FloatPanel.hideAll();\n          }\n        });\n        self.aria('describedby', self.describedBy || self._id + '-none');\n        self.aria('label', settings.title);\n        self._fullscreen = false;\n      },\n      recalc: function () {\n        var self = this;\n        var statusbar = self.statusbar;\n        var layoutRect, width, x, needsRecalc;\n        if (self._fullscreen) {\n          self.layoutRect(funcs.getWindowSize());\n          self.layoutRect().contentH = self.layoutRect().innerH;\n        }\n        self._super();\n        layoutRect = self.layoutRect();\n        if (self.settings.title && !self._fullscreen) {\n          width = layoutRect.headerW;\n          if (width > layoutRect.w) {\n            x = layoutRect.x - Math.max(0, width / 2);\n            self.layoutRect({\n              w: width,\n              x: x\n            });\n            needsRecalc = true;\n          }\n        }\n        if (statusbar) {\n          statusbar.layoutRect({ w: self.layoutRect().innerW }).recalc();\n          width = statusbar.layoutRect().minW + layoutRect.deltaW;\n          if (width > layoutRect.w) {\n            x = layoutRect.x - Math.max(0, width - layoutRect.w);\n            self.layoutRect({\n              w: width,\n              x: x\n            });\n            needsRecalc = true;\n          }\n        }\n        if (needsRecalc) {\n          self.recalc();\n        }\n      },\n      initLayoutRect: function () {\n        var self = this;\n        var layoutRect = self._super();\n        var deltaH = 0, headEl;\n        if (self.settings.title && !self._fullscreen) {\n          headEl = self.getEl('head');\n          var size = funcs.getSize(headEl);\n          layoutRect.headerW = size.width;\n          layoutRect.headerH = size.height;\n          deltaH += layoutRect.headerH;\n        }\n        if (self.statusbar) {\n          deltaH += self.statusbar.layoutRect().h;\n        }\n        layoutRect.deltaH += deltaH;\n        layoutRect.minH += deltaH;\n        layoutRect.h += deltaH;\n        var rect = funcs.getWindowSize();\n        layoutRect.x = self.settings.x || Math.max(0, rect.w / 2 - layoutRect.w / 2);\n        layoutRect.y = self.settings.y || Math.max(0, rect.h / 2 - layoutRect.h / 2);\n        return layoutRect;\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout, id = self._id, prefix = self.classPrefix;\n        var settings = self.settings;\n        var headerHtml = '', footerHtml = '', html = settings.html;\n        self.preRender();\n        layout.preRender(self);\n        if (settings.title) {\n          headerHtml = '<div id=\"' + id + '-head\" class=\"' + prefix + 'window-head\">' + '<div id=\"' + id + '-title\" class=\"' + prefix + 'title\">' + self.encode(settings.title) + '</div>' + '<div id=\"' + id + '-dragh\" class=\"' + prefix + 'dragh\"></div>' + '<button type=\"button\" class=\"' + prefix + 'close\" aria-hidden=\"true\">' + '<i class=\"mce-ico mce-i-remove\"></i>' + '</button>' + '</div>';\n        }\n        if (settings.url) {\n          html = '<iframe src=\"' + settings.url + '\" tabindex=\"-1\"></iframe>';\n        }\n        if (typeof html === 'undefined') {\n          html = layout.renderHtml(self);\n        }\n        if (self.statusbar) {\n          footerHtml = self.statusbar.renderHtml();\n        }\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" hidefocus=\"1\">' + '<div class=\"' + self.classPrefix + 'reset\" role=\"application\">' + headerHtml + '<div id=\"' + id + '-body\" class=\"' + self.bodyClasses + '\">' + html + '</div>' + footerHtml + '</div>' + '</div>';\n      },\n      fullscreen: function (state) {\n        var self = this;\n        var documentElement = domGlobals.document.documentElement;\n        var slowRendering;\n        var prefix = self.classPrefix;\n        var layoutRect;\n        if (state !== self._fullscreen) {\n          global$9(domGlobals.window).on('resize', function () {\n            var time;\n            if (self._fullscreen) {\n              if (!slowRendering) {\n                time = new Date().getTime();\n                var rect = funcs.getWindowSize();\n                self.moveTo(0, 0).resizeTo(rect.w, rect.h);\n                if (new Date().getTime() - time > 50) {\n                  slowRendering = true;\n                }\n              } else {\n                if (!self._timer) {\n                  self._timer = global$7.setTimeout(function () {\n                    var rect = funcs.getWindowSize();\n                    self.moveTo(0, 0).resizeTo(rect.w, rect.h);\n                    self._timer = 0;\n                  }, 50);\n                }\n              }\n            }\n          });\n          layoutRect = self.layoutRect();\n          self._fullscreen = state;\n          if (!state) {\n            self.borderBox = BoxUtils.parseBox(self.settings.border);\n            self.getEl('head').style.display = '';\n            layoutRect.deltaH += layoutRect.headerH;\n            global$9([\n              documentElement,\n              domGlobals.document.body\n            ]).removeClass(prefix + 'fullscreen');\n            self.classes.remove('fullscreen');\n            self.moveTo(self._initial.x, self._initial.y).resizeTo(self._initial.w, self._initial.h);\n          } else {\n            self._initial = {\n              x: layoutRect.x,\n              y: layoutRect.y,\n              w: layoutRect.w,\n              h: layoutRect.h\n            };\n            self.borderBox = BoxUtils.parseBox('0');\n            self.getEl('head').style.display = 'none';\n            layoutRect.deltaH -= layoutRect.headerH + 2;\n            global$9([\n              documentElement,\n              domGlobals.document.body\n            ]).addClass(prefix + 'fullscreen');\n            self.classes.add('fullscreen');\n            var rect = funcs.getWindowSize();\n            self.moveTo(0, 0).resizeTo(rect.w, rect.h);\n          }\n        }\n        return self.reflow();\n      },\n      postRender: function () {\n        var self = this;\n        var startPos;\n        setTimeout(function () {\n          self.classes.add('in');\n          self.fire('open');\n        }, 0);\n        self._super();\n        if (self.statusbar) {\n          self.statusbar.postRender();\n        }\n        self.focus();\n        this.dragHelper = new DragHelper(self._id + '-dragh', {\n          start: function () {\n            startPos = {\n              x: self.layoutRect().x,\n              y: self.layoutRect().y\n            };\n          },\n          drag: function (e) {\n            self.moveTo(startPos.x + e.deltaX, startPos.y + e.deltaY);\n          }\n        });\n        self.on('submit', function (e) {\n          if (!e.isDefaultPrevented()) {\n            self.close();\n          }\n        });\n        windows.push(self);\n        toggleFullScreenState(true);\n      },\n      submit: function () {\n        return this.fire('submit', { data: this.toJSON() });\n      },\n      remove: function () {\n        var self = this;\n        var i;\n        self.dragHelper.destroy();\n        self._super();\n        if (self.statusbar) {\n          this.statusbar.remove();\n        }\n        toggleBodyFullScreenClasses(self.classPrefix, false);\n        i = windows.length;\n        while (i--) {\n          if (windows[i] === self) {\n            windows.splice(i, 1);\n          }\n        }\n        toggleFullScreenState(windows.length > 0);\n      },\n      getContentWindow: function () {\n        var ifr = this.getEl().getElementsByTagName('iframe')[0];\n        return ifr ? ifr.contentWindow : null;\n      }\n    });\n    handleWindowResize();\n\n    var MessageBox = Window.extend({\n      init: function (settings) {\n        settings = {\n          border: 1,\n          padding: 20,\n          layout: 'flex',\n          pack: 'center',\n          align: 'center',\n          containerCls: 'panel',\n          autoScroll: true,\n          buttons: {\n            type: 'button',\n            text: 'Ok',\n            action: 'ok'\n          },\n          items: {\n            type: 'label',\n            multiline: true,\n            maxWidth: 500,\n            maxHeight: 200\n          }\n        };\n        this._super(settings);\n      },\n      Statics: {\n        OK: 1,\n        OK_CANCEL: 2,\n        YES_NO: 3,\n        YES_NO_CANCEL: 4,\n        msgBox: function (settings) {\n          var buttons;\n          var callback = settings.callback || function () {\n          };\n          function createButton(text, status, primary) {\n            return {\n              type: 'button',\n              text: text,\n              subtype: primary ? 'primary' : '',\n              onClick: function (e) {\n                e.control.parents()[1].close();\n                callback(status);\n              }\n            };\n          }\n          switch (settings.buttons) {\n          case MessageBox.OK_CANCEL:\n            buttons = [\n              createButton('Ok', true, true),\n              createButton('Cancel', false)\n            ];\n            break;\n          case MessageBox.YES_NO:\n          case MessageBox.YES_NO_CANCEL:\n            buttons = [\n              createButton('Yes', 1, true),\n              createButton('No', 0)\n            ];\n            if (settings.buttons === MessageBox.YES_NO_CANCEL) {\n              buttons.push(createButton('Cancel', -1));\n            }\n            break;\n          default:\n            buttons = [createButton('Ok', true, true)];\n            break;\n          }\n          return new Window({\n            padding: 20,\n            x: settings.x,\n            y: settings.y,\n            minWidth: 300,\n            minHeight: 100,\n            layout: 'flex',\n            pack: 'center',\n            align: 'center',\n            buttons: buttons,\n            title: settings.title,\n            role: 'alertdialog',\n            items: {\n              type: 'label',\n              multiline: true,\n              maxWidth: 500,\n              maxHeight: 200,\n              text: settings.text\n            },\n            onPostRender: function () {\n              this.aria('describedby', this.items()[0]._id);\n            },\n            onClose: settings.onClose,\n            onCancel: function () {\n              callback(false);\n            }\n          }).renderTo(domGlobals.document.body).reflow();\n        },\n        alert: function (settings, callback) {\n          if (typeof settings === 'string') {\n            settings = { text: settings };\n          }\n          settings.callback = callback;\n          return MessageBox.msgBox(settings);\n        },\n        confirm: function (settings, callback) {\n          if (typeof settings === 'string') {\n            settings = { text: settings };\n          }\n          settings.callback = callback;\n          settings.buttons = MessageBox.OK_CANCEL;\n          return MessageBox.msgBox(settings);\n        }\n      }\n    });\n\n    function WindowManagerImpl (editor) {\n      var open = function (args, params, closeCallback) {\n        var win;\n        args.title = args.title || ' ';\n        args.url = args.url || args.file;\n        if (args.url) {\n          args.width = parseInt(args.width || 320, 10);\n          args.height = parseInt(args.height || 240, 10);\n        }\n        if (args.body) {\n          args.items = {\n            defaults: args.defaults,\n            type: args.bodyType || 'form',\n            items: args.body,\n            data: args.data,\n            callbacks: args.commands\n          };\n        }\n        if (!args.url && !args.buttons) {\n          args.buttons = [\n            {\n              text: 'Ok',\n              subtype: 'primary',\n              onclick: function () {\n                win.find('form')[0].submit();\n              }\n            },\n            {\n              text: 'Cancel',\n              onclick: function () {\n                win.close();\n              }\n            }\n          ];\n        }\n        win = new Window(args);\n        win.on('close', function () {\n          closeCallback(win);\n        });\n        if (args.data) {\n          win.on('postRender', function () {\n            this.find('*').each(function (ctrl) {\n              var name = ctrl.name();\n              if (name in args.data) {\n                ctrl.value(args.data[name]);\n              }\n            });\n          });\n        }\n        win.features = args || {};\n        win.params = params || {};\n        win = win.renderTo(domGlobals.document.body).reflow();\n        return win;\n      };\n      var alert = function (message, choiceCallback, closeCallback) {\n        var win;\n        win = MessageBox.alert(message, function () {\n          choiceCallback();\n        });\n        win.on('close', function () {\n          closeCallback(win);\n        });\n        return win;\n      };\n      var confirm = function (message, choiceCallback, closeCallback) {\n        var win;\n        win = MessageBox.confirm(message, function (state) {\n          choiceCallback(state);\n        });\n        win.on('close', function () {\n          closeCallback(win);\n        });\n        return win;\n      };\n      var close = function (window) {\n        window.close();\n      };\n      var getParams = function (window) {\n        return window.params;\n      };\n      var setParams = function (window, params) {\n        window.params = params;\n      };\n      return {\n        open: open,\n        alert: alert,\n        confirm: confirm,\n        close: close,\n        getParams: getParams,\n        setParams: setParams\n      };\n    }\n\n    var get = function (editor) {\n      var renderUI = function (args) {\n        return Render.renderUI(editor, this, args);\n      };\n      var resizeTo = function (w, h) {\n        return Resize.resizeTo(editor, w, h);\n      };\n      var resizeBy = function (dw, dh) {\n        return Resize.resizeBy(editor, dw, dh);\n      };\n      var getNotificationManagerImpl = function () {\n        return NotificationManagerImpl(editor);\n      };\n      var getWindowManagerImpl = function () {\n        return WindowManagerImpl();\n      };\n      return {\n        renderUI: renderUI,\n        resizeTo: resizeTo,\n        resizeBy: resizeBy,\n        getNotificationManagerImpl: getNotificationManagerImpl,\n        getWindowManagerImpl: getWindowManagerImpl\n      };\n    };\n    var ThemeApi = { get: get };\n\n    var Layout = global$a.extend({\n      Defaults: {\n        firstControlClass: 'first',\n        lastControlClass: 'last'\n      },\n      init: function (settings) {\n        this.settings = global$2.extend({}, this.Defaults, settings);\n      },\n      preRender: function (container) {\n        container.bodyClasses.add(this.settings.containerClass);\n      },\n      applyClasses: function (items) {\n        var self = this;\n        var settings = self.settings;\n        var firstClass, lastClass, firstItem, lastItem;\n        firstClass = settings.firstControlClass;\n        lastClass = settings.lastControlClass;\n        items.each(function (item) {\n          item.classes.remove(firstClass).remove(lastClass).add(settings.controlClass);\n          if (item.visible()) {\n            if (!firstItem) {\n              firstItem = item;\n            }\n            lastItem = item;\n          }\n        });\n        if (firstItem) {\n          firstItem.classes.add(firstClass);\n        }\n        if (lastItem) {\n          lastItem.classes.add(lastClass);\n        }\n      },\n      renderHtml: function (container) {\n        var self = this;\n        var html = '';\n        self.applyClasses(container.items());\n        container.items().each(function (item) {\n          html += item.renderHtml();\n        });\n        return html;\n      },\n      recalc: function () {\n      },\n      postRender: function () {\n      },\n      isNative: function () {\n        return false;\n      }\n    });\n\n    var AbsoluteLayout = Layout.extend({\n      Defaults: {\n        containerClass: 'abs-layout',\n        controlClass: 'abs-layout-item'\n      },\n      recalc: function (container) {\n        container.items().filter(':visible').each(function (ctrl) {\n          var settings = ctrl.settings;\n          ctrl.layoutRect({\n            x: settings.x,\n            y: settings.y,\n            w: settings.w,\n            h: settings.h\n          });\n          if (ctrl.recalc) {\n            ctrl.recalc();\n          }\n        });\n      },\n      renderHtml: function (container) {\n        return '<div id=\"' + container._id + '-absend\" class=\"' + container.classPrefix + 'abs-end\"></div>' + this._super(container);\n      }\n    });\n\n    var Button = Widget.extend({\n      Defaults: {\n        classes: 'widget btn',\n        role: 'button'\n      },\n      init: function (settings) {\n        var self = this;\n        var size;\n        self._super(settings);\n        settings = self.settings;\n        size = self.settings.size;\n        self.on('click mousedown', function (e) {\n          e.preventDefault();\n        });\n        self.on('touchstart', function (e) {\n          self.fire('click', e);\n          e.preventDefault();\n        });\n        if (settings.subtype) {\n          self.classes.add(settings.subtype);\n        }\n        if (size) {\n          self.classes.add('btn-' + size);\n        }\n        if (settings.icon) {\n          self.icon(settings.icon);\n        }\n      },\n      icon: function (icon) {\n        if (!arguments.length) {\n          return this.state.get('icon');\n        }\n        this.state.set('icon', icon);\n        return this;\n      },\n      repaint: function () {\n        var btnElm = this.getEl().firstChild;\n        var btnStyle;\n        if (btnElm) {\n          btnStyle = btnElm.style;\n          btnStyle.width = btnStyle.height = '100%';\n        }\n        this._super();\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix;\n        var icon = self.state.get('icon'), image;\n        var text = self.state.get('text');\n        var textHtml = '';\n        var ariaPressed;\n        var settings = self.settings;\n        image = settings.image;\n        if (image) {\n          icon = 'none';\n          if (typeof image !== 'string') {\n            image = domGlobals.window.getSelection ? image[0] : image[1];\n          }\n          image = ' style=\"background-image: url(\\'' + image + '\\')\"';\n        } else {\n          image = '';\n        }\n        if (text) {\n          self.classes.add('btn-has-text');\n          textHtml = '<span class=\"' + prefix + 'txt\">' + self.encode(text) + '</span>';\n        }\n        icon = icon ? prefix + 'ico ' + prefix + 'i-' + icon : '';\n        ariaPressed = typeof settings.active === 'boolean' ? ' aria-pressed=\"' + settings.active + '\"' : '';\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" tabindex=\"-1\"' + ariaPressed + '>' + '<button id=\"' + id + '-button\" role=\"presentation\" type=\"button\" tabindex=\"-1\">' + (icon ? '<i class=\"' + icon + '\"' + image + '></i>' : '') + textHtml + '</button>' + '</div>';\n      },\n      bindStates: function () {\n        var self = this, $ = self.$, textCls = self.classPrefix + 'txt';\n        function setButtonText(text) {\n          var $span = $('span.' + textCls, self.getEl());\n          if (text) {\n            if (!$span[0]) {\n              $('button:first', self.getEl()).append('<span class=\"' + textCls + '\"></span>');\n              $span = $('span.' + textCls, self.getEl());\n            }\n            $span.html(self.encode(text));\n          } else {\n            $span.remove();\n          }\n          self.classes.toggle('btn-has-text', !!text);\n        }\n        self.state.on('change:text', function (e) {\n          setButtonText(e.value);\n        });\n        self.state.on('change:icon', function (e) {\n          var icon = e.value;\n          var prefix = self.classPrefix;\n          self.settings.icon = icon;\n          icon = icon ? prefix + 'ico ' + prefix + 'i-' + self.settings.icon : '';\n          var btnElm = self.getEl().firstChild;\n          var iconElm = btnElm.getElementsByTagName('i')[0];\n          if (icon) {\n            if (!iconElm || iconElm !== btnElm.firstChild) {\n              iconElm = domGlobals.document.createElement('i');\n              btnElm.insertBefore(iconElm, btnElm.firstChild);\n            }\n            iconElm.className = icon;\n          } else if (iconElm) {\n            btnElm.removeChild(iconElm);\n          }\n          setButtonText(self.state.get('text'));\n        });\n        return self._super();\n      }\n    });\n\n    var BrowseButton = Button.extend({\n      init: function (settings) {\n        var self = this;\n        settings = global$2.extend({\n          text: 'Browse...',\n          multiple: false,\n          accept: null\n        }, settings);\n        self._super(settings);\n        self.classes.add('browsebutton');\n        if (settings.multiple) {\n          self.classes.add('multiple');\n        }\n      },\n      postRender: function () {\n        var self = this;\n        var input = funcs.create('input', {\n          type: 'file',\n          id: self._id + '-browse',\n          accept: self.settings.accept\n        });\n        self._super();\n        global$9(input).on('change', function (e) {\n          var files = e.target.files;\n          self.value = function () {\n            if (!files.length) {\n              return null;\n            } else if (self.settings.multiple) {\n              return files;\n            } else {\n              return files[0];\n            }\n          };\n          e.preventDefault();\n          if (files.length) {\n            self.fire('change', e);\n          }\n        });\n        global$9(input).on('click', function (e) {\n          e.stopPropagation();\n        });\n        global$9(self.getEl('button')).on('click touchstart', function (e) {\n          e.stopPropagation();\n          input.click();\n          e.preventDefault();\n        });\n        self.getEl().appendChild(input);\n      },\n      remove: function () {\n        global$9(this.getEl('button')).off();\n        global$9(this.getEl('input')).off();\n        this._super();\n      }\n    });\n\n    var ButtonGroup = Container.extend({\n      Defaults: {\n        defaultType: 'button',\n        role: 'group'\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout;\n        self.classes.add('btn-group');\n        self.preRender();\n        layout.preRender(self);\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\">' + '<div id=\"' + self._id + '-body\">' + (self.settings.html || '') + layout.renderHtml(self) + '</div>' + '</div>';\n      }\n    });\n\n    var Checkbox = Widget.extend({\n      Defaults: {\n        classes: 'checkbox',\n        role: 'checkbox',\n        checked: false\n      },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.on('click mousedown', function (e) {\n          e.preventDefault();\n        });\n        self.on('click', function (e) {\n          e.preventDefault();\n          if (!self.disabled()) {\n            self.checked(!self.checked());\n          }\n        });\n        self.checked(self.settings.checked);\n      },\n      checked: function (state) {\n        if (!arguments.length) {\n          return this.state.get('checked');\n        }\n        this.state.set('checked', state);\n        return this;\n      },\n      value: function (state) {\n        if (!arguments.length) {\n          return this.checked();\n        }\n        return this.checked(state);\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix;\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" unselectable=\"on\" aria-labelledby=\"' + id + '-al\" tabindex=\"-1\">' + '<i class=\"' + prefix + 'ico ' + prefix + 'i-checkbox\"></i>' + '<span id=\"' + id + '-al\" class=\"' + prefix + 'label\">' + self.encode(self.state.get('text')) + '</span>' + '</div>';\n      },\n      bindStates: function () {\n        var self = this;\n        function checked(state) {\n          self.classes.toggle('checked', state);\n          self.aria('checked', state);\n        }\n        self.state.on('change:text', function (e) {\n          self.getEl('al').firstChild.data = self.translate(e.value);\n        });\n        self.state.on('change:checked change:value', function (e) {\n          self.fire('change');\n          checked(e.value);\n        });\n        self.state.on('change:icon', function (e) {\n          var icon = e.value;\n          var prefix = self.classPrefix;\n          if (typeof icon === 'undefined') {\n            return self.settings.icon;\n          }\n          self.settings.icon = icon;\n          icon = icon ? prefix + 'ico ' + prefix + 'i-' + self.settings.icon : '';\n          var btnElm = self.getEl().firstChild;\n          var iconElm = btnElm.getElementsByTagName('i')[0];\n          if (icon) {\n            if (!iconElm || iconElm !== btnElm.firstChild) {\n              iconElm = domGlobals.document.createElement('i');\n              btnElm.insertBefore(iconElm, btnElm.firstChild);\n            }\n            iconElm.className = icon;\n          } else if (iconElm) {\n            btnElm.removeChild(iconElm);\n          }\n        });\n        if (self.state.get('checked')) {\n          checked(true);\n        }\n        return self._super();\n      }\n    });\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var ComboBox = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        settings = self.settings;\n        self.classes.add('combobox');\n        self.subinput = true;\n        self.ariaTarget = 'inp';\n        settings.menu = settings.menu || settings.values;\n        if (settings.menu) {\n          settings.icon = 'caret';\n        }\n        self.on('click', function (e) {\n          var elm = e.target;\n          var root = self.getEl();\n          if (!global$9.contains(root, elm) && elm !== root) {\n            return;\n          }\n          while (elm && elm !== root) {\n            if (elm.id && elm.id.indexOf('-open') !== -1) {\n              self.fire('action');\n              if (settings.menu) {\n                self.showMenu();\n                if (e.aria) {\n                  self.menu.items()[0].focus();\n                }\n              }\n            }\n            elm = elm.parentNode;\n          }\n        });\n        self.on('keydown', function (e) {\n          var rootControl;\n          if (e.keyCode === 13 && e.target.nodeName === 'INPUT') {\n            e.preventDefault();\n            self.parents().reverse().each(function (ctrl) {\n              if (ctrl.toJSON) {\n                rootControl = ctrl;\n                return false;\n              }\n            });\n            self.fire('submit', { data: rootControl.toJSON() });\n          }\n        });\n        self.on('keyup', function (e) {\n          if (e.target.nodeName === 'INPUT') {\n            var oldValue = self.state.get('value');\n            var newValue = e.target.value;\n            if (newValue !== oldValue) {\n              self.state.set('value', newValue);\n              self.fire('autocomplete', e);\n            }\n          }\n        });\n        self.on('mouseover', function (e) {\n          var tooltip = self.tooltip().moveTo(-65535);\n          if (self.statusLevel() && e.target.className.indexOf(self.classPrefix + 'status') !== -1) {\n            var statusMessage = self.statusMessage() || 'Ok';\n            var rel = tooltip.text(statusMessage).show().testMoveRel(e.target, [\n              'bc-tc',\n              'bc-tl',\n              'bc-tr'\n            ]);\n            tooltip.classes.toggle('tooltip-n', rel === 'bc-tc');\n            tooltip.classes.toggle('tooltip-nw', rel === 'bc-tl');\n            tooltip.classes.toggle('tooltip-ne', rel === 'bc-tr');\n            tooltip.moveRel(e.target, rel);\n          }\n        });\n      },\n      statusLevel: function (value) {\n        if (arguments.length > 0) {\n          this.state.set('statusLevel', value);\n        }\n        return this.state.get('statusLevel');\n      },\n      statusMessage: function (value) {\n        if (arguments.length > 0) {\n          this.state.set('statusMessage', value);\n        }\n        return this.state.get('statusMessage');\n      },\n      showMenu: function () {\n        var self = this;\n        var settings = self.settings;\n        var menu;\n        if (!self.menu) {\n          menu = settings.menu || [];\n          if (menu.length) {\n            menu = {\n              type: 'menu',\n              items: menu\n            };\n          } else {\n            menu.type = menu.type || 'menu';\n          }\n          self.menu = global$4.create(menu).parent(self).renderTo(self.getContainerElm());\n          self.fire('createmenu');\n          self.menu.reflow();\n          self.menu.on('cancel', function (e) {\n            if (e.control === self.menu) {\n              self.focus();\n            }\n          });\n          self.menu.on('show hide', function (e) {\n            e.control.items().each(function (ctrl) {\n              ctrl.active(ctrl.value() === self.value());\n            });\n          }).fire('show');\n          self.menu.on('select', function (e) {\n            self.value(e.control.value());\n          });\n          self.on('focusin', function (e) {\n            if (e.target.tagName.toUpperCase() === 'INPUT') {\n              self.menu.hide();\n            }\n          });\n          self.aria('expanded', true);\n        }\n        self.menu.show();\n        self.menu.layoutRect({ w: self.layoutRect().w });\n        self.menu.moveRel(self.getEl(), self.isRtl() ? [\n          'br-tr',\n          'tr-br'\n        ] : [\n          'bl-tl',\n          'tl-bl'\n        ]);\n      },\n      focus: function () {\n        this.getEl('inp').focus();\n      },\n      repaint: function () {\n        var self = this, elm = self.getEl(), openElm = self.getEl('open'), rect = self.layoutRect();\n        var width, lineHeight, innerPadding = 0;\n        var inputElm = elm.firstChild;\n        if (self.statusLevel() && self.statusLevel() !== 'none') {\n          innerPadding = parseInt(funcs.getRuntimeStyle(inputElm, 'padding-right'), 10) - parseInt(funcs.getRuntimeStyle(inputElm, 'padding-left'), 10);\n        }\n        if (openElm) {\n          width = rect.w - funcs.getSize(openElm).width - 10;\n        } else {\n          width = rect.w - 10;\n        }\n        var doc = domGlobals.document;\n        if (doc.all && (!doc.documentMode || doc.documentMode <= 8)) {\n          lineHeight = self.layoutRect().h - 2 + 'px';\n        }\n        global$9(inputElm).css({\n          width: width - innerPadding,\n          lineHeight: lineHeight\n        });\n        self._super();\n        return self;\n      },\n      postRender: function () {\n        var self = this;\n        global$9(this.getEl('inp')).on('change', function (e) {\n          self.state.set('value', e.target.value);\n          self.fire('change', e);\n        });\n        return self._super();\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, settings = self.settings, prefix = self.classPrefix;\n        var value = self.state.get('value') || '';\n        var icon, text, openBtnHtml = '', extraAttrs = '', statusHtml = '';\n        if ('spellcheck' in settings) {\n          extraAttrs += ' spellcheck=\"' + settings.spellcheck + '\"';\n        }\n        if (settings.maxLength) {\n          extraAttrs += ' maxlength=\"' + settings.maxLength + '\"';\n        }\n        if (settings.size) {\n          extraAttrs += ' size=\"' + settings.size + '\"';\n        }\n        if (settings.subtype) {\n          extraAttrs += ' type=\"' + settings.subtype + '\"';\n        }\n        statusHtml = '<i id=\"' + id + '-status\" class=\"mce-status mce-ico\" style=\"display: none\"></i>';\n        if (self.disabled()) {\n          extraAttrs += ' disabled=\"disabled\"';\n        }\n        icon = settings.icon;\n        if (icon && icon !== 'caret') {\n          icon = prefix + 'ico ' + prefix + 'i-' + settings.icon;\n        }\n        text = self.state.get('text');\n        if (icon || text) {\n          openBtnHtml = '<div id=\"' + id + '-open\" class=\"' + prefix + 'btn ' + prefix + 'open\" tabIndex=\"-1\" role=\"button\">' + '<button id=\"' + id + '-action\" type=\"button\" hidefocus=\"1\" tabindex=\"-1\">' + (icon !== 'caret' ? '<i class=\"' + icon + '\"></i>' : '<i class=\"' + prefix + 'caret\"></i>') + (text ? (icon ? ' ' : '') + text : '') + '</button>' + '</div>';\n          self.classes.add('has-open');\n        }\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\">' + '<input id=\"' + id + '-inp\" class=\"' + prefix + 'textbox\" value=\"' + self.encode(value, false) + '\" hidefocus=\"1\"' + extraAttrs + ' placeholder=\"' + self.encode(settings.placeholder) + '\" />' + statusHtml + openBtnHtml + '</div>';\n      },\n      value: function (value) {\n        if (arguments.length) {\n          this.state.set('value', value);\n          return this;\n        }\n        if (this.state.get('rendered')) {\n          this.state.set('value', this.getEl('inp').value);\n        }\n        return this.state.get('value');\n      },\n      showAutoComplete: function (items, term) {\n        var self = this;\n        if (items.length === 0) {\n          self.hideMenu();\n          return;\n        }\n        var insert = function (value, title) {\n          return function () {\n            self.fire('selectitem', {\n              title: title,\n              value: value\n            });\n          };\n        };\n        if (self.menu) {\n          self.menu.items().remove();\n        } else {\n          self.menu = global$4.create({\n            type: 'menu',\n            classes: 'combobox-menu',\n            layout: 'flow'\n          }).parent(self).renderTo();\n        }\n        global$2.each(items, function (item) {\n          self.menu.add({\n            text: item.title,\n            url: item.previewUrl,\n            match: term,\n            classes: 'menu-item-ellipsis',\n            onclick: insert(item.value, item.title)\n          });\n        });\n        self.menu.renderNew();\n        self.hideMenu();\n        self.menu.on('cancel', function (e) {\n          if (e.control.parent() === self.menu) {\n            e.stopPropagation();\n            self.focus();\n            self.hideMenu();\n          }\n        });\n        self.menu.on('select', function () {\n          self.focus();\n        });\n        var maxW = self.layoutRect().w;\n        self.menu.layoutRect({\n          w: maxW,\n          minW: 0,\n          maxW: maxW\n        });\n        self.menu.repaint();\n        self.menu.reflow();\n        self.menu.show();\n        self.menu.moveRel(self.getEl(), self.isRtl() ? [\n          'br-tr',\n          'tr-br'\n        ] : [\n          'bl-tl',\n          'tl-bl'\n        ]);\n      },\n      hideMenu: function () {\n        if (this.menu) {\n          this.menu.hide();\n        }\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:value', function (e) {\n          if (self.getEl('inp').value !== e.value) {\n            self.getEl('inp').value = e.value;\n          }\n        });\n        self.state.on('change:disabled', function (e) {\n          self.getEl('inp').disabled = e.value;\n        });\n        self.state.on('change:statusLevel', function (e) {\n          var statusIconElm = self.getEl('status');\n          var prefix = self.classPrefix, value = e.value;\n          funcs.css(statusIconElm, 'display', value === 'none' ? 'none' : '');\n          funcs.toggleClass(statusIconElm, prefix + 'i-checkmark', value === 'ok');\n          funcs.toggleClass(statusIconElm, prefix + 'i-warning', value === 'warn');\n          funcs.toggleClass(statusIconElm, prefix + 'i-error', value === 'error');\n          self.classes.toggle('has-status', value !== 'none');\n          self.repaint();\n        });\n        funcs.on(self.getEl('status'), 'mouseleave', function () {\n          self.tooltip().hide();\n        });\n        self.on('cancel', function (e) {\n          if (self.menu && self.menu.visible()) {\n            e.stopPropagation();\n            self.hideMenu();\n          }\n        });\n        var focusIdx = function (idx, menu) {\n          if (menu && menu.items().length > 0) {\n            menu.items().eq(idx)[0].focus();\n          }\n        };\n        self.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          if (e.target.nodeName === 'INPUT') {\n            if (keyCode === global$d.DOWN) {\n              e.preventDefault();\n              self.fire('autocomplete');\n              focusIdx(0, self.menu);\n            } else if (keyCode === global$d.UP) {\n              e.preventDefault();\n              focusIdx(-1, self.menu);\n            }\n          }\n        });\n        return self._super();\n      },\n      remove: function () {\n        global$9(this.getEl('inp')).off();\n        if (this.menu) {\n          this.menu.remove();\n        }\n        this._super();\n      }\n    });\n\n    var ColorBox = ComboBox.extend({\n      init: function (settings) {\n        var self = this;\n        settings.spellcheck = false;\n        if (settings.onaction) {\n          settings.icon = 'none';\n        }\n        self._super(settings);\n        self.classes.add('colorbox');\n        self.on('change keyup postrender', function () {\n          self.repaintColor(self.value());\n        });\n      },\n      repaintColor: function (value) {\n        var openElm = this.getEl('open');\n        var elm = openElm ? openElm.getElementsByTagName('i')[0] : null;\n        if (elm) {\n          try {\n            elm.style.background = value;\n          } catch (ex) {\n          }\n        }\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:value', function (e) {\n          if (self.state.get('rendered')) {\n            self.repaintColor(e.value);\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var PanelButton = Button.extend({\n      showPanel: function () {\n        var self = this, settings = self.settings;\n        self.classes.add('opened');\n        if (!self.panel) {\n          var panelSettings = settings.panel;\n          if (panelSettings.type) {\n            panelSettings = {\n              layout: 'grid',\n              items: panelSettings\n            };\n          }\n          panelSettings.role = panelSettings.role || 'dialog';\n          panelSettings.popover = true;\n          panelSettings.autohide = true;\n          panelSettings.ariaRoot = true;\n          self.panel = new FloatPanel(panelSettings).on('hide', function () {\n            self.classes.remove('opened');\n          }).on('cancel', function (e) {\n            e.stopPropagation();\n            self.focus();\n            self.hidePanel();\n          }).parent(self).renderTo(self.getContainerElm());\n          self.panel.fire('show');\n          self.panel.reflow();\n        } else {\n          self.panel.show();\n        }\n        var rtlRels = [\n          'bc-tc',\n          'bc-tl',\n          'bc-tr'\n        ];\n        var ltrRels = [\n          'bc-tc',\n          'bc-tr',\n          'bc-tl',\n          'tc-bc',\n          'tc-br',\n          'tc-bl'\n        ];\n        var rel = self.panel.testMoveRel(self.getEl(), settings.popoverAlign || (self.isRtl() ? rtlRels : ltrRels));\n        self.panel.classes.toggle('start', rel.substr(-1) === 'l');\n        self.panel.classes.toggle('end', rel.substr(-1) === 'r');\n        var isTop = rel.substr(0, 1) === 't';\n        self.panel.classes.toggle('bottom', !isTop);\n        self.panel.classes.toggle('top', isTop);\n        self.panel.moveRel(self.getEl(), rel);\n      },\n      hidePanel: function () {\n        var self = this;\n        if (self.panel) {\n          self.panel.hide();\n        }\n      },\n      postRender: function () {\n        var self = this;\n        self.aria('haspopup', true);\n        self.on('click', function (e) {\n          if (e.control === self) {\n            if (self.panel && self.panel.visible()) {\n              self.hidePanel();\n            } else {\n              self.showPanel();\n              self.panel.focus(!!e.aria);\n            }\n          }\n        });\n        return self._super();\n      },\n      remove: function () {\n        if (this.panel) {\n          this.panel.remove();\n          this.panel = null;\n        }\n        return this._super();\n      }\n    });\n\n    var DOM$3 = global$3.DOM;\n    var ColorButton = PanelButton.extend({\n      init: function (settings) {\n        this._super(settings);\n        this.classes.add('splitbtn');\n        this.classes.add('colorbutton');\n      },\n      color: function (color) {\n        if (color) {\n          this._color = color;\n          this.getEl('preview').style.backgroundColor = color;\n          return this;\n        }\n        return this._color;\n      },\n      resetColor: function () {\n        this._color = null;\n        this.getEl('preview').style.backgroundColor = null;\n        return this;\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix, text = self.state.get('text');\n        var icon = self.settings.icon ? prefix + 'ico ' + prefix + 'i-' + self.settings.icon : '';\n        var image = self.settings.image ? ' style=\"background-image: url(\\'' + self.settings.image + '\\')\"' : '';\n        var textHtml = '';\n        if (text) {\n          self.classes.add('btn-has-text');\n          textHtml = '<span class=\"' + prefix + 'txt\">' + self.encode(text) + '</span>';\n        }\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" role=\"button\" tabindex=\"-1\" aria-haspopup=\"true\">' + '<button role=\"presentation\" hidefocus=\"1\" type=\"button\" tabindex=\"-1\">' + (icon ? '<i class=\"' + icon + '\"' + image + '></i>' : '') + '<span id=\"' + id + '-preview\" class=\"' + prefix + 'preview\"></span>' + textHtml + '</button>' + '<button type=\"button\" class=\"' + prefix + 'open\" hidefocus=\"1\" tabindex=\"-1\">' + ' <i class=\"' + prefix + 'caret\"></i>' + '</button>' + '</div>';\n      },\n      postRender: function () {\n        var self = this, onClickHandler = self.settings.onclick;\n        self.on('click', function (e) {\n          if (e.aria && e.aria.key === 'down') {\n            return;\n          }\n          if (e.control === self && !DOM$3.getParent(e.target, '.' + self.classPrefix + 'open')) {\n            e.stopImmediatePropagation();\n            onClickHandler.call(self, e);\n          }\n        });\n        delete self.settings.onclick;\n        return self._super();\n      }\n    });\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.util.Color');\n\n    var ColorPicker = Widget.extend({\n      Defaults: { classes: 'widget colorpicker' },\n      init: function (settings) {\n        this._super(settings);\n      },\n      postRender: function () {\n        var self = this;\n        var color = self.color();\n        var hsv, hueRootElm, huePointElm, svRootElm, svPointElm;\n        hueRootElm = self.getEl('h');\n        huePointElm = self.getEl('hp');\n        svRootElm = self.getEl('sv');\n        svPointElm = self.getEl('svp');\n        function getPos(elm, event) {\n          var pos = funcs.getPos(elm);\n          var x, y;\n          x = event.pageX - pos.x;\n          y = event.pageY - pos.y;\n          x = Math.max(0, Math.min(x / elm.clientWidth, 1));\n          y = Math.max(0, Math.min(y / elm.clientHeight, 1));\n          return {\n            x: x,\n            y: y\n          };\n        }\n        function updateColor(hsv, hueUpdate) {\n          var hue = (360 - hsv.h) / 360;\n          funcs.css(huePointElm, { top: hue * 100 + '%' });\n          if (!hueUpdate) {\n            funcs.css(svPointElm, {\n              left: hsv.s + '%',\n              top: 100 - hsv.v + '%'\n            });\n          }\n          svRootElm.style.background = global$e({\n            s: 100,\n            v: 100,\n            h: hsv.h\n          }).toHex();\n          self.color().parse({\n            s: hsv.s,\n            v: hsv.v,\n            h: hsv.h\n          });\n        }\n        function updateSaturationAndValue(e) {\n          var pos;\n          pos = getPos(svRootElm, e);\n          hsv.s = pos.x * 100;\n          hsv.v = (1 - pos.y) * 100;\n          updateColor(hsv);\n          self.fire('change');\n        }\n        function updateHue(e) {\n          var pos;\n          pos = getPos(hueRootElm, e);\n          hsv = color.toHsv();\n          hsv.h = (1 - pos.y) * 360;\n          updateColor(hsv, true);\n          self.fire('change');\n        }\n        self._repaint = function () {\n          hsv = color.toHsv();\n          updateColor(hsv);\n        };\n        self._super();\n        self._svdraghelper = new DragHelper(self._id + '-sv', {\n          start: updateSaturationAndValue,\n          drag: updateSaturationAndValue\n        });\n        self._hdraghelper = new DragHelper(self._id + '-h', {\n          start: updateHue,\n          drag: updateHue\n        });\n        self._repaint();\n      },\n      rgb: function () {\n        return this.color().toRgb();\n      },\n      value: function (value) {\n        var self = this;\n        if (arguments.length) {\n          self.color().parse(value);\n          if (self._rendered) {\n            self._repaint();\n          }\n        } else {\n          return self.color().toHex();\n        }\n      },\n      color: function () {\n        if (!this._color) {\n          this._color = global$e();\n        }\n        return this._color;\n      },\n      renderHtml: function () {\n        var self = this;\n        var id = self._id;\n        var prefix = self.classPrefix;\n        var hueHtml;\n        var stops = '#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000';\n        function getOldIeFallbackHtml() {\n          var i, l, html = '', gradientPrefix, stopsList;\n          gradientPrefix = 'filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=';\n          stopsList = stops.split(',');\n          for (i = 0, l = stopsList.length - 1; i < l; i++) {\n            html += '<div class=\"' + prefix + 'colorpicker-h-chunk\" style=\"' + 'height:' + 100 / l + '%;' + gradientPrefix + stopsList[i] + ',endColorstr=' + stopsList[i + 1] + ');' + '-ms-' + gradientPrefix + stopsList[i] + ',endColorstr=' + stopsList[i + 1] + ')' + '\"></div>';\n          }\n          return html;\n        }\n        var gradientCssText = 'background: -ms-linear-gradient(top,' + stops + ');' + 'background: linear-gradient(to bottom,' + stops + ');';\n        hueHtml = '<div id=\"' + id + '-h\" class=\"' + prefix + 'colorpicker-h\" style=\"' + gradientCssText + '\">' + getOldIeFallbackHtml() + '<div id=\"' + id + '-hp\" class=\"' + prefix + 'colorpicker-h-marker\"></div>' + '</div>';\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\">' + '<div id=\"' + id + '-sv\" class=\"' + prefix + 'colorpicker-sv\">' + '<div class=\"' + prefix + 'colorpicker-overlay1\">' + '<div class=\"' + prefix + 'colorpicker-overlay2\">' + '<div id=\"' + id + '-svp\" class=\"' + prefix + 'colorpicker-selector1\">' + '<div class=\"' + prefix + 'colorpicker-selector2\"></div>' + '</div>' + '</div>' + '</div>' + '</div>' + hueHtml + '</div>';\n      }\n    });\n\n    var DropZone = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        settings = global$2.extend({\n          height: 100,\n          text: 'Drop an image here',\n          multiple: false,\n          accept: null\n        }, settings);\n        self._super(settings);\n        self.classes.add('dropzone');\n        if (settings.multiple) {\n          self.classes.add('multiple');\n        }\n      },\n      renderHtml: function () {\n        var self = this;\n        var attrs, elm;\n        var cfg = self.settings;\n        attrs = {\n          id: self._id,\n          hidefocus: '1'\n        };\n        elm = funcs.create('div', attrs, '<span>' + this.translate(cfg.text) + '</span>');\n        if (cfg.height) {\n          funcs.css(elm, 'height', cfg.height + 'px');\n        }\n        if (cfg.width) {\n          funcs.css(elm, 'width', cfg.width + 'px');\n        }\n        elm.className = self.classes;\n        return elm.outerHTML;\n      },\n      postRender: function () {\n        var self = this;\n        var toggleDragClass = function (e) {\n          e.preventDefault();\n          self.classes.toggle('dragenter');\n          self.getEl().className = self.classes;\n        };\n        var filter = function (files) {\n          var accept = self.settings.accept;\n          if (typeof accept !== 'string') {\n            return files;\n          }\n          var re = new RegExp('(' + accept.split(/\\s*,\\s*/).join('|') + ')$', 'i');\n          return global$2.grep(files, function (file) {\n            return re.test(file.name);\n          });\n        };\n        self._super();\n        self.$el.on('dragover', function (e) {\n          e.preventDefault();\n        });\n        self.$el.on('dragenter', toggleDragClass);\n        self.$el.on('dragleave', toggleDragClass);\n        self.$el.on('drop', function (e) {\n          e.preventDefault();\n          if (self.state.get('disabled')) {\n            return;\n          }\n          var files = filter(e.dataTransfer.files);\n          self.value = function () {\n            if (!files.length) {\n              return null;\n            } else if (self.settings.multiple) {\n              return files;\n            } else {\n              return files[0];\n            }\n          };\n          if (files.length) {\n            self.fire('change', e);\n          }\n        });\n      },\n      remove: function () {\n        this.$el.off();\n        this._super();\n      }\n    });\n\n    var Path = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        if (!settings.delimiter) {\n          settings.delimiter = '\\xBB';\n        }\n        self._super(settings);\n        self.classes.add('path');\n        self.canFocus = true;\n        self.on('click', function (e) {\n          var index;\n          var target = e.target;\n          if (index = target.getAttribute('data-index')) {\n            self.fire('select', {\n              value: self.row()[index],\n              index: index\n            });\n          }\n        });\n        self.row(self.settings.row);\n      },\n      focus: function () {\n        var self = this;\n        self.getEl().firstChild.focus();\n        return self;\n      },\n      row: function (row) {\n        if (!arguments.length) {\n          return this.state.get('row');\n        }\n        this.state.set('row', row);\n        return this;\n      },\n      renderHtml: function () {\n        var self = this;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\">' + self._getDataPathHtml(self.state.get('row')) + '</div>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:row', function (e) {\n          self.innerHtml(self._getDataPathHtml(e.value));\n        });\n        return self._super();\n      },\n      _getDataPathHtml: function (data) {\n        var self = this;\n        var parts = data || [];\n        var i, l, html = '';\n        var prefix = self.classPrefix;\n        for (i = 0, l = parts.length; i < l; i++) {\n          html += (i > 0 ? '<div class=\"' + prefix + 'divider\" aria-hidden=\"true\"> ' + self.settings.delimiter + ' </div>' : '') + '<div role=\"button\" class=\"' + prefix + 'path-item' + (i === l - 1 ? ' ' + prefix + 'last' : '') + '\" data-index=\"' + i + '\" tabindex=\"-1\" id=\"' + self._id + '-' + i + '\" aria-level=\"' + (i + 1) + '\">' + parts[i].name + '</div>';\n        }\n        if (!html) {\n          html = '<div class=\"' + prefix + 'path-item\">\\xA0</div>';\n        }\n        return html;\n      }\n    });\n\n    var ElementPath = Path.extend({\n      postRender: function () {\n        var self = this, editor = self.settings.editor;\n        function isHidden(elm) {\n          if (elm.nodeType === 1) {\n            if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n              return true;\n            }\n            if (elm.getAttribute('data-mce-type') === 'bookmark') {\n              return true;\n            }\n          }\n          return false;\n        }\n        if (editor.settings.elementpath !== false) {\n          self.on('select', function (e) {\n            editor.focus();\n            editor.selection.select(this.row()[e.index].element);\n            editor.nodeChanged();\n          });\n          editor.on('nodeChange', function (e) {\n            var outParents = [];\n            var parents = e.parents;\n            var i = parents.length;\n            while (i--) {\n              if (parents[i].nodeType === 1 && !isHidden(parents[i])) {\n                var args = editor.fire('ResolveName', {\n                  name: parents[i].nodeName.toLowerCase(),\n                  target: parents[i]\n                });\n                if (!args.isDefaultPrevented()) {\n                  outParents.push({\n                    name: args.name,\n                    element: parents[i]\n                  });\n                }\n                if (args.isPropagationStopped()) {\n                  break;\n                }\n              }\n            }\n            self.row(outParents);\n          });\n        }\n        return self._super();\n      }\n    });\n\n    var FormItem = Container.extend({\n      Defaults: {\n        layout: 'flex',\n        align: 'center',\n        defaults: { flex: 1 }\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout, prefix = self.classPrefix;\n        self.classes.add('formitem');\n        layout.preRender(self);\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\" hidefocus=\"1\" tabindex=\"-1\">' + (self.settings.title ? '<div id=\"' + self._id + '-title\" class=\"' + prefix + 'title\">' + self.settings.title + '</div>' : '') + '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + (self.settings.html || '') + layout.renderHtml(self) + '</div>' + '</div>';\n      }\n    });\n\n    var Form = Container.extend({\n      Defaults: {\n        containerCls: 'form',\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        flex: 1,\n        padding: 15,\n        labelGap: 30,\n        spacing: 10,\n        callbacks: {\n          submit: function () {\n            this.submit();\n          }\n        }\n      },\n      preRender: function () {\n        var self = this, items = self.items();\n        if (!self.settings.formItemDefaults) {\n          self.settings.formItemDefaults = {\n            layout: 'flex',\n            autoResize: 'overflow',\n            defaults: { flex: 1 }\n          };\n        }\n        items.each(function (ctrl) {\n          var formItem;\n          var label = ctrl.settings.label;\n          if (label) {\n            formItem = new FormItem(global$2.extend({\n              items: {\n                type: 'label',\n                id: ctrl._id + '-l',\n                text: label,\n                flex: 0,\n                forId: ctrl._id,\n                disabled: ctrl.disabled()\n              }\n            }, self.settings.formItemDefaults));\n            formItem.type = 'formitem';\n            ctrl.aria('labelledby', ctrl._id + '-l');\n            if (typeof ctrl.settings.flex === 'undefined') {\n              ctrl.settings.flex = 1;\n            }\n            self.replace(ctrl, formItem);\n            formItem.add(ctrl);\n          }\n        });\n      },\n      submit: function () {\n        return this.fire('submit', { data: this.toJSON() });\n      },\n      postRender: function () {\n        var self = this;\n        self._super();\n        self.fromJSON(self.settings.data);\n      },\n      bindStates: function () {\n        var self = this;\n        self._super();\n        function recalcLabels() {\n          var maxLabelWidth = 0;\n          var labels = [];\n          var i, labelGap, items;\n          if (self.settings.labelGapCalc === false) {\n            return;\n          }\n          if (self.settings.labelGapCalc === 'children') {\n            items = self.find('formitem');\n          } else {\n            items = self.items();\n          }\n          items.filter('formitem').each(function (item) {\n            var labelCtrl = item.items()[0], labelWidth = labelCtrl.getEl().clientWidth;\n            maxLabelWidth = labelWidth > maxLabelWidth ? labelWidth : maxLabelWidth;\n            labels.push(labelCtrl);\n          });\n          labelGap = self.settings.labelGap || 0;\n          i = labels.length;\n          while (i--) {\n            labels[i].settings.minWidth = maxLabelWidth + labelGap;\n          }\n        }\n        self.on('show', recalcLabels);\n        recalcLabels();\n      }\n    });\n\n    var FieldSet = Form.extend({\n      Defaults: {\n        containerCls: 'fieldset',\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        flex: 1,\n        padding: '25 15 5 15',\n        labelGap: 30,\n        spacing: 10,\n        border: 1\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout, prefix = self.classPrefix;\n        self.preRender();\n        layout.preRender(self);\n        return '<fieldset id=\"' + self._id + '\" class=\"' + self.classes + '\" hidefocus=\"1\" tabindex=\"-1\">' + (self.settings.title ? '<legend id=\"' + self._id + '-title\" class=\"' + prefix + 'fieldset-title\">' + self.settings.title + '</legend>' : '') + '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + (self.settings.html || '') + layout.renderHtml(self) + '</div>' + '</fieldset>';\n      }\n    });\n\n    var unique$1 = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique$1++;\n      return prefix + '_' + random + unique$1 + String(time);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var node = function () {\n      var f = Global$1.getOrDie('Node');\n      return f;\n    };\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows$1 = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows$1, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows$1),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$1 = browser.isIE() ? ieContains : regularContains;\n\n    var spot = Immutable('element', 'offset');\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var trim = global$2.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (node && node.nodeType === 1) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map(descendants(Element.fromDom(root), selector), function (element) {\n        return element.dom();\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name);\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map(filter(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map(filter(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim(target.title).length > 0;\n    };\n    var find$2 = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find$2 };\n\n    var getActiveEditor = function () {\n      return window.tinymce ? window.tinymce.activeEditor : global$1.activeEditor;\n    };\n    var history = {};\n    var HISTORY_LENGTH = 5;\n    var clearHistory = function () {\n      history = {};\n    };\n    var toMenuItem = function (target) {\n      return {\n        title: target.title,\n        value: {\n          title: { raw: target.title },\n          url: target.url,\n          attach: target.attach\n        }\n      };\n    };\n    var toMenuItems = function (targets) {\n      return global$2.map(targets, toMenuItem);\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        title: title,\n        value: {\n          title: title,\n          url: url,\n          attach: noop\n        }\n      };\n    };\n    var isUniqueUrl = function (url, targets) {\n      var foundTarget = exists(targets, function (target) {\n        return target.url === url;\n      });\n      return !foundTarget;\n    };\n    var getSetting = function (editorSettings, name, defaultValue) {\n      var value = name in editorSettings ? editorSettings[name] : defaultValue;\n      return value === false ? null : value;\n    };\n    var createMenuItems = function (term, targets, fileType, editorSettings) {\n      var separator = { title: '-' };\n      var fromHistoryMenuItems = function (history) {\n        var historyItems = history.hasOwnProperty(fileType) ? history[fileType] : [];\n        var uniqueHistory = filter(historyItems, function (url) {\n          return isUniqueUrl(url, targets);\n        });\n        return global$2.map(uniqueHistory, function (url) {\n          return {\n            title: url,\n            value: {\n              title: url,\n              url: url,\n              attach: noop\n            }\n          };\n        });\n      };\n      var fromMenuItems = function (type) {\n        var filteredTargets = filter(targets, function (target) {\n          return target.type === type;\n        });\n        return toMenuItems(filteredTargets);\n      };\n      var anchorMenuItems = function () {\n        var anchorMenuItems = fromMenuItems('anchor');\n        var topAnchor = getSetting(editorSettings, 'anchor_top', '#top');\n        var bottomAchor = getSetting(editorSettings, 'anchor_bottom', '#bottom');\n        if (topAnchor !== null) {\n          anchorMenuItems.unshift(staticMenuItem('<top>', topAnchor));\n        }\n        if (bottomAchor !== null) {\n          anchorMenuItems.push(staticMenuItem('<bottom>', bottomAchor));\n        }\n        return anchorMenuItems;\n      };\n      var join = function (items) {\n        return foldl(items, function (a, b) {\n          var bothEmpty = a.length === 0 || b.length === 0;\n          return bothEmpty ? a.concat(b) : a.concat(separator, b);\n        }, []);\n      };\n      if (editorSettings.typeahead_urls === false) {\n        return [];\n      }\n      return fileType === 'file' ? join([\n        filterByQuery(term, fromHistoryMenuItems(history)),\n        filterByQuery(term, fromMenuItems('header')),\n        filterByQuery(term, anchorMenuItems())\n      ]) : filterByQuery(term, fromHistoryMenuItems(history));\n    };\n    var addToHistory = function (url, fileType) {\n      var items = history[fileType];\n      if (!/^https?/.test(url)) {\n        return;\n      }\n      if (items) {\n        if (indexOf(items, url).isNone()) {\n          history[fileType] = items.slice(0, HISTORY_LENGTH).concat(url);\n        }\n      } else {\n        history[fileType] = [url];\n      }\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      var result = global$2.grep(menuItems, function (item) {\n        return item.title.toLowerCase().indexOf(lowerCaseTerm) !== -1;\n      });\n      return result.length === 1 && result[0].title === term ? [] : result;\n    };\n    var getTitle = function (linkDetails) {\n      var title = linkDetails.title;\n      return title.raw ? title.raw : title;\n    };\n    var setupAutoCompleteHandler = function (ctrl, editorSettings, bodyElm, fileType) {\n      var autocomplete = function (term) {\n        var linkTargets = LinkTargets.find(bodyElm);\n        var menuItems = createMenuItems(term, linkTargets, fileType, editorSettings);\n        ctrl.showAutoComplete(menuItems, term);\n      };\n      ctrl.on('autocomplete', function () {\n        autocomplete(ctrl.value());\n      });\n      ctrl.on('selectitem', function (e) {\n        var linkDetails = e.value;\n        ctrl.value(linkDetails.url);\n        var title = getTitle(linkDetails);\n        if (fileType === 'image') {\n          ctrl.fire('change', {\n            meta: {\n              alt: title,\n              attach: linkDetails.attach\n            }\n          });\n        } else {\n          ctrl.fire('change', {\n            meta: {\n              text: title,\n              attach: linkDetails.attach\n            }\n          });\n        }\n        ctrl.focus();\n      });\n      ctrl.on('click', function (e) {\n        if (ctrl.value().length === 0 && e.target.nodeName === 'INPUT') {\n          autocomplete('');\n        }\n      });\n      ctrl.on('PostRender', function () {\n        ctrl.getRoot().on('submit', function (e) {\n          if (!e.isDefaultPrevented()) {\n            addToHistory(ctrl.value(), fileType);\n          }\n        });\n      });\n    };\n    var statusToUiState = function (result) {\n      var status = result.status, message = result.message;\n      if (status === 'valid') {\n        return {\n          status: 'ok',\n          message: message\n        };\n      } else if (status === 'unknown') {\n        return {\n          status: 'warn',\n          message: message\n        };\n      } else if (status === 'invalid') {\n        return {\n          status: 'warn',\n          message: message\n        };\n      } else {\n        return {\n          status: 'none',\n          message: ''\n        };\n      }\n    };\n    var setupLinkValidatorHandler = function (ctrl, editorSettings, fileType) {\n      var validatorHandler = editorSettings.filepicker_validator_handler;\n      if (validatorHandler) {\n        var validateUrl_1 = function (url) {\n          if (url.length === 0) {\n            ctrl.statusLevel('none');\n            return;\n          }\n          validatorHandler({\n            url: url,\n            type: fileType\n          }, function (result) {\n            var uiState = statusToUiState(result);\n            ctrl.statusMessage(uiState.message);\n            ctrl.statusLevel(uiState.status);\n          });\n        };\n        ctrl.state.on('change:value', function (e) {\n          validateUrl_1(e.value);\n        });\n      }\n    };\n    var FilePicker = ComboBox.extend({\n      Statics: { clearHistory: clearHistory },\n      init: function (settings) {\n        var self = this, editor = getActiveEditor(), editorSettings = editor.settings;\n        var actionCallback, fileBrowserCallback, fileBrowserCallbackTypes;\n        var fileType = settings.filetype;\n        settings.spellcheck = false;\n        fileBrowserCallbackTypes = editorSettings.file_picker_types || editorSettings.file_browser_callback_types;\n        if (fileBrowserCallbackTypes) {\n          fileBrowserCallbackTypes = global$2.makeMap(fileBrowserCallbackTypes, /[, ]/);\n        }\n        if (!fileBrowserCallbackTypes || fileBrowserCallbackTypes[fileType]) {\n          fileBrowserCallback = editorSettings.file_picker_callback;\n          if (fileBrowserCallback && (!fileBrowserCallbackTypes || fileBrowserCallbackTypes[fileType])) {\n            actionCallback = function () {\n              var meta = self.fire('beforecall').meta;\n              meta = global$2.extend({ filetype: fileType }, meta);\n              fileBrowserCallback.call(editor, function (value, meta) {\n                self.value(value).fire('change', { meta: meta });\n              }, self.value(), meta);\n            };\n          } else {\n            fileBrowserCallback = editorSettings.file_browser_callback;\n            if (fileBrowserCallback && (!fileBrowserCallbackTypes || fileBrowserCallbackTypes[fileType])) {\n              actionCallback = function () {\n                fileBrowserCallback(self.getEl('inp').id, self.value(), fileType, window);\n              };\n            }\n          }\n        }\n        if (actionCallback) {\n          settings.icon = 'browse';\n          settings.onaction = actionCallback;\n        }\n        self._super(settings);\n        self.classes.add('filepicker');\n        setupAutoCompleteHandler(self, editorSettings, editor.getBody(), fileType);\n        setupLinkValidatorHandler(self, editorSettings, fileType);\n      }\n    });\n\n    var FitLayout = AbsoluteLayout.extend({\n      recalc: function (container) {\n        var contLayoutRect = container.layoutRect(), paddingBox = container.paddingBox;\n        container.items().filter(':visible').each(function (ctrl) {\n          ctrl.layoutRect({\n            x: paddingBox.left,\n            y: paddingBox.top,\n            w: contLayoutRect.innerW - paddingBox.right - paddingBox.left,\n            h: contLayoutRect.innerH - paddingBox.top - paddingBox.bottom\n          });\n          if (ctrl.recalc) {\n            ctrl.recalc();\n          }\n        });\n      }\n    });\n\n    var FlexLayout = AbsoluteLayout.extend({\n      recalc: function (container) {\n        var i, l, items, contLayoutRect, contPaddingBox, contSettings, align, pack, spacing, totalFlex, availableSpace, direction;\n        var ctrl, ctrlLayoutRect, ctrlSettings, flex;\n        var maxSizeItems = [];\n        var size, maxSize, ratio, rect, pos, maxAlignEndPos;\n        var sizeName, minSizeName, posName, maxSizeName, beforeName, innerSizeName, deltaSizeName, contentSizeName;\n        var alignAxisName, alignInnerSizeName, alignSizeName, alignMinSizeName, alignBeforeName, alignAfterName;\n        var alignDeltaSizeName, alignContentSizeName;\n        var max = Math.max, min = Math.min;\n        items = container.items().filter(':visible');\n        contLayoutRect = container.layoutRect();\n        contPaddingBox = container.paddingBox;\n        contSettings = container.settings;\n        direction = container.isRtl() ? contSettings.direction || 'row-reversed' : contSettings.direction;\n        align = contSettings.align;\n        pack = container.isRtl() ? contSettings.pack || 'end' : contSettings.pack;\n        spacing = contSettings.spacing || 0;\n        if (direction === 'row-reversed' || direction === 'column-reverse') {\n          items = items.set(items.toArray().reverse());\n          direction = direction.split('-')[0];\n        }\n        if (direction === 'column') {\n          posName = 'y';\n          sizeName = 'h';\n          minSizeName = 'minH';\n          maxSizeName = 'maxH';\n          innerSizeName = 'innerH';\n          beforeName = 'top';\n          deltaSizeName = 'deltaH';\n          contentSizeName = 'contentH';\n          alignBeforeName = 'left';\n          alignSizeName = 'w';\n          alignAxisName = 'x';\n          alignInnerSizeName = 'innerW';\n          alignMinSizeName = 'minW';\n          alignAfterName = 'right';\n          alignDeltaSizeName = 'deltaW';\n          alignContentSizeName = 'contentW';\n        } else {\n          posName = 'x';\n          sizeName = 'w';\n          minSizeName = 'minW';\n          maxSizeName = 'maxW';\n          innerSizeName = 'innerW';\n          beforeName = 'left';\n          deltaSizeName = 'deltaW';\n          contentSizeName = 'contentW';\n          alignBeforeName = 'top';\n          alignSizeName = 'h';\n          alignAxisName = 'y';\n          alignInnerSizeName = 'innerH';\n          alignMinSizeName = 'minH';\n          alignAfterName = 'bottom';\n          alignDeltaSizeName = 'deltaH';\n          alignContentSizeName = 'contentH';\n        }\n        availableSpace = contLayoutRect[innerSizeName] - contPaddingBox[beforeName] - contPaddingBox[beforeName];\n        maxAlignEndPos = totalFlex = 0;\n        for (i = 0, l = items.length; i < l; i++) {\n          ctrl = items[i];\n          ctrlLayoutRect = ctrl.layoutRect();\n          ctrlSettings = ctrl.settings;\n          flex = ctrlSettings.flex;\n          availableSpace -= i < l - 1 ? spacing : 0;\n          if (flex > 0) {\n            totalFlex += flex;\n            if (ctrlLayoutRect[maxSizeName]) {\n              maxSizeItems.push(ctrl);\n            }\n            ctrlLayoutRect.flex = flex;\n          }\n          availableSpace -= ctrlLayoutRect[minSizeName];\n          size = contPaddingBox[alignBeforeName] + ctrlLayoutRect[alignMinSizeName] + contPaddingBox[alignAfterName];\n          if (size > maxAlignEndPos) {\n            maxAlignEndPos = size;\n          }\n        }\n        rect = {};\n        if (availableSpace < 0) {\n          rect[minSizeName] = contLayoutRect[minSizeName] - availableSpace + contLayoutRect[deltaSizeName];\n        } else {\n          rect[minSizeName] = contLayoutRect[innerSizeName] - availableSpace + contLayoutRect[deltaSizeName];\n        }\n        rect[alignMinSizeName] = maxAlignEndPos + contLayoutRect[alignDeltaSizeName];\n        rect[contentSizeName] = contLayoutRect[innerSizeName] - availableSpace;\n        rect[alignContentSizeName] = maxAlignEndPos;\n        rect.minW = min(rect.minW, contLayoutRect.maxW);\n        rect.minH = min(rect.minH, contLayoutRect.maxH);\n        rect.minW = max(rect.minW, contLayoutRect.startMinWidth);\n        rect.minH = max(rect.minH, contLayoutRect.startMinHeight);\n        if (contLayoutRect.autoResize && (rect.minW !== contLayoutRect.minW || rect.minH !== contLayoutRect.minH)) {\n          rect.w = rect.minW;\n          rect.h = rect.minH;\n          container.layoutRect(rect);\n          this.recalc(container);\n          if (container._lastRect === null) {\n            var parentCtrl = container.parent();\n            if (parentCtrl) {\n              parentCtrl._lastRect = null;\n              parentCtrl.recalc();\n            }\n          }\n          return;\n        }\n        ratio = availableSpace / totalFlex;\n        for (i = 0, l = maxSizeItems.length; i < l; i++) {\n          ctrl = maxSizeItems[i];\n          ctrlLayoutRect = ctrl.layoutRect();\n          maxSize = ctrlLayoutRect[maxSizeName];\n          size = ctrlLayoutRect[minSizeName] + ctrlLayoutRect.flex * ratio;\n          if (size > maxSize) {\n            availableSpace -= ctrlLayoutRect[maxSizeName] - ctrlLayoutRect[minSizeName];\n            totalFlex -= ctrlLayoutRect.flex;\n            ctrlLayoutRect.flex = 0;\n            ctrlLayoutRect.maxFlexSize = maxSize;\n          } else {\n            ctrlLayoutRect.maxFlexSize = 0;\n          }\n        }\n        ratio = availableSpace / totalFlex;\n        pos = contPaddingBox[beforeName];\n        rect = {};\n        if (totalFlex === 0) {\n          if (pack === 'end') {\n            pos = availableSpace + contPaddingBox[beforeName];\n          } else if (pack === 'center') {\n            pos = Math.round(contLayoutRect[innerSizeName] / 2 - (contLayoutRect[innerSizeName] - availableSpace) / 2) + contPaddingBox[beforeName];\n            if (pos < 0) {\n              pos = contPaddingBox[beforeName];\n            }\n          } else if (pack === 'justify') {\n            pos = contPaddingBox[beforeName];\n            spacing = Math.floor(availableSpace / (items.length - 1));\n          }\n        }\n        rect[alignAxisName] = contPaddingBox[alignBeforeName];\n        for (i = 0, l = items.length; i < l; i++) {\n          ctrl = items[i];\n          ctrlLayoutRect = ctrl.layoutRect();\n          size = ctrlLayoutRect.maxFlexSize || ctrlLayoutRect[minSizeName];\n          if (align === 'center') {\n            rect[alignAxisName] = Math.round(contLayoutRect[alignInnerSizeName] / 2 - ctrlLayoutRect[alignSizeName] / 2);\n          } else if (align === 'stretch') {\n            rect[alignSizeName] = max(ctrlLayoutRect[alignMinSizeName] || 0, contLayoutRect[alignInnerSizeName] - contPaddingBox[alignBeforeName] - contPaddingBox[alignAfterName]);\n            rect[alignAxisName] = contPaddingBox[alignBeforeName];\n          } else if (align === 'end') {\n            rect[alignAxisName] = contLayoutRect[alignInnerSizeName] - ctrlLayoutRect[alignSizeName] - contPaddingBox.top;\n          }\n          if (ctrlLayoutRect.flex > 0) {\n            size += ctrlLayoutRect.flex * ratio;\n          }\n          rect[sizeName] = size;\n          rect[posName] = pos;\n          ctrl.layoutRect(rect);\n          if (ctrl.recalc) {\n            ctrl.recalc();\n          }\n          pos += size + spacing;\n        }\n      }\n    });\n\n    var FlowLayout = Layout.extend({\n      Defaults: {\n        containerClass: 'flow-layout',\n        controlClass: 'flow-layout-item',\n        endClass: 'break'\n      },\n      recalc: function (container) {\n        container.items().filter(':visible').each(function (ctrl) {\n          if (ctrl.recalc) {\n            ctrl.recalc();\n          }\n        });\n      },\n      isNative: function () {\n        return true;\n      }\n    });\n\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n\n    var toggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var addFormatChangedListener = function (editor, name, changed) {\n      var handler = function (state) {\n        changed(state, name);\n      };\n      if (editor.formatter) {\n        editor.formatter.formatChanged(name, handler);\n      } else {\n        editor.on('init', function () {\n          editor.formatter.formatChanged(name, handler);\n        });\n      }\n    };\n    var postRenderFormatToggle = function (editor, name) {\n      return function (e) {\n        addFormatChangedListener(editor, name, function (state) {\n          e.control.active(state);\n        });\n      };\n    };\n\n    var register = function (editor) {\n      var alignFormats = [\n        'alignleft',\n        'aligncenter',\n        'alignright',\n        'alignjustify'\n      ];\n      var defaultAlign = 'alignleft';\n      var alignMenuItems = [\n        {\n          text: 'Left',\n          icon: 'alignleft',\n          onclick: toggleFormat(editor, 'alignleft')\n        },\n        {\n          text: 'Center',\n          icon: 'aligncenter',\n          onclick: toggleFormat(editor, 'aligncenter')\n        },\n        {\n          text: 'Right',\n          icon: 'alignright',\n          onclick: toggleFormat(editor, 'alignright')\n        },\n        {\n          text: 'Justify',\n          icon: 'alignjustify',\n          onclick: toggleFormat(editor, 'alignjustify')\n        }\n      ];\n      editor.addMenuItem('align', {\n        text: 'Align',\n        menu: alignMenuItems\n      });\n      editor.addButton('align', {\n        type: 'menubutton',\n        icon: defaultAlign,\n        menu: alignMenuItems,\n        onShowMenu: function (e) {\n          var menu = e.control.menu;\n          global$2.each(alignFormats, function (formatName, idx) {\n            menu.items().eq(idx).each(function (item) {\n              return item.active(editor.formatter.match(formatName));\n            });\n          });\n        },\n        onPostRender: function (e) {\n          var ctrl = e.control;\n          global$2.each(alignFormats, function (formatName, idx) {\n            addFormatChangedListener(editor, formatName, function (state) {\n              ctrl.icon(defaultAlign);\n              if (state) {\n                ctrl.icon(formatName);\n              }\n            });\n          });\n        }\n      });\n      global$2.each({\n        alignleft: [\n          'Align left',\n          'JustifyLeft'\n        ],\n        aligncenter: [\n          'Align center',\n          'JustifyCenter'\n        ],\n        alignright: [\n          'Align right',\n          'JustifyRight'\n        ],\n        alignjustify: [\n          'Justify',\n          'JustifyFull'\n        ],\n        alignnone: [\n          'No alignment',\n          'JustifyNone'\n        ]\n      }, function (item, name) {\n        editor.addButton(name, {\n          active: false,\n          tooltip: item[0],\n          cmd: item[1],\n          onPostRender: postRenderFormatToggle(editor, name)\n        });\n      });\n    };\n    var Align = { register: register };\n\n    var getFirstFont = function (fontFamily) {\n      return fontFamily ? fontFamily.split(',')[0] : '';\n    };\n    var findMatchingValue = function (items, fontFamily) {\n      var font = fontFamily ? fontFamily.toLowerCase() : '';\n      var value;\n      global$2.each(items, function (item) {\n        if (item.value.toLowerCase() === font) {\n          value = item.value;\n        }\n      });\n      global$2.each(items, function (item) {\n        if (!value && getFirstFont(item.value).toLowerCase() === getFirstFont(font).toLowerCase()) {\n          value = item.value;\n        }\n      });\n      return value;\n    };\n    var createFontNameListBoxChangeHandler = function (editor, items) {\n      return function () {\n        var self = this;\n        self.state.set('value', null);\n        editor.on('init nodeChange', function (e) {\n          var fontFamily = editor.queryCommandValue('FontName');\n          var match = findMatchingValue(items, fontFamily);\n          self.value(match ? match : null);\n          if (!match && fontFamily) {\n            self.text(getFirstFont(fontFamily));\n          }\n        });\n      };\n    };\n    var createFormats = function (formats) {\n      formats = formats.replace(/;$/, '').split(';');\n      var i = formats.length;\n      while (i--) {\n        formats[i] = formats[i].split('=');\n      }\n      return formats;\n    };\n    var getFontItems = function (editor) {\n      var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n      var fonts = createFormats(editor.settings.font_formats || defaultFontsFormats);\n      return global$2.map(fonts, function (font) {\n        return {\n          text: { raw: font[0] },\n          value: font[1],\n          textStyle: font[1].indexOf('dings') === -1 ? 'font-family:' + font[1] : ''\n        };\n      });\n    };\n    var registerButtons = function (editor) {\n      editor.addButton('fontselect', function () {\n        var items = getFontItems(editor);\n        return {\n          type: 'listbox',\n          text: 'Font Family',\n          tooltip: 'Font Family',\n          values: items,\n          fixedWidth: true,\n          onPostRender: createFontNameListBoxChangeHandler(editor, items),\n          onselect: function (e) {\n            if (e.control.settings.value) {\n              editor.execCommand('FontName', false, e.control.settings.value);\n            }\n          }\n        };\n      });\n    };\n    var register$1 = function (editor) {\n      registerButtons(editor);\n    };\n    var FontSelect = { register: register$1 };\n\n    var round = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      }\n      return fontSize;\n    };\n    var findMatchingValue$1 = function (items, pt, px) {\n      var value;\n      global$2.each(items, function (item) {\n        if (item.value === px) {\n          value = px;\n        } else if (item.value === pt) {\n          value = pt;\n        }\n      });\n      return value;\n    };\n    var createFontSizeListBoxChangeHandler = function (editor, items) {\n      return function () {\n        var self = this;\n        editor.on('init nodeChange', function (e) {\n          var px, pt, precision, match;\n          px = editor.queryCommandValue('FontSize');\n          if (px) {\n            for (precision = 3; !match && precision >= 0; precision--) {\n              pt = toPt(px, precision);\n              match = findMatchingValue$1(items, pt, px);\n            }\n          }\n          self.value(match ? match : null);\n          if (!match) {\n            self.text(pt);\n          }\n        });\n      };\n    };\n    var getFontSizeItems = function (editor) {\n      var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n      var fontsizeFormats = editor.settings.fontsize_formats || defaultFontsizeFormats;\n      return global$2.map(fontsizeFormats.split(' '), function (item) {\n        var text = item, value = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          text = values[0];\n          value = values[1];\n        }\n        return {\n          text: text,\n          value: value\n        };\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      editor.addButton('fontsizeselect', function () {\n        var items = getFontSizeItems(editor);\n        return {\n          type: 'listbox',\n          text: 'Font Sizes',\n          tooltip: 'Font Sizes',\n          values: items,\n          fixedWidth: true,\n          onPostRender: createFontSizeListBoxChangeHandler(editor, items),\n          onclick: function (e) {\n            if (e.control.settings.value) {\n              editor.execCommand('FontSize', false, e.control.settings.value);\n            }\n          }\n        };\n      });\n    };\n    var register$2 = function (editor) {\n      registerButtons$1(editor);\n    };\n    var FontSizeSelect = { register: register$2 };\n\n    var hideMenuObjects = function (editor, menu) {\n      var count = menu.length;\n      global$2.each(menu, function (item) {\n        if (item.menu) {\n          item.hidden = hideMenuObjects(editor, item.menu) === 0;\n        }\n        var formatName = item.format;\n        if (formatName) {\n          item.hidden = !editor.formatter.canApply(formatName);\n        }\n        if (item.hidden) {\n          count--;\n        }\n      });\n      return count;\n    };\n    var hideFormatMenuItems = function (editor, menu) {\n      var count = menu.items().length;\n      menu.items().each(function (item) {\n        if (item.menu) {\n          item.visible(hideFormatMenuItems(editor, item.menu) > 0);\n        }\n        if (!item.menu && item.settings.menu) {\n          item.visible(hideMenuObjects(editor, item.settings.menu) > 0);\n        }\n        var formatName = item.settings.format;\n        if (formatName) {\n          item.visible(editor.formatter.canApply(formatName));\n        }\n        if (!item.visible()) {\n          count--;\n        }\n      });\n      return count;\n    };\n    var createFormatMenu = function (editor) {\n      var count = 0;\n      var newFormats = [];\n      var defaultStyleFormats = [\n        {\n          title: 'Headings',\n          items: [\n            {\n              title: 'Heading 1',\n              format: 'h1'\n            },\n            {\n              title: 'Heading 2',\n              format: 'h2'\n            },\n            {\n              title: 'Heading 3',\n              format: 'h3'\n            },\n            {\n              title: 'Heading 4',\n              format: 'h4'\n            },\n            {\n              title: 'Heading 5',\n              format: 'h5'\n            },\n            {\n              title: 'Heading 6',\n              format: 'h6'\n            }\n          ]\n        },\n        {\n          title: 'Inline',\n          items: [\n            {\n              title: 'Bold',\n              icon: 'bold',\n              format: 'bold'\n            },\n            {\n              title: 'Italic',\n              icon: 'italic',\n              format: 'italic'\n            },\n            {\n              title: 'Underline',\n              icon: 'underline',\n              format: 'underline'\n            },\n            {\n              title: 'Strikethrough',\n              icon: 'strikethrough',\n              format: 'strikethrough'\n            },\n            {\n              title: 'Superscript',\n              icon: 'superscript',\n              format: 'superscript'\n            },\n            {\n              title: 'Subscript',\n              icon: 'subscript',\n              format: 'subscript'\n            },\n            {\n              title: 'Code',\n              icon: 'code',\n              format: 'code'\n            }\n          ]\n        },\n        {\n          title: 'Blocks',\n          items: [\n            {\n              title: 'Paragraph',\n              format: 'p'\n            },\n            {\n              title: 'Blockquote',\n              format: 'blockquote'\n            },\n            {\n              title: 'Div',\n              format: 'div'\n            },\n            {\n              title: 'Pre',\n              format: 'pre'\n            }\n          ]\n        },\n        {\n          title: 'Alignment',\n          items: [\n            {\n              title: 'Left',\n              icon: 'alignleft',\n              format: 'alignleft'\n            },\n            {\n              title: 'Center',\n              icon: 'aligncenter',\n              format: 'aligncenter'\n            },\n            {\n              title: 'Right',\n              icon: 'alignright',\n              format: 'alignright'\n            },\n            {\n              title: 'Justify',\n              icon: 'alignjustify',\n              format: 'alignjustify'\n            }\n          ]\n        }\n      ];\n      var createMenu = function (formats) {\n        var menu = [];\n        if (!formats) {\n          return;\n        }\n        global$2.each(formats, function (format) {\n          var menuItem = {\n            text: format.title,\n            icon: format.icon\n          };\n          if (format.items) {\n            menuItem.menu = createMenu(format.items);\n          } else {\n            var formatName = format.format || 'custom' + count++;\n            if (!format.format) {\n              format.name = formatName;\n              newFormats.push(format);\n            }\n            menuItem.format = formatName;\n            menuItem.cmd = format.cmd;\n          }\n          menu.push(menuItem);\n        });\n        return menu;\n      };\n      var createStylesMenu = function () {\n        var menu;\n        if (editor.settings.style_formats_merge) {\n          if (editor.settings.style_formats) {\n            menu = createMenu(defaultStyleFormats.concat(editor.settings.style_formats));\n          } else {\n            menu = createMenu(defaultStyleFormats);\n          }\n        } else {\n          menu = createMenu(editor.settings.style_formats || defaultStyleFormats);\n        }\n        return menu;\n      };\n      editor.on('init', function () {\n        global$2.each(newFormats, function (format) {\n          editor.formatter.register(format.name, format);\n        });\n      });\n      return {\n        type: 'menu',\n        items: createStylesMenu(),\n        onPostRender: function (e) {\n          editor.fire('renderFormatsMenu', { control: e.control });\n        },\n        itemDefaults: {\n          preview: true,\n          textStyle: function () {\n            if (this.settings.format) {\n              return editor.formatter.getCssText(this.settings.format);\n            }\n          },\n          onPostRender: function () {\n            var self = this;\n            self.parent().on('show', function () {\n              var formatName, command;\n              formatName = self.settings.format;\n              if (formatName) {\n                self.disabled(!editor.formatter.canApply(formatName));\n                self.active(editor.formatter.match(formatName));\n              }\n              command = self.settings.cmd;\n              if (command) {\n                self.active(editor.queryCommandState(command));\n              }\n            });\n          },\n          onclick: function () {\n            if (this.settings.format) {\n              toggleFormat(editor, this.settings.format)();\n            }\n            if (this.settings.cmd) {\n              editor.execCommand(this.settings.cmd);\n            }\n          }\n        }\n      };\n    };\n    var registerMenuItems = function (editor, formatMenu) {\n      editor.addMenuItem('formats', {\n        text: 'Formats',\n        menu: formatMenu\n      });\n    };\n    var registerButtons$2 = function (editor, formatMenu) {\n      editor.addButton('styleselect', {\n        type: 'menubutton',\n        text: 'Formats',\n        menu: formatMenu,\n        onShowMenu: function () {\n          if (editor.settings.style_formats_autohide) {\n            hideFormatMenuItems(editor, this.menu);\n          }\n        }\n      });\n    };\n    var register$3 = function (editor) {\n      var formatMenu = createFormatMenu(editor);\n      registerMenuItems(editor, formatMenu);\n      registerButtons$2(editor, formatMenu);\n    };\n    var Formats = { register: register$3 };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var createFormats$1 = function (formats) {\n      formats = formats.replace(/;$/, '').split(';');\n      var i = formats.length;\n      while (i--) {\n        formats[i] = formats[i].split('=');\n      }\n      return formats;\n    };\n    var createListBoxChangeHandler = function (editor, items, formatName) {\n      return function () {\n        var self = this;\n        editor.on('nodeChange', function (e) {\n          var formatter = editor.formatter;\n          var value = null;\n          global$2.each(e.parents, function (node) {\n            global$2.each(items, function (item) {\n              if (formatName) {\n                if (formatter.matchNode(node, formatName, { value: item.value })) {\n                  value = item.value;\n                }\n              } else {\n                if (formatter.matchNode(node, item.value)) {\n                  value = item.value;\n                }\n              }\n              if (value) {\n                return false;\n              }\n            });\n            if (value) {\n              return false;\n            }\n          });\n          self.value(value);\n        });\n      };\n    };\n    var lazyFormatSelectBoxItems = function (editor, blocks) {\n      return function () {\n        var items = [];\n        global$2.each(blocks, function (block) {\n          items.push({\n            text: block[0],\n            value: block[1],\n            textStyle: function () {\n              return editor.formatter.getCssText(block[1]);\n            }\n          });\n        });\n        return {\n          type: 'listbox',\n          text: blocks[0][0],\n          values: items,\n          fixedWidth: true,\n          onselect: function (e) {\n            if (e.control) {\n              var fmt = e.control.value();\n              toggleFormat(editor, fmt)();\n            }\n          },\n          onPostRender: createListBoxChangeHandler(editor, items)\n        };\n      };\n    };\n    var buildMenuItems = function (editor, blocks) {\n      return global$2.map(blocks, function (block) {\n        return {\n          text: block[0],\n          onclick: toggleFormat(editor, block[1]),\n          textStyle: function () {\n            return editor.formatter.getCssText(block[1]);\n          }\n        };\n      });\n    };\n    var register$4 = function (editor) {\n      var blocks = createFormats$1(editor.settings.block_formats || defaultBlocks);\n      editor.addMenuItem('blockformats', {\n        text: 'Blocks',\n        menu: buildMenuItems(editor, blocks)\n      });\n      editor.addButton('formatselect', lazyFormatSelectBoxItems(editor, blocks));\n    };\n    var FormatSelect = { register: register$4 };\n\n    var createCustomMenuItems = function (editor, names) {\n      var items, nameList;\n      if (typeof names === 'string') {\n        nameList = names.split(' ');\n      } else if (global$2.isArray(names)) {\n        return flatten(global$2.map(names, function (names) {\n          return createCustomMenuItems(editor, names);\n        }));\n      }\n      items = global$2.grep(nameList, function (name) {\n        return name === '|' || name in editor.menuItems;\n      });\n      return global$2.map(items, function (name) {\n        return name === '|' ? { text: '-' } : editor.menuItems[name];\n      });\n    };\n    var isSeparator$1 = function (menuItem) {\n      return menuItem && menuItem.text === '-';\n    };\n    var trimMenuItems = function (menuItems) {\n      var menuItems2 = filter(menuItems, function (menuItem, i) {\n        return !isSeparator$1(menuItem) || !isSeparator$1(menuItems[i - 1]);\n      });\n      return filter(menuItems2, function (menuItem, i) {\n        return !isSeparator$1(menuItem) || i > 0 && i < menuItems2.length - 1;\n      });\n    };\n    var createContextMenuItems = function (editor, context) {\n      var outputMenuItems = [{ text: '-' }];\n      var menuItems = global$2.grep(editor.menuItems, function (menuItem) {\n        return menuItem.context === context;\n      });\n      global$2.each(menuItems, function (menuItem) {\n        if (menuItem.separator === 'before') {\n          outputMenuItems.push({ text: '|' });\n        }\n        if (menuItem.prependToContext) {\n          outputMenuItems.unshift(menuItem);\n        } else {\n          outputMenuItems.push(menuItem);\n        }\n        if (menuItem.separator === 'after') {\n          outputMenuItems.push({ text: '|' });\n        }\n      });\n      return outputMenuItems;\n    };\n    var createInsertMenu = function (editor) {\n      var insertButtonItems = editor.settings.insert_button_items;\n      if (insertButtonItems) {\n        return trimMenuItems(createCustomMenuItems(editor, insertButtonItems));\n      } else {\n        return trimMenuItems(createContextMenuItems(editor, 'insert'));\n      }\n    };\n    var registerButtons$3 = function (editor) {\n      editor.addButton('insert', {\n        type: 'menubutton',\n        icon: 'insert',\n        menu: [],\n        oncreatemenu: function () {\n          this.menu.add(createInsertMenu(editor));\n          this.menu.renderNew();\n        }\n      });\n    };\n    var register$5 = function (editor) {\n      registerButtons$3(editor);\n    };\n    var InsertButton = { register: register$5 };\n\n    var registerFormatButtons = function (editor) {\n      global$2.each({\n        bold: 'Bold',\n        italic: 'Italic',\n        underline: 'Underline',\n        strikethrough: 'Strikethrough',\n        subscript: 'Subscript',\n        superscript: 'Superscript'\n      }, function (text, name) {\n        editor.addButton(name, {\n          active: false,\n          tooltip: text,\n          onPostRender: postRenderFormatToggle(editor, name),\n          onclick: toggleFormat(editor, name)\n        });\n      });\n    };\n    var registerCommandButtons = function (editor) {\n      global$2.each({\n        outdent: [\n          'Decrease indent',\n          'Outdent'\n        ],\n        indent: [\n          'Increase indent',\n          'Indent'\n        ],\n        cut: [\n          'Cut',\n          'Cut'\n        ],\n        copy: [\n          'Copy',\n          'Copy'\n        ],\n        paste: [\n          'Paste',\n          'Paste'\n        ],\n        help: [\n          'Help',\n          'mceHelp'\n        ],\n        selectall: [\n          'Select all',\n          'SelectAll'\n        ],\n        visualaid: [\n          'Visual aids',\n          'mceToggleVisualAid'\n        ],\n        newdocument: [\n          'New document',\n          'mceNewDocument'\n        ],\n        removeformat: [\n          'Clear formatting',\n          'RemoveFormat'\n        ],\n        remove: [\n          'Remove',\n          'Delete'\n        ]\n      }, function (item, name) {\n        editor.addButton(name, {\n          tooltip: item[0],\n          cmd: item[1]\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$2.each({\n        blockquote: [\n          'Blockquote',\n          'mceBlockQuote'\n        ],\n        subscript: [\n          'Subscript',\n          'Subscript'\n        ],\n        superscript: [\n          'Superscript',\n          'Superscript'\n        ]\n      }, function (item, name) {\n        editor.addButton(name, {\n          active: false,\n          tooltip: item[0],\n          cmd: item[1],\n          onPostRender: postRenderFormatToggle(editor, name)\n        });\n      });\n    };\n    var registerButtons$4 = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems$1 = function (editor) {\n      global$2.each({\n        bold: [\n          'Bold',\n          'Bold',\n          'Meta+B'\n        ],\n        italic: [\n          'Italic',\n          'Italic',\n          'Meta+I'\n        ],\n        underline: [\n          'Underline',\n          'Underline',\n          'Meta+U'\n        ],\n        strikethrough: [\n          'Strikethrough',\n          'Strikethrough'\n        ],\n        subscript: [\n          'Subscript',\n          'Subscript'\n        ],\n        superscript: [\n          'Superscript',\n          'Superscript'\n        ],\n        removeformat: [\n          'Clear formatting',\n          'RemoveFormat'\n        ],\n        newdocument: [\n          'New document',\n          'mceNewDocument'\n        ],\n        cut: [\n          'Cut',\n          'Cut',\n          'Meta+X'\n        ],\n        copy: [\n          'Copy',\n          'Copy',\n          'Meta+C'\n        ],\n        paste: [\n          'Paste',\n          'Paste',\n          'Meta+V'\n        ],\n        selectall: [\n          'Select all',\n          'SelectAll',\n          'Meta+A'\n        ]\n      }, function (item, name) {\n        editor.addMenuItem(name, {\n          text: item[0],\n          icon: name,\n          shortcut: item[2],\n          cmd: item[1]\n        });\n      });\n      editor.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'code',\n        onclick: toggleFormat(editor, 'code')\n      });\n    };\n    var register$6 = function (editor) {\n      registerButtons$4(editor);\n      registerMenuItems$1(editor);\n    };\n    var SimpleControls = { register: register$6 };\n\n    var toggleUndoRedoState = function (editor, type) {\n      return function () {\n        var self = this;\n        var checkState = function () {\n          var typeFn = type === 'redo' ? 'hasRedo' : 'hasUndo';\n          return editor.undoManager ? editor.undoManager[typeFn]() : false;\n        };\n        self.disabled(!checkState());\n        editor.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', function () {\n          self.disabled(editor.readonly || !checkState());\n        });\n      };\n    };\n    var registerMenuItems$2 = function (editor) {\n      editor.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onPostRender: toggleUndoRedoState(editor, 'undo'),\n        cmd: 'undo'\n      });\n      editor.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onPostRender: toggleUndoRedoState(editor, 'redo'),\n        cmd: 'redo'\n      });\n    };\n    var registerButtons$5 = function (editor) {\n      editor.addButton('undo', {\n        tooltip: 'Undo',\n        onPostRender: toggleUndoRedoState(editor, 'undo'),\n        cmd: 'undo'\n      });\n      editor.addButton('redo', {\n        tooltip: 'Redo',\n        onPostRender: toggleUndoRedoState(editor, 'redo'),\n        cmd: 'redo'\n      });\n    };\n    var register$7 = function (editor) {\n      registerMenuItems$2(editor);\n      registerButtons$5(editor);\n    };\n    var UndoRedo = { register: register$7 };\n\n    var toggleVisualAidState = function (editor) {\n      return function () {\n        var self = this;\n        editor.on('VisualAid', function (e) {\n          self.active(e.hasVisual);\n        });\n        self.active(editor.hasVisual);\n      };\n    };\n    var registerMenuItems$3 = function (editor) {\n      editor.addMenuItem('visualaid', {\n        text: 'Visual aids',\n        selectable: true,\n        onPostRender: toggleVisualAidState(editor),\n        cmd: 'mceToggleVisualAid'\n      });\n    };\n    var register$8 = function (editor) {\n      registerMenuItems$3(editor);\n    };\n    var VisualAid = { register: register$8 };\n\n    var setupEnvironment = function () {\n      Widget.tooltips = !global$8.iOS;\n      Control$1.translate = function (text) {\n        return global$1.translate(text);\n      };\n    };\n    var setupUiContainer = function (editor) {\n      if (editor.settings.ui_container) {\n        global$8.container = descendant(Element.fromDom(domGlobals.document.body), editor.settings.ui_container).fold(constant(null), function (elm) {\n          return elm.dom();\n        });\n      }\n    };\n    var setupRtlMode = function (editor) {\n      if (editor.rtl) {\n        Control$1.rtl = true;\n      }\n    };\n    var setupHideFloatPanels = function (editor) {\n      editor.on('mousedown progressstate', function () {\n        FloatPanel.hideAll();\n      });\n    };\n    var setup$1 = function (editor) {\n      setupRtlMode(editor);\n      setupHideFloatPanels(editor);\n      setupUiContainer(editor);\n      setupEnvironment();\n      FormatSelect.register(editor);\n      Align.register(editor);\n      SimpleControls.register(editor);\n      UndoRedo.register(editor);\n      FontSizeSelect.register(editor);\n      FontSelect.register(editor);\n      Formats.register(editor);\n      VisualAid.register(editor);\n      InsertButton.register(editor);\n    };\n    var FormatControls = { setup: setup$1 };\n\n    var GridLayout = AbsoluteLayout.extend({\n      recalc: function (container) {\n        var settings, rows, cols, items, contLayoutRect, width, height, rect, ctrlLayoutRect, ctrl, x, y, posX, posY, ctrlSettings, contPaddingBox, align, spacingH, spacingV, alignH, alignV, maxX, maxY;\n        var colWidths = [];\n        var rowHeights = [];\n        var ctrlMinWidth, ctrlMinHeight, availableWidth, availableHeight, reverseRows, idx;\n        settings = container.settings;\n        items = container.items().filter(':visible');\n        contLayoutRect = container.layoutRect();\n        cols = settings.columns || Math.ceil(Math.sqrt(items.length));\n        rows = Math.ceil(items.length / cols);\n        spacingH = settings.spacingH || settings.spacing || 0;\n        spacingV = settings.spacingV || settings.spacing || 0;\n        alignH = settings.alignH || settings.align;\n        alignV = settings.alignV || settings.align;\n        contPaddingBox = container.paddingBox;\n        reverseRows = 'reverseRows' in settings ? settings.reverseRows : container.isRtl();\n        if (alignH && typeof alignH === 'string') {\n          alignH = [alignH];\n        }\n        if (alignV && typeof alignV === 'string') {\n          alignV = [alignV];\n        }\n        for (x = 0; x < cols; x++) {\n          colWidths.push(0);\n        }\n        for (y = 0; y < rows; y++) {\n          rowHeights.push(0);\n        }\n        for (y = 0; y < rows; y++) {\n          for (x = 0; x < cols; x++) {\n            ctrl = items[y * cols + x];\n            if (!ctrl) {\n              break;\n            }\n            ctrlLayoutRect = ctrl.layoutRect();\n            ctrlMinWidth = ctrlLayoutRect.minW;\n            ctrlMinHeight = ctrlLayoutRect.minH;\n            colWidths[x] = ctrlMinWidth > colWidths[x] ? ctrlMinWidth : colWidths[x];\n            rowHeights[y] = ctrlMinHeight > rowHeights[y] ? ctrlMinHeight : rowHeights[y];\n          }\n        }\n        availableWidth = contLayoutRect.innerW - contPaddingBox.left - contPaddingBox.right;\n        for (maxX = 0, x = 0; x < cols; x++) {\n          maxX += colWidths[x] + (x > 0 ? spacingH : 0);\n          availableWidth -= (x > 0 ? spacingH : 0) + colWidths[x];\n        }\n        availableHeight = contLayoutRect.innerH - contPaddingBox.top - contPaddingBox.bottom;\n        for (maxY = 0, y = 0; y < rows; y++) {\n          maxY += rowHeights[y] + (y > 0 ? spacingV : 0);\n          availableHeight -= (y > 0 ? spacingV : 0) + rowHeights[y];\n        }\n        maxX += contPaddingBox.left + contPaddingBox.right;\n        maxY += contPaddingBox.top + contPaddingBox.bottom;\n        rect = {};\n        rect.minW = maxX + (contLayoutRect.w - contLayoutRect.innerW);\n        rect.minH = maxY + (contLayoutRect.h - contLayoutRect.innerH);\n        rect.contentW = rect.minW - contLayoutRect.deltaW;\n        rect.contentH = rect.minH - contLayoutRect.deltaH;\n        rect.minW = Math.min(rect.minW, contLayoutRect.maxW);\n        rect.minH = Math.min(rect.minH, contLayoutRect.maxH);\n        rect.minW = Math.max(rect.minW, contLayoutRect.startMinWidth);\n        rect.minH = Math.max(rect.minH, contLayoutRect.startMinHeight);\n        if (contLayoutRect.autoResize && (rect.minW !== contLayoutRect.minW || rect.minH !== contLayoutRect.minH)) {\n          rect.w = rect.minW;\n          rect.h = rect.minH;\n          container.layoutRect(rect);\n          this.recalc(container);\n          if (container._lastRect === null) {\n            var parentCtrl = container.parent();\n            if (parentCtrl) {\n              parentCtrl._lastRect = null;\n              parentCtrl.recalc();\n            }\n          }\n          return;\n        }\n        if (contLayoutRect.autoResize) {\n          rect = container.layoutRect(rect);\n          rect.contentW = rect.minW - contLayoutRect.deltaW;\n          rect.contentH = rect.minH - contLayoutRect.deltaH;\n        }\n        var flexV;\n        if (settings.packV === 'start') {\n          flexV = 0;\n        } else {\n          flexV = availableHeight > 0 ? Math.floor(availableHeight / rows) : 0;\n        }\n        var totalFlex = 0;\n        var flexWidths = settings.flexWidths;\n        if (flexWidths) {\n          for (x = 0; x < flexWidths.length; x++) {\n            totalFlex += flexWidths[x];\n          }\n        } else {\n          totalFlex = cols;\n        }\n        var ratio = availableWidth / totalFlex;\n        for (x = 0; x < cols; x++) {\n          colWidths[x] += flexWidths ? flexWidths[x] * ratio : ratio;\n        }\n        posY = contPaddingBox.top;\n        for (y = 0; y < rows; y++) {\n          posX = contPaddingBox.left;\n          height = rowHeights[y] + flexV;\n          for (x = 0; x < cols; x++) {\n            if (reverseRows) {\n              idx = y * cols + cols - 1 - x;\n            } else {\n              idx = y * cols + x;\n            }\n            ctrl = items[idx];\n            if (!ctrl) {\n              break;\n            }\n            ctrlSettings = ctrl.settings;\n            ctrlLayoutRect = ctrl.layoutRect();\n            width = Math.max(colWidths[x], ctrlLayoutRect.startMinWidth);\n            ctrlLayoutRect.x = posX;\n            ctrlLayoutRect.y = posY;\n            align = ctrlSettings.alignH || (alignH ? alignH[x] || alignH[0] : null);\n            if (align === 'center') {\n              ctrlLayoutRect.x = posX + width / 2 - ctrlLayoutRect.w / 2;\n            } else if (align === 'right') {\n              ctrlLayoutRect.x = posX + width - ctrlLayoutRect.w;\n            } else if (align === 'stretch') {\n              ctrlLayoutRect.w = width;\n            }\n            align = ctrlSettings.alignV || (alignV ? alignV[x] || alignV[0] : null);\n            if (align === 'center') {\n              ctrlLayoutRect.y = posY + height / 2 - ctrlLayoutRect.h / 2;\n            } else if (align === 'bottom') {\n              ctrlLayoutRect.y = posY + height - ctrlLayoutRect.h;\n            } else if (align === 'stretch') {\n              ctrlLayoutRect.h = height;\n            }\n            ctrl.layoutRect(ctrlLayoutRect);\n            posX += width + spacingH;\n            if (ctrl.recalc) {\n              ctrl.recalc();\n            }\n          }\n          posY += height + spacingV;\n        }\n      }\n    });\n\n    var Iframe$1 = Widget.extend({\n      renderHtml: function () {\n        var self = this;\n        self.classes.add('iframe');\n        self.canFocus = false;\n        return '<iframe id=\"' + self._id + '\" class=\"' + self.classes + '\" tabindex=\"-1\" src=\"' + (self.settings.url || 'javascript:\\'\\'') + '\" frameborder=\"0\"></iframe>';\n      },\n      src: function (src) {\n        this.getEl().src = src;\n      },\n      html: function (html, callback) {\n        var self = this, body = this.getEl().contentWindow.document.body;\n        if (!body) {\n          global$7.setTimeout(function () {\n            self.html(html);\n          });\n        } else {\n          body.innerHTML = html;\n          if (callback) {\n            callback();\n          }\n        }\n        return this;\n      }\n    });\n\n    var InfoBox = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('widget').add('infobox');\n        self.canFocus = false;\n      },\n      severity: function (level) {\n        this.classes.remove('error');\n        this.classes.remove('warning');\n        this.classes.remove('success');\n        this.classes.add(level);\n      },\n      help: function (state) {\n        this.state.set('help', state);\n      },\n      renderHtml: function () {\n        var self = this, prefix = self.classPrefix;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\">' + '<div id=\"' + self._id + '-body\">' + self.encode(self.state.get('text')) + '<button role=\"button\" tabindex=\"-1\">' + '<i class=\"' + prefix + 'ico ' + prefix + 'i-help\"></i>' + '</button>' + '</div>' + '</div>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:text', function (e) {\n          self.getEl('body').firstChild.data = self.encode(e.value);\n          if (self.state.get('rendered')) {\n            self.updateLayoutRect();\n          }\n        });\n        self.state.on('change:help', function (e) {\n          self.classes.toggle('has-help', e.value);\n          if (self.state.get('rendered')) {\n            self.updateLayoutRect();\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var Label = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('widget').add('label');\n        self.canFocus = false;\n        if (settings.multiline) {\n          self.classes.add('autoscroll');\n        }\n        if (settings.strong) {\n          self.classes.add('strong');\n        }\n      },\n      initLayoutRect: function () {\n        var self = this, layoutRect = self._super();\n        if (self.settings.multiline) {\n          var size = funcs.getSize(self.getEl());\n          if (size.width > layoutRect.maxW) {\n            layoutRect.minW = layoutRect.maxW;\n            self.classes.add('multiline');\n          }\n          self.getEl().style.width = layoutRect.minW + 'px';\n          layoutRect.startMinH = layoutRect.h = layoutRect.minH = Math.min(layoutRect.maxH, funcs.getSize(self.getEl()).height);\n        }\n        return layoutRect;\n      },\n      repaint: function () {\n        var self = this;\n        if (!self.settings.multiline) {\n          self.getEl().style.lineHeight = self.layoutRect().h + 'px';\n        }\n        return self._super();\n      },\n      severity: function (level) {\n        this.classes.remove('error');\n        this.classes.remove('warning');\n        this.classes.remove('success');\n        this.classes.add(level);\n      },\n      renderHtml: function () {\n        var self = this;\n        var targetCtrl, forName, forId = self.settings.forId;\n        var text = self.settings.html ? self.settings.html : self.encode(self.state.get('text'));\n        if (!forId && (forName = self.settings.forName)) {\n          targetCtrl = self.getRoot().find('#' + forName)[0];\n          if (targetCtrl) {\n            forId = targetCtrl._id;\n          }\n        }\n        if (forId) {\n          return '<label id=\"' + self._id + '\" class=\"' + self.classes + '\"' + (forId ? ' for=\"' + forId + '\"' : '') + '>' + text + '</label>';\n        }\n        return '<span id=\"' + self._id + '\" class=\"' + self.classes + '\">' + text + '</span>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:text', function (e) {\n          self.innerHtml(self.encode(e.value));\n          if (self.state.get('rendered')) {\n            self.updateLayoutRect();\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var Toolbar$1 = Container.extend({\n      Defaults: {\n        role: 'toolbar',\n        layout: 'flow'\n      },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('toolbar');\n      },\n      postRender: function () {\n        var self = this;\n        self.items().each(function (ctrl) {\n          ctrl.classes.add('toolbar-item');\n        });\n        return self._super();\n      }\n    });\n\n    var MenuBar = Toolbar$1.extend({\n      Defaults: {\n        role: 'menubar',\n        containerCls: 'menubar',\n        ariaRoot: true,\n        defaults: { type: 'menubutton' }\n      }\n    });\n\n    function isChildOf$1(node, parent) {\n      while (node) {\n        if (parent === node) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    }\n    var MenuButton = Button.extend({\n      init: function (settings) {\n        var self = this;\n        self._renderOpen = true;\n        self._super(settings);\n        settings = self.settings;\n        self.classes.add('menubtn');\n        if (settings.fixedWidth) {\n          self.classes.add('fixed-width');\n        }\n        self.aria('haspopup', true);\n        self.state.set('menu', settings.menu || self.render());\n      },\n      showMenu: function (toggle) {\n        var self = this;\n        var menu;\n        if (self.menu && self.menu.visible() && toggle !== false) {\n          return self.hideMenu();\n        }\n        if (!self.menu) {\n          menu = self.state.get('menu') || [];\n          self.classes.add('opened');\n          if (menu.length) {\n            menu = {\n              type: 'menu',\n              animate: true,\n              items: menu\n            };\n          } else {\n            menu.type = menu.type || 'menu';\n            menu.animate = true;\n          }\n          if (!menu.renderTo) {\n            self.menu = global$4.create(menu).parent(self).renderTo();\n          } else {\n            self.menu = menu.parent(self).show().renderTo();\n          }\n          self.fire('createmenu');\n          self.menu.reflow();\n          self.menu.on('cancel', function (e) {\n            if (e.control.parent() === self.menu) {\n              e.stopPropagation();\n              self.focus();\n              self.hideMenu();\n            }\n          });\n          self.menu.on('select', function () {\n            self.focus();\n          });\n          self.menu.on('show hide', function (e) {\n            if (e.type === 'hide' && e.control.parent() === self) {\n              self.classes.remove('opened-under');\n            }\n            if (e.control === self.menu) {\n              self.activeMenu(e.type === 'show');\n              self.classes.toggle('opened', e.type === 'show');\n            }\n            self.aria('expanded', e.type === 'show');\n          }).fire('show');\n        }\n        self.menu.show();\n        self.menu.layoutRect({ w: self.layoutRect().w });\n        self.menu.repaint();\n        self.menu.moveRel(self.getEl(), self.isRtl() ? [\n          'br-tr',\n          'tr-br'\n        ] : [\n          'bl-tl',\n          'tl-bl'\n        ]);\n        var menuLayoutRect = self.menu.layoutRect();\n        var selfBottom = self.$el.offset().top + self.layoutRect().h;\n        if (selfBottom > menuLayoutRect.y && selfBottom < menuLayoutRect.y + menuLayoutRect.h) {\n          self.classes.add('opened-under');\n        }\n        self.fire('showmenu');\n      },\n      hideMenu: function () {\n        var self = this;\n        if (self.menu) {\n          self.menu.items().each(function (item) {\n            if (item.hideMenu) {\n              item.hideMenu();\n            }\n          });\n          self.menu.hide();\n        }\n      },\n      activeMenu: function (state) {\n        this.classes.toggle('active', state);\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix;\n        var icon = self.settings.icon, image;\n        var text = self.state.get('text');\n        var textHtml = '';\n        image = self.settings.image;\n        if (image) {\n          icon = 'none';\n          if (typeof image !== 'string') {\n            image = domGlobals.window.getSelection ? image[0] : image[1];\n          }\n          image = ' style=\"background-image: url(\\'' + image + '\\')\"';\n        } else {\n          image = '';\n        }\n        if (text) {\n          self.classes.add('btn-has-text');\n          textHtml = '<span class=\"' + prefix + 'txt\">' + self.encode(text) + '</span>';\n        }\n        icon = self.settings.icon ? prefix + 'ico ' + prefix + 'i-' + icon : '';\n        self.aria('role', self.parent() instanceof MenuBar ? 'menuitem' : 'button');\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" tabindex=\"-1\" aria-labelledby=\"' + id + '\">' + '<button id=\"' + id + '-open\" role=\"presentation\" type=\"button\" tabindex=\"-1\">' + (icon ? '<i class=\"' + icon + '\"' + image + '></i>' : '') + textHtml + ' <i class=\"' + prefix + 'caret\"></i>' + '</button>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        self.on('click', function (e) {\n          if (e.control === self && isChildOf$1(e.target, self.getEl())) {\n            self.focus();\n            self.showMenu(!e.aria);\n            if (e.aria) {\n              self.menu.items().filter(':visible')[0].focus();\n            }\n          }\n        });\n        self.on('mouseenter', function (e) {\n          var overCtrl = e.control;\n          var parent = self.parent();\n          var hasVisibleSiblingMenu;\n          if (overCtrl && parent && overCtrl instanceof MenuButton && overCtrl.parent() === parent) {\n            parent.items().filter('MenuButton').each(function (ctrl) {\n              if (ctrl.hideMenu && ctrl !== overCtrl) {\n                if (ctrl.menu && ctrl.menu.visible()) {\n                  hasVisibleSiblingMenu = true;\n                }\n                ctrl.hideMenu();\n              }\n            });\n            if (hasVisibleSiblingMenu) {\n              overCtrl.focus();\n              overCtrl.showMenu();\n            }\n          }\n        });\n        return self._super();\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:menu', function () {\n          if (self.menu) {\n            self.menu.remove();\n          }\n          self.menu = null;\n        });\n        return self._super();\n      },\n      remove: function () {\n        this._super();\n        if (this.menu) {\n          this.menu.remove();\n        }\n      }\n    });\n\n    var Menu = FloatPanel.extend({\n      Defaults: {\n        defaultType: 'menuitem',\n        border: 1,\n        layout: 'stack',\n        role: 'application',\n        bodyRole: 'menu',\n        ariaRoot: true\n      },\n      init: function (settings) {\n        var self = this;\n        settings.autohide = true;\n        settings.constrainToViewport = true;\n        if (typeof settings.items === 'function') {\n          settings.itemsFactory = settings.items;\n          settings.items = [];\n        }\n        if (settings.itemDefaults) {\n          var items = settings.items;\n          var i = items.length;\n          while (i--) {\n            items[i] = global$2.extend({}, settings.itemDefaults, items[i]);\n          }\n        }\n        self._super(settings);\n        self.classes.add('menu');\n        if (settings.animate && global$8.ie !== 11) {\n          self.classes.add('animate');\n        }\n      },\n      repaint: function () {\n        this.classes.toggle('menu-align', true);\n        this._super();\n        this.getEl().style.height = '';\n        this.getEl('body').style.height = '';\n        return this;\n      },\n      cancel: function () {\n        var self = this;\n        self.hideAll();\n        self.fire('select');\n      },\n      load: function () {\n        var self = this;\n        var time, factory;\n        function hideThrobber() {\n          if (self.throbber) {\n            self.throbber.hide();\n            self.throbber = null;\n          }\n        }\n        factory = self.settings.itemsFactory;\n        if (!factory) {\n          return;\n        }\n        if (!self.throbber) {\n          self.throbber = new Throbber(self.getEl('body'), true);\n          if (self.items().length === 0) {\n            self.throbber.show();\n            self.fire('loading');\n          } else {\n            self.throbber.show(100, function () {\n              self.items().remove();\n              self.fire('loading');\n            });\n          }\n          self.on('hide close', hideThrobber);\n        }\n        self.requestTime = time = new Date().getTime();\n        self.settings.itemsFactory(function (items) {\n          if (items.length === 0) {\n            self.hide();\n            return;\n          }\n          if (self.requestTime !== time) {\n            return;\n          }\n          self.getEl().style.width = '';\n          self.getEl('body').style.width = '';\n          hideThrobber();\n          self.items().remove();\n          self.getEl('body').innerHTML = '';\n          self.add(items);\n          self.renderNew();\n          self.fire('loaded');\n        });\n      },\n      hideAll: function () {\n        var self = this;\n        this.find('menuitem').exec('hideMenu');\n        return self._super();\n      },\n      preRender: function () {\n        var self = this;\n        self.items().each(function (ctrl) {\n          var settings = ctrl.settings;\n          if (settings.icon || settings.image || settings.selectable) {\n            self._hasIcons = true;\n            return false;\n          }\n        });\n        if (self.settings.itemsFactory) {\n          self.on('postrender', function () {\n            if (self.settings.itemsFactory) {\n              self.load();\n            }\n          });\n        }\n        self.on('show hide', function (e) {\n          if (e.control === self) {\n            if (e.type === 'show') {\n              global$7.setTimeout(function () {\n                self.classes.add('in');\n              }, 0);\n            } else {\n              self.classes.remove('in');\n            }\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var ListBox = MenuButton.extend({\n      init: function (settings) {\n        var self = this;\n        var values, selected, selectedText, lastItemCtrl;\n        function setSelected(menuValues) {\n          for (var i = 0; i < menuValues.length; i++) {\n            selected = menuValues[i].selected || settings.value === menuValues[i].value;\n            if (selected) {\n              selectedText = selectedText || menuValues[i].text;\n              self.state.set('value', menuValues[i].value);\n              return true;\n            }\n            if (menuValues[i].menu) {\n              if (setSelected(menuValues[i].menu)) {\n                return true;\n              }\n            }\n          }\n        }\n        self._super(settings);\n        settings = self.settings;\n        self._values = values = settings.values;\n        if (values) {\n          if (typeof settings.value !== 'undefined') {\n            setSelected(values);\n          }\n          if (!selected && values.length > 0) {\n            selectedText = values[0].text;\n            self.state.set('value', values[0].value);\n          }\n          self.state.set('menu', values);\n        }\n        self.state.set('text', settings.text || selectedText);\n        self.classes.add('listbox');\n        self.on('select', function (e) {\n          var ctrl = e.control;\n          if (lastItemCtrl) {\n            e.lastControl = lastItemCtrl;\n          }\n          if (settings.multiple) {\n            ctrl.active(!ctrl.active());\n          } else {\n            self.value(e.control.value());\n          }\n          lastItemCtrl = ctrl;\n        });\n      },\n      value: function (value) {\n        if (arguments.length === 0) {\n          return this.state.get('value');\n        }\n        if (typeof value === 'undefined') {\n          return this;\n        }\n        function valueExists(values) {\n          return exists(values, function (a) {\n            return a.menu ? valueExists(a.menu) : a.value === value;\n          });\n        }\n        if (this.settings.values) {\n          if (valueExists(this.settings.values)) {\n            this.state.set('value', value);\n          } else if (value === null) {\n            this.state.set('value', null);\n          }\n        } else {\n          this.state.set('value', value);\n        }\n        return this;\n      },\n      bindStates: function () {\n        var self = this;\n        function activateMenuItemsByValue(menu, value) {\n          if (menu instanceof Menu) {\n            menu.items().each(function (ctrl) {\n              if (!ctrl.hasMenus()) {\n                ctrl.active(ctrl.value() === value);\n              }\n            });\n          }\n        }\n        function getSelectedItem(menuValues, value) {\n          var selectedItem;\n          if (!menuValues) {\n            return;\n          }\n          for (var i = 0; i < menuValues.length; i++) {\n            if (menuValues[i].value === value) {\n              return menuValues[i];\n            }\n            if (menuValues[i].menu) {\n              selectedItem = getSelectedItem(menuValues[i].menu, value);\n              if (selectedItem) {\n                return selectedItem;\n              }\n            }\n          }\n        }\n        self.on('show', function (e) {\n          activateMenuItemsByValue(e.control, self.value());\n        });\n        self.state.on('change:value', function (e) {\n          var selectedItem = getSelectedItem(self.state.get('menu'), e.value);\n          if (selectedItem) {\n            self.text(selectedItem.text);\n          } else {\n            self.text(self.settings.text);\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var toggleTextStyle = function (ctrl, state) {\n      var textStyle = ctrl._textStyle;\n      if (textStyle) {\n        var textElm = ctrl.getEl('text');\n        textElm.setAttribute('style', textStyle);\n        if (state) {\n          textElm.style.color = '';\n          textElm.style.backgroundColor = '';\n        }\n      }\n    };\n    var MenuItem = Widget.extend({\n      Defaults: {\n        border: 0,\n        role: 'menuitem'\n      },\n      init: function (settings) {\n        var self = this;\n        var text;\n        self._super(settings);\n        settings = self.settings;\n        self.classes.add('menu-item');\n        if (settings.menu) {\n          self.classes.add('menu-item-expand');\n        }\n        if (settings.preview) {\n          self.classes.add('menu-item-preview');\n        }\n        text = self.state.get('text');\n        if (text === '-' || text === '|') {\n          self.classes.add('menu-item-sep');\n          self.aria('role', 'separator');\n          self.state.set('text', '-');\n        }\n        if (settings.selectable) {\n          self.aria('role', 'menuitemcheckbox');\n          self.classes.add('menu-item-checkbox');\n          settings.icon = 'selected';\n        }\n        if (!settings.preview && !settings.selectable) {\n          self.classes.add('menu-item-normal');\n        }\n        self.on('mousedown', function (e) {\n          e.preventDefault();\n        });\n        if (settings.menu && !settings.ariaHideMenu) {\n          self.aria('haspopup', true);\n        }\n      },\n      hasMenus: function () {\n        return !!this.settings.menu;\n      },\n      showMenu: function () {\n        var self = this;\n        var settings = self.settings;\n        var menu;\n        var parent = self.parent();\n        parent.items().each(function (ctrl) {\n          if (ctrl !== self) {\n            ctrl.hideMenu();\n          }\n        });\n        if (settings.menu) {\n          menu = self.menu;\n          if (!menu) {\n            menu = settings.menu;\n            if (menu.length) {\n              menu = {\n                type: 'menu',\n                items: menu\n              };\n            } else {\n              menu.type = menu.type || 'menu';\n            }\n            if (parent.settings.itemDefaults) {\n              menu.itemDefaults = parent.settings.itemDefaults;\n            }\n            menu = self.menu = global$4.create(menu).parent(self).renderTo();\n            menu.reflow();\n            menu.on('cancel', function (e) {\n              e.stopPropagation();\n              self.focus();\n              menu.hide();\n            });\n            menu.on('show hide', function (e) {\n              if (e.control.items) {\n                e.control.items().each(function (ctrl) {\n                  ctrl.active(ctrl.settings.selected);\n                });\n              }\n            }).fire('show');\n            menu.on('hide', function (e) {\n              if (e.control === menu) {\n                self.classes.remove('selected');\n              }\n            });\n            menu.submenu = true;\n          } else {\n            menu.show();\n          }\n          menu._parentMenu = parent;\n          menu.classes.add('menu-sub');\n          var rel = menu.testMoveRel(self.getEl(), self.isRtl() ? [\n            'tl-tr',\n            'bl-br',\n            'tr-tl',\n            'br-bl'\n          ] : [\n            'tr-tl',\n            'br-bl',\n            'tl-tr',\n            'bl-br'\n          ]);\n          menu.moveRel(self.getEl(), rel);\n          menu.rel = rel;\n          rel = 'menu-sub-' + rel;\n          menu.classes.remove(menu._lastRel).add(rel);\n          menu._lastRel = rel;\n          self.classes.add('selected');\n          self.aria('expanded', true);\n        }\n      },\n      hideMenu: function () {\n        var self = this;\n        if (self.menu) {\n          self.menu.items().each(function (item) {\n            if (item.hideMenu) {\n              item.hideMenu();\n            }\n          });\n          self.menu.hide();\n          self.aria('expanded', false);\n        }\n        return self;\n      },\n      renderHtml: function () {\n        var self = this;\n        var id = self._id;\n        var settings = self.settings;\n        var prefix = self.classPrefix;\n        var text = self.state.get('text');\n        var icon = self.settings.icon, image = '', shortcut = settings.shortcut;\n        var url = self.encode(settings.url), iconHtml = '';\n        function convertShortcut(shortcut) {\n          var i, value, replace = {};\n          if (global$8.mac) {\n            replace = {\n              alt: '&#x2325;',\n              ctrl: '&#x2318;',\n              shift: '&#x21E7;',\n              meta: '&#x2318;'\n            };\n          } else {\n            replace = { meta: 'Ctrl' };\n          }\n          shortcut = shortcut.split('+');\n          for (i = 0; i < shortcut.length; i++) {\n            value = replace[shortcut[i].toLowerCase()];\n            if (value) {\n              shortcut[i] = value;\n            }\n          }\n          return shortcut.join('+');\n        }\n        function escapeRegExp(str) {\n          return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n        }\n        function markMatches(text) {\n          var match = settings.match || '';\n          return match ? text.replace(new RegExp(escapeRegExp(match), 'gi'), function (match) {\n            return '!mce~match[' + match + ']mce~match!';\n          }) : text;\n        }\n        function boldMatches(text) {\n          return text.replace(new RegExp(escapeRegExp('!mce~match['), 'g'), '<b>').replace(new RegExp(escapeRegExp(']mce~match!'), 'g'), '</b>');\n        }\n        if (icon) {\n          self.parent().classes.add('menu-has-icons');\n        }\n        if (settings.image) {\n          image = ' style=\"background-image: url(\\'' + settings.image + '\\')\"';\n        }\n        if (shortcut) {\n          shortcut = convertShortcut(shortcut);\n        }\n        icon = prefix + 'ico ' + prefix + 'i-' + (self.settings.icon || 'none');\n        iconHtml = text !== '-' ? '<i class=\"' + icon + '\"' + image + '></i>\\xA0' : '';\n        text = boldMatches(self.encode(markMatches(text)));\n        url = boldMatches(self.encode(markMatches(url)));\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" tabindex=\"-1\">' + iconHtml + (text !== '-' ? '<span id=\"' + id + '-text\" class=\"' + prefix + 'text\">' + text + '</span>' : '') + (shortcut ? '<div id=\"' + id + '-shortcut\" class=\"' + prefix + 'menu-shortcut\">' + shortcut + '</div>' : '') + (settings.menu ? '<div class=\"' + prefix + 'caret\"></div>' : '') + (url ? '<div class=\"' + prefix + 'menu-item-link\">' + url + '</div>' : '') + '</div>';\n      },\n      postRender: function () {\n        var self = this, settings = self.settings;\n        var textStyle = settings.textStyle;\n        if (typeof textStyle === 'function') {\n          textStyle = textStyle.call(this);\n        }\n        if (textStyle) {\n          var textElm = self.getEl('text');\n          if (textElm) {\n            textElm.setAttribute('style', textStyle);\n            self._textStyle = textStyle;\n          }\n        }\n        self.on('mouseenter click', function (e) {\n          if (e.control === self) {\n            if (!settings.menu && e.type === 'click') {\n              self.fire('select');\n              global$7.requestAnimationFrame(function () {\n                self.parent().hideAll();\n              });\n            } else {\n              self.showMenu();\n              if (e.aria) {\n                self.menu.focus(true);\n              }\n            }\n          }\n        });\n        self._super();\n        return self;\n      },\n      hover: function () {\n        var self = this;\n        self.parent().items().each(function (ctrl) {\n          ctrl.classes.remove('selected');\n        });\n        self.classes.toggle('selected', true);\n        return self;\n      },\n      active: function (state) {\n        toggleTextStyle(this, state);\n        if (typeof state !== 'undefined') {\n          this.aria('checked', state);\n        }\n        return this._super(state);\n      },\n      remove: function () {\n        this._super();\n        if (this.menu) {\n          this.menu.remove();\n        }\n      }\n    });\n\n    var Radio = Checkbox.extend({\n      Defaults: {\n        classes: 'radio',\n        role: 'radio'\n      }\n    });\n\n    var ResizeHandle = Widget.extend({\n      renderHtml: function () {\n        var self = this, prefix = self.classPrefix;\n        self.classes.add('resizehandle');\n        if (self.settings.direction === 'both') {\n          self.classes.add('resizehandle-both');\n        }\n        self.canFocus = false;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\">' + '<i class=\"' + prefix + 'ico ' + prefix + 'i-resize\"></i>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        self._super();\n        self.resizeDragHelper = new DragHelper(this._id, {\n          start: function () {\n            self.fire('ResizeStart');\n          },\n          drag: function (e) {\n            if (self.settings.direction !== 'both') {\n              e.deltaX = 0;\n            }\n            self.fire('Resize', e);\n          },\n          stop: function () {\n            self.fire('ResizeEnd');\n          }\n        });\n      },\n      remove: function () {\n        if (this.resizeDragHelper) {\n          this.resizeDragHelper.destroy();\n        }\n        return this._super();\n      }\n    });\n\n    function createOptions(options) {\n      var strOptions = '';\n      if (options) {\n        for (var i = 0; i < options.length; i++) {\n          strOptions += '<option value=\"' + options[i] + '\">' + options[i] + '</option>';\n        }\n      }\n      return strOptions;\n    }\n    var SelectBox = Widget.extend({\n      Defaults: {\n        classes: 'selectbox',\n        role: 'selectbox',\n        options: []\n      },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        if (self.settings.size) {\n          self.size = self.settings.size;\n        }\n        if (self.settings.options) {\n          self._options = self.settings.options;\n        }\n        self.on('keydown', function (e) {\n          var rootControl;\n          if (e.keyCode === 13) {\n            e.preventDefault();\n            self.parents().reverse().each(function (ctrl) {\n              if (ctrl.toJSON) {\n                rootControl = ctrl;\n                return false;\n              }\n            });\n            self.fire('submit', { data: rootControl.toJSON() });\n          }\n        });\n      },\n      options: function (state) {\n        if (!arguments.length) {\n          return this.state.get('options');\n        }\n        this.state.set('options', state);\n        return this;\n      },\n      renderHtml: function () {\n        var self = this;\n        var options, size = '';\n        options = createOptions(self._options);\n        if (self.size) {\n          size = ' size = \"' + self.size + '\"';\n        }\n        return '<select id=\"' + self._id + '\" class=\"' + self.classes + '\"' + size + '>' + options + '</select>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:options', function (e) {\n          self.getEl().innerHTML = createOptions(e.value);\n        });\n        return self._super();\n      }\n    });\n\n    function constrain(value, minVal, maxVal) {\n      if (value < minVal) {\n        value = minVal;\n      }\n      if (value > maxVal) {\n        value = maxVal;\n      }\n      return value;\n    }\n    function setAriaProp(el, name, value) {\n      el.setAttribute('aria-' + name, value);\n    }\n    function updateSliderHandle(ctrl, value) {\n      var maxHandlePos, shortSizeName, sizeName, stylePosName, styleValue, handleEl;\n      if (ctrl.settings.orientation === 'v') {\n        stylePosName = 'top';\n        sizeName = 'height';\n        shortSizeName = 'h';\n      } else {\n        stylePosName = 'left';\n        sizeName = 'width';\n        shortSizeName = 'w';\n      }\n      handleEl = ctrl.getEl('handle');\n      maxHandlePos = (ctrl.layoutRect()[shortSizeName] || 100) - funcs.getSize(handleEl)[sizeName];\n      styleValue = maxHandlePos * ((value - ctrl._minValue) / (ctrl._maxValue - ctrl._minValue)) + 'px';\n      handleEl.style[stylePosName] = styleValue;\n      handleEl.style.height = ctrl.layoutRect().h + 'px';\n      setAriaProp(handleEl, 'valuenow', value);\n      setAriaProp(handleEl, 'valuetext', '' + ctrl.settings.previewFilter(value));\n      setAriaProp(handleEl, 'valuemin', ctrl._minValue);\n      setAriaProp(handleEl, 'valuemax', ctrl._maxValue);\n    }\n    var Slider = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        if (!settings.previewFilter) {\n          settings.previewFilter = function (value) {\n            return Math.round(value * 100) / 100;\n          };\n        }\n        self._super(settings);\n        self.classes.add('slider');\n        if (settings.orientation === 'v') {\n          self.classes.add('vertical');\n        }\n        self._minValue = isNumber(settings.minValue) ? settings.minValue : 0;\n        self._maxValue = isNumber(settings.maxValue) ? settings.maxValue : 100;\n        self._initValue = self.state.get('value');\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix;\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\">' + '<div id=\"' + id + '-handle\" class=\"' + prefix + 'slider-handle\" role=\"slider\" tabindex=\"-1\"></div>' + '</div>';\n      },\n      reset: function () {\n        this.value(this._initValue).repaint();\n      },\n      postRender: function () {\n        var self = this;\n        var minValue, maxValue, screenCordName, stylePosName, sizeName, shortSizeName;\n        function toFraction(min, max, val) {\n          return (val + min) / (max - min);\n        }\n        function fromFraction(min, max, val) {\n          return val * (max - min) - min;\n        }\n        function handleKeyboard(minValue, maxValue) {\n          function alter(delta) {\n            var value;\n            value = self.value();\n            value = fromFraction(minValue, maxValue, toFraction(minValue, maxValue, value) + delta * 0.05);\n            value = constrain(value, minValue, maxValue);\n            self.value(value);\n            self.fire('dragstart', { value: value });\n            self.fire('drag', { value: value });\n            self.fire('dragend', { value: value });\n          }\n          self.on('keydown', function (e) {\n            switch (e.keyCode) {\n            case 37:\n            case 38:\n              alter(-1);\n              break;\n            case 39:\n            case 40:\n              alter(1);\n              break;\n            }\n          });\n        }\n        function handleDrag(minValue, maxValue, handleEl) {\n          var startPos, startHandlePos, maxHandlePos, handlePos, value;\n          self._dragHelper = new DragHelper(self._id, {\n            handle: self._id + '-handle',\n            start: function (e) {\n              startPos = e[screenCordName];\n              startHandlePos = parseInt(self.getEl('handle').style[stylePosName], 10);\n              maxHandlePos = (self.layoutRect()[shortSizeName] || 100) - funcs.getSize(handleEl)[sizeName];\n              self.fire('dragstart', { value: value });\n            },\n            drag: function (e) {\n              var delta = e[screenCordName] - startPos;\n              handlePos = constrain(startHandlePos + delta, 0, maxHandlePos);\n              handleEl.style[stylePosName] = handlePos + 'px';\n              value = minValue + handlePos / maxHandlePos * (maxValue - minValue);\n              self.value(value);\n              self.tooltip().text('' + self.settings.previewFilter(value)).show().moveRel(handleEl, 'bc tc');\n              self.fire('drag', { value: value });\n            },\n            stop: function () {\n              self.tooltip().hide();\n              self.fire('dragend', { value: value });\n            }\n          });\n        }\n        minValue = self._minValue;\n        maxValue = self._maxValue;\n        if (self.settings.orientation === 'v') {\n          screenCordName = 'screenY';\n          stylePosName = 'top';\n          sizeName = 'height';\n          shortSizeName = 'h';\n        } else {\n          screenCordName = 'screenX';\n          stylePosName = 'left';\n          sizeName = 'width';\n          shortSizeName = 'w';\n        }\n        self._super();\n        handleKeyboard(minValue, maxValue);\n        handleDrag(minValue, maxValue, self.getEl('handle'));\n      },\n      repaint: function () {\n        this._super();\n        updateSliderHandle(this, this.value());\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:value', function (e) {\n          updateSliderHandle(self, e.value);\n        });\n        return self._super();\n      }\n    });\n\n    var Spacer = Widget.extend({\n      renderHtml: function () {\n        var self = this;\n        self.classes.add('spacer');\n        self.canFocus = false;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\"></div>';\n      }\n    });\n\n    var SplitButton = MenuButton.extend({\n      Defaults: {\n        classes: 'widget btn splitbtn',\n        role: 'button'\n      },\n      repaint: function () {\n        var self = this;\n        var elm = self.getEl();\n        var rect = self.layoutRect();\n        var mainButtonElm, menuButtonElm;\n        self._super();\n        mainButtonElm = elm.firstChild;\n        menuButtonElm = elm.lastChild;\n        global$9(mainButtonElm).css({\n          width: rect.w - funcs.getSize(menuButtonElm).width,\n          height: rect.h - 2\n        });\n        global$9(menuButtonElm).css({ height: rect.h - 2 });\n        return self;\n      },\n      activeMenu: function (state) {\n        var self = this;\n        global$9(self.getEl().lastChild).toggleClass(self.classPrefix + 'active', state);\n      },\n      renderHtml: function () {\n        var self = this;\n        var id = self._id;\n        var prefix = self.classPrefix;\n        var image;\n        var icon = self.state.get('icon');\n        var text = self.state.get('text');\n        var settings = self.settings;\n        var textHtml = '', ariaPressed;\n        image = settings.image;\n        if (image) {\n          icon = 'none';\n          if (typeof image !== 'string') {\n            image = domGlobals.window.getSelection ? image[0] : image[1];\n          }\n          image = ' style=\"background-image: url(\\'' + image + '\\')\"';\n        } else {\n          image = '';\n        }\n        icon = settings.icon ? prefix + 'ico ' + prefix + 'i-' + icon : '';\n        if (text) {\n          self.classes.add('btn-has-text');\n          textHtml = '<span class=\"' + prefix + 'txt\">' + self.encode(text) + '</span>';\n        }\n        ariaPressed = typeof settings.active === 'boolean' ? ' aria-pressed=\"' + settings.active + '\"' : '';\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" role=\"button\"' + ariaPressed + ' tabindex=\"-1\">' + '<button type=\"button\" hidefocus=\"1\" tabindex=\"-1\">' + (icon ? '<i class=\"' + icon + '\"' + image + '></i>' : '') + textHtml + '</button>' + '<button type=\"button\" class=\"' + prefix + 'open\" hidefocus=\"1\" tabindex=\"-1\">' + (self._menuBtnText ? (icon ? '\\xA0' : '') + self._menuBtnText : '') + ' <i class=\"' + prefix + 'caret\"></i>' + '</button>' + '</div>';\n      },\n      postRender: function () {\n        var self = this, onClickHandler = self.settings.onclick;\n        self.on('click', function (e) {\n          var node = e.target;\n          if (e.control === this) {\n            while (node) {\n              if (e.aria && e.aria.key !== 'down' || node.nodeName === 'BUTTON' && node.className.indexOf('open') === -1) {\n                e.stopImmediatePropagation();\n                if (onClickHandler) {\n                  onClickHandler.call(this, e);\n                }\n                return;\n              }\n              node = node.parentNode;\n            }\n          }\n        });\n        delete self.settings.onclick;\n        return self._super();\n      }\n    });\n\n    var StackLayout = FlowLayout.extend({\n      Defaults: {\n        containerClass: 'stack-layout',\n        controlClass: 'stack-layout-item',\n        endClass: 'break'\n      },\n      isNative: function () {\n        return true;\n      }\n    });\n\n    var TabPanel = Panel.extend({\n      Defaults: {\n        layout: 'absolute',\n        defaults: { type: 'panel' }\n      },\n      activateTab: function (idx) {\n        var activeTabElm;\n        if (this.activeTabId) {\n          activeTabElm = this.getEl(this.activeTabId);\n          global$9(activeTabElm).removeClass(this.classPrefix + 'active');\n          activeTabElm.setAttribute('aria-selected', 'false');\n        }\n        this.activeTabId = 't' + idx;\n        activeTabElm = this.getEl('t' + idx);\n        activeTabElm.setAttribute('aria-selected', 'true');\n        global$9(activeTabElm).addClass(this.classPrefix + 'active');\n        this.items()[idx].show().fire('showtab');\n        this.reflow();\n        this.items().each(function (item, i) {\n          if (idx !== i) {\n            item.hide();\n          }\n        });\n      },\n      renderHtml: function () {\n        var self = this;\n        var layout = self._layout;\n        var tabsHtml = '';\n        var prefix = self.classPrefix;\n        self.preRender();\n        layout.preRender(self);\n        self.items().each(function (ctrl, i) {\n          var id = self._id + '-t' + i;\n          ctrl.aria('role', 'tabpanel');\n          ctrl.aria('labelledby', id);\n          tabsHtml += '<div id=\"' + id + '\" class=\"' + prefix + 'tab\" ' + 'unselectable=\"on\" role=\"tab\" aria-controls=\"' + ctrl._id + '\" aria-selected=\"false\" tabIndex=\"-1\">' + self.encode(ctrl.settings.title) + '</div>';\n        });\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\" hidefocus=\"1\" tabindex=\"-1\">' + '<div id=\"' + self._id + '-head\" class=\"' + prefix + 'tabs\" role=\"tablist\">' + tabsHtml + '</div>' + '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + layout.renderHtml(self) + '</div>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        self._super();\n        self.settings.activeTab = self.settings.activeTab || 0;\n        self.activateTab(self.settings.activeTab);\n        this.on('click', function (e) {\n          var targetParent = e.target.parentNode;\n          if (targetParent && targetParent.id === self._id + '-head') {\n            var i = targetParent.childNodes.length;\n            while (i--) {\n              if (targetParent.childNodes[i] === e.target) {\n                self.activateTab(i);\n              }\n            }\n          }\n        });\n      },\n      initLayoutRect: function () {\n        var self = this;\n        var rect, minW, minH;\n        minW = funcs.getSize(self.getEl('head')).width;\n        minW = minW < 0 ? 0 : minW;\n        minH = 0;\n        self.items().each(function (item) {\n          minW = Math.max(minW, item.layoutRect().minW);\n          minH = Math.max(minH, item.layoutRect().minH);\n        });\n        self.items().each(function (ctrl) {\n          ctrl.settings.x = 0;\n          ctrl.settings.y = 0;\n          ctrl.settings.w = minW;\n          ctrl.settings.h = minH;\n          ctrl.layoutRect({\n            x: 0,\n            y: 0,\n            w: minW,\n            h: minH\n          });\n        });\n        var headH = funcs.getSize(self.getEl('head')).height;\n        self.settings.minWidth = minW;\n        self.settings.minHeight = minH + headH;\n        rect = self._super();\n        rect.deltaH += headH;\n        rect.innerH = rect.h - rect.deltaH;\n        return rect;\n      }\n    });\n\n    var TextBox = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('textbox');\n        if (settings.multiline) {\n          self.classes.add('multiline');\n        } else {\n          self.on('keydown', function (e) {\n            var rootControl;\n            if (e.keyCode === 13) {\n              e.preventDefault();\n              self.parents().reverse().each(function (ctrl) {\n                if (ctrl.toJSON) {\n                  rootControl = ctrl;\n                  return false;\n                }\n              });\n              self.fire('submit', { data: rootControl.toJSON() });\n            }\n          });\n          self.on('keyup', function (e) {\n            self.state.set('value', e.target.value);\n          });\n        }\n      },\n      repaint: function () {\n        var self = this;\n        var style, rect, borderBox, borderW, borderH = 0, lastRepaintRect;\n        style = self.getEl().style;\n        rect = self._layoutRect;\n        lastRepaintRect = self._lastRepaintRect || {};\n        var doc = domGlobals.document;\n        if (!self.settings.multiline && doc.all && (!doc.documentMode || doc.documentMode <= 8)) {\n          style.lineHeight = rect.h - borderH + 'px';\n        }\n        borderBox = self.borderBox;\n        borderW = borderBox.left + borderBox.right + 8;\n        borderH = borderBox.top + borderBox.bottom + (self.settings.multiline ? 8 : 0);\n        if (rect.x !== lastRepaintRect.x) {\n          style.left = rect.x + 'px';\n          lastRepaintRect.x = rect.x;\n        }\n        if (rect.y !== lastRepaintRect.y) {\n          style.top = rect.y + 'px';\n          lastRepaintRect.y = rect.y;\n        }\n        if (rect.w !== lastRepaintRect.w) {\n          style.width = rect.w - borderW + 'px';\n          lastRepaintRect.w = rect.w;\n        }\n        if (rect.h !== lastRepaintRect.h) {\n          style.height = rect.h - borderH + 'px';\n          lastRepaintRect.h = rect.h;\n        }\n        self._lastRepaintRect = lastRepaintRect;\n        self.fire('repaint', {}, false);\n        return self;\n      },\n      renderHtml: function () {\n        var self = this;\n        var settings = self.settings;\n        var attrs, elm;\n        attrs = {\n          id: self._id,\n          hidefocus: '1'\n        };\n        global$2.each([\n          'rows',\n          'spellcheck',\n          'maxLength',\n          'size',\n          'readonly',\n          'min',\n          'max',\n          'step',\n          'list',\n          'pattern',\n          'placeholder',\n          'required',\n          'multiple'\n        ], function (name) {\n          attrs[name] = settings[name];\n        });\n        if (self.disabled()) {\n          attrs.disabled = 'disabled';\n        }\n        if (settings.subtype) {\n          attrs.type = settings.subtype;\n        }\n        elm = funcs.create(settings.multiline ? 'textarea' : 'input', attrs);\n        elm.value = self.state.get('value');\n        elm.className = self.classes.toString();\n        return elm.outerHTML;\n      },\n      value: function (value) {\n        if (arguments.length) {\n          this.state.set('value', value);\n          return this;\n        }\n        if (this.state.get('rendered')) {\n          this.state.set('value', this.getEl().value);\n        }\n        return this.state.get('value');\n      },\n      postRender: function () {\n        var self = this;\n        self.getEl().value = self.state.get('value');\n        self._super();\n        self.$el.on('change', function (e) {\n          self.state.set('value', e.target.value);\n          self.fire('change', e);\n        });\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:value', function (e) {\n          if (self.getEl().value !== e.value) {\n            self.getEl().value = e.value;\n          }\n        });\n        self.state.on('change:disabled', function (e) {\n          self.getEl().disabled = e.value;\n        });\n        return self._super();\n      },\n      remove: function () {\n        this.$el.off();\n        this._super();\n      }\n    });\n\n    var getApi = function () {\n      return {\n        Selector: Selector,\n        Collection: Collection$2,\n        ReflowQueue: ReflowQueue,\n        Control: Control$1,\n        Factory: global$4,\n        KeyboardNavigation: KeyboardNavigation,\n        Container: Container,\n        DragHelper: DragHelper,\n        Scrollable: Scrollable,\n        Panel: Panel,\n        Movable: Movable,\n        Resizable: Resizable,\n        FloatPanel: FloatPanel,\n        Window: Window,\n        MessageBox: MessageBox,\n        Tooltip: Tooltip,\n        Widget: Widget,\n        Progress: Progress,\n        Notification: Notification,\n        Layout: Layout,\n        AbsoluteLayout: AbsoluteLayout,\n        Button: Button,\n        ButtonGroup: ButtonGroup,\n        Checkbox: Checkbox,\n        ComboBox: ComboBox,\n        ColorBox: ColorBox,\n        PanelButton: PanelButton,\n        ColorButton: ColorButton,\n        ColorPicker: ColorPicker,\n        Path: Path,\n        ElementPath: ElementPath,\n        FormItem: FormItem,\n        Form: Form,\n        FieldSet: FieldSet,\n        FilePicker: FilePicker,\n        FitLayout: FitLayout,\n        FlexLayout: FlexLayout,\n        FlowLayout: FlowLayout,\n        FormatControls: FormatControls,\n        GridLayout: GridLayout,\n        Iframe: Iframe$1,\n        InfoBox: InfoBox,\n        Label: Label,\n        Toolbar: Toolbar$1,\n        MenuBar: MenuBar,\n        MenuButton: MenuButton,\n        MenuItem: MenuItem,\n        Throbber: Throbber,\n        Menu: Menu,\n        ListBox: ListBox,\n        Radio: Radio,\n        ResizeHandle: ResizeHandle,\n        SelectBox: SelectBox,\n        Slider: Slider,\n        Spacer: Spacer,\n        SplitButton: SplitButton,\n        StackLayout: StackLayout,\n        TabPanel: TabPanel,\n        TextBox: TextBox,\n        DropZone: DropZone,\n        BrowseButton: BrowseButton\n      };\n    };\n    var appendTo = function (target) {\n      if (target.ui) {\n        global$2.each(getApi(), function (ref, key) {\n          target.ui[key] = ref;\n        });\n      } else {\n        target.ui = getApi();\n      }\n    };\n    var registerToFactory = function () {\n      global$2.each(getApi(), function (ref, key) {\n        global$4.add(key, ref);\n      });\n    };\n    var Api = {\n      appendTo: appendTo,\n      registerToFactory: registerToFactory\n    };\n\n    Api.registerToFactory();\n    Api.appendTo(window.tinymce ? window.tinymce : {});\n    global.add('modern', function (editor) {\n      FormatControls.setup(editor);\n      return ThemeApi.get(editor);\n    });\n    function Theme () {\n    }\n\n    return Theme;\n\n}(window));\n})();\n","(function () {\nvar paste = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasProPlugin = function (editor) {\n      if (/(^|[ ,])powerpaste([, ]|$)/.test(editor.settings.plugins) && global$1.get('powerpaste')) {\n        if (typeof domGlobals.window.console !== 'undefined' && domGlobals.window.console.log) {\n          domGlobals.window.console.log('PowerPaste is incompatible with Paste plugin! Remove \\'paste\\' from the \\'plugins\\' option.');\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var DetectProPlugin = { hasProPlugin: hasProPlugin };\n\n    var get = function (clipboard, quirks) {\n      return {\n        clipboard: clipboard,\n        quirks: quirks\n      };\n    };\n    var Api = { get: get };\n\n    var firePastePreProcess = function (editor, html, internal, isWordHtml) {\n      return editor.fire('PastePreProcess', {\n        content: html,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePostProcess = function (editor, node, internal, isWordHtml) {\n      return editor.fire('PastePostProcess', {\n        node: node,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePlainTextToggle = function (editor, state) {\n      return editor.fire('PastePlainTextToggle', { state: state });\n    };\n    var firePaste = function (editor, ieFake) {\n      return editor.fire('paste', { ieFake: ieFake });\n    };\n    var Events = {\n      firePastePreProcess: firePastePreProcess,\n      firePastePostProcess: firePastePostProcess,\n      firePastePlainTextToggle: firePastePlainTextToggle,\n      firePaste: firePaste\n    };\n\n    var shouldPlainTextInform = function (editor) {\n      return editor.getParam('paste_plaintext_inform', true);\n    };\n    var shouldBlockDrop = function (editor) {\n      return editor.getParam('paste_block_drop', false);\n    };\n    var shouldPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false);\n    };\n    var shouldFilterDrop = function (editor) {\n      return editor.getParam('paste_filter_drop', true);\n    };\n    var getPreProcess = function (editor) {\n      return editor.getParam('paste_preprocess');\n    };\n    var getPostProcess = function (editor) {\n      return editor.getParam('paste_postprocess');\n    };\n    var getWebkitStyles = function (editor) {\n      return editor.getParam('paste_webkit_styles');\n    };\n    var shouldRemoveWebKitStyles = function (editor) {\n      return editor.getParam('paste_remove_styles_if_webkit', true);\n    };\n    var shouldMergeFormats = function (editor) {\n      return editor.getParam('paste_merge_formats', true);\n    };\n    var isSmartPasteEnabled = function (editor) {\n      return editor.getParam('smart_paste', true);\n    };\n    var isPasteAsTextEnabled = function (editor) {\n      return editor.getParam('paste_as_text', false);\n    };\n    var getRetainStyleProps = function (editor) {\n      return editor.getParam('paste_retain_style_properties');\n    };\n    var getWordValidElements = function (editor) {\n      var defaultValidElements = '-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,' + '-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,' + 'td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody';\n      return editor.getParam('paste_word_valid_elements', defaultValidElements);\n    };\n    var shouldConvertWordFakeLists = function (editor) {\n      return editor.getParam('paste_convert_word_fake_lists', true);\n    };\n    var shouldUseDefaultFilters = function (editor) {\n      return editor.getParam('paste_enable_default_filters', true);\n    };\n    var Settings = {\n      shouldPlainTextInform: shouldPlainTextInform,\n      shouldBlockDrop: shouldBlockDrop,\n      shouldPasteDataImages: shouldPasteDataImages,\n      shouldFilterDrop: shouldFilterDrop,\n      getPreProcess: getPreProcess,\n      getPostProcess: getPostProcess,\n      getWebkitStyles: getWebkitStyles,\n      shouldRemoveWebKitStyles: shouldRemoveWebKitStyles,\n      shouldMergeFormats: shouldMergeFormats,\n      isSmartPasteEnabled: isSmartPasteEnabled,\n      isPasteAsTextEnabled: isPasteAsTextEnabled,\n      getRetainStyleProps: getRetainStyleProps,\n      getWordValidElements: getWordValidElements,\n      shouldConvertWordFakeLists: shouldConvertWordFakeLists,\n      shouldUseDefaultFilters: shouldUseDefaultFilters\n    };\n\n    var shouldInformUserAboutPlainText = function (editor, userIsInformedState) {\n      return userIsInformedState.get() === false && Settings.shouldPlainTextInform(editor);\n    };\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        text: editor.translate(message),\n        type: 'info'\n      });\n    };\n    var togglePlainTextPaste = function (editor, clipboard, userIsInformedState) {\n      if (clipboard.pasteFormat.get() === 'text') {\n        clipboard.pasteFormat.set('html');\n        Events.firePastePlainTextToggle(editor, false);\n      } else {\n        clipboard.pasteFormat.set('text');\n        Events.firePastePlainTextToggle(editor, true);\n        if (shouldInformUserAboutPlainText(editor, userIsInformedState)) {\n          displayNotification(editor, 'Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.');\n          userIsInformedState.set(true);\n        }\n      }\n      editor.focus();\n    };\n    var Actions = { togglePlainTextPaste: togglePlainTextPaste };\n\n    var register = function (editor, clipboard, userIsInformedState) {\n      editor.addCommand('mceTogglePlainTextPaste', function () {\n        Actions.togglePlainTextPaste(editor, clipboard, userIsInformedState);\n      });\n      editor.addCommand('mceInsertClipboardContent', function (ui, value) {\n        if (value.content) {\n          clipboard.pasteHtml(value.content, value.internal);\n        }\n        if (value.text) {\n          clipboard.pasteText(value.text);\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var internalMimeType = 'x-tinymce/html';\n    var internalMark = '<!-- ' + internalMimeType + ' -->';\n    var mark = function (html) {\n      return internalMark + html;\n    };\n    var unmark = function (html) {\n      return html.replace(internalMark, '');\n    };\n    var isMarked = function (html) {\n      return html.indexOf(internalMark) !== -1;\n    };\n    var InternalHtml = {\n      mark: mark,\n      unmark: unmark,\n      isMarked: isMarked,\n      internalHtmlMime: function () {\n        return internalMimeType;\n      }\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var isPlainText = function (text) {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    var toBRs = function (text) {\n      return text.replace(/\\r?\\n/g, '<br>');\n    };\n    var openContainer = function (rootTag, rootAttrs) {\n      var key;\n      var attrs = [];\n      var tag = '<' + rootTag;\n      if (typeof rootAttrs === 'object') {\n        for (key in rootAttrs) {\n          if (rootAttrs.hasOwnProperty(key)) {\n            attrs.push(key + '=\"' + global$6.encodeAllRaw(rootAttrs[key]) + '\"');\n          }\n        }\n        if (attrs.length) {\n          tag += ' ' + attrs.join(' ');\n        }\n      }\n      return tag + '>';\n    };\n    var toBlockElements = function (text, rootTag, rootAttrs) {\n      var blocks = text.split(/\\n\\n/);\n      var tagOpen = openContainer(rootTag, rootAttrs);\n      var tagClose = '</' + rootTag + '>';\n      var paragraphs = global$4.map(blocks, function (p) {\n        return p.split(/\\n/).join('<br />');\n      });\n      var stitch = function (p) {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : global$4.map(paragraphs, stitch).join('');\n    };\n    var convert = function (text, rootTag, rootAttrs) {\n      return rootTag ? toBlockElements(text, rootTag, rootAttrs) : toBRs(text);\n    };\n    var Newlines = {\n      isPlainText: isPlainText,\n      convert: convert,\n      toBRs: toBRs,\n      toBlockElements: toBlockElements\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    function filter(content, items) {\n      global$4.each(items, function (v) {\n        if (v.constructor === RegExp) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    }\n    function innerText(html) {\n      var schema = global$a();\n      var domParser = global$7({}, schema);\n      var text = '';\n      var shortEndedElements = schema.getShortEndedElements();\n      var ignoreElements = global$4.makeMap('script noscript style textarea video audio iframe object', ' ');\n      var blockElements = schema.getBlockElements();\n      function walk(node) {\n        var name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (shortEndedElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!node.shortEnded) {\n          if (node = node.firstChild) {\n            do {\n              walk(node);\n            } while (node = node.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      }\n      html = filter(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    }\n    function trimHtml(html) {\n      function trimSpaces(all, s1, s2) {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return '\\xA0';\n      }\n      html = filter(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    }\n    function createIdGenerator(prefix) {\n      var count = 0;\n      return function () {\n        return prefix + count++;\n      };\n    }\n    var isMsEdge = function () {\n      return domGlobals.navigator.userAgent.indexOf(' Edge/') !== -1;\n    };\n    var Utils = {\n      filter: filter,\n      innerText: innerText,\n      trimHtml: trimHtml,\n      createIdGenerator: createIdGenerator,\n      isMsEdge: isMsEdge\n    };\n\n    function isWordContent(content) {\n      return /<font face=\"Times New Roman\"|class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^'']*\\bmso-|w:WordDocument/i.test(content) || /class=\"OutlineElement/.test(content) || /id=\"?docs\\-internal\\-guid\\-/.test(content);\n    }\n    function isNumericList(text) {\n      var found, patterns;\n      patterns = [\n        /^[IVXLMCD]{1,2}\\.[ \\u00a0]/,\n        /^[ivxlmcd]{1,2}\\.[ \\u00a0]/,\n        /^[a-z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[A-Z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[0-9]+\\.[ \\u00a0]/,\n        /^[\\u3007\\u4e00\\u4e8c\\u4e09\\u56db\\u4e94\\u516d\\u4e03\\u516b\\u4e5d]+\\.[ \\u00a0]/,\n        /^[\\u58f1\\u5f10\\u53c2\\u56db\\u4f0d\\u516d\\u4e03\\u516b\\u4e5d\\u62fe]+\\.[ \\u00a0]/\n      ];\n      text = text.replace(/^[\\u00a0 ]+/, '');\n      global$4.each(patterns, function (pattern) {\n        if (pattern.test(text)) {\n          found = true;\n          return false;\n        }\n      });\n      return found;\n    }\n    function isBulletList(text) {\n      return /^[\\s\\u00a0]*[\\u2022\\u00b7\\u00a7\\u25CF]\\s*/.test(text);\n    }\n    function convertFakeListsToProperLists(node) {\n      var currentListNode, prevListNode, lastLevel = 1;\n      function getText(node) {\n        var txt = '';\n        if (node.type === 3) {\n          return node.value;\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.next);\n        }\n        return txt;\n      }\n      function trimListStart(node, regExp) {\n        if (node.type === 3) {\n          if (regExp.test(node.value)) {\n            node.value = node.value.replace(regExp, '');\n            return false;\n          }\n        }\n        if (node = node.firstChild) {\n          do {\n            if (!trimListStart(node, regExp)) {\n              return false;\n            }\n          } while (node = node.next);\n        }\n        return true;\n      }\n      function removeIgnoredNodes(node) {\n        if (node._listIgnore) {\n          node.remove();\n          return;\n        }\n        if (node = node.firstChild) {\n          do {\n            removeIgnoredNodes(node);\n          } while (node = node.next);\n        }\n      }\n      function convertParagraphToLi(paragraphNode, listName, start) {\n        var level = paragraphNode._listLevel || lastLevel;\n        if (level !== lastLevel) {\n          if (level < lastLevel) {\n            if (currentListNode) {\n              currentListNode = currentListNode.parent.parent;\n            }\n          } else {\n            prevListNode = currentListNode;\n            currentListNode = null;\n          }\n        }\n        if (!currentListNode || currentListNode.name !== listName) {\n          prevListNode = prevListNode || currentListNode;\n          currentListNode = new global$9(listName, 1);\n          if (start > 1) {\n            currentListNode.attr('start', '' + start);\n          }\n          paragraphNode.wrap(currentListNode);\n        } else {\n          currentListNode.append(paragraphNode);\n        }\n        paragraphNode.name = 'li';\n        if (level > lastLevel && prevListNode) {\n          prevListNode.lastChild.append(currentListNode);\n        }\n        lastLevel = level;\n        removeIgnoredNodes(paragraphNode);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n        trimListStart(paragraphNode, /^\\s*([\\u2022\\u00b7\\u00a7\\u25CF]|\\w+\\.)/);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n      }\n      var elements = [];\n      var child = node.firstChild;\n      while (typeof child !== 'undefined' && child !== null) {\n        elements.push(child);\n        child = child.walk();\n        if (child !== null) {\n          while (typeof child !== 'undefined' && child.parent !== node) {\n            child = child.walk();\n          }\n        }\n      }\n      for (var i = 0; i < elements.length; i++) {\n        node = elements[i];\n        if (node.name === 'p' && node.firstChild) {\n          var nodeText = getText(node);\n          if (isBulletList(nodeText)) {\n            convertParagraphToLi(node, 'ul');\n            continue;\n          }\n          if (isNumericList(nodeText)) {\n            var matches = /([0-9]+)\\./.exec(nodeText);\n            var start = 1;\n            if (matches) {\n              start = parseInt(matches[1], 10);\n            }\n            convertParagraphToLi(node, 'ol', start);\n            continue;\n          }\n          if (node._listLevel) {\n            convertParagraphToLi(node, 'ul', 1);\n            continue;\n          }\n          currentListNode = null;\n        } else {\n          prevListNode = currentListNode;\n          currentListNode = null;\n        }\n      }\n    }\n    function filterStyles(editor, validStyles, node, styleValue) {\n      var outputStyles = {}, matches;\n      var styles = editor.dom.parseStyle(styleValue);\n      global$4.each(styles, function (value, name) {\n        switch (name) {\n        case 'mso-list':\n          matches = /\\w+ \\w+([0-9]+)/i.exec(styleValue);\n          if (matches) {\n            node._listLevel = parseInt(matches[1], 10);\n          }\n          if (/Ignore/i.test(value) && node.firstChild) {\n            node._listIgnore = true;\n            node.firstChild._listIgnore = true;\n          }\n          break;\n        case 'horiz-align':\n          name = 'text-align';\n          break;\n        case 'vert-align':\n          name = 'vertical-align';\n          break;\n        case 'font-color':\n        case 'mso-foreground':\n          name = 'color';\n          break;\n        case 'mso-background':\n        case 'mso-highlight':\n          name = 'background';\n          break;\n        case 'font-weight':\n        case 'font-style':\n          if (value !== 'normal') {\n            outputStyles[name] = value;\n          }\n          return;\n        case 'mso-element':\n          if (/^(comment|comment-list)$/i.test(value)) {\n            node.remove();\n            return;\n          }\n          break;\n        }\n        if (name.indexOf('mso-comment') === 0) {\n          node.remove();\n          return;\n        }\n        if (name.indexOf('mso-') === 0) {\n          return;\n        }\n        if (Settings.getRetainStyleProps(editor) === 'all' || validStyles && validStyles[name]) {\n          outputStyles[name] = value;\n        }\n      });\n      if (/(bold)/i.test(outputStyles['font-weight'])) {\n        delete outputStyles['font-weight'];\n        node.wrap(new global$9('b', 1));\n      }\n      if (/(italic)/i.test(outputStyles['font-style'])) {\n        delete outputStyles['font-style'];\n        node.wrap(new global$9('i', 1));\n      }\n      outputStyles = editor.dom.serializeStyle(outputStyles, node.name);\n      if (outputStyles) {\n        return outputStyles;\n      }\n      return null;\n    }\n    var filterWordContent = function (editor, content) {\n      var retainStyleProperties, validStyles;\n      retainStyleProperties = Settings.getRetainStyleProps(editor);\n      if (retainStyleProperties) {\n        validStyles = global$4.makeMap(retainStyleProperties.split(/[, ]/));\n      }\n      content = Utils.filter(content, [\n        /<br class=\"?Apple-interchange-newline\"?>/gi,\n        /<b[^>]+id=\"?docs-internal-[^>]*>/gi,\n        /<!--[\\s\\S]+?-->/gi,\n        /<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\n        [\n          /<(\\/?)s>/gi,\n          '<$1strike>'\n        ],\n        [\n          /&nbsp;/gi,\n          '\\xA0'\n        ],\n        [\n          /<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi,\n          function (str, spaces) {\n            return spaces.length > 0 ? spaces.replace(/./, ' ').slice(Math.floor(spaces.length / 2)).split('').join('\\xA0') : '';\n          }\n        ]\n      ]);\n      var validElements = Settings.getWordValidElements(editor);\n      var schema = global$a({\n        valid_elements: validElements,\n        valid_children: '-li[p]'\n      });\n      global$4.each(schema.elements, function (rule) {\n        if (!rule.attributes.class) {\n          rule.attributes.class = {};\n          rule.attributesOrder.push('class');\n        }\n        if (!rule.attributes.style) {\n          rule.attributes.style = {};\n          rule.attributesOrder.push('style');\n        }\n      });\n      var domParser = global$7({}, schema);\n      domParser.addAttributeFilter('style', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('style', filterStyles(editor, validStyles, node, node.attr('style')));\n          if (node.name === 'span' && node.parent && !node.attributes.length) {\n            node.unwrap();\n          }\n        }\n      });\n      domParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, className;\n        while (i--) {\n          node = nodes[i];\n          className = node.attr('class');\n          if (/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(className)) {\n            node.remove();\n          }\n          node.attr('class', null);\n        }\n      });\n      domParser.addNodeFilter('del', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].remove();\n        }\n      });\n      domParser.addNodeFilter('a', function (nodes) {\n        var i = nodes.length, node, href, name;\n        while (i--) {\n          node = nodes[i];\n          href = node.attr('href');\n          name = node.attr('name');\n          if (href && href.indexOf('#_msocom_') !== -1) {\n            node.remove();\n            continue;\n          }\n          if (href && href.indexOf('file://') === 0) {\n            href = href.split('#')[1];\n            if (href) {\n              href = '#' + href;\n            }\n          }\n          if (!href && !name) {\n            node.unwrap();\n          } else {\n            if (name && !/^_?(?:toc|edn|ftn)/i.test(name)) {\n              node.unwrap();\n              continue;\n            }\n            node.attr({\n              href: href,\n              name: name\n            });\n          }\n        }\n      });\n      var rootNode = domParser.parse(content);\n      if (Settings.shouldConvertWordFakeLists(editor)) {\n        convertFakeListsToProperLists(rootNode);\n      }\n      content = global$8({ validate: editor.settings.validate }, schema).serialize(rootNode);\n      return content;\n    };\n    var preProcess = function (editor, content) {\n      return Settings.shouldUseDefaultFilters(editor) ? filterWordContent(editor, content) : content;\n    };\n    var WordFilter = {\n      preProcess: preProcess,\n      isWordContent: isWordContent\n    };\n\n    var preProcess$1 = function (editor, html) {\n      var parser = global$7({}, editor.schema);\n      parser.addNodeFilter('meta', function (nodes) {\n        global$4.each(nodes, function (node) {\n          return node.remove();\n        });\n      });\n      var fragment = parser.parse(html, {\n        forced_root_block: false,\n        isRootContent: true\n      });\n      return global$8({ validate: editor.settings.validate }, editor.schema).serialize(fragment);\n    };\n    var processResult = function (content, cancelled) {\n      return {\n        content: content,\n        cancelled: cancelled\n      };\n    };\n    var postProcessFilter = function (editor, html, internal, isWordHtml) {\n      var tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      var postProcessArgs = Events.firePastePostProcess(editor, tempBody, internal, isWordHtml);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    var filterContent = function (editor, content, internal, isWordHtml) {\n      var preProcessArgs = Events.firePastePreProcess(editor, content, internal, isWordHtml);\n      var filteredContent = preProcess$1(editor, preProcessArgs.content);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, filteredContent, internal, isWordHtml);\n      } else {\n        return processResult(filteredContent, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    var process = function (editor, html, internal) {\n      var isWordHtml = WordFilter.isWordContent(html);\n      var content = isWordHtml ? WordFilter.preProcess(editor, html) : html;\n      return filterContent(editor, content, internal, isWordHtml);\n    };\n    var ProcessFilters = { process: process };\n\n    var pasteHtml = function (editor, html) {\n      editor.insertContent(html, {\n        merge: Settings.shouldMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    var isAbsoluteUrl = function (url) {\n      return /^https?:\\/\\/[\\w\\?\\-\\/+=.&%@~#]+$/i.test(url);\n    };\n    var isImageUrl = function (url) {\n      return isAbsoluteUrl(url) && /.(gif|jpe?g|png)$/.test(url);\n    };\n    var createImage = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    var createLink = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    var linkSelection = function (editor, html, pasteHtmlFn) {\n      return editor.selection.isCollapsed() === false && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    };\n    var insertImage = function (editor, html, pasteHtmlFn) {\n      return isImageUrl(html) ? createImage(editor, html, pasteHtmlFn) : false;\n    };\n    var smartInsertContent = function (editor, html) {\n      global$4.each([\n        linkSelection,\n        insertImage,\n        pasteHtml\n      ], function (action) {\n        return action(editor, html, pasteHtml) !== true;\n      });\n    };\n    var insertContent = function (editor, html) {\n      if (Settings.isSmartPasteEnabled(editor) === false) {\n        pasteHtml(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n    var SmartPaste = {\n      isImageUrl: isImageUrl,\n      isAbsoluteUrl: isAbsoluteUrl,\n      insertContent: insertContent\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter$1 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$1 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n    var traverse = function (array, fn) {\n      return par$1(map(array, fn));\n    };\n    var mapM = traverse;\n\n    var value = function () {\n      var subject = Cell(Option.none());\n      var clear = function () {\n        subject.set(Option.none());\n      };\n      var set = function (s) {\n        subject.set(Option.some(s));\n      };\n      var on = function (f) {\n        subject.get().each(f);\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var pasteHtml$1 = function (editor, html, internalFlag) {\n      var internal = internalFlag ? internalFlag : InternalHtml.isMarked(html);\n      var args = ProcessFilters.process(editor, InternalHtml.unmark(html), internal);\n      if (args.cancelled === false) {\n        SmartPaste.insertContent(editor, args.content);\n      }\n    };\n    var pasteText = function (editor, text) {\n      text = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      text = Newlines.convert(text, editor.settings.forced_root_block, editor.settings.forced_root_block_attrs);\n      pasteHtml$1(editor, text, false);\n    };\n    var getDataTransferItems = function (dataTransfer) {\n      var items = {};\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      if (dataTransfer) {\n        if (dataTransfer.getData) {\n          var legacyText = dataTransfer.getData('Text');\n          if (legacyText && legacyText.length > 0) {\n            if (legacyText.indexOf(mceInternalUrlPrefix) === -1) {\n              items['text/plain'] = legacyText;\n            }\n          }\n        }\n        if (dataTransfer.types) {\n          for (var i = 0; i < dataTransfer.types.length; i++) {\n            var contentType = dataTransfer.types[i];\n            try {\n              items[contentType] = dataTransfer.getData(contentType);\n            } catch (ex) {\n              items[contentType] = '';\n            }\n          }\n        }\n      }\n      return items;\n    };\n    var getClipboardContent = function (editor, clipboardEvent) {\n      var content = getDataTransferItems(clipboardEvent.clipboardData || editor.getDoc().dataTransfer);\n      return Utils.isMsEdge() ? global$4.extend(content, { 'text/html': '' }) : content;\n    };\n    var hasContentType = function (clipboardContent, mimeType) {\n      return mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    };\n    var hasHtmlOrText = function (content) {\n      return hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    };\n    var getBase64FromUri = function (uri) {\n      var idx;\n      idx = uri.indexOf(',');\n      if (idx !== -1) {\n        return uri.substr(idx + 1);\n      }\n      return null;\n    };\n    var isValidDataUriImage = function (settings, imgElm) {\n      return settings.images_dataimg_filter ? settings.images_dataimg_filter(imgElm) : true;\n    };\n    var extractFilename = function (editor, str) {\n      var m = str.match(/([\\s\\S]+?)\\.(?:jpeg|jpg|png|gif)$/i);\n      return m ? editor.dom.encode(m[1]) : null;\n    };\n    var uniqueId = Utils.createIdGenerator('mceclip');\n    var pasteImage = function (editor, imageItem) {\n      var base64 = getBase64FromUri(imageItem.uri);\n      var id = uniqueId();\n      var name = editor.settings.images_reuse_filename && imageItem.blob.name ? extractFilename(editor, imageItem.blob.name) : id;\n      var img = new domGlobals.Image();\n      img.src = imageItem.uri;\n      if (isValidDataUriImage(editor.settings, img)) {\n        var blobCache = editor.editorUpload.blobCache;\n        var blobInfo = void 0, existingBlobInfo = void 0;\n        existingBlobInfo = blobCache.findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.base64() === base64;\n        });\n        if (!existingBlobInfo) {\n          blobInfo = blobCache.create(id, imageItem.blob, base64, name);\n          blobCache.add(blobInfo);\n        } else {\n          blobInfo = existingBlobInfo;\n        }\n        pasteHtml$1(editor, '<img src=\"' + blobInfo.blobUri() + '\">', false);\n      } else {\n        pasteHtml$1(editor, '<img src=\"' + imageItem.uri + '\">', false);\n      }\n    };\n    var isClipboardEvent = function (event) {\n      return event.type === 'paste';\n    };\n    var readBlobsAsDataUris = function (items) {\n      return mapM(items, function (item) {\n        return Future.nu(function (resolve) {\n          var blob = item.getAsFile ? item.getAsFile() : item;\n          var reader = new window.FileReader();\n          reader.onload = function () {\n            resolve({\n              blob: blob,\n              uri: reader.result\n            });\n          };\n          reader.readAsDataURL(blob);\n        });\n      });\n    };\n    var getImagesFromDataTransfer = function (dataTransfer) {\n      var items = dataTransfer.items ? map(from$1(dataTransfer.items), function (item) {\n        return item.getAsFile();\n      }) : [];\n      var files = dataTransfer.files ? from$1(dataTransfer.files) : [];\n      var images = filter$1(items.length > 0 ? items : files, function (file) {\n        return /^image\\/(jpeg|png|gif|bmp)$/.test(file.type);\n      });\n      return images;\n    };\n    var pasteImageData = function (editor, e, rng) {\n      var dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (editor.settings.paste_data_images && dataTransfer) {\n        var images = getImagesFromDataTransfer(dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readBlobsAsDataUris(images).get(function (blobResults) {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each(blobResults, function (result) {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var isBrokenAndroidClipboardEvent = function (e) {\n      var clipboardData = e.clipboardData;\n      return domGlobals.navigator.userAgent.indexOf('Android') !== -1 && clipboardData && clipboardData.items && clipboardData.items.length === 0;\n    };\n    var isKeyboardPasteEvent = function (e) {\n      return global$5.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    };\n    var registerEventHandlers = function (editor, pasteBin, pasteFormat) {\n      var keyboardPasteEvent = value();\n      var keyboardPastePlainTextState;\n      editor.on('keydown', function (e) {\n        function removePasteBinOnKeyUp(e) {\n          if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n            pasteBin.remove();\n          }\n        }\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n          if (keyboardPastePlainTextState && global$2.webkit && domGlobals.navigator.userAgent.indexOf('Version/') !== -1) {\n            return;\n          }\n          e.stopImmediatePropagation();\n          keyboardPasteEvent.set(e);\n          window.setTimeout(function () {\n            keyboardPasteEvent.clear();\n          }, 100);\n          if (global$2.ie && keyboardPastePlainTextState) {\n            e.preventDefault();\n            Events.firePaste(editor, true);\n            return;\n          }\n          pasteBin.remove();\n          pasteBin.create();\n          editor.once('keyup', removePasteBinOnKeyUp);\n          editor.once('paste', function () {\n            editor.off('keyup', removePasteBinOnKeyUp);\n          });\n        }\n      });\n      function insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal) {\n        var content, isPlainTextHtml;\n        if (hasContentType(clipboardContent, 'text/html')) {\n          content = clipboardContent['text/html'];\n        } else {\n          content = pasteBin.getHtml();\n          internal = internal ? internal : InternalHtml.isMarked(content);\n          if (pasteBin.isDefaultContent(content)) {\n            plainTextMode = true;\n          }\n        }\n        content = Utils.trimHtml(content);\n        pasteBin.remove();\n        isPlainTextHtml = internal === false && Newlines.isPlainText(content);\n        if (!content.length || isPlainTextHtml) {\n          plainTextMode = true;\n        }\n        if (plainTextMode) {\n          if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n            content = clipboardContent['text/plain'];\n          } else {\n            content = Utils.innerText(content);\n          }\n        }\n        if (pasteBin.isDefaultContent(content)) {\n          if (!isKeyBoardPaste) {\n            editor.windowManager.alert('Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.');\n          }\n          return;\n        }\n        if (plainTextMode) {\n          pasteText(editor, content);\n        } else {\n          pasteHtml$1(editor, content, internal);\n        }\n      }\n      var getLastRng = function () {\n        return pasteBin.getLastRng() || editor.selection.getRng();\n      };\n      editor.on('paste', function (e) {\n        var isKeyBoardPaste = keyboardPasteEvent.isSet();\n        var clipboardContent = getClipboardContent(editor, e);\n        var plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        var internal = hasContentType(clipboardContent, InternalHtml.internalHtmlMime());\n        keyboardPastePlainTextState = false;\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          pasteBin.remove();\n          return;\n        }\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          pasteBin.remove();\n          return;\n        }\n        if (!isKeyBoardPaste) {\n          e.preventDefault();\n        }\n        if (global$2.ie && (!isKeyBoardPaste || e.ieFake) && !hasContentType(clipboardContent, 'text/html')) {\n          pasteBin.create();\n          editor.dom.bind(pasteBin.getEl(), 'paste', function (e) {\n            e.stopPropagation();\n          });\n          editor.getDoc().execCommand('Paste', false, null);\n          clipboardContent['text/html'] = pasteBin.getHtml();\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          if (!internal) {\n            internal = InternalHtml.isMarked(clipboardContent['text/html']);\n          }\n          insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n        } else {\n          global$3.setEditorTimeout(editor, function () {\n            insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n          }, 0);\n        }\n      });\n    };\n    var registerEventsAndFilters = function (editor, pasteBin, pasteFormat) {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      var src;\n      editor.parser.addNodeFilter('img', function (nodes, name, args) {\n        var isPasteInsert = function (args) {\n          return args.data && args.data.paste === true;\n        };\n        var remove = function (node) {\n          if (!node.attr('data-mce-object') && src !== global$2.transparentSrc) {\n            node.remove();\n          }\n        };\n        var isWebKitFakeUrl = function (src) {\n          return src.indexOf('webkit-fake-url') === 0;\n        };\n        var isDataUri = function (src) {\n          return src.indexOf('data:') === 0;\n        };\n        if (!editor.settings.paste_data_images && isPasteInsert(args)) {\n          var i = nodes.length;\n          while (i--) {\n            src = nodes[i].attributes.map.src;\n            if (!src) {\n              continue;\n            }\n            if (isWebKitFakeUrl(src)) {\n              remove(nodes[i]);\n            } else if (!editor.settings.allow_html_data_urls && isDataUri(src)) {\n              remove(nodes[i]);\n            }\n          }\n        }\n      });\n    };\n\n    var getPasteBinParent = function (editor) {\n      return global$2.ie && editor.inline ? domGlobals.document.body : editor.getBody();\n    };\n    var isExternalPasteBin = function (editor) {\n      return getPasteBinParent(editor) !== editor.getBody();\n    };\n    var delegatePasteEvents = function (editor, pasteBinElm, pasteBinDefaultContent) {\n      if (isExternalPasteBin(editor)) {\n        editor.dom.bind(pasteBinElm, 'paste keyup', function (e) {\n          if (!isDefault(editor, pasteBinDefaultContent)) {\n            editor.fire('paste');\n          }\n        });\n      }\n    };\n    var create = function (editor, lastRngCell, pasteBinDefaultContent) {\n      var dom = editor.dom, body = editor.getBody();\n      var pasteBinElm;\n      lastRngCell.set(editor.selection.getRng());\n      pasteBinElm = editor.dom.add(getPasteBinParent(editor), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (global$2.ie || global$2.gecko) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', function (e) {\n        e.stopPropagation();\n      });\n      delegatePasteEvents(editor, pasteBinElm, pasteBinDefaultContent);\n      pasteBinElm.focus();\n      editor.selection.select(pasteBinElm, true);\n    };\n    var remove = function (editor, lastRngCell) {\n      if (getEl(editor)) {\n        var pasteBinClone = void 0;\n        var lastRng = lastRngCell.get();\n        while (pasteBinClone = editor.dom.get('mcepastebin')) {\n          editor.dom.remove(pasteBinClone);\n          editor.dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    var getEl = function (editor) {\n      return editor.dom.get('mcepastebin');\n    };\n    var getHtml = function (editor) {\n      var pasteBinElm, pasteBinClones, i, dirtyWrappers, cleanWrapper;\n      var copyAndRemove = function (toElm, fromElm) {\n        toElm.appendChild(fromElm);\n        editor.dom.remove(fromElm, true);\n      };\n      pasteBinClones = global$4.grep(getPasteBinParent(editor).childNodes, function (elm) {\n        return elm.id === 'mcepastebin';\n      });\n      pasteBinElm = pasteBinClones.shift();\n      global$4.each(pasteBinClones, function (pasteBinClone) {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      dirtyWrappers = editor.dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (i = dirtyWrappers.length - 1; i >= 0; i--) {\n        cleanWrapper = editor.dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    var getLastRng = function (lastRng) {\n      return lastRng.get();\n    };\n    var isDefaultContent = function (pasteBinDefaultContent, content) {\n      return content === pasteBinDefaultContent;\n    };\n    var isPasteBin = function (elm) {\n      return elm && elm.id === 'mcepastebin';\n    };\n    var isDefault = function (editor, pasteBinDefaultContent) {\n      var pasteBinElm = getEl(editor);\n      return isPasteBin(pasteBinElm) && isDefaultContent(pasteBinDefaultContent, pasteBinElm.innerHTML);\n    };\n    var PasteBin = function (editor) {\n      var lastRng = Cell(null);\n      var pasteBinDefaultContent = '%MCEPASTEBIN%';\n      return {\n        create: function () {\n          return create(editor, lastRng, pasteBinDefaultContent);\n        },\n        remove: function () {\n          return remove(editor, lastRng);\n        },\n        getEl: function () {\n          return getEl(editor);\n        },\n        getHtml: function () {\n          return getHtml(editor);\n        },\n        getLastRng: function () {\n          return getLastRng(lastRng);\n        },\n        isDefault: function () {\n          return isDefault(editor, pasteBinDefaultContent);\n        },\n        isDefaultContent: function (content) {\n          return isDefaultContent(pasteBinDefaultContent, content);\n        }\n      };\n    };\n\n    var Clipboard = function (editor, pasteFormat) {\n      var pasteBin = PasteBin(editor);\n      editor.on('preInit', function () {\n        return registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n      return {\n        pasteFormat: pasteFormat,\n        pasteHtml: function (html, internalFlag) {\n          return pasteHtml$1(editor, html, internalFlag);\n        },\n        pasteText: function (text) {\n          return pasteText(editor, text);\n        },\n        pasteImageData: function (e, rng) {\n          return pasteImageData(editor, e, rng);\n        },\n        getDataTransferItems: getDataTransferItems,\n        hasHtmlOrText: hasHtmlOrText,\n        hasContentType: hasContentType\n      };\n    };\n\n    var noop$1 = function () {\n    };\n    var hasWorkingClipboardApi = function (clipboardData) {\n      return global$2.iOS === false && clipboardData !== undefined && typeof clipboardData.setData === 'function' && Utils.isMsEdge() !== true;\n    };\n    var setHtml5Clipboard = function (clipboardData, html, text) {\n      if (hasWorkingClipboardApi(clipboardData)) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(InternalHtml.internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    var setClipboardData = function (evt, data, fallback, done) {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    var fallback = function (editor) {\n      return function (html, done) {\n        var markedHtml = InternalHtml.mark(html);\n        var outer = editor.dom.create('div', {\n          'contenteditable': 'false',\n          'data-mce-bogus': 'all'\n        });\n        var inner = editor.dom.create('div', { contenteditable: 'true' }, markedHtml);\n        editor.dom.setStyles(outer, {\n          position: 'fixed',\n          top: '0',\n          left: '-3000px',\n          width: '1000px',\n          overflow: 'hidden'\n        });\n        outer.appendChild(inner);\n        editor.dom.add(editor.getBody(), outer);\n        var range = editor.selection.getRng();\n        inner.focus();\n        var offscreenRange = editor.dom.createRng();\n        offscreenRange.selectNodeContents(inner);\n        editor.selection.setRng(offscreenRange);\n        setTimeout(function () {\n          editor.selection.setRng(range);\n          outer.parentNode.removeChild(outer);\n          done();\n        }, 0);\n      };\n    };\n    var getData = function (editor) {\n      return {\n        html: editor.selection.getContent({ contextual: true }),\n        text: editor.selection.getContent({ format: 'text' })\n      };\n    };\n    var isTableSelection = function (editor) {\n      return !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    };\n    var hasSelectedContent = function (editor) {\n      return !editor.selection.isCollapsed() || isTableSelection(editor);\n    };\n    var cut = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n            setTimeout(function () {\n              editor.execCommand('Delete');\n            }, 0);\n          });\n        }\n      };\n    };\n    var copy = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), noop$1);\n        }\n      };\n    };\n    var register$1 = function (editor) {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n    var CutCopy = { register: register$1 };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var getCaretRangeFromEvent = function (editor, e) {\n      return global$b.getCaretRangeFromPoint(e.clientX, e.clientY, editor.getDoc());\n    };\n    var isPlainTextFileUrl = function (content) {\n      var plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    var setFocusedRange = function (editor, rng) {\n      editor.focus();\n      editor.selection.setRng(rng);\n    };\n    var setup = function (editor, clipboard, draggingInternallyState) {\n      if (Settings.shouldBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!Settings.shouldPasteDataImages(editor)) {\n        editor.on('drop', function (e) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', function (e) {\n        var dropContent, rng;\n        rng = getCaretRangeFromEvent(editor, e);\n        if (e.isDefaultPrevented() || draggingInternallyState.get()) {\n          return;\n        }\n        dropContent = clipboard.getDataTransferItems(e.dataTransfer);\n        var internal = clipboard.hasContentType(dropContent, InternalHtml.internalHtmlMime());\n        if ((!clipboard.hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && clipboard.pasteImageData(e, rng)) {\n          return;\n        }\n        if (rng && Settings.shouldFilterDrop(editor)) {\n          var content_1 = dropContent['mce-internal'] || dropContent['text/html'] || dropContent['text/plain'];\n          if (content_1) {\n            e.preventDefault();\n            global$3.setEditorTimeout(editor, function () {\n              editor.undoManager.transact(function () {\n                if (dropContent['mce-internal']) {\n                  editor.execCommand('Delete');\n                }\n                setFocusedRange(editor, rng);\n                content_1 = Utils.trimHtml(content_1);\n                if (!dropContent['text/html']) {\n                  clipboard.pasteText(content_1);\n                } else {\n                  clipboard.pasteHtml(content_1, internal);\n                }\n              });\n            });\n          }\n        }\n      });\n      editor.on('dragstart', function (e) {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', function (e) {\n        if (Settings.shouldPasteDataImages(editor) && draggingInternallyState.get() === false) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n    };\n    var DragDrop = { setup: setup };\n\n    var setup$1 = function (editor) {\n      var plugin = editor.plugins.paste;\n      var preProcess = Settings.getPreProcess(editor);\n      if (preProcess) {\n        editor.on('PastePreProcess', function (e) {\n          preProcess.call(plugin, plugin, e);\n        });\n      }\n      var postProcess = Settings.getPostProcess(editor);\n      if (postProcess) {\n        editor.on('PastePostProcess', function (e) {\n          postProcess.call(plugin, plugin, e);\n        });\n      }\n    };\n    var PrePostProcess = { setup: setup$1 };\n\n    function addPreProcessFilter(editor, filterFunc) {\n      editor.on('PastePreProcess', function (e) {\n        e.content = filterFunc(editor, e.content, e.internal, e.wordContent);\n      });\n    }\n    function addPostProcessFilter(editor, filterFunc) {\n      editor.on('PastePostProcess', function (e) {\n        filterFunc(editor, e.node);\n      });\n    }\n    function removeExplorerBrElementsAfterBlocks(editor, html) {\n      if (!WordFilter.isWordContent(html)) {\n        return html;\n      }\n      var blockElements = [];\n      global$4.each(editor.schema.getBlockElements(), function (block, blockName) {\n        blockElements.push(blockName);\n      });\n      var explorerBlocksRegExp = new RegExp('(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*(<\\\\/?(' + blockElements.join('|') + ')[^>]*>)(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*', 'g');\n      html = Utils.filter(html, [[\n          explorerBlocksRegExp,\n          '$1'\n        ]]);\n      html = Utils.filter(html, [\n        [\n          /<br><br>/g,\n          '<BR><BR>'\n        ],\n        [\n          /<br>/g,\n          ' '\n        ],\n        [\n          /<BR><BR>/g,\n          '<br>'\n        ]\n      ]);\n      return html;\n    }\n    function removeWebKitStyles(editor, content, internal, isWordHtml) {\n      if (isWordHtml || internal) {\n        return content;\n      }\n      var webKitStylesSetting = Settings.getWebkitStyles(editor);\n      var webKitStyles;\n      if (Settings.shouldRemoveWebKitStyles(editor) === false || webKitStylesSetting === 'all') {\n        return content;\n      }\n      if (webKitStylesSetting) {\n        webKitStyles = webKitStylesSetting.split(/[, ]/);\n      }\n      if (webKitStyles) {\n        var dom_1 = editor.dom, node_1 = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, function (all, before, value, after) {\n          var inputStyles = dom_1.parseStyle(dom_1.decode(value));\n          var outputStyles = {};\n          if (webKitStyles === 'none') {\n            return before + after;\n          }\n          for (var i = 0; i < webKitStyles.length; i++) {\n            var inputValue = inputStyles[webKitStyles[i]], currentValue = dom_1.getStyle(node_1, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              inputValue = dom_1.toHex(inputValue);\n              currentValue = dom_1.toHex(currentValue);\n            }\n            if (currentValue !== inputValue) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          outputStyles = dom_1.serializeStyle(outputStyles, 'span');\n          if (outputStyles) {\n            return before + ' style=\"' + outputStyles + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, function (all, before, value, after) {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    }\n    function removeUnderlineAndFontInAnchor(editor, root) {\n      editor.$('a', root).find('font,u').each(function (i, node) {\n        editor.dom.remove(node, true);\n      });\n    }\n    var setup$2 = function (editor) {\n      if (global$2.webkit) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n      if (global$2.ie) {\n        addPreProcessFilter(editor, removeExplorerBrElementsAfterBlocks);\n        addPostProcessFilter(editor, removeUnderlineAndFontInAnchor);\n      }\n    };\n    var Quirks = { setup: setup$2 };\n\n    var stateChange = function (editor, clipboard, e) {\n      var ctrl = e.control;\n      ctrl.active(clipboard.pasteFormat.get() === 'text');\n      editor.on('PastePlainTextToggle', function (e) {\n        ctrl.active(e.state);\n      });\n    };\n    var register$2 = function (editor, clipboard) {\n      var postRender = curry(stateChange, editor, clipboard);\n      editor.addButton('pastetext', {\n        active: false,\n        icon: 'pastetext',\n        tooltip: 'Paste as text',\n        cmd: 'mceTogglePlainTextPaste',\n        onPostRender: postRender\n      });\n      editor.addMenuItem('pastetext', {\n        text: 'Paste as text',\n        selectable: true,\n        active: clipboard.pasteFormat,\n        cmd: 'mceTogglePlainTextPaste',\n        onPostRender: postRender\n      });\n    };\n    var Buttons = { register: register$2 };\n\n    global$1.add('paste', function (editor) {\n      if (DetectProPlugin.hasProPlugin(editor) === false) {\n        var userIsInformedState = Cell(false);\n        var draggingInternallyState = Cell(false);\n        var pasteFormat = Cell(Settings.isPasteAsTextEnabled(editor) ? 'text' : 'html');\n        var clipboard = Clipboard(editor, pasteFormat);\n        var quirks = Quirks.setup(editor);\n        Buttons.register(editor, clipboard);\n        Commands.register(editor, clipboard, userIsInformedState);\n        PrePostProcess.setup(editor);\n        CutCopy.register(editor);\n        DragDrop.setup(editor, clipboard, draggingInternallyState);\n        return Api.get(clipboard, quirks);\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","// Exports the \"print\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/print')\n//   ES2015:\n//     import 'tinymce/plugins/print'\nrequire('./plugin.js');","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","// Exports the \"lists\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/lists')\n//   ES2015:\n//     import 'tinymce/plugins/lists'\nrequire('./plugin.js');","// Exports the \"directionality\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/directionality')\n//   ES2015:\n//     import 'tinymce/plugins/directionality'\nrequire('./plugin.js');","// Exports the \"imagetools\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/imagetools')\n//   ES2015:\n//     import 'tinymce/plugins/imagetools'\nrequire('./plugin.js');","(function () {\nvar advlist = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var applyListFormat = function (editor, listName, styleValue) {\n      var cmd = listName === 'UL' ? 'InsertUnorderedList' : 'InsertOrderedList';\n      editor.execCommand(cmd, false, styleValue === false ? null : { 'list-style-type': styleValue });\n    };\n    var Actions = { applyListFormat: applyListFormat };\n\n    var register = function (editor) {\n      editor.addCommand('ApplyUnorderedListStyle', function (ui, value) {\n        Actions.applyListFormat(editor, 'UL', value['list-style-type']);\n      });\n      editor.addCommand('ApplyOrderedListStyle', function (ui, value) {\n        Actions.applyListFormat(editor, 'OL', value['list-style-type']);\n      });\n    };\n    var Commands = { register: register };\n\n    var getNumberStyles = function (editor) {\n      var styles = editor.getParam('advlist_number_styles', 'default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman');\n      return styles ? styles.split(/[ ,]/) : [];\n    };\n    var getBulletStyles = function (editor) {\n      var styles = editor.getParam('advlist_bullet_styles', 'default,circle,disc,square');\n      return styles ? styles.split(/[ ,]/) : [];\n    };\n    var Settings = {\n      getNumberStyles: getNumberStyles,\n      getBulletStyles: getBulletStyles\n    };\n\n    var isChildOfBody = function (editor, elm) {\n      return editor.$.contains(editor.getBody(), elm);\n    };\n    var isTableCellNode = function (node) {\n      return node && /^(TH|TD)$/.test(node.nodeName);\n    };\n    var isListNode = function (editor) {\n      return function (node) {\n        return node && /^(OL|UL|DL)$/.test(node.nodeName) && isChildOfBody(editor, node);\n      };\n    };\n    var getSelectedStyleType = function (editor) {\n      var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n      return editor.dom.getStyle(listElm, 'listStyleType') || '';\n    };\n    var ListUtils = {\n      isTableCellNode: isTableCellNode,\n      isListNode: isListNode,\n      getSelectedStyleType: getSelectedStyleType\n    };\n\n    var styleValueToText = function (styleValue) {\n      return styleValue.replace(/\\-/g, ' ').replace(/\\b\\w/g, function (chr) {\n        return chr.toUpperCase();\n      });\n    };\n    var toMenuItems = function (styles) {\n      return global$1.map(styles, function (styleValue) {\n        var text = styleValueToText(styleValue);\n        var data = styleValue === 'default' ? '' : styleValue;\n        return {\n          text: text,\n          data: data\n        };\n      });\n    };\n    var ListStyles = { toMenuItems: toMenuItems };\n\n    var findIndex = function (list, predicate) {\n      for (var index = 0; index < list.length; index++) {\n        var element = list[index];\n        if (predicate(element)) {\n          return index;\n        }\n      }\n      return -1;\n    };\n    var listState = function (editor, listName) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('NodeChange', function (e) {\n          var tableCellIndex = findIndex(e.parents, ListUtils.isTableCellNode);\n          var parents = tableCellIndex !== -1 ? e.parents.slice(0, tableCellIndex) : e.parents;\n          var lists = global$1.grep(parents, ListUtils.isListNode(editor));\n          ctrl.active(lists.length > 0 && lists[0].nodeName === listName);\n        });\n      };\n    };\n    var updateSelection = function (editor) {\n      return function (e) {\n        var listStyleType = ListUtils.getSelectedStyleType(editor);\n        e.control.items().each(function (ctrl) {\n          ctrl.active(ctrl.settings.data === listStyleType);\n        });\n      };\n    };\n    var addSplitButton = function (editor, id, tooltip, cmd, nodeName, styles) {\n      editor.addButton(id, {\n        active: false,\n        type: 'splitbutton',\n        tooltip: tooltip,\n        menu: ListStyles.toMenuItems(styles),\n        onPostRender: listState(editor, nodeName),\n        onshow: updateSelection(editor),\n        onselect: function (e) {\n          Actions.applyListFormat(editor, nodeName, e.control.settings.data);\n        },\n        onclick: function () {\n          editor.execCommand(cmd);\n        }\n      });\n    };\n    var addButton = function (editor, id, tooltip, cmd, nodeName, styles) {\n      editor.addButton(id, {\n        active: false,\n        type: 'button',\n        tooltip: tooltip,\n        onPostRender: listState(editor, nodeName),\n        onclick: function () {\n          editor.execCommand(cmd);\n        }\n      });\n    };\n    var addControl = function (editor, id, tooltip, cmd, nodeName, styles) {\n      if (styles.length > 0) {\n        addSplitButton(editor, id, tooltip, cmd, nodeName, styles);\n      } else {\n        addButton(editor, id, tooltip, cmd, nodeName);\n      }\n    };\n    var register$1 = function (editor) {\n      addControl(editor, 'numlist', 'Numbered list', 'InsertOrderedList', 'OL', Settings.getNumberStyles(editor));\n      addControl(editor, 'bullist', 'Bullet list', 'InsertUnorderedList', 'UL', Settings.getBulletStyles(editor));\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('advlist', function (editor) {\n      var hasPlugin = function (editor, plugin) {\n        var plugins = editor.settings.plugins ? editor.settings.plugins : '';\n        return global$1.inArray(plugins.split(/[ ,]/), plugin) !== -1;\n      };\n      if (hasPlugin(editor, 'lists')) {\n        Buttons.register(editor);\n        Commands.register(editor);\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar autosave = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var fireRestoreDraft = function (editor) {\n      return editor.fire('RestoreDraft');\n    };\n    var fireStoreDraft = function (editor) {\n      return editor.fire('StoreDraft');\n    };\n    var fireRemoveDraft = function (editor) {\n      return editor.fire('RemoveDraft');\n    };\n\n    var parse = function (timeString, defaultTime) {\n      var multiples = {\n        s: 1000,\n        m: 60000\n      };\n      var toParse = timeString || defaultTime;\n      var parsedTime = /^(\\d+)([ms]?)$/.exec('' + toParse);\n      return (parsedTime[2] ? multiples[parsedTime[2]] : 1) * parseInt(toParse, 10);\n    };\n\n    var shouldAskBeforeUnload = function (editor) {\n      return editor.getParam('autosave_ask_before_unload', true);\n    };\n    var getAutoSavePrefix = function (editor) {\n      var prefix = editor.getParam('autosave_prefix', 'tinymce-autosave-{path}{query}{hash}-{id}-');\n      prefix = prefix.replace(/\\{path\\}/g, domGlobals.document.location.pathname);\n      prefix = prefix.replace(/\\{query\\}/g, domGlobals.document.location.search);\n      prefix = prefix.replace(/\\{hash\\}/g, domGlobals.document.location.hash);\n      prefix = prefix.replace(/\\{id\\}/g, editor.id);\n      return prefix;\n    };\n    var shouldRestoreWhenEmpty = function (editor) {\n      return editor.getParam('autosave_restore_when_empty', false);\n    };\n    var getAutoSaveInterval = function (editor) {\n      return parse(editor.settings.autosave_interval, '30s');\n    };\n    var getAutoSaveRetention = function (editor) {\n      return parse(editor.settings.autosave_retention, '20m');\n    };\n\n    var isEmpty = function (editor, html) {\n      var forcedRootBlockName = editor.settings.forced_root_block;\n      html = global$2.trim(typeof html === 'undefined' ? editor.getBody().innerHTML : html);\n      return html === '' || new RegExp('^<' + forcedRootBlockName + '[^>]*>((\\xA0|&nbsp;|[ \\t]|<br[^>]*>)+?|)</' + forcedRootBlockName + '>|<br>$', 'i').test(html);\n    };\n    var hasDraft = function (editor) {\n      var time = parseInt(global$1.getItem(getAutoSavePrefix(editor) + 'time'), 10) || 0;\n      if (new Date().getTime() - time > getAutoSaveRetention(editor)) {\n        removeDraft(editor, false);\n        return false;\n      }\n      return true;\n    };\n    var removeDraft = function (editor, fire) {\n      var prefix = getAutoSavePrefix(editor);\n      global$1.removeItem(prefix + 'draft');\n      global$1.removeItem(prefix + 'time');\n      if (fire !== false) {\n        fireRemoveDraft(editor);\n      }\n    };\n    var storeDraft = function (editor) {\n      var prefix = getAutoSavePrefix(editor);\n      if (!isEmpty(editor) && editor.isDirty()) {\n        global$1.setItem(prefix + 'draft', editor.getContent({\n          format: 'raw',\n          no_events: true\n        }));\n        global$1.setItem(prefix + 'time', new Date().getTime().toString());\n        fireStoreDraft(editor);\n      }\n    };\n    var restoreDraft = function (editor) {\n      var prefix = getAutoSavePrefix(editor);\n      if (hasDraft(editor)) {\n        editor.setContent(global$1.getItem(prefix + 'draft'), { format: 'raw' });\n        fireRestoreDraft(editor);\n      }\n    };\n    var startStoreDraft = function (editor, started) {\n      var interval = getAutoSaveInterval(editor);\n      if (!started.get()) {\n        setInterval(function () {\n          if (!editor.removed) {\n            storeDraft(editor);\n          }\n        }, interval);\n        started.set(true);\n      }\n    };\n    var restoreLastDraft = function (editor) {\n      editor.undoManager.transact(function () {\n        restoreDraft(editor);\n        removeDraft(editor);\n      });\n      editor.focus();\n    };\n\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n\n    var get = function (editor) {\n      return {\n        hasDraft: curry(hasDraft, editor),\n        storeDraft: curry(storeDraft, editor),\n        restoreDraft: curry(restoreDraft, editor),\n        removeDraft: curry(removeDraft, editor),\n        isEmpty: curry(isEmpty, editor)\n      };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    global$3._beforeUnloadHandler = function () {\n      var msg;\n      global$2.each(global$3.get(), function (editor) {\n        if (editor.plugins.autosave) {\n          editor.plugins.autosave.storeDraft();\n        }\n        if (!msg && editor.isDirty() && shouldAskBeforeUnload(editor)) {\n          msg = editor.translate('You have unsaved changes are you sure you want to navigate away?');\n        }\n      });\n      return msg;\n    };\n    var setup = function (editor) {\n      domGlobals.window.onbeforeunload = global$3._beforeUnloadHandler;\n    };\n\n    var postRender = function (editor, started) {\n      return function (e) {\n        var ctrl = e.control;\n        ctrl.disabled(!hasDraft(editor));\n        editor.on('StoreDraft RestoreDraft RemoveDraft', function () {\n          ctrl.disabled(!hasDraft(editor));\n        });\n        startStoreDraft(editor, started);\n      };\n    };\n    var register = function (editor, started) {\n      editor.addButton('restoredraft', {\n        title: 'Restore last draft',\n        onclick: function () {\n          restoreLastDraft(editor);\n        },\n        onPostRender: postRender(editor, started)\n      });\n      editor.addMenuItem('restoredraft', {\n        text: 'Restore last draft',\n        onclick: function () {\n          restoreLastDraft(editor);\n        },\n        onPostRender: postRender(editor, started),\n        context: 'file'\n      });\n    };\n\n    global.add('autosave', function (editor) {\n      var started = Cell(false);\n      setup();\n      register(editor, started);\n      editor.on('init', function () {\n        if (shouldRestoreWhenEmpty(editor) && editor.dom.isEmpty(editor.getBody())) {\n          restoreDraft(editor);\n        }\n      });\n      return get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","// Exports the \"wordcount\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/wordcount')\n//   ES2015:\n//     import 'tinymce/plugins/wordcount'\nrequire('./plugin.js');","(function () {\nvar table = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var sort = function (arr) {\n      return arr.slice(0).sort();\n    };\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort(required).join(', ') + ') were not specified. Specified keys were: ' + sort(keys).join(', ') + '.');\n    };\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort(unsupported).join(', '));\n    };\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) {\n        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      }\n      each(array, function (a) {\n        if (!isString(a)) {\n          throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n        }\n      });\n    };\n    var invalidTypeMessage = function (incorrect, type) {\n      throw new Error('All values need to be of type: ' + type + '. Keys (' + sort(incorrect).join(', ') + ') were not.');\n    };\n    var checkDupes = function (everything) {\n      var sorted = sort(everything);\n      var dupe = find(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var MixedBag = function (required, optional) {\n      var everything = required.concat(optional);\n      if (everything.length === 0) {\n        throw new Error('You must specify at least one required or optional field.');\n      }\n      validateStrArr('required', required);\n      validateStrArr('optional', optional);\n      checkDupes(everything);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        var unsupported = filter(keys$1, function (key) {\n          return !contains(everything, key);\n        });\n        if (unsupported.length > 0) {\n          unsuppMessage(unsupported);\n        }\n        var r = {};\n        each(required, function (req) {\n          r[req] = constant(obj[req]);\n        });\n        each(optional, function (opt) {\n          r[opt] = constant(Object.prototype.hasOwnProperty.call(obj, opt) ? Option.some(obj[opt]) : Option.none());\n        });\n        return r;\n      };\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var has = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n    var clone = function (element) {\n      return foldl(element.dom().attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var checkRange = function (str, substr, start) {\n      if (substr === '') {\n        return true;\n      }\n      if (str.length < substr.length) {\n        return false;\n      }\n      var x = str.substr(start, start + substr.length);\n      return x === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var trim = function (str) {\n      return str.replace(/^\\s+|\\s+$/g, '');\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n    };\n    var body = cached(function () {\n      return getBody(Element.fromDom(domGlobals.document));\n    });\n    var getBody = function (doc) {\n      var b = doc.dom().body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return Element.fromDom(b);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$1 = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$1 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      var v = r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n      return v === null ? undefined : v;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var remove$1 = function (element, property) {\n      var dom = element.dom();\n      internalRemove(dom, property);\n      if (has(element, 'style') && trim(get(element, 'style')) === '') {\n        remove(element, 'style');\n      }\n    };\n    var copy = function (source, target) {\n      var sourceDom = source.dom();\n      var targetDom = target.dom();\n      if (isSupported(sourceDom) && isSupported(targetDom)) {\n        targetDom.style.cssText = sourceDom.style.cssText;\n      }\n    };\n\n    var node = function () {\n      var f = Global$1.getOrDie('Node');\n      return f;\n    };\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$2 = browser.isIE() ? ieContains : regularContains;\n    var is$1 = is;\n\n    var owner = function (element) {\n      return Element.fromDom(element.dom().ownerDocument);\n    };\n    var defaultView = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.defaultView);\n    };\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom();\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = Element.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var prevSibling = function (element) {\n      return Option.from(element.dom().previousSibling).map(Element.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Option.from(element.dom().nextSibling).map(Element.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var spot = Immutable('element', 'offset');\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var after$1 = function (marker, elements) {\n      each(elements, function (x, i) {\n        var e = i === 0 ? marker : elements[i - 1];\n        after(e, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each(children(element), function (rogue) {\n        remove$2(rogue);\n      });\n    };\n    var remove$2 = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$2(wrapper);\n    };\n\n    var dimension = Immutable('width', 'height');\n    var dimensions = Immutable('width', 'height');\n    var grid = Immutable('rows', 'columns');\n    var address = Immutable('row', 'column');\n    var coords = Immutable('x', 'y');\n    var detail = Immutable('element', 'rowspan', 'colspan');\n    var detailnew = Immutable('element', 'rowspan', 'colspan', 'isNew');\n    var extended = Immutable('element', 'rowspan', 'colspan', 'row', 'column');\n    var rowdata = Immutable('element', 'cells', 'section');\n    var elementnew = Immutable('element', 'isNew');\n    var rowdatanew = Immutable('element', 'cells', 'section', 'isNew');\n    var rowcells = Immutable('cells', 'section');\n    var rowdetails = Immutable('details', 'section');\n    var bounds = Immutable('startRow', 'startCol', 'finishRow', 'finishCol');\n\n    var ancestors = function (scope, predicate, isRoot) {\n      return filter(parents(scope, isRoot), predicate);\n    };\n    var children$1 = function (scope, predicate) {\n      return filter(children(scope), predicate);\n    };\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var ancestors$1 = function (scope, selector, isRoot) {\n      return ancestors(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var children$2 = function (scope, selector) {\n      return children$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(Element.fromDom(node));\n      };\n      var result = find(scope.dom().childNodes, pred);\n      return result.map(Element.fromDom);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = Element.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Option.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope.dom());\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child$2 = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var firstLayer = function (scope, selector) {\n      return filterFirstLayer(scope, selector, constant(true));\n    };\n    var filterFirstLayer = function (scope, selector, predicate) {\n      return bind(children(scope), function (x) {\n        return is(x, selector) ? predicate(x) ? [x] : [] : filterFirstLayer(x, selector, predicate);\n      });\n    };\n    var LayerSelector = {\n      firstLayer: firstLayer,\n      filterFirstLayer: filterFirstLayer\n    };\n\n    var lookup = function (tags, element, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      if (isRoot(element)) {\n        return Option.none();\n      }\n      if (contains(tags, name(element))) {\n        return Option.some(element);\n      }\n      var isRootOrUpperTable = function (elm) {\n        return is(elm, 'table') || isRoot(elm);\n      };\n      return ancestor$1(element, tags.join(','), isRootOrUpperTable);\n    };\n    var cell = function (element, isRoot) {\n      return lookup([\n        'td',\n        'th'\n      ], element, isRoot);\n    };\n    var cells = function (ancestor) {\n      return LayerSelector.firstLayer(ancestor, 'th,td');\n    };\n    var notCell = function (element, isRoot) {\n      return lookup([\n        'caption',\n        'tr',\n        'tbody',\n        'tfoot',\n        'thead'\n      ], element, isRoot);\n    };\n    var neighbours = function (selector, element) {\n      return parent(element).map(function (parent) {\n        return children$2(parent, selector);\n      });\n    };\n    var neighbourCells = curry(neighbours, 'th,td');\n    var neighbourRows = curry(neighbours, 'tr');\n    var firstCell = function (ancestor) {\n      return descendant$1(ancestor, 'th,td');\n    };\n    var table = function (element, isRoot) {\n      return closest$1(element, 'table', isRoot);\n    };\n    var row = function (element, isRoot) {\n      return lookup(['tr'], element, isRoot);\n    };\n    var rows = function (ancestor) {\n      return LayerSelector.firstLayer(ancestor, 'tr');\n    };\n    var attr = function (element, property) {\n      return parseInt(get(element, property), 10);\n    };\n    var grid$1 = function (element, rowProp, colProp) {\n      var rowsCount = attr(element, rowProp);\n      var cols = attr(element, colProp);\n      return grid(rowsCount, cols);\n    };\n    var TableLookup = {\n      cell: cell,\n      firstCell: firstCell,\n      cells: cells,\n      neighbourCells: neighbourCells,\n      table: table,\n      row: row,\n      rows: rows,\n      notCell: notCell,\n      neighbourRows: neighbourRows,\n      attr: attr,\n      grid: grid$1\n    };\n\n    var fromTable = function (table) {\n      var rows = TableLookup.rows(table);\n      return map(rows, function (row) {\n        var element = row;\n        var parent$1 = parent(element);\n        var parentSection = parent$1.map(function (p) {\n          var parentName = name(p);\n          return parentName === 'tfoot' || parentName === 'thead' || parentName === 'tbody' ? parentName : 'tbody';\n        }).getOr('tbody');\n        var cells = map(TableLookup.cells(row), function (cell) {\n          var rowspan = has(cell, 'rowspan') ? parseInt(get(cell, 'rowspan'), 10) : 1;\n          var colspan = has(cell, 'colspan') ? parseInt(get(cell, 'colspan'), 10) : 1;\n          return detail(cell, rowspan, colspan);\n        });\n        return rowdata(element, cells, parentSection);\n      });\n    };\n    var fromPastedRows = function (rows, example) {\n      return map(rows, function (row) {\n        var cells = map(TableLookup.cells(row), function (cell) {\n          var rowspan = has(cell, 'rowspan') ? parseInt(get(cell, 'rowspan'), 10) : 1;\n          var colspan = has(cell, 'colspan') ? parseInt(get(cell, 'colspan'), 10) : 1;\n          return detail(cell, rowspan, colspan);\n        });\n        return rowdata(row, cells, example.section());\n      });\n    };\n    var DetailsList = {\n      fromTable: fromTable,\n      fromPastedRows: fromPastedRows\n    };\n\n    var key = function (row, column) {\n      return row + ',' + column;\n    };\n    var getAt = function (warehouse, row, column) {\n      var raw = warehouse.access()[key(row, column)];\n      return raw !== undefined ? Option.some(raw) : Option.none();\n    };\n    var findItem = function (warehouse, item, comparator) {\n      var filtered = filterItems(warehouse, function (detail) {\n        return comparator(item, detail.element());\n      });\n      return filtered.length > 0 ? Option.some(filtered[0]) : Option.none();\n    };\n    var filterItems = function (warehouse, predicate) {\n      var all = bind(warehouse.all(), function (r) {\n        return r.cells();\n      });\n      return filter(all, predicate);\n    };\n    var generate = function (list) {\n      var access = {};\n      var cells = [];\n      var maxRows = list.length;\n      var maxColumns = 0;\n      each(list, function (details, r) {\n        var currentRow = [];\n        each(details.cells(), function (detail) {\n          var start = 0;\n          while (access[key(r, start)] !== undefined) {\n            start++;\n          }\n          var current = extended(detail.element(), detail.rowspan(), detail.colspan(), r, start);\n          for (var i = 0; i < detail.colspan(); i++) {\n            for (var j = 0; j < detail.rowspan(); j++) {\n              var cr = r + j;\n              var cc = start + i;\n              var newpos = key(cr, cc);\n              access[newpos] = current;\n              maxColumns = Math.max(maxColumns, cc + 1);\n            }\n          }\n          currentRow.push(current);\n        });\n        cells.push(rowdata(details.element(), currentRow, details.section()));\n      });\n      var grid$1 = grid(maxRows, maxColumns);\n      return {\n        grid: constant(grid$1),\n        access: constant(access),\n        all: constant(cells)\n      };\n    };\n    var justCells = function (warehouse) {\n      var rows = map(warehouse.all(), function (w) {\n        return w.cells();\n      });\n      return flatten(rows);\n    };\n    var Warehouse = {\n      generate: generate,\n      getAt: getAt,\n      findItem: findItem,\n      filterItems: filterItems,\n      justCells: justCells\n    };\n\n    var statsStruct = Immutable('minRow', 'minCol', 'maxRow', 'maxCol');\n    var findSelectedStats = function (house, isSelected) {\n      var totalColumns = house.grid().columns();\n      var totalRows = house.grid().rows();\n      var minRow = totalRows;\n      var minCol = totalColumns;\n      var maxRow = 0;\n      var maxCol = 0;\n      each$1(house.access(), function (detail) {\n        if (isSelected(detail)) {\n          var startRow = detail.row();\n          var endRow = startRow + detail.rowspan() - 1;\n          var startCol = detail.column();\n          var endCol = startCol + detail.colspan() - 1;\n          if (startRow < minRow) {\n            minRow = startRow;\n          } else if (endRow > maxRow) {\n            maxRow = endRow;\n          }\n          if (startCol < minCol) {\n            minCol = startCol;\n          } else if (endCol > maxCol) {\n            maxCol = endCol;\n          }\n        }\n      });\n      return statsStruct(minRow, minCol, maxRow, maxCol);\n    };\n    var makeCell = function (list, seenSelected, rowIndex) {\n      var row = list[rowIndex].element();\n      var td = Element.fromTag('td');\n      append(td, Element.fromTag('br'));\n      var f = seenSelected ? append : prepend;\n      f(row, td);\n    };\n    var fillInGaps = function (list, house, stats, isSelected) {\n      var totalColumns = house.grid().columns();\n      var totalRows = house.grid().rows();\n      for (var i = 0; i < totalRows; i++) {\n        var seenSelected = false;\n        for (var j = 0; j < totalColumns; j++) {\n          if (!(i < stats.minRow() || i > stats.maxRow() || j < stats.minCol() || j > stats.maxCol())) {\n            var needCell = Warehouse.getAt(house, i, j).filter(isSelected).isNone();\n            if (needCell) {\n              makeCell(list, seenSelected, i);\n            } else {\n              seenSelected = true;\n            }\n          }\n        }\n      }\n    };\n    var clean = function (table, stats) {\n      var emptyRows = filter(LayerSelector.firstLayer(table, 'tr'), function (row) {\n        return row.dom().childElementCount === 0;\n      });\n      each(emptyRows, remove$2);\n      if (stats.minCol() === stats.maxCol() || stats.minRow() === stats.maxRow()) {\n        each(LayerSelector.firstLayer(table, 'th,td'), function (cell) {\n          remove(cell, 'rowspan');\n          remove(cell, 'colspan');\n        });\n      }\n      remove(table, 'width');\n      remove(table, 'height');\n      remove$1(table, 'width');\n      remove$1(table, 'height');\n    };\n    var extract = function (table, selectedSelector) {\n      var isSelected = function (detail) {\n        return is(detail.element(), selectedSelector);\n      };\n      var list = DetailsList.fromTable(table);\n      var house = Warehouse.generate(list);\n      var stats = findSelectedStats(house, isSelected);\n      var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n      var unselectedCells = LayerSelector.filterFirstLayer(table, 'th,td', function (cell) {\n        return is(cell, selector);\n      });\n      each(unselectedCells, remove$2);\n      fillInGaps(list, house, stats, isSelected);\n      clean(table, stats);\n      return table;\n    };\n    var CopySelected = { extract: extract };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom().nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get$2 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n    var set$2 = function (element, value) {\n      api.set(element, value);\n    };\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var NBSP = '\\xA0';\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(NBSP) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var first = function (element) {\n      return descendant(element, isCursorPosition);\n    };\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Option.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = Element.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var copy$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      var cloneChildren = children(deep(original));\n      append$1(nu, cloneChildren);\n      return nu;\n    };\n\n    var createCell = function () {\n      var td = Element.fromTag('td');\n      append(td, Element.fromTag('br'));\n      return td;\n    };\n    var replace = function (cell, tag, attrs) {\n      var replica = copy$1(cell, tag);\n      each$1(attrs, function (v, k) {\n        if (v === null) {\n          remove(replica, k);\n        } else {\n          set(replica, k, v);\n        }\n      });\n      return replica;\n    };\n    var pasteReplace = function (cell) {\n      return cell;\n    };\n    var newRow = function (doc) {\n      return function () {\n        return Element.fromTag('tr', doc.dom());\n      };\n    };\n    var cloneFormats = function (oldCell, newCell, formats) {\n      var first$1 = first(oldCell);\n      return first$1.map(function (firstText) {\n        var formatSelector = formats.join(',');\n        var parents = ancestors$1(firstText, formatSelector, function (element) {\n          return eq(element, oldCell);\n        });\n        return foldr(parents, function (last, parent) {\n          var clonedFormat = shallow(parent);\n          remove(clonedFormat, 'contenteditable');\n          append(last, clonedFormat);\n          return clonedFormat;\n        }, newCell);\n      }).getOr(newCell);\n    };\n    var cellOperations = function (mutate, doc, formatsToClone) {\n      var newCell = function (prev) {\n        var docu = owner(prev.element());\n        var td = Element.fromTag(name(prev.element()), docu.dom());\n        var formats = formatsToClone.getOr([\n          'strong',\n          'em',\n          'b',\n          'i',\n          'span',\n          'font',\n          'h1',\n          'h2',\n          'h3',\n          'h4',\n          'h5',\n          'h6',\n          'p',\n          'div'\n        ]);\n        var lastNode = formats.length > 0 ? cloneFormats(prev.element(), td, formats) : td;\n        append(lastNode, Element.fromTag('br'));\n        copy(prev.element(), td);\n        remove$1(td, 'height');\n        if (prev.colspan() !== 1) {\n          remove$1(prev.element(), 'width');\n        }\n        mutate(prev.element(), td);\n        return td;\n      };\n      return {\n        row: newRow(doc),\n        cell: newCell,\n        replace: replace,\n        gap: createCell\n      };\n    };\n    var paste = function (doc) {\n      return {\n        row: newRow(doc),\n        cell: createCell,\n        replace: pasteReplace,\n        gap: createCell\n      };\n    };\n    var TableFill = {\n      cellOperations: cellOperations,\n      paste: paste\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(Element.fromDom(div));\n    };\n\n    var inSelection = function (bounds, detail) {\n      var leftEdge = detail.column();\n      var rightEdge = detail.column() + detail.colspan() - 1;\n      var topEdge = detail.row();\n      var bottomEdge = detail.row() + detail.rowspan() - 1;\n      return leftEdge <= bounds.finishCol() && rightEdge >= bounds.startCol() && (topEdge <= bounds.finishRow() && bottomEdge >= bounds.startRow());\n    };\n    var isWithin = function (bounds, detail) {\n      return detail.column() >= bounds.startCol() && detail.column() + detail.colspan() - 1 <= bounds.finishCol() && detail.row() >= bounds.startRow() && detail.row() + detail.rowspan() - 1 <= bounds.finishRow();\n    };\n    var isRectangular = function (warehouse, bounds) {\n      var isRect = true;\n      var detailIsWithin = curry(isWithin, bounds);\n      for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n        for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n          isRect = isRect && Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);\n        }\n      }\n      return isRect ? Option.some(bounds) : Option.none();\n    };\n    var CellBounds = {\n      inSelection: inSelection,\n      isWithin: isWithin,\n      isRectangular: isRectangular\n    };\n\n    var getBounds = function (detailA, detailB) {\n      return bounds(Math.min(detailA.row(), detailB.row()), Math.min(detailA.column(), detailB.column()), Math.max(detailA.row() + detailA.rowspan() - 1, detailB.row() + detailB.rowspan() - 1), Math.max(detailA.column() + detailA.colspan() - 1, detailB.column() + detailB.colspan() - 1));\n    };\n    var getAnyBox = function (warehouse, startCell, finishCell) {\n      var startCoords = Warehouse.findItem(warehouse, startCell, eq);\n      var finishCoords = Warehouse.findItem(warehouse, finishCell, eq);\n      return startCoords.bind(function (sc) {\n        return finishCoords.map(function (fc) {\n          return getBounds(sc, fc);\n        });\n      });\n    };\n    var getBox = function (warehouse, startCell, finishCell) {\n      return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n        return CellBounds.isRectangular(warehouse, bounds);\n      });\n    };\n    var CellGroup = {\n      getAnyBox: getAnyBox,\n      getBox: getBox\n    };\n\n    var moveBy = function (warehouse, cell, row, column) {\n      return Warehouse.findItem(warehouse, cell, eq).bind(function (detail) {\n        var startRow = row > 0 ? detail.row() + detail.rowspan() - 1 : detail.row();\n        var startCol = column > 0 ? detail.column() + detail.colspan() - 1 : detail.column();\n        var dest = Warehouse.getAt(warehouse, startRow + row, startCol + column);\n        return dest.map(function (d) {\n          return d.element();\n        });\n      });\n    };\n    var intercepts = function (warehouse, start, finish) {\n      return CellGroup.getAnyBox(warehouse, start, finish).map(function (bounds) {\n        var inside = Warehouse.filterItems(warehouse, curry(CellBounds.inSelection, bounds));\n        return map(inside, function (detail) {\n          return detail.element();\n        });\n      });\n    };\n    var parentCell = function (warehouse, innerCell) {\n      var isContainedBy = function (c1, c2) {\n        return contains$2(c2, c1);\n      };\n      return Warehouse.findItem(warehouse, innerCell, isContainedBy).map(function (detail) {\n        return detail.element();\n      });\n    };\n    var CellFinder = {\n      moveBy: moveBy,\n      intercepts: intercepts,\n      parentCell: parentCell\n    };\n\n    var moveBy$1 = function (cell, deltaRow, deltaColumn) {\n      return TableLookup.table(cell).bind(function (table) {\n        var warehouse = getWarehouse(table);\n        return CellFinder.moveBy(warehouse, cell, deltaRow, deltaColumn);\n      });\n    };\n    var intercepts$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return CellFinder.intercepts(warehouse, first, last);\n    };\n    var nestedIntercepts = function (table, first, firstTable, last, lastTable) {\n      var warehouse = getWarehouse(table);\n      var optStartCell = eq(table, firstTable) ? Option.some(first) : CellFinder.parentCell(warehouse, first);\n      var optLastCell = eq(table, lastTable) ? Option.some(last) : CellFinder.parentCell(warehouse, last);\n      return optStartCell.bind(function (startCell) {\n        return optLastCell.bind(function (lastCell) {\n          return CellFinder.intercepts(warehouse, startCell, lastCell);\n        });\n      });\n    };\n    var getBox$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return CellGroup.getBox(warehouse, first, last);\n    };\n    var getWarehouse = function (table) {\n      var list = DetailsList.fromTable(table);\n      return Warehouse.generate(list);\n    };\n    var TablePositions = {\n      moveBy: moveBy$1,\n      intercepts: intercepts$1,\n      nestedIntercepts: nestedIntercepts,\n      getBox: getBox$1\n    };\n\n    var TagBoundaries = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'li',\n      'table',\n      'thead',\n      'tbody',\n      'tfoot',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n\n    function DomUniverse () {\n      var clone$1 = function (element) {\n        return Element.fromDom(element.dom().cloneNode(false));\n      };\n      var document = function (element) {\n        return element.dom().ownerDocument;\n      };\n      var isBoundary = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        if (name(element) === 'body') {\n          return true;\n        }\n        return contains(TagBoundaries, name(element));\n      };\n      var isEmptyTag = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        return contains([\n          'br',\n          'img',\n          'hr',\n          'input'\n        ], name(element));\n      };\n      var comparePosition = function (element, other) {\n        return element.dom().compareDocumentPosition(other.dom());\n      };\n      var copyAttributesTo = function (source, destination) {\n        var as = clone(source);\n        setAll(destination, as);\n      };\n      return {\n        up: constant({\n          selector: ancestor$1,\n          closest: closest$1,\n          predicate: ancestor,\n          all: parents\n        }),\n        down: constant({\n          selector: descendants$1,\n          predicate: descendants\n        }),\n        styles: constant({\n          get: get$1,\n          getRaw: getRaw,\n          set: set$1,\n          remove: remove$1\n        }),\n        attrs: constant({\n          get: get,\n          set: set,\n          remove: remove,\n          copyTo: copyAttributesTo\n        }),\n        insert: constant({\n          before: before,\n          after: after,\n          afterAll: after$1,\n          append: append,\n          appendAll: append$1,\n          prepend: prepend,\n          wrap: wrap\n        }),\n        remove: constant({\n          unwrap: unwrap,\n          remove: remove$2\n        }),\n        create: constant({\n          nu: Element.fromTag,\n          clone: clone$1,\n          text: Element.fromText\n        }),\n        query: constant({\n          comparePosition: comparePosition,\n          prevSibling: prevSibling,\n          nextSibling: nextSibling\n        }),\n        property: constant({\n          children: children,\n          name: name,\n          parent: parent,\n          document: document,\n          isText: isText,\n          isComment: isComment,\n          isElement: isElement,\n          getText: get$2,\n          setText: set$2,\n          isBoundary: isBoundary,\n          isEmptyTag: isEmptyTag\n        }),\n        eq: eq,\n        is: is$1\n      };\n    }\n\n    var leftRight = Immutable('left', 'right');\n    var brokenPath = Immutable('first', 'second', 'splits');\n    var bisect = function (universe, parent, child) {\n      var children = universe.property().children(parent);\n      var index = findIndex(children, curry(universe.eq, child));\n      return index.map(function (ind) {\n        return {\n          before: constant(children.slice(0, ind)),\n          after: constant(children.slice(ind + 1))\n        };\n      });\n    };\n    var breakToRight = function (universe, parent, child) {\n      return bisect(universe, parent, child).map(function (parts) {\n        var second = universe.create().clone(parent);\n        universe.insert().appendAll(second, parts.after());\n        universe.insert().after(parent, second);\n        return leftRight(parent, second);\n      });\n    };\n    var breakToLeft = function (universe, parent, child) {\n      return bisect(universe, parent, child).map(function (parts) {\n        var prior = universe.create().clone(parent);\n        universe.insert().appendAll(prior, parts.before().concat([child]));\n        universe.insert().appendAll(parent, parts.after());\n        universe.insert().before(parent, prior);\n        return leftRight(prior, parent);\n      });\n    };\n    var breakPath = function (universe, item, isTop, breaker) {\n      var next = function (child, group, splits) {\n        var fallback = brokenPath(child, Option.none(), splits);\n        if (isTop(child)) {\n          return brokenPath(child, group, splits);\n        } else {\n          return universe.property().parent(child).bind(function (parent) {\n            return breaker(universe, parent, child).map(function (breakage) {\n              var extra = [{\n                  first: breakage.left,\n                  second: breakage.right\n                }];\n              var nextChild = isTop(parent) ? parent : breakage.left();\n              return next(nextChild, Option.some(breakage.right()), splits.concat(extra));\n            });\n          }).getOr(fallback);\n        }\n      };\n      return next(item, Option.none(), []);\n    };\n\n    var all$1 = function (universe, look, elements, f) {\n      var head = elements[0];\n      var tail = elements.slice(1);\n      return f(universe, look, head, tail);\n    };\n    var oneAll = function (universe, look, elements) {\n      return elements.length > 0 ? all$1(universe, look, elements, unsafeOne) : Option.none();\n    };\n    var unsafeOne = function (universe, look, head, tail) {\n      var start = look(universe, head);\n      return foldr(tail, function (b, a) {\n        var current = look(universe, a);\n        return commonElement(universe, b, current);\n      }, start);\n    };\n    var commonElement = function (universe, start, end) {\n      return start.bind(function (s) {\n        return end.filter(curry(universe.eq, s));\n      });\n    };\n\n    var eq$1 = function (universe, item) {\n      return curry(universe.eq, item);\n    };\n    var unsafeSubset = function (universe, common, ps1, ps2) {\n      var children = universe.property().children(common);\n      if (universe.eq(common, ps1[0])) {\n        return Option.some([ps1[0]]);\n      }\n      if (universe.eq(common, ps2[0])) {\n        return Option.some([ps2[0]]);\n      }\n      var finder = function (ps) {\n        var topDown = reverse(ps);\n        var index = findIndex(topDown, eq$1(universe, common)).getOr(-1);\n        var item = index < topDown.length - 1 ? topDown[index + 1] : topDown[index];\n        return findIndex(children, eq$1(universe, item));\n      };\n      var startIndex = finder(ps1);\n      var endIndex = finder(ps2);\n      return startIndex.bind(function (sIndex) {\n        return endIndex.map(function (eIndex) {\n          var first = Math.min(sIndex, eIndex);\n          var last = Math.max(sIndex, eIndex);\n          return children.slice(first, last + 1);\n        });\n      });\n    };\n    var ancestors$2 = function (universe, start, end, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      var ps1 = [start].concat(universe.up().all(start));\n      var ps2 = [end].concat(universe.up().all(end));\n      var prune = function (path) {\n        var index = findIndex(path, isRoot);\n        return index.fold(function () {\n          return path;\n        }, function (ind) {\n          return path.slice(0, ind + 1);\n        });\n      };\n      var pruned1 = prune(ps1);\n      var pruned2 = prune(ps2);\n      var shared = find(pruned1, function (x) {\n        return exists(pruned2, eq$1(universe, x));\n      });\n      return {\n        firstpath: constant(pruned1),\n        secondpath: constant(pruned2),\n        shared: constant(shared)\n      };\n    };\n    var subset = function (universe, start, end) {\n      var ancs = ancestors$2(universe, start, end);\n      return ancs.shared().bind(function (shared) {\n        return unsafeSubset(universe, shared, ancs.firstpath(), ancs.secondpath());\n      });\n    };\n    var SubsetFn = {\n      subset: subset,\n      ancestors: ancestors$2\n    };\n\n    var sharedOne = oneAll;\n    var subset$1 = SubsetFn.subset;\n    var ancestors$3 = SubsetFn.ancestors;\n    var breakToLeft$1 = breakToLeft;\n    var breakToRight$1 = breakToRight;\n    var breakPath$1 = breakPath;\n    var Parent = {\n      sharedOne: sharedOne,\n      subset: subset$1,\n      ancestors: ancestors$3,\n      breakToLeft: breakToLeft$1,\n      breakToRight: breakToRight$1,\n      breakPath: breakPath$1\n    };\n\n    var universe = DomUniverse();\n    var sharedOne$1 = function (look, elements) {\n      return Parent.sharedOne(universe, function (_universe, element) {\n        return look(element);\n      }, elements);\n    };\n    var subset$2 = function (start, finish) {\n      return Parent.subset(universe, start, finish);\n    };\n    var ancestors$4 = function (start, finish, isRoot) {\n      return Parent.ancestors(universe, start, finish, isRoot);\n    };\n    var breakToLeft$2 = function (parent, child) {\n      return Parent.breakToLeft(universe, parent, child);\n    };\n    var breakToRight$2 = function (parent, child) {\n      return Parent.breakToRight(universe, parent, child);\n    };\n    var breakPath$2 = function (child, isTop, breaker) {\n      return Parent.breakPath(universe, child, isTop, function (u, p, c) {\n        return breaker(p, c);\n      });\n    };\n    var DomParent = {\n      sharedOne: sharedOne$1,\n      subset: subset$2,\n      ancestors: ancestors$4,\n      breakToLeft: breakToLeft$2,\n      breakToRight: breakToRight$2,\n      breakPath: breakPath$2\n    };\n\n    var create = MixedBag([\n      'boxes',\n      'start',\n      'finish'\n    ], []);\n    var Identified = { create: create };\n\n    var lookupTable = function (container) {\n      return ancestor$1(container, 'table');\n    };\n    var identify = function (start, finish, isRoot) {\n      var getIsRoot = function (rootTable) {\n        return function (element) {\n          return isRoot !== undefined && isRoot(element) || eq(element, rootTable);\n        };\n      };\n      if (eq(start, finish)) {\n        return Option.some(Identified.create({\n          boxes: Option.some([start]),\n          start: start,\n          finish: finish\n        }));\n      } else {\n        return lookupTable(start).bind(function (startTable) {\n          return lookupTable(finish).bind(function (finishTable) {\n            if (eq(startTable, finishTable)) {\n              return Option.some(Identified.create({\n                boxes: TablePositions.intercepts(startTable, start, finish),\n                start: start,\n                finish: finish\n              }));\n            } else if (contains$2(startTable, finishTable)) {\n              var ancestorCells = ancestors$1(finish, 'td,th', getIsRoot(startTable));\n              var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n              return Option.some(Identified.create({\n                boxes: TablePositions.nestedIntercepts(startTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: finishCell\n              }));\n            } else if (contains$2(finishTable, startTable)) {\n              var ancestorCells = ancestors$1(start, 'td,th', getIsRoot(finishTable));\n              var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n              return Option.some(Identified.create({\n                boxes: TablePositions.nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: startCell\n              }));\n            } else {\n              return DomParent.ancestors(start, finish).shared().bind(function (lca) {\n                return closest$1(lca, 'table', isRoot).bind(function (lcaTable) {\n                  var finishAncestorCells = ancestors$1(finish, 'td,th', getIsRoot(lcaTable));\n                  var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                  var startAncestorCells = ancestors$1(start, 'td,th', getIsRoot(lcaTable));\n                  var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                  return Option.some(Identified.create({\n                    boxes: TablePositions.nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                    start: startCell,\n                    finish: finishCell\n                  }));\n                });\n              });\n            }\n          });\n        });\n      }\n    };\n    var retrieve = function (container, selector) {\n      var sels = descendants$1(container, selector);\n      return sels.length > 0 ? Option.some(sels) : Option.none();\n    };\n    var getLast = function (boxes, lastSelectedSelector) {\n      return find(boxes, function (box) {\n        return is(box, lastSelectedSelector);\n      });\n    };\n    var getEdges = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return descendant$1(container, firstSelectedSelector).bind(function (first) {\n        return descendant$1(container, lastSelectedSelector).bind(function (last) {\n          return DomParent.sharedOne(lookupTable, [\n            first,\n            last\n          ]).map(function (tbl) {\n            return {\n              first: constant(first),\n              last: constant(last),\n              table: constant(tbl)\n            };\n          });\n        });\n      });\n    };\n    var expandTo = function (finish, firstSelectedSelector) {\n      return ancestor$1(finish, 'table').bind(function (table) {\n        return descendant$1(table, firstSelectedSelector).bind(function (start) {\n          return identify(start, finish).bind(function (identified) {\n            return identified.boxes().map(function (boxes) {\n              return {\n                boxes: constant(boxes),\n                start: constant(identified.start()),\n                finish: constant(identified.finish())\n              };\n            });\n          });\n        });\n      });\n    };\n    var shiftSelection = function (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n      return getLast(boxes, lastSelectedSelector).bind(function (last) {\n        return TablePositions.moveBy(last, deltaRow, deltaColumn).bind(function (finish) {\n          return expandTo(finish, firstSelectedSelector);\n        });\n      });\n    };\n    var CellSelection = {\n      identify: identify,\n      retrieve: retrieve,\n      shiftSelection: shiftSelection,\n      getEdges: getEdges\n    };\n\n    var retrieve$1 = function (container, selector) {\n      return CellSelection.retrieve(container, selector);\n    };\n    var retrieveBox = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return CellSelection.getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n        var isRoot = function (ancestor) {\n          return eq(container, ancestor);\n        };\n        var firstAncestor = ancestor$1(edges.first(), 'thead,tfoot,tbody,table', isRoot);\n        var lastAncestor = ancestor$1(edges.last(), 'thead,tfoot,tbody,table', isRoot);\n        return firstAncestor.bind(function (fA) {\n          return lastAncestor.bind(function (lA) {\n            return eq(fA, lA) ? TablePositions.getBox(edges.table(), edges.first(), edges.last()) : Option.none();\n          });\n        });\n      });\n    };\n    var TableSelection = {\n      retrieve: retrieve$1,\n      retrieveBox: retrieveBox\n    };\n\n    var selected = 'data-mce-selected';\n    var selectedSelector = 'td[' + selected + '],th[' + selected + ']';\n    var attributeSelector = '[' + selected + ']';\n    var firstSelected = 'data-mce-first-selected';\n    var firstSelectedSelector = 'td[' + firstSelected + '],th[' + firstSelected + ']';\n    var lastSelected = 'data-mce-last-selected';\n    var lastSelectedSelector = 'td[' + lastSelected + '],th[' + lastSelected + ']';\n    var Ephemera = {\n      selected: constant(selected),\n      selectedSelector: constant(selectedSelector),\n      attributeSelector: constant(attributeSelector),\n      firstSelected: constant(firstSelected),\n      firstSelectedSelector: constant(firstSelectedSelector),\n      lastSelected: constant(lastSelected),\n      lastSelectedSelector: constant(lastSelectedSelector)\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              domGlobals.console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    var type$1 = Adt.generate([\n      { none: [] },\n      { multiple: ['elements'] },\n      { single: ['selection'] }\n    ]);\n    var cata = function (subject, onNone, onMultiple, onSingle) {\n      return subject.fold(onNone, onMultiple, onSingle);\n    };\n    var SelectionTypes = {\n      cata: cata,\n      none: type$1.none,\n      multiple: type$1.multiple,\n      single: type$1.single\n    };\n\n    var selection = function (cell, selections) {\n      return SelectionTypes.cata(selections.get(), constant([]), identity, constant([cell]));\n    };\n    var unmergable = function (cell, selections) {\n      var hasSpan = function (elem) {\n        return has(elem, 'rowspan') && parseInt(get(elem, 'rowspan'), 10) > 1 || has(elem, 'colspan') && parseInt(get(elem, 'colspan'), 10) > 1;\n      };\n      var candidates = selection(cell, selections);\n      return candidates.length > 0 && forall(candidates, hasSpan) ? Option.some(candidates) : Option.none();\n    };\n    var mergable = function (table, selections) {\n      return SelectionTypes.cata(selections.get(), Option.none, function (cells, _env) {\n        if (cells.length === 0) {\n          return Option.none();\n        }\n        return TableSelection.retrieveBox(table, Ephemera.firstSelectedSelector(), Ephemera.lastSelectedSelector()).bind(function (bounds) {\n          return cells.length > 1 ? Option.some({\n            bounds: constant(bounds),\n            cells: constant(cells)\n          }) : Option.none();\n        });\n      }, Option.none);\n    };\n    var CellOperations = {\n      mergable: mergable,\n      unmergable: unmergable,\n      selection: selection\n    };\n\n    var noMenu = function (cell) {\n      return {\n        element: constant(cell),\n        mergable: Option.none,\n        unmergable: Option.none,\n        selection: constant([cell])\n      };\n    };\n    var forMenu = function (selections, table, cell) {\n      return {\n        element: constant(cell),\n        mergable: constant(CellOperations.mergable(table, selections)),\n        unmergable: constant(CellOperations.unmergable(cell, selections)),\n        selection: constant(CellOperations.selection(cell, selections))\n      };\n    };\n    var notCell$1 = function (element) {\n      return noMenu(element);\n    };\n    var paste$1 = Immutable('element', 'clipboard', 'generators');\n    var pasteRows = function (selections, table, cell, clipboard, generators) {\n      return {\n        element: constant(cell),\n        mergable: Option.none,\n        unmergable: Option.none,\n        selection: constant(CellOperations.selection(cell, selections)),\n        clipboard: constant(clipboard),\n        generators: constant(generators)\n      };\n    };\n    var TableTargets = {\n      noMenu: noMenu,\n      forMenu: forMenu,\n      notCell: notCell$1,\n      paste: paste$1,\n      pasteRows: pasteRows\n    };\n\n    var extractSelected = function (cells) {\n      return TableLookup.table(cells[0]).map(deep).map(function (replica) {\n        return [CopySelected.extract(replica, Ephemera.attributeSelector())];\n      });\n    };\n    var serializeElements = function (editor, elements) {\n      return map(elements, function (elm) {\n        return editor.selection.serializer.serialize(elm.dom(), {});\n      }).join('');\n    };\n    var getTextContent = function (elements) {\n      return map(elements, function (element) {\n        return element.dom().innerText;\n      }).join('');\n    };\n    var registerEvents = function (editor, selections, actions, cellSelection) {\n      editor.on('BeforeGetContent', function (e) {\n        var multiCellContext = function (cells) {\n          e.preventDefault();\n          extractSelected(cells).each(function (elements) {\n            e.content = e.format === 'text' ? getTextContent(elements) : serializeElements(editor, elements);\n          });\n        };\n        if (e.selection === true) {\n          SelectionTypes.cata(selections.get(), noop, multiCellContext, noop);\n        }\n      });\n      editor.on('BeforeSetContent', function (e) {\n        if (e.selection === true && e.paste === true) {\n          var cellOpt = Option.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          cellOpt.each(function (domCell) {\n            var cell = Element.fromDom(domCell);\n            TableLookup.table(cell).each(function (table) {\n              var elements = filter(fromHtml$1(e.content), function (content) {\n                return name(content) !== 'meta';\n              });\n              if (elements.length === 1 && name(elements[0]) === 'table') {\n                e.preventDefault();\n                var doc = Element.fromDom(editor.getDoc());\n                var generators = TableFill.paste(doc);\n                var targets = TableTargets.paste(cell, elements[0], generators);\n                actions.pasteCells(table, targets).each(function (rng) {\n                  editor.selection.setRng(rng);\n                  editor.focus();\n                  cellSelection.clear(table);\n                });\n              }\n            });\n          });\n        }\n      });\n    };\n    var Clipboard = { registerEvents: registerEvents };\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom();\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$1(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$1(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api$1 = Dimension('height', function (element) {\n      var dom = element.dom();\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$3 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter = function (element) {\n      return api$1.getOuter(element);\n    };\n\n    var api$2 = Dimension('width', function (element) {\n      return element.dom().offsetWidth;\n    });\n    var get$4 = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n\n    var platform = PlatformDetection$1.detect();\n    var needManualCalc = function () {\n      return platform.browser.isIE() || platform.browser.isEdge();\n    };\n    var toNumber = function (px, fallback) {\n      var num = parseFloat(px);\n      return isNaN(num) ? fallback : num;\n    };\n    var getProp = function (elm, name, fallback) {\n      return toNumber(get$1(elm, name), fallback);\n    };\n    var getCalculatedHeight = function (cell) {\n      var paddingTop = getProp(cell, 'padding-top', 0);\n      var paddingBottom = getProp(cell, 'padding-bottom', 0);\n      var borderTop = getProp(cell, 'border-top-width', 0);\n      var borderBottom = getProp(cell, 'border-bottom-width', 0);\n      var height = cell.dom().getBoundingClientRect().height;\n      var boxSizing = get$1(cell, 'box-sizing');\n      var borders = borderTop + borderBottom;\n      return boxSizing === 'border-box' ? height : height - paddingTop - paddingBottom - borders;\n    };\n    var getWidth = function (cell) {\n      return getProp(cell, 'width', get$4(cell));\n    };\n    var getHeight = function (cell) {\n      return needManualCalc() ? getCalculatedHeight(cell) : getProp(cell, 'height', get$3(cell));\n    };\n    var RuntimeSize = {\n      getWidth: getWidth,\n      getHeight: getHeight\n    };\n\n    var genericSizeRegex = /(\\d+(\\.\\d+)?)(\\w|%)*/;\n    var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var pixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n    var setPixelWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + 'px');\n    };\n    var setPercentageWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + '%');\n    };\n    var setHeight = function (cell, amount) {\n      set$1(cell, 'height', amount + 'px');\n    };\n    var getHeightValue = function (cell) {\n      return getRaw(cell, 'height').getOrThunk(function () {\n        return RuntimeSize.getHeight(cell) + 'px';\n      });\n    };\n    var convert = function (cell, number, getter, setter) {\n      var newSize = TableLookup.table(cell).map(function (table) {\n        var total = getter(table);\n        return Math.floor(number / 100 * total);\n      }).getOr(number);\n      setter(cell, newSize);\n      return newSize;\n    };\n    var normalizePixelSize = function (value, cell, getter, setter) {\n      var number = parseInt(value, 10);\n      return endsWith(value, '%') && name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n    };\n    var getTotalHeight = function (cell) {\n      var value = getHeightValue(cell);\n      if (!value) {\n        return get$3(cell);\n      }\n      return normalizePixelSize(value, cell, get$3, setHeight);\n    };\n    var get$5 = function (cell, type, f) {\n      var v = f(cell);\n      var span = getSpan(cell, type);\n      return v / span;\n    };\n    var getSpan = function (cell, type) {\n      return has(cell, type) ? parseInt(get(cell, type), 10) : 1;\n    };\n    var getRawWidth = function (element) {\n      var cssWidth = getRaw(element, 'width');\n      return cssWidth.fold(function () {\n        return Option.from(get(element, 'width'));\n      }, function (width) {\n        return Option.some(width);\n      });\n    };\n    var normalizePercentageWidth = function (cellWidth, tableSize) {\n      return cellWidth / tableSize.pixelWidth() * 100;\n    };\n    var choosePercentageSize = function (element, width, tableSize) {\n      var percentMatch = percentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        return parseFloat(percentMatch[1]);\n      } else {\n        var intWidth = get$4(element);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }\n    };\n    var getPercentageWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        var intWidth = get$4(cell);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }, function (w) {\n        return choosePercentageSize(cell, w, tableSize);\n      });\n    };\n    var normalizePixelWidth = function (cellWidth, tableSize) {\n      return cellWidth / 100 * tableSize.pixelWidth();\n    };\n    var choosePixelSize = function (element, width, tableSize) {\n      var pixelMatch = pixelBasedSizeRegex.exec(width);\n      if (pixelMatch !== null) {\n        return parseInt(pixelMatch[1], 10);\n      }\n      var percentMatch = percentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        var floatWidth = parseFloat(percentMatch[1]);\n        return normalizePixelWidth(floatWidth, tableSize);\n      }\n      return get$4(element);\n    };\n    var getPixelWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        return get$4(cell);\n      }, function (w) {\n        return choosePixelSize(cell, w, tableSize);\n      });\n    };\n    var getHeight$1 = function (cell) {\n      return get$5(cell, 'rowspan', getTotalHeight);\n    };\n    var getGenericWidth = function (cell) {\n      var width = getRawWidth(cell);\n      return width.bind(function (w) {\n        var match = genericSizeRegex.exec(w);\n        if (match !== null) {\n          return Option.some({\n            width: constant(parseFloat(match[1])),\n            unit: constant(match[3])\n          });\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var setGenericWidth = function (cell, amount, unit) {\n      set$1(cell, 'width', amount + unit);\n    };\n    var Sizes = {\n      percentageBasedSizeRegex: constant(percentageBasedSizeRegex),\n      pixelBasedSizeRegex: constant(pixelBasedSizeRegex),\n      setPixelWidth: setPixelWidth,\n      setPercentageWidth: setPercentageWidth,\n      setHeight: setHeight,\n      getPixelWidth: getPixelWidth,\n      getPercentageWidth: getPercentageWidth,\n      getGenericWidth: getGenericWidth,\n      setGenericWidth: setGenericWidth,\n      getHeight: getHeight$1,\n      getRawWidth: getRawWidth\n    };\n\n    var halve = function (main, other) {\n      var width = Sizes.getGenericWidth(main);\n      width.each(function (w) {\n        var newWidth = w.width() / 2;\n        Sizes.setGenericWidth(main, newWidth, w.unit());\n        Sizes.setGenericWidth(other, newWidth, w.unit());\n      });\n    };\n    var CellMutations = { halve: halve };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: constant(left),\n        top: constant(top),\n        translate: translate\n      };\n    };\n    var Position = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return Position(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      return a !== undefined ? a : b !== undefined ? b : 0;\n    };\n    var absolute = function (element) {\n      var doc = element.dom().ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      var scrollTop = firstDefinedOrZero(win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom();\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return Position(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return Position(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var rowInfo = Immutable('row', 'y');\n    var colInfo = Immutable('col', 'x');\n    var rtlEdge = function (cell) {\n      var pos = absolute(cell);\n      return pos.left() + getOuter$1(cell);\n    };\n    var ltrEdge = function (cell) {\n      return absolute(cell).left();\n    };\n    var getLeftEdge = function (index, cell) {\n      return colInfo(index, ltrEdge(cell));\n    };\n    var getRightEdge = function (index, cell) {\n      return colInfo(index, rtlEdge(cell));\n    };\n    var getTop = function (cell) {\n      return absolute(cell).top();\n    };\n    var getTopEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell));\n    };\n    var getBottomEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell) + getOuter(cell));\n    };\n    var findPositions = function (getInnerEdge, getOuterEdge, array) {\n      if (array.length === 0) {\n        return [];\n      }\n      var lines = map(array.slice(1), function (cellOption, index) {\n        return cellOption.map(function (cell) {\n          return getInnerEdge(index, cell);\n        });\n      });\n      var lastLine = array[array.length - 1].map(function (cell) {\n        return getOuterEdge(array.length - 1, cell);\n      });\n      return lines.concat([lastLine]);\n    };\n    var negate = function (step) {\n      return -step;\n    };\n    var height = {\n      delta: identity,\n      positions: function (optElements) {\n        return findPositions(getTopEdge, getBottomEdge, optElements);\n      },\n      edge: getTop\n    };\n    var ltr = {\n      delta: identity,\n      edge: ltrEdge,\n      positions: function (optElements) {\n        return findPositions(getLeftEdge, getRightEdge, optElements);\n      }\n    };\n    var rtl = {\n      delta: negate,\n      edge: rtlEdge,\n      positions: function (optElements) {\n        return findPositions(getRightEdge, getLeftEdge, optElements);\n      }\n    };\n    var BarPositions = {\n      height: height,\n      rtl: rtl,\n      ltr: ltr\n    };\n\n    var ResizeDirection = {\n      ltr: BarPositions.ltr,\n      rtl: BarPositions.rtl\n    };\n\n    function TableDirection (directionAt) {\n      var auto = function (table) {\n        return directionAt(table).isRtl() ? ResizeDirection.rtl : ResizeDirection.ltr;\n      };\n      var delta = function (amount, table) {\n        return auto(table).delta(amount, table);\n      };\n      var positions = function (cols, table) {\n        return auto(table).positions(cols, table);\n      };\n      var edge = function (cell) {\n        return auto(cell).edge(cell);\n      };\n      return {\n        delta: delta,\n        edge: edge,\n        positions: positions\n      };\n    }\n\n    var getGridSize = function (table) {\n      var input = DetailsList.fromTable(table);\n      var warehouse = Warehouse.generate(input);\n      return warehouse.grid();\n    };\n    var TableGridSize = { getGridSize: getGridSize };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Option.none();\n    };\n\n    var setIfNot = function (element, property, value, ignore) {\n      if (value === ignore) {\n        remove(element, property);\n      } else {\n        set(element, property, value);\n      }\n    };\n    var render = function (table, grid) {\n      var newRows = [];\n      var newCells = [];\n      var renderSection = function (gridSection, sectionName) {\n        var section = child$2(table, sectionName).getOrThunk(function () {\n          var tb = Element.fromTag(sectionName, owner(table).dom());\n          append(table, tb);\n          return tb;\n        });\n        empty(section);\n        var rows = map(gridSection, function (row) {\n          if (row.isNew()) {\n            newRows.push(row.element());\n          }\n          var tr = row.element();\n          empty(tr);\n          each(row.cells(), function (cell) {\n            if (cell.isNew()) {\n              newCells.push(cell.element());\n            }\n            setIfNot(cell.element(), 'colspan', cell.colspan(), 1);\n            setIfNot(cell.element(), 'rowspan', cell.rowspan(), 1);\n            append(tr, cell.element());\n          });\n          return tr;\n        });\n        append$1(section, rows);\n      };\n      var removeSection = function (sectionName) {\n        child$2(table, sectionName).each(remove$2);\n      };\n      var renderOrRemoveSection = function (gridSection, sectionName) {\n        if (gridSection.length > 0) {\n          renderSection(gridSection, sectionName);\n        } else {\n          removeSection(sectionName);\n        }\n      };\n      var headSection = [];\n      var bodySection = [];\n      var footSection = [];\n      each(grid, function (row) {\n        switch (row.section()) {\n        case 'thead':\n          headSection.push(row);\n          break;\n        case 'tbody':\n          bodySection.push(row);\n          break;\n        case 'tfoot':\n          footSection.push(row);\n          break;\n        }\n      });\n      renderOrRemoveSection(headSection, 'thead');\n      renderOrRemoveSection(bodySection, 'tbody');\n      renderOrRemoveSection(footSection, 'tfoot');\n      return {\n        newRows: constant(newRows),\n        newCells: constant(newCells)\n      };\n    };\n    var copy$2 = function (grid) {\n      var rows = map(grid, function (row) {\n        var tr = shallow(row.element());\n        each(row.cells(), function (cell) {\n          var clonedCell = deep(cell.element());\n          setIfNot(clonedCell, 'colspan', cell.colspan(), 1);\n          setIfNot(clonedCell, 'rowspan', cell.rowspan(), 1);\n          append(tr, clonedCell);\n        });\n        return tr;\n      });\n      return rows;\n    };\n    var Redraw = {\n      render: render,\n      copy: copy$2\n    };\n\n    var read = function (element, attr) {\n      var value = get(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$3 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n    var get$6 = function (element) {\n      return read(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$3(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom().classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom().classList : get$6(element);\n      if (classList.length === 0) {\n        remove(element, 'class');\n      }\n    };\n    var remove$5 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$1 = function (element, clazz) {\n      return supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var repeat = function (repititions, f) {\n      var r = [];\n      for (var i = 0; i < repititions; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var range = function (start, end) {\n      var r = [];\n      for (var i = start; i < end; i++) {\n        r.push(i);\n      }\n      return r;\n    };\n    var deduce = function (xs, index) {\n      if (index < 0 || index >= xs.length - 1) {\n        return Option.none();\n      }\n      var current = xs[index].fold(function () {\n        var rest = reverse(xs.slice(0, index));\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (c) {\n        return Option.some({\n          value: c,\n          delta: 0\n        });\n      });\n      var next = xs[index + 1].fold(function () {\n        var rest = xs.slice(index + 1);\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (n) {\n        return Option.some({\n          value: n,\n          delta: 1\n        });\n      });\n      return current.bind(function (c) {\n        return next.map(function (n) {\n          var extras = n.delta + c.delta;\n          return Math.abs(n.value - c.value) / extras;\n        });\n      });\n    };\n\n    var columns = function (warehouse) {\n      var grid = warehouse.grid();\n      var cols = range(0, grid.columns());\n      var rowsArr = range(0, grid.rows());\n      return map(cols, function (col) {\n        var getBlock = function () {\n          return bind(rowsArr, function (r) {\n            return Warehouse.getAt(warehouse, r, col).filter(function (detail) {\n              return detail.column() === col;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.colspan() === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, 0, col);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n    var decide = function (getBlock, isSingle, getFallback) {\n      var inBlock = getBlock();\n      var singleInBlock = find(inBlock, isSingle);\n      var detailOption = singleInBlock.orThunk(function () {\n        return Option.from(inBlock[0]).orThunk(getFallback);\n      });\n      return detailOption.map(function (detail) {\n        return detail.element();\n      });\n    };\n    var rows$1 = function (warehouse) {\n      var grid = warehouse.grid();\n      var rowsArr = range(0, grid.rows());\n      var cols = range(0, grid.columns());\n      return map(rowsArr, function (row) {\n        var getBlock = function () {\n          return bind(cols, function (c) {\n            return Warehouse.getAt(warehouse, row, c).filter(function (detail) {\n              return detail.row() === row;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.rowspan() === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, row, 0);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n    var Blocks = {\n      columns: columns,\n      rows: rows$1\n    };\n\n    var css = function (namespace) {\n      var dashNamespace = namespace.replace(/\\./g, '-');\n      var resolve = function (str) {\n        return dashNamespace + '-' + str;\n      };\n      return { resolve: resolve };\n    };\n\n    var styles = css('ephox-snooker');\n    var Styles = { resolve: styles.resolve };\n\n    var col = function (column, x, y, w, h) {\n      var blocker = Element.fromTag('div');\n      setAll$1(blocker, {\n        position: 'absolute',\n        left: x - w / 2 + 'px',\n        top: y + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(blocker, {\n        'data-column': column,\n        'role': 'presentation'\n      });\n      return blocker;\n    };\n    var row$1 = function (r, x, y, w, h) {\n      var blocker = Element.fromTag('div');\n      setAll$1(blocker, {\n        position: 'absolute',\n        left: x + 'px',\n        top: y - h / 2 + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(blocker, {\n        'data-row': r,\n        'role': 'presentation'\n      });\n      return blocker;\n    };\n    var Bar = {\n      col: col,\n      row: row$1\n    };\n\n    var resizeBar = Styles.resolve('resizer-bar');\n    var resizeRowBar = Styles.resolve('resizer-rows');\n    var resizeColBar = Styles.resolve('resizer-cols');\n    var BAR_THICKNESS = 7;\n    var destroy = function (wire) {\n      var previous = descendants$1(wire.parent(), '.' + resizeBar);\n      each(previous, remove$2);\n    };\n    var drawBar = function (wire, positions, create) {\n      var origin = wire.origin();\n      each(positions, function (cpOption, i) {\n        cpOption.each(function (cp) {\n          var bar = create(origin, cp);\n          add$2(bar, resizeBar);\n          append(wire.parent(), bar);\n        });\n      });\n    };\n    var refreshCol = function (wire, colPositions, position, tableHeight) {\n      drawBar(wire, colPositions, function (origin, cp) {\n        var colBar = Bar.col(cp.col(), cp.x() - origin.left(), position.top() - origin.top(), BAR_THICKNESS, tableHeight);\n        add$2(colBar, resizeColBar);\n        return colBar;\n      });\n    };\n    var refreshRow = function (wire, rowPositions, position, tableWidth) {\n      drawBar(wire, rowPositions, function (origin, cp) {\n        var rowBar = Bar.row(cp.row(), position.left() - origin.left(), cp.y() - origin.top(), tableWidth, BAR_THICKNESS);\n        add$2(rowBar, resizeRowBar);\n        return rowBar;\n      });\n    };\n    var refreshGrid = function (wire, table, rows, cols, hdirection, vdirection) {\n      var position = absolute(table);\n      var rowPositions = rows.length > 0 ? hdirection.positions(rows, table) : [];\n      refreshRow(wire, rowPositions, position, getOuter$1(table));\n      var colPositions = cols.length > 0 ? vdirection.positions(cols, table) : [];\n      refreshCol(wire, colPositions, position, getOuter(table));\n    };\n    var refresh = function (wire, table, hdirection, vdirection) {\n      destroy(wire);\n      var list = DetailsList.fromTable(table);\n      var warehouse = Warehouse.generate(list);\n      var rows = Blocks.rows(warehouse);\n      var cols = Blocks.columns(warehouse);\n      refreshGrid(wire, table, rows, cols, hdirection, vdirection);\n    };\n    var each$2 = function (wire, f) {\n      var bars = descendants$1(wire.parent(), '.' + resizeBar);\n      each(bars, f);\n    };\n    var hide = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'none');\n      });\n    };\n    var show = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'block');\n      });\n    };\n    var isRowBar = function (element) {\n      return has$1(element, resizeRowBar);\n    };\n    var isColBar = function (element) {\n      return has$1(element, resizeColBar);\n    };\n    var Bars = {\n      refresh: refresh,\n      hide: hide,\n      show: show,\n      destroy: destroy,\n      isRowBar: isRowBar,\n      isColBar: isColBar\n    };\n\n    var addCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells();\n      var before = cells.slice(0, index);\n      var after = cells.slice(index);\n      var newCells = before.concat([cell]).concat(after);\n      return setCells(gridRow, newCells);\n    };\n    var mutateCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells();\n      cells[index] = cell;\n    };\n    var setCells = function (gridRow, cells) {\n      return rowcells(cells, gridRow.section());\n    };\n    var mapCells = function (gridRow, f) {\n      var cells = gridRow.cells();\n      var r = map(cells, f);\n      return rowcells(r, gridRow.section());\n    };\n    var getCell = function (gridRow, index) {\n      return gridRow.cells()[index];\n    };\n    var getCellElement = function (gridRow, index) {\n      return getCell(gridRow, index).element();\n    };\n    var cellLength = function (gridRow) {\n      return gridRow.cells().length;\n    };\n    var GridRow = {\n      addCell: addCell,\n      setCells: setCells,\n      mutateCell: mutateCell,\n      getCell: getCell,\n      getCellElement: getCellElement,\n      mapCells: mapCells,\n      cellLength: cellLength\n    };\n\n    var getColumn = function (grid, index) {\n      return map(grid, function (row) {\n        return GridRow.getCell(row, index);\n      });\n    };\n    var getRow = function (grid, index) {\n      return grid[index];\n    };\n    var findDiff = function (xs, comp) {\n      if (xs.length === 0) {\n        return 0;\n      }\n      var first = xs[0];\n      var index = findIndex(xs, function (x) {\n        return !comp(first.element(), x.element());\n      });\n      return index.fold(function () {\n        return xs.length;\n      }, function (ind) {\n        return ind;\n      });\n    };\n    var subgrid = function (grid, row, column, comparator) {\n      var restOfRow = getRow(grid, row).cells().slice(column);\n      var endColIndex = findDiff(restOfRow, comparator);\n      var restOfColumn = getColumn(grid, column).slice(row);\n      var endRowIndex = findDiff(restOfColumn, comparator);\n      return {\n        colspan: constant(endColIndex),\n        rowspan: constant(endRowIndex)\n      };\n    };\n    var TableGrid = { subgrid: subgrid };\n\n    var toDetails = function (grid, comparator) {\n      var seen = map(grid, function (row, ri) {\n        return map(row.cells(), function (col, ci) {\n          return false;\n        });\n      });\n      var updateSeen = function (ri, ci, rowspan, colspan) {\n        for (var r = ri; r < ri + rowspan; r++) {\n          for (var c = ci; c < ci + colspan; c++) {\n            seen[r][c] = true;\n          }\n        }\n      };\n      return map(grid, function (row, ri) {\n        var details = bind(row.cells(), function (cell, ci) {\n          if (seen[ri][ci] === false) {\n            var result = TableGrid.subgrid(grid, ri, ci, comparator);\n            updateSeen(ri, ci, result.rowspan(), result.colspan());\n            return [detailnew(cell.element(), result.rowspan(), result.colspan(), cell.isNew())];\n          } else {\n            return [];\n          }\n        });\n        return rowdetails(details, row.section());\n      });\n    };\n    var toGrid = function (warehouse, generators, isNew) {\n      var grid = [];\n      for (var i = 0; i < warehouse.grid().rows(); i++) {\n        var rowCells = [];\n        for (var j = 0; j < warehouse.grid().columns(); j++) {\n          var element = Warehouse.getAt(warehouse, i, j).map(function (item) {\n            return elementnew(item.element(), isNew);\n          }).getOrThunk(function () {\n            return elementnew(generators.gap(), true);\n          });\n          rowCells.push(element);\n        }\n        var row = rowcells(rowCells, warehouse.all()[i].section());\n        grid.push(row);\n      }\n      return grid;\n    };\n    var Transitions = {\n      toDetails: toDetails,\n      toGrid: toGrid\n    };\n\n    var fromWarehouse = function (warehouse, generators) {\n      return Transitions.toGrid(warehouse, generators, false);\n    };\n    var deriveRows = function (rendered, generators) {\n      var findRow = function (details) {\n        var rowOfCells = findMap(details, function (detail) {\n          return parent(detail.element()).map(function (row) {\n            var isNew = parent(row).isNone();\n            return elementnew(row, isNew);\n          });\n        });\n        return rowOfCells.getOrThunk(function () {\n          return elementnew(generators.row(), true);\n        });\n      };\n      return map(rendered, function (details) {\n        var row = findRow(details.details());\n        return rowdatanew(row.element(), details.details(), details.section(), row.isNew());\n      });\n    };\n    var toDetailList = function (grid, generators) {\n      var rendered = Transitions.toDetails(grid, eq);\n      return deriveRows(rendered, generators);\n    };\n    var findInWarehouse = function (warehouse, element) {\n      var all = flatten(map(warehouse.all(), function (r) {\n        return r.cells();\n      }));\n      return find(all, function (e) {\n        return eq(element, e.element());\n      });\n    };\n    var run = function (operation, extract, adjustment, postAction, genWrappers) {\n      return function (wire, table, target, generators, direction) {\n        var input = DetailsList.fromTable(table);\n        var warehouse = Warehouse.generate(input);\n        var output = extract(warehouse, target).map(function (info) {\n          var model = fromWarehouse(warehouse, generators);\n          var result = operation(model, info, eq, genWrappers(generators));\n          var grid = toDetailList(result.grid(), generators);\n          return {\n            grid: constant(grid),\n            cursor: result.cursor\n          };\n        });\n        return output.fold(function () {\n          return Option.none();\n        }, function (out) {\n          var newElements = Redraw.render(table, out.grid());\n          adjustment(table, out.grid(), direction);\n          postAction(table);\n          Bars.refresh(wire, table, BarPositions.height, direction);\n          return Option.some({\n            cursor: out.cursor,\n            newRows: newElements.newRows,\n            newCells: newElements.newCells\n          });\n        });\n      };\n    };\n    var onCell = function (warehouse, target) {\n      return TableLookup.cell(target.element()).bind(function (cell) {\n        return findInWarehouse(warehouse, cell);\n      });\n    };\n    var onPaste = function (warehouse, target) {\n      return TableLookup.cell(target.element()).bind(function (cell) {\n        return findInWarehouse(warehouse, cell).map(function (details) {\n          var value = __assign(__assign({}, details), {\n            generators: target.generators,\n            clipboard: target.clipboard\n          });\n          return value;\n        });\n      });\n    };\n    var onPasteRows = function (warehouse, target) {\n      var details = map(target.selection(), function (cell) {\n        return TableLookup.cell(cell).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        });\n      });\n      var cells = cat(details);\n      return cells.length > 0 ? Option.some({\n        cells: cells,\n        generators: target.generators,\n        clipboard: target.clipboard\n      }) : Option.none();\n    };\n    var onMergable = function (_warehouse, target) {\n      return target.mergable();\n    };\n    var onUnmergable = function (_warehouse, target) {\n      return target.unmergable();\n    };\n    var onCells = function (warehouse, target) {\n      var details = map(target.selection(), function (cell) {\n        return TableLookup.cell(cell).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        });\n      });\n      var cells = cat(details);\n      return cells.length > 0 ? Option.some(cells) : Option.none();\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (opt) {\n        return value(o);\n      };\n      var orThunk = function (f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var measure = function (startAddress, gridA, gridB) {\n      if (startAddress.row() >= gridA.length || startAddress.column() > GridRow.cellLength(gridA[0])) {\n        return Result.error('invalid start address out of table bounds, row: ' + startAddress.row() + ', column: ' + startAddress.column());\n      }\n      var rowRemainder = gridA.slice(startAddress.row());\n      var colRemainder = rowRemainder[0].cells().slice(startAddress.column());\n      var colRequired = GridRow.cellLength(gridB[0]);\n      var rowRequired = gridB.length;\n      return Result.value({\n        rowDelta: constant(rowRemainder.length - rowRequired),\n        colDelta: constant(colRemainder.length - colRequired)\n      });\n    };\n    var measureWidth = function (gridA, gridB) {\n      var colLengthA = GridRow.cellLength(gridA[0]);\n      var colLengthB = GridRow.cellLength(gridB[0]);\n      return {\n        rowDelta: constant(0),\n        colDelta: constant(colLengthA - colLengthB)\n      };\n    };\n    var fill = function (cells, generator) {\n      return map(cells, function () {\n        return elementnew(generator.cell(), true);\n      });\n    };\n    var rowFill = function (grid, amount, generator) {\n      return grid.concat(repeat(amount, function (_row) {\n        return GridRow.setCells(grid[grid.length - 1], fill(grid[grid.length - 1].cells(), generator));\n      }));\n    };\n    var colFill = function (grid, amount, generator) {\n      return map(grid, function (row) {\n        return GridRow.setCells(row, row.cells().concat(fill(range(0, amount), generator)));\n      });\n    };\n    var tailor = function (gridA, delta, generator) {\n      var fillCols = delta.colDelta() < 0 ? colFill : identity;\n      var fillRows = delta.rowDelta() < 0 ? rowFill : identity;\n      var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta()), generator);\n      var tailoredGrid = fillRows(modifiedCols, Math.abs(delta.rowDelta()), generator);\n      return tailoredGrid;\n    };\n    var Fitment = {\n      measure: measure,\n      measureWidth: measureWidth,\n      tailor: tailor\n    };\n\n    var merge = function (grid, bounds, comparator, substitution) {\n      if (grid.length === 0) {\n        return grid;\n      }\n      for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n        for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n          GridRow.mutateCell(grid[i], j, elementnew(substitution(), false));\n        }\n      }\n      return grid;\n    };\n    var unmerge = function (grid, target, comparator, substitution) {\n      var first = true;\n      for (var i = 0; i < grid.length; i++) {\n        for (var j = 0; j < GridRow.cellLength(grid[0]); j++) {\n          var current = GridRow.getCellElement(grid[i], j);\n          var isToReplace = comparator(current, target);\n          if (isToReplace === true && first === false) {\n            GridRow.mutateCell(grid[i], j, elementnew(substitution(), true));\n          } else if (isToReplace === true) {\n            first = false;\n          }\n        }\n      }\n      return grid;\n    };\n    var uniqueCells = function (row, comparator) {\n      return foldl(row, function (rest, cell) {\n        return exists(rest, function (currentCell) {\n          return comparator(currentCell.element(), cell.element());\n        }) ? rest : rest.concat([cell]);\n      }, []);\n    };\n    var splitRows = function (grid, index, comparator, substitution) {\n      if (index > 0 && index < grid.length) {\n        var rowPrevCells = grid[index - 1].cells();\n        var cells = uniqueCells(rowPrevCells, comparator);\n        each(cells, function (cell) {\n          var replacement = Option.none();\n          var _loop_1 = function (i) {\n            var _loop_2 = function (j) {\n              var current = grid[i].cells()[j];\n              var isToReplace = comparator(current.element(), cell.element());\n              if (isToReplace) {\n                if (replacement.isNone()) {\n                  replacement = Option.some(substitution());\n                }\n                replacement.each(function (sub) {\n                  GridRow.mutateCell(grid[i], j, elementnew(sub, true));\n                });\n              }\n            };\n            for (var j = 0; j < GridRow.cellLength(grid[0]); j++) {\n              _loop_2(j);\n            }\n          };\n          for (var i = index; i < grid.length; i++) {\n            _loop_1(i);\n          }\n        });\n      }\n      return grid;\n    };\n    var MergingOperations = {\n      merge: merge,\n      unmerge: unmerge,\n      splitRows: splitRows\n    };\n\n    var isSpanning = function (grid, row, col, comparator) {\n      var candidate = GridRow.getCell(grid[row], col);\n      var matching = curry(comparator, candidate.element());\n      var currentRow = grid[row];\n      return grid.length > 1 && GridRow.cellLength(currentRow) > 1 && (col > 0 && matching(GridRow.getCellElement(currentRow, col - 1)) || col < currentRow.cells().length - 1 && matching(GridRow.getCellElement(currentRow, col + 1)) || row > 0 && matching(GridRow.getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(GridRow.getCellElement(grid[row + 1], col)));\n    };\n    var mergeTables = function (startAddress, gridA, gridB, generator, comparator) {\n      var startRow = startAddress.row();\n      var startCol = startAddress.column();\n      var mergeHeight = gridB.length;\n      var mergeWidth = GridRow.cellLength(gridB[0]);\n      var endRow = startRow + mergeHeight;\n      var endCol = startCol + mergeWidth;\n      for (var r = startRow; r < endRow; r++) {\n        for (var c = startCol; c < endCol; c++) {\n          if (isSpanning(gridA, r, c, comparator)) {\n            MergingOperations.unmerge(gridA, GridRow.getCellElement(gridA[r], c), comparator, generator.cell);\n          }\n          var newCell = GridRow.getCellElement(gridB[r - startRow], c - startCol);\n          var replacement = generator.replace(newCell);\n          GridRow.mutateCell(gridA[r], c, elementnew(replacement, true));\n        }\n      }\n      return gridA;\n    };\n    var merge$1 = function (startAddress, gridA, gridB, generator, comparator) {\n      var result = Fitment.measure(startAddress, gridA, gridB);\n      return result.map(function (delta) {\n        var fittedGrid = Fitment.tailor(gridA, delta, generator);\n        return mergeTables(startAddress, fittedGrid, gridB, generator, comparator);\n      });\n    };\n    var insert = function (index, gridA, gridB, generator, comparator) {\n      MergingOperations.splitRows(gridA, index, comparator, generator.cell);\n      var delta = Fitment.measureWidth(gridB, gridA);\n      var fittedNewGrid = Fitment.tailor(gridB, delta, generator);\n      var secondDelta = Fitment.measureWidth(gridA, fittedNewGrid);\n      var fittedOldGrid = Fitment.tailor(gridA, secondDelta, generator);\n      return fittedOldGrid.slice(0, index).concat(fittedNewGrid).concat(fittedOldGrid.slice(index, fittedOldGrid.length));\n    };\n    var TableMerge = {\n      merge: merge$1,\n      insert: insert\n    };\n\n    var insertRowAt = function (grid, index, example, comparator, substitution) {\n      var before = grid.slice(0, index);\n      var after = grid.slice(index);\n      var between = GridRow.mapCells(grid[example], function (ex, c) {\n        var withinSpan = index > 0 && index < grid.length && comparator(GridRow.getCellElement(grid[index - 1], c), GridRow.getCellElement(grid[index], c));\n        var ret = withinSpan ? GridRow.getCell(grid[index], c) : elementnew(substitution(ex.element(), comparator), true);\n        return ret;\n      });\n      return before.concat([between]).concat(after);\n    };\n    var insertColumnAt = function (grid, index, example, comparator, substitution) {\n      return map(grid, function (row) {\n        var withinSpan = index > 0 && index < GridRow.cellLength(row) && comparator(GridRow.getCellElement(row, index - 1), GridRow.getCellElement(row, index));\n        var sub = withinSpan ? GridRow.getCell(row, index) : elementnew(substitution(GridRow.getCellElement(row, example), comparator), true);\n        return GridRow.addCell(row, index, sub);\n      });\n    };\n    var splitCellIntoColumns = function (grid, exampleRow, exampleCol, comparator, substitution) {\n      var index = exampleCol + 1;\n      return map(grid, function (row, i) {\n        var isTargetCell = i === exampleRow;\n        var sub = isTargetCell ? elementnew(substitution(GridRow.getCellElement(row, exampleCol), comparator), true) : GridRow.getCell(row, exampleCol);\n        return GridRow.addCell(row, index, sub);\n      });\n    };\n    var splitCellIntoRows = function (grid, exampleRow, exampleCol, comparator, substitution) {\n      var index = exampleRow + 1;\n      var before = grid.slice(0, index);\n      var after = grid.slice(index);\n      var between = GridRow.mapCells(grid[exampleRow], function (ex, i) {\n        var isTargetCell = i === exampleCol;\n        return isTargetCell ? elementnew(substitution(ex.element(), comparator), true) : ex;\n      });\n      return before.concat([between]).concat(after);\n    };\n    var deleteColumnsAt = function (grid, start, finish) {\n      var rows = map(grid, function (row) {\n        var cells = row.cells().slice(0, start).concat(row.cells().slice(finish + 1));\n        return rowcells(cells, row.section());\n      });\n      return filter(rows, function (row) {\n        return row.cells().length > 0;\n      });\n    };\n    var deleteRowsAt = function (grid, start, finish) {\n      return grid.slice(0, start).concat(grid.slice(finish + 1));\n    };\n    var ModificationOperations = {\n      insertRowAt: insertRowAt,\n      insertColumnAt: insertColumnAt,\n      splitCellIntoColumns: splitCellIntoColumns,\n      splitCellIntoRows: splitCellIntoRows,\n      deleteRowsAt: deleteRowsAt,\n      deleteColumnsAt: deleteColumnsAt\n    };\n\n    var replaceIn = function (grid, targets, comparator, substitution) {\n      var isTarget = function (cell) {\n        return exists(targets, function (target) {\n          return comparator(cell.element(), target.element());\n        });\n      };\n      return map(grid, function (row) {\n        return GridRow.mapCells(row, function (cell) {\n          return isTarget(cell) ? elementnew(substitution(cell.element(), comparator), true) : cell;\n        });\n      });\n    };\n    var notStartRow = function (grid, rowIndex, colIndex, comparator) {\n      return GridRow.getCellElement(grid[rowIndex], colIndex) !== undefined && (rowIndex > 0 && comparator(GridRow.getCellElement(grid[rowIndex - 1], colIndex), GridRow.getCellElement(grid[rowIndex], colIndex)));\n    };\n    var notStartColumn = function (row, index, comparator) {\n      return index > 0 && comparator(GridRow.getCellElement(row, index - 1), GridRow.getCellElement(row, index));\n    };\n    var replaceColumn = function (grid, index, comparator, substitution) {\n      var targets = bind(grid, function (row, i) {\n        var alreadyAdded = notStartRow(grid, i, index, comparator) || notStartColumn(row, index, comparator);\n        return alreadyAdded ? [] : [GridRow.getCell(row, index)];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n    var replaceRow = function (grid, index, comparator, substitution) {\n      var targetRow = grid[index];\n      var targets = bind(targetRow.cells(), function (item, i) {\n        var alreadyAdded = notStartRow(grid, index, i, comparator) || notStartColumn(targetRow, i, comparator);\n        return alreadyAdded ? [] : [item];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n    var TransformOperations = {\n      replaceColumn: replaceColumn,\n      replaceRow: replaceRow\n    };\n\n    var adt = Adt.generate([\n      { none: [] },\n      { only: ['index'] },\n      {\n        left: [\n          'index',\n          'next'\n        ]\n      },\n      {\n        middle: [\n          'prev',\n          'index',\n          'next'\n        ]\n      },\n      {\n        right: [\n          'prev',\n          'index'\n        ]\n      }\n    ]);\n    var ColumnContext = __assign({}, adt);\n\n    var neighbours$1 = function (input, index) {\n      if (input.length === 0) {\n        return ColumnContext.none();\n      }\n      if (input.length === 1) {\n        return ColumnContext.only(0);\n      }\n      if (index === 0) {\n        return ColumnContext.left(0, 1);\n      }\n      if (index === input.length - 1) {\n        return ColumnContext.right(index - 1, index);\n      }\n      if (index > 0 && index < input.length - 1) {\n        return ColumnContext.middle(index - 1, index, index + 1);\n      }\n      return ColumnContext.none();\n    };\n    var determine = function (input, column, step, tableSize) {\n      var result = input.slice(0);\n      var context = neighbours$1(input, column);\n      var zero = function (array) {\n        return map(array, constant(0));\n      };\n      var onNone = constant(zero(result));\n      var onOnly = function (index) {\n        return tableSize.singleColumnWidth(result[index], step);\n      };\n      var onChange = function (index, next) {\n        if (step >= 0) {\n          var newNext = Math.max(tableSize.minCellWidth(), result[next] - step);\n          return zero(result.slice(0, index)).concat([\n            step,\n            newNext - result[next]\n          ]).concat(zero(result.slice(next + 1)));\n        } else {\n          var newThis = Math.max(tableSize.minCellWidth(), result[index] + step);\n          var diffx = result[index] - newThis;\n          return zero(result.slice(0, index)).concat([\n            newThis - result[index],\n            diffx\n          ]).concat(zero(result.slice(next + 1)));\n        }\n      };\n      var onLeft = onChange;\n      var onMiddle = function (_prev, index, next) {\n        return onChange(index, next);\n      };\n      var onRight = function (_prev, index) {\n        if (step >= 0) {\n          return zero(result.slice(0, index)).concat([step]);\n        } else {\n          var size = Math.max(tableSize.minCellWidth(), result[index] + step);\n          return zero(result.slice(0, index)).concat([size - result[index]]);\n        }\n      };\n      return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n    };\n    var Deltas = { determine: determine };\n\n    var getSpan$1 = function (cell, type) {\n      return has(cell, type) && parseInt(get(cell, type), 10) > 1;\n    };\n    var hasColspan = function (cell) {\n      return getSpan$1(cell, 'colspan');\n    };\n    var hasRowspan = function (cell) {\n      return getSpan$1(cell, 'rowspan');\n    };\n    var getInt = function (element, property) {\n      return parseInt(get$1(element, property), 10);\n    };\n    var CellUtils = {\n      hasColspan: hasColspan,\n      hasRowspan: hasRowspan,\n      minWidth: constant(10),\n      minHeight: constant(10),\n      getInt: getInt\n    };\n\n    var getRaw$1 = function (cell, property, getter) {\n      return getRaw(cell, property).fold(function () {\n        return getter(cell) + 'px';\n      }, function (raw) {\n        return raw;\n      });\n    };\n    var getRawW = function (cell, tableSize) {\n      return getRaw$1(cell, 'width', function (e) {\n        return Sizes.getPixelWidth(e, tableSize);\n      });\n    };\n    var getRawH = function (cell) {\n      return getRaw$1(cell, 'height', Sizes.getHeight);\n    };\n    var getWidthFrom = function (warehouse, direction, getWidth, fallback, tableSize) {\n      var columns = Blocks.columns(warehouse);\n      var backups = map(columns, function (cellOption) {\n        return cellOption.map(direction.edge);\n      });\n      return map(columns, function (cellOption, c) {\n        var columnCell = cellOption.filter(not(CellUtils.hasColspan));\n        return columnCell.fold(function () {\n          var deduced = deduce(backups, c);\n          return fallback(deduced);\n        }, function (cell) {\n          return getWidth(cell, tableSize);\n        });\n      });\n    };\n    var getDeduced = function (deduced) {\n      return deduced.map(function (d) {\n        return d + 'px';\n      }).getOr('');\n    };\n    var getRawWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, getRawW, getDeduced, tableSize);\n    };\n    var getPercentageWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, Sizes.getPercentageWidth, function (deduced) {\n        return deduced.fold(function () {\n          return tableSize.minCellWidth();\n        }, function (cellWidth) {\n          return cellWidth / tableSize.pixelWidth() * 100;\n        });\n      }, tableSize);\n    };\n    var getPixelWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, Sizes.getPixelWidth, function (deduced) {\n        return deduced.getOrThunk(tableSize.minCellWidth);\n      }, tableSize);\n    };\n    var getHeightFrom = function (warehouse, direction, getHeight, fallback) {\n      var rows = Blocks.rows(warehouse);\n      var backups = map(rows, function (cellOption) {\n        return cellOption.map(direction.edge);\n      });\n      return map(rows, function (cellOption, c) {\n        var rowCell = cellOption.filter(not(CellUtils.hasRowspan));\n        return rowCell.fold(function () {\n          var deduced = deduce(backups, c);\n          return fallback(deduced);\n        }, function (cell) {\n          return getHeight(cell);\n        });\n      });\n    };\n    var getPixelHeights = function (warehouse, direction) {\n      return getHeightFrom(warehouse, direction, Sizes.getHeight, function (deduced) {\n        return deduced.getOrThunk(CellUtils.minHeight);\n      });\n    };\n    var getRawHeights = function (warehouse, direction) {\n      return getHeightFrom(warehouse, direction, getRawH, getDeduced);\n    };\n    var ColumnSizes = {\n      getRawWidths: getRawWidths,\n      getPixelWidths: getPixelWidths,\n      getPercentageWidths: getPercentageWidths,\n      getPixelHeights: getPixelHeights,\n      getRawHeights: getRawHeights\n    };\n\n    var total = function (start, end, measures) {\n      var r = 0;\n      for (var i = start; i < end; i++) {\n        r += measures[i] !== undefined ? measures[i] : 0;\n      }\n      return r;\n    };\n    var recalculateWidth = function (warehouse, widths) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var width = total(cell.column(), cell.column() + cell.colspan(), widths);\n        return {\n          element: cell.element,\n          width: constant(width),\n          colspan: cell.colspan\n        };\n      });\n    };\n    var recalculateHeight = function (warehouse, heights) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var height = total(cell.row(), cell.row() + cell.rowspan(), heights);\n        return {\n          element: cell.element,\n          height: constant(height),\n          rowspan: cell.rowspan\n        };\n      });\n    };\n    var matchRowHeight = function (warehouse, heights) {\n      return map(warehouse.all(), function (row, i) {\n        return {\n          element: row.element,\n          height: constant(heights[i])\n        };\n      });\n    };\n    var Recalculations = {\n      recalculateWidth: recalculateWidth,\n      recalculateHeight: recalculateHeight,\n      matchRowHeight: matchRowHeight\n    };\n\n    var percentageSize = function (width, element) {\n      var floatWidth = parseFloat(width);\n      var pixelWidth = get$4(element);\n      var getCellDelta = function (delta) {\n        return delta / pixelWidth * 100;\n      };\n      var singleColumnWidth = function (w, _delta) {\n        return [100 - w];\n      };\n      var minCellWidth = function () {\n        return CellUtils.minWidth() / pixelWidth * 100;\n      };\n      var setTableWidth = function (table, _newWidths, delta) {\n        var ratio = delta / 100;\n        var change = ratio * floatWidth;\n        Sizes.setPercentageWidth(table, floatWidth + change);\n      };\n      return {\n        width: constant(floatWidth),\n        pixelWidth: constant(pixelWidth),\n        getWidths: ColumnSizes.getPercentageWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minCellWidth,\n        setElementWidth: Sizes.setPercentageWidth,\n        setTableWidth: setTableWidth\n      };\n    };\n    var pixelSize = function (width) {\n      var getCellDelta = identity;\n      var singleColumnWidth = function (w, delta) {\n        var newNext = Math.max(CellUtils.minWidth(), w + delta);\n        return [newNext - w];\n      };\n      var setTableWidth = function (table, newWidths, _delta) {\n        var total = foldr(newWidths, function (b, a) {\n          return b + a;\n        }, 0);\n        Sizes.setPixelWidth(table, total);\n      };\n      return {\n        width: constant(width),\n        pixelWidth: constant(width),\n        getWidths: ColumnSizes.getPixelWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: CellUtils.minWidth,\n        setElementWidth: Sizes.setPixelWidth,\n        setTableWidth: setTableWidth\n      };\n    };\n    var chooseSize = function (element, width) {\n      var percentMatch = Sizes.percentageBasedSizeRegex().exec(width);\n      if (percentMatch !== null) {\n        return percentageSize(percentMatch[1], element);\n      }\n      var pixelMatch = Sizes.pixelBasedSizeRegex().exec(width);\n      if (pixelMatch !== null) {\n        var intWidth = parseInt(pixelMatch[1], 10);\n        return pixelSize(intWidth);\n      }\n      var fallbackWidth = get$4(element);\n      return pixelSize(fallbackWidth);\n    };\n    var getTableSize = function (element) {\n      var width = Sizes.getRawWidth(element);\n      return width.fold(function () {\n        var fallbackWidth = get$4(element);\n        return pixelSize(fallbackWidth);\n      }, function (w) {\n        return chooseSize(element, w);\n      });\n    };\n    var TableSize = { getTableSize: getTableSize };\n\n    var getWarehouse$1 = function (list) {\n      return Warehouse.generate(list);\n    };\n    var sumUp = function (newSize) {\n      return foldr(newSize, function (b, a) {\n        return b + a;\n      }, 0);\n    };\n    var getTableWarehouse = function (table) {\n      var list = DetailsList.fromTable(table);\n      return getWarehouse$1(list);\n    };\n    var adjustWidth = function (table, delta, index, direction) {\n      var tableSize = TableSize.getTableSize(table);\n      var step = tableSize.getCellDelta(delta);\n      var warehouse = getTableWarehouse(table);\n      var widths = tableSize.getWidths(warehouse, direction, tableSize);\n      var deltas = Deltas.determine(widths, index, step, tableSize);\n      var newWidths = map(deltas, function (dx, i) {\n        return dx + widths[i];\n      });\n      var newSizes = Recalculations.recalculateWidth(warehouse, newWidths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element(), cell.width());\n      });\n      if (index === warehouse.grid().columns() - 1) {\n        tableSize.setTableWidth(table, newWidths, step);\n      }\n    };\n    var adjustHeight = function (table, delta, index, direction) {\n      var warehouse = getTableWarehouse(table);\n      var heights = ColumnSizes.getPixelHeights(warehouse, direction);\n      var newHeights = map(heights, function (dy, i) {\n        return index === i ? Math.max(delta + dy, CellUtils.minHeight()) : dy;\n      });\n      var newCellSizes = Recalculations.recalculateHeight(warehouse, newHeights);\n      var newRowSizes = Recalculations.matchRowHeight(warehouse, newHeights);\n      each(newRowSizes, function (row) {\n        Sizes.setHeight(row.element(), row.height());\n      });\n      each(newCellSizes, function (cell) {\n        Sizes.setHeight(cell.element(), cell.height());\n      });\n      var total = sumUp(newHeights);\n      Sizes.setHeight(table, total);\n    };\n    var adjustWidthTo = function (table, list, direction) {\n      var tableSize = TableSize.getTableSize(table);\n      var warehouse = getWarehouse$1(list);\n      var widths = tableSize.getWidths(warehouse, direction, tableSize);\n      var newSizes = Recalculations.recalculateWidth(warehouse, widths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element(), cell.width());\n      });\n      if (newSizes.length > 0) {\n        tableSize.setTableWidth(table, widths, tableSize.getCellDelta(0));\n      }\n    };\n    var Adjustments = {\n      adjustWidth: adjustWidth,\n      adjustHeight: adjustHeight,\n      adjustWidthTo: adjustWidthTo\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var base = function (handleUnsupported, required) {\n      return baseWith(handleUnsupported, required, {\n        validate: isFunction,\n        label: 'function'\n      });\n    };\n    var baseWith = function (handleUnsupported, required, pred) {\n      if (required.length === 0) {\n        throw new Error('You must specify at least one required field.');\n      }\n      validateStrArr('required', required);\n      checkDupes(required);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        handleUnsupported(required, keys$1);\n        var invalidKeys = filter(required, function (key) {\n          return !pred.validate(obj[key], key);\n        });\n        if (invalidKeys.length > 0) {\n          invalidTypeMessage(invalidKeys, pred.label);\n        }\n        return obj;\n      };\n    };\n    var handleExact = function (required, keys) {\n      var unsupported = filter(keys, function (key) {\n        return !contains(required, key);\n      });\n      if (unsupported.length > 0) {\n        unsuppMessage(unsupported);\n      }\n    };\n    var exactly = function (required) {\n      return base(handleExact, required);\n    };\n\n    var verifyGenerators = exactly([\n      'cell',\n      'row',\n      'replace',\n      'gap'\n    ]);\n    var elementToData = function (element) {\n      var colspan = has(element, 'colspan') ? parseInt(get(element, 'colspan'), 10) : 1;\n      var rowspan = has(element, 'rowspan') ? parseInt(get(element, 'rowspan'), 10) : 1;\n      return {\n        element: constant(element),\n        colspan: constant(colspan),\n        rowspan: constant(rowspan)\n      };\n    };\n    var modification = function (generators, toData) {\n      if (toData === void 0) {\n        toData = elementToData;\n      }\n      verifyGenerators(generators);\n      var position = Cell(Option.none());\n      var nu = function (data) {\n        return generators.cell(data);\n      };\n      var nuFrom = function (element) {\n        var data = toData(element);\n        return nu(data);\n      };\n      var add = function (element) {\n        var replacement = nuFrom(element);\n        if (position.get().isNone()) {\n          position.set(Option.some(replacement));\n        }\n        recent = Option.some({\n          item: element,\n          replacement: replacement\n        });\n        return replacement;\n      };\n      var recent = Option.none();\n      var getOrInit = function (element, comparator) {\n        return recent.fold(function () {\n          return add(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.replacement : add(element);\n        });\n      };\n      return {\n        getOrInit: getOrInit,\n        cursor: position.get\n      };\n    };\n    var transform = function (scope, tag) {\n      return function (generators) {\n        var position = Cell(Option.none());\n        verifyGenerators(generators);\n        var list = [];\n        var find$1 = function (element, comparator) {\n          return find(list, function (x) {\n            return comparator(x.item, element);\n          });\n        };\n        var makeNew = function (element) {\n          var attrs = { scope: scope };\n          var cell = generators.replace(element, tag, attrs);\n          list.push({\n            item: element,\n            sub: cell\n          });\n          if (position.get().isNone()) {\n            position.set(Option.some(cell));\n          }\n          return cell;\n        };\n        var replaceOrInit = function (element, comparator) {\n          return find$1(element, comparator).fold(function () {\n            return makeNew(element);\n          }, function (p) {\n            return comparator(element, p.item) ? p.sub : makeNew(element);\n          });\n        };\n        return {\n          replaceOrInit: replaceOrInit,\n          cursor: position.get\n        };\n      };\n    };\n    var merging = function (generators) {\n      verifyGenerators(generators);\n      var position = Cell(Option.none());\n      var combine = function (cell) {\n        if (position.get().isNone()) {\n          position.set(Option.some(cell));\n        }\n        return function () {\n          var raw = generators.cell({\n            element: constant(cell),\n            colspan: constant(1),\n            rowspan: constant(1)\n          });\n          remove$1(raw, 'width');\n          remove$1(cell, 'width');\n          return raw;\n        };\n      };\n      return {\n        combine: combine,\n        cursor: position.get\n      };\n    };\n    var Generators = {\n      modification: modification,\n      transform: transform,\n      merging: merging\n    };\n\n    var blockList = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'table',\n      'thead',\n      'tfoot',\n      'tbody',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n    var isList = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'ol',\n        'ul'\n      ], tagName);\n    };\n    var isBlock = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains(blockList, tagName);\n    };\n    var isFormatting = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'address',\n        'pre',\n        'p',\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6'\n      ], tagName);\n    };\n    var isHeading = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6'\n      ], tagName);\n    };\n    var isContainer = function (universe, item) {\n      return contains([\n        'div',\n        'li',\n        'td',\n        'th',\n        'blockquote',\n        'body',\n        'caption'\n      ], universe.property().name(item));\n    };\n    var isEmptyTag = function (universe, item) {\n      return contains([\n        'br',\n        'img',\n        'hr',\n        'input'\n      ], universe.property().name(item));\n    };\n    var isFrame = function (universe, item) {\n      return universe.property().name(item) === 'iframe';\n    };\n    var isInline = function (universe, item) {\n      return !(isBlock(universe, item) || isEmptyTag(universe, item)) && universe.property().name(item) !== 'li';\n    };\n    var Structure = {\n      isBlock: isBlock,\n      isList: isList,\n      isFormatting: isFormatting,\n      isHeading: isHeading,\n      isContainer: isContainer,\n      isEmptyTag: isEmptyTag,\n      isFrame: isFrame,\n      isInline: isInline\n    };\n\n    var universe$1 = DomUniverse();\n    var isBlock$1 = function (element) {\n      return Structure.isBlock(universe$1, element);\n    };\n    var isList$1 = function (element) {\n      return Structure.isList(universe$1, element);\n    };\n    var isFormatting$1 = function (element) {\n      return Structure.isFormatting(universe$1, element);\n    };\n    var isHeading$1 = function (element) {\n      return Structure.isHeading(universe$1, element);\n    };\n    var isContainer$1 = function (element) {\n      return Structure.isContainer(universe$1, element);\n    };\n    var isEmptyTag$1 = function (element) {\n      return Structure.isEmptyTag(universe$1, element);\n    };\n    var isFrame$1 = function (element) {\n      return Structure.isFrame(universe$1, element);\n    };\n    var isInline$1 = function (element) {\n      return Structure.isInline(universe$1, element);\n    };\n    var DomStructure = {\n      isBlock: isBlock$1,\n      isList: isList$1,\n      isFormatting: isFormatting$1,\n      isHeading: isHeading$1,\n      isContainer: isContainer$1,\n      isEmptyTag: isEmptyTag$1,\n      isFrame: isFrame$1,\n      isInline: isInline$1\n    };\n\n    var merge$2 = function (cells) {\n      var isBr = function (el) {\n        return name(el) === 'br';\n      };\n      var advancedBr = function (children) {\n        return forall(children, function (c) {\n          return isBr(c) || isText(c) && get$2(c).trim().length === 0;\n        });\n      };\n      var isListItem = function (el) {\n        return name(el) === 'li' || ancestor(el, DomStructure.isList).isSome();\n      };\n      var siblingIsBlock = function (el) {\n        return nextSibling(el).map(function (rightSibling) {\n          if (DomStructure.isBlock(rightSibling)) {\n            return true;\n          }\n          if (DomStructure.isEmptyTag(rightSibling)) {\n            return name(rightSibling) === 'img' ? false : true;\n          }\n          return false;\n        }).getOr(false);\n      };\n      var markCell = function (cell) {\n        return last$1(cell).bind(function (rightEdge) {\n          var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n          return parent(rightEdge).map(function (parent) {\n            return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || DomStructure.isBlock(parent) && !eq(cell, parent) ? [] : [Element.fromTag('br')];\n          });\n        }).getOr([]);\n      };\n      var markContent = function () {\n        var content = bind(cells, function (cell) {\n          var children$1 = children(cell);\n          return advancedBr(children$1) ? [] : children$1.concat(markCell(cell));\n        });\n        return content.length === 0 ? [Element.fromTag('br')] : content;\n      };\n      var contents = markContent();\n      empty(cells[0]);\n      append$1(cells[0], contents);\n    };\n    var TableContent = { merge: merge$2 };\n\n    var prune = function (table) {\n      var cells = TableLookup.cells(table);\n      if (cells.length === 0) {\n        remove$2(table);\n      }\n    };\n    var outcome = Immutable('grid', 'cursor');\n    var elementFromGrid = function (grid, row, column) {\n      return findIn(grid, row, column).orThunk(function () {\n        return findIn(grid, 0, 0);\n      });\n    };\n    var findIn = function (grid, row, column) {\n      return Option.from(grid[row]).bind(function (r) {\n        return Option.from(r.cells()[column]).bind(function (c) {\n          return Option.from(c.element());\n        });\n      });\n    };\n    var bundle = function (grid, row, column) {\n      return outcome(grid, findIn(grid, row, column));\n    };\n    var uniqueRows = function (details) {\n      return foldl(details, function (rest, detail) {\n        return exists(rest, function (currentDetail) {\n          return currentDetail.row() === detail.row();\n        }) ? rest : rest.concat([detail]);\n      }, []).sort(function (detailA, detailB) {\n        return detailA.row() - detailB.row();\n      });\n    };\n    var uniqueColumns = function (details) {\n      return foldl(details, function (rest, detail) {\n        return exists(rest, function (currentDetail) {\n          return currentDetail.column() === detail.column();\n        }) ? rest : rest.concat([detail]);\n      }, []).sort(function (detailA, detailB) {\n        return detailA.column() - detailB.column();\n      });\n    };\n    var insertRowBefore = function (grid, detail, comparator, genWrappers) {\n      var example = detail.row();\n      var targetIndex = detail.row();\n      var newGrid = ModificationOperations.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, targetIndex, detail.column());\n    };\n    var insertRowsBefore = function (grid, details, comparator, genWrappers) {\n      var example = details[0].row();\n      var targetIndex = details[0].row();\n      var rows = uniqueRows(details);\n      var newGrid = foldl(rows, function (newG, _row) {\n        return ModificationOperations.insertRowAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column());\n    };\n    var insertRowAfter = function (grid, detail, comparator, genWrappers) {\n      var example = detail.row();\n      var targetIndex = detail.row() + detail.rowspan();\n      var newGrid = ModificationOperations.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, targetIndex, detail.column());\n    };\n    var insertRowsAfter = function (grid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var example = rows[rows.length - 1].row();\n      var targetIndex = rows[rows.length - 1].row() + rows[rows.length - 1].rowspan();\n      var newGrid = foldl(rows, function (newG, _row) {\n        return ModificationOperations.insertRowAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column());\n    };\n    var insertColumnBefore = function (grid, detail, comparator, genWrappers) {\n      var example = detail.column();\n      var targetIndex = detail.column();\n      var newGrid = ModificationOperations.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), targetIndex);\n    };\n    var insertColumnsBefore = function (grid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var example = columns[0].column();\n      var targetIndex = columns[0].column();\n      var newGrid = foldl(columns, function (newG, _row) {\n        return ModificationOperations.insertColumnAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row(), targetIndex);\n    };\n    var insertColumnAfter = function (grid, detail, comparator, genWrappers) {\n      var example = detail.column();\n      var targetIndex = detail.column() + detail.colspan();\n      var newGrid = ModificationOperations.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), targetIndex);\n    };\n    var insertColumnsAfter = function (grid, details, comparator, genWrappers) {\n      var example = details[details.length - 1].column();\n      var targetIndex = details[details.length - 1].column() + details[details.length - 1].colspan();\n      var columns = uniqueColumns(details);\n      var newGrid = foldl(columns, function (newG, _row) {\n        return ModificationOperations.insertColumnAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row(), targetIndex);\n    };\n    var makeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var makeColumnHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var unmakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var unmakeColumnHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var splitCellIntoColumns$1 = function (grid, detail, comparator, genWrappers) {\n      var newGrid = ModificationOperations.splitCellIntoColumns(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var splitCellIntoRows$1 = function (grid, detail, comparator, genWrappers) {\n      var newGrid = ModificationOperations.splitCellIntoRows(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var eraseColumns = function (grid, details, _comparator, _genWrappers) {\n      var columns = uniqueColumns(details);\n      var newGrid = ModificationOperations.deleteColumnsAt(grid, columns[0].column(), columns[columns.length - 1].column());\n      var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n      return outcome(newGrid, cursor);\n    };\n    var eraseRows = function (grid, details, _comparator, _genWrappers) {\n      var rows = uniqueRows(details);\n      var newGrid = ModificationOperations.deleteRowsAt(grid, rows[0].row(), rows[rows.length - 1].row());\n      var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n      return outcome(newGrid, cursor);\n    };\n    var mergeCells = function (grid, mergable, comparator, _genWrappers) {\n      var cells = mergable.cells();\n      TableContent.merge(cells);\n      var newGrid = MergingOperations.merge(grid, mergable.bounds(), comparator, constant(cells[0]));\n      return outcome(newGrid, Option.from(cells[0]));\n    };\n    var unmergeCells = function (grid, unmergable, comparator, genWrappers) {\n      var newGrid = foldr(unmergable, function (b, cell) {\n        return MergingOperations.unmerge(b, cell, comparator, genWrappers.combine(cell));\n      }, grid);\n      return outcome(newGrid, Option.from(unmergable[0]));\n    };\n    var pasteCells = function (grid, pasteDetails, comparator, _genWrappers) {\n      var gridify = function (table, generators) {\n        var list = DetailsList.fromTable(table);\n        var wh = Warehouse.generate(list);\n        return Transitions.toGrid(wh, generators, true);\n      };\n      var gridB = gridify(pasteDetails.clipboard(), pasteDetails.generators());\n      var startAddress = address(pasteDetails.row(), pasteDetails.column());\n      var mergedGrid = TableMerge.merge(startAddress, grid, gridB, pasteDetails.generators(), comparator);\n      return mergedGrid.fold(function () {\n        return outcome(grid, Option.some(pasteDetails.element()));\n      }, function (nuGrid) {\n        var cursor = elementFromGrid(nuGrid, pasteDetails.row(), pasteDetails.column());\n        return outcome(nuGrid, cursor);\n      });\n    };\n    var gridifyRows = function (rows, generators, example) {\n      var pasteDetails = DetailsList.fromPastedRows(rows, example);\n      var wh = Warehouse.generate(pasteDetails);\n      return Transitions.toGrid(wh, generators, true);\n    };\n    var pasteRowsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var example = grid[pasteDetails.cells[0].row()];\n      var index = pasteDetails.cells[0].row();\n      var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n      var mergedGrid = TableMerge.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n      return outcome(mergedGrid, cursor);\n    };\n    var pasteRowsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var example = grid[pasteDetails.cells[0].row()];\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].row() + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan();\n      var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n      var mergedGrid = TableMerge.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n      return outcome(mergedGrid, cursor);\n    };\n    var resize = Adjustments.adjustWidthTo;\n    var TableOperations = {\n      insertRowBefore: run(insertRowBefore, onCell, noop, noop, Generators.modification),\n      insertRowsBefore: run(insertRowsBefore, onCells, noop, noop, Generators.modification),\n      insertRowAfter: run(insertRowAfter, onCell, noop, noop, Generators.modification),\n      insertRowsAfter: run(insertRowsAfter, onCells, noop, noop, Generators.modification),\n      insertColumnBefore: run(insertColumnBefore, onCell, resize, noop, Generators.modification),\n      insertColumnsBefore: run(insertColumnsBefore, onCells, resize, noop, Generators.modification),\n      insertColumnAfter: run(insertColumnAfter, onCell, resize, noop, Generators.modification),\n      insertColumnsAfter: run(insertColumnsAfter, onCells, resize, noop, Generators.modification),\n      splitCellIntoColumns: run(splitCellIntoColumns$1, onCell, resize, noop, Generators.modification),\n      splitCellIntoRows: run(splitCellIntoRows$1, onCell, noop, noop, Generators.modification),\n      eraseColumns: run(eraseColumns, onCells, resize, prune, Generators.modification),\n      eraseRows: run(eraseRows, onCells, noop, prune, Generators.modification),\n      makeColumnHeader: run(makeColumnHeader, onCell, noop, noop, Generators.transform('row', 'th')),\n      unmakeColumnHeader: run(unmakeColumnHeader, onCell, noop, noop, Generators.transform(null, 'td')),\n      makeRowHeader: run(makeRowHeader, onCell, noop, noop, Generators.transform('col', 'th')),\n      unmakeRowHeader: run(unmakeRowHeader, onCell, noop, noop, Generators.transform(null, 'td')),\n      mergeCells: run(mergeCells, onMergable, noop, noop, Generators.merging),\n      unmergeCells: run(unmergeCells, onUnmergable, resize, noop, Generators.merging),\n      pasteCells: run(pasteCells, onPaste, resize, noop, Generators.modification),\n      pasteRowsBefore: run(pasteRowsBefore, onPasteRows, noop, noop, Generators.modification),\n      pasteRowsAfter: run(pasteRowsAfter, onPasteRows, noop, noop, Generators.modification)\n    };\n\n    var getBody$1 = function (editor) {\n      return Element.fromDom(editor.getBody());\n    };\n    var getPixelWidth$1 = function (elm) {\n      return elm.getBoundingClientRect().width;\n    };\n    var getPixelHeight = function (elm) {\n      return elm.getBoundingClientRect().height;\n    };\n    var getIsRoot = function (editor) {\n      return function (element) {\n        return eq(element, getBody$1(editor));\n      };\n    };\n    var removePxSuffix = function (size) {\n      return size ? size.replace(/px$/, '') : '';\n    };\n    var addSizeSuffix = function (size) {\n      if (/^[0-9]+$/.test(size)) {\n        size += 'px';\n      }\n      return size;\n    };\n    var removeDataStyle = function (table) {\n      var dataStyleCells = descendants$1(table, 'td[data-mce-style],th[data-mce-style]');\n      remove(table, 'data-mce-style');\n      each(dataStyleCells, function (cell) {\n        remove(cell, 'data-mce-style');\n      });\n    };\n\n    var getDirection = function (element) {\n      return get$1(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var ltr$1 = { isRtl: constant(false) };\n    var rtl$1 = { isRtl: constant(true) };\n    var directionAt = function (element) {\n      var dir = getDirection(element);\n      return dir === 'rtl' ? rtl$1 : ltr$1;\n    };\n    var Direction = { directionAt: directionAt };\n\n    var defaultTableToolbar = [\n      'tableprops',\n      'tabledelete',\n      '|',\n      'tableinsertrowbefore',\n      'tableinsertrowafter',\n      'tabledeleterow',\n      '|',\n      'tableinsertcolbefore',\n      'tableinsertcolafter',\n      'tabledeletecol'\n    ];\n    var defaultStyles = {\n      'border-collapse': 'collapse',\n      'width': '100%'\n    };\n    var defaultAttributes = { border: '1' };\n    var getDefaultAttributes = function (editor) {\n      return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n    };\n    var getDefaultStyles = function (editor) {\n      return editor.getParam('table_default_styles', defaultStyles, 'object');\n    };\n    var hasTableResizeBars = function (editor) {\n      return editor.getParam('table_resize_bars', true, 'boolean');\n    };\n    var hasTabNavigation = function (editor) {\n      return editor.getParam('table_tab_navigation', true, 'boolean');\n    };\n    var hasAdvancedCellTab = function (editor) {\n      return editor.getParam('table_cell_advtab', true, 'boolean');\n    };\n    var hasAdvancedRowTab = function (editor) {\n      return editor.getParam('table_row_advtab', true, 'boolean');\n    };\n    var hasAdvancedTableTab = function (editor) {\n      return editor.getParam('table_advtab', true, 'boolean');\n    };\n    var hasAppearanceOptions = function (editor) {\n      return editor.getParam('table_appearance_options', true, 'boolean');\n    };\n    var hasTableGrid = function (editor) {\n      return editor.getParam('table_grid', true, 'boolean');\n    };\n    var shouldStyleWithCss = function (editor) {\n      return editor.getParam('table_style_by_css', false, 'boolean');\n    };\n    var getCellClassList = function (editor) {\n      return editor.getParam('table_cell_class_list', [], 'array');\n    };\n    var getRowClassList = function (editor) {\n      return editor.getParam('table_row_class_list', [], 'array');\n    };\n    var getTableClassList = function (editor) {\n      return editor.getParam('table_class_list', [], 'array');\n    };\n    var getColorPickerCallback = function (editor) {\n      return editor.getParam('color_picker_callback');\n    };\n    var isPixelsForced = function (editor) {\n      return editor.getParam('table_responsive_width') === false;\n    };\n    var getCloneElements = function (editor) {\n      var cloneElements = editor.getParam('table_clone_elements');\n      if (isString(cloneElements)) {\n        return Option.some(cloneElements.split(/[ ,]/));\n      } else if (Array.isArray(cloneElements)) {\n        return Option.some(cloneElements);\n      } else {\n        return Option.none();\n      }\n    };\n    var hasObjectResizing = function (editor) {\n      var objectResizing = editor.getParam('object_resizing', true);\n      return objectResizing === 'table' || objectResizing;\n    };\n    var getToolbar = function (editor) {\n      var toolbar = editor.getParam('table_toolbar', defaultTableToolbar);\n      if (toolbar === '' || toolbar === false) {\n        return [];\n      } else if (isString(toolbar)) {\n        return toolbar.split(/[ ,]/);\n      } else if (isArray(toolbar)) {\n        return toolbar;\n      } else {\n        return [];\n      }\n    };\n\n    var fireNewRow = function (editor, row) {\n      return editor.fire('newrow', { node: row });\n    };\n    var fireNewCell = function (editor, cell) {\n      return editor.fire('newcell', { node: cell });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n\n    var TableActions = function (editor, lazyWire) {\n      var isTableBody = function (editor) {\n        return name(getBody$1(editor)) === 'table';\n      };\n      var lastRowGuard = function (table) {\n        var size = TableGridSize.getGridSize(table);\n        return isTableBody(editor) === false || size.rows() > 1;\n      };\n      var lastColumnGuard = function (table) {\n        var size = TableGridSize.getGridSize(table);\n        return isTableBody(editor) === false || size.columns() > 1;\n      };\n      var cloneFormats = getCloneElements(editor);\n      var execute = function (operation, guard, mutate, lazyWire) {\n        return function (table, target) {\n          removeDataStyle(table);\n          var wire = lazyWire();\n          var doc = Element.fromDom(editor.getDoc());\n          var direction = TableDirection(Direction.directionAt);\n          var generators = TableFill.cellOperations(mutate, doc, cloneFormats);\n          return guard(table) ? operation(wire, table, target, generators, direction).bind(function (result) {\n            each(result.newRows(), function (row) {\n              fireNewRow(editor, row.dom());\n            });\n            each(result.newCells(), function (cell) {\n              fireNewCell(editor, cell.dom());\n            });\n            return result.cursor().map(function (cell) {\n              var rng = editor.dom.createRng();\n              rng.setStart(cell.dom(), 0);\n              rng.setEnd(cell.dom(), 0);\n              return rng;\n            });\n          }) : Option.none();\n        };\n      };\n      var deleteRow = execute(TableOperations.eraseRows, lastRowGuard, noop, lazyWire);\n      var deleteColumn = execute(TableOperations.eraseColumns, lastColumnGuard, noop, lazyWire);\n      var insertRowsBefore = execute(TableOperations.insertRowsBefore, always, noop, lazyWire);\n      var insertRowsAfter = execute(TableOperations.insertRowsAfter, always, noop, lazyWire);\n      var insertColumnsBefore = execute(TableOperations.insertColumnsBefore, always, CellMutations.halve, lazyWire);\n      var insertColumnsAfter = execute(TableOperations.insertColumnsAfter, always, CellMutations.halve, lazyWire);\n      var mergeCells = execute(TableOperations.mergeCells, always, noop, lazyWire);\n      var unmergeCells = execute(TableOperations.unmergeCells, always, noop, lazyWire);\n      var pasteRowsBefore = execute(TableOperations.pasteRowsBefore, always, noop, lazyWire);\n      var pasteRowsAfter = execute(TableOperations.pasteRowsAfter, always, noop, lazyWire);\n      var pasteCells = execute(TableOperations.pasteCells, always, noop, lazyWire);\n      return {\n        deleteRow: deleteRow,\n        deleteColumn: deleteColumn,\n        insertRowsBefore: insertRowsBefore,\n        insertRowsAfter: insertRowsAfter,\n        insertColumnsBefore: insertColumnsBefore,\n        insertColumnsAfter: insertColumnsAfter,\n        mergeCells: mergeCells,\n        unmergeCells: unmergeCells,\n        pasteRowsBefore: pasteRowsBefore,\n        pasteRowsAfter: pasteRowsAfter,\n        pasteCells: pasteCells\n      };\n    };\n\n    var copyRows = function (table, target, generators) {\n      var list = DetailsList.fromTable(table);\n      var house = Warehouse.generate(list);\n      var details = onCells(house, target);\n      return details.map(function (selectedCells) {\n        var grid = Transitions.toGrid(house, generators, false);\n        var slicedGrid = grid.slice(selectedCells[0].row(), selectedCells[selectedCells.length - 1].row() + selectedCells[selectedCells.length - 1].rowspan());\n        var slicedDetails = toDetailList(slicedGrid, generators);\n        return Redraw.copy(slicedDetails);\n      });\n    };\n    var CopyRows = { copyRows: copyRows };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTDTHOverallStyle = function (dom, elm, name) {\n      var cells = dom.select('td,th', elm);\n      var firstChildStyle;\n      var checkChildren = function (firstChildStyle, elms) {\n        for (var i = 0; i < elms.length; i++) {\n          var currentStyle = dom.getStyle(elms[i], name);\n          if (typeof firstChildStyle === 'undefined') {\n            firstChildStyle = currentStyle;\n          }\n          if (firstChildStyle !== currentStyle) {\n            return '';\n          }\n        }\n        return firstChildStyle;\n      };\n      firstChildStyle = checkChildren(firstChildStyle, cells);\n      return firstChildStyle;\n    };\n    var applyAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('align' + name, {}, elm);\n      }\n    };\n    var applyVAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('valign' + name, {}, elm);\n      }\n    };\n    var unApplyAlign = function (editor, elm) {\n      global$1.each('left center right'.split(' '), function (name) {\n        editor.formatter.remove('align' + name, {}, elm);\n      });\n    };\n    var unApplyVAlign = function (editor, elm) {\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        editor.formatter.remove('valign' + name, {}, elm);\n      });\n    };\n    var Styles$1 = {\n      applyAlign: applyAlign,\n      applyVAlign: applyVAlign,\n      unApplyAlign: unApplyAlign,\n      unApplyVAlign: unApplyVAlign,\n      getTDTHOverallStyle: getTDTHOverallStyle\n    };\n\n    var buildListItems = function (inputList, itemCallback, startItems) {\n      var appendItems = function (values, output) {\n        output = output || [];\n        global$1.each(values, function (item) {\n          var menuItem = { text: item.text || item.title };\n          if (item.menu) {\n            menuItem.menu = appendItems(item.menu);\n          } else {\n            menuItem.value = item.value;\n            if (itemCallback) {\n              itemCallback(menuItem);\n            }\n          }\n          output.push(menuItem);\n        });\n        return output;\n      };\n      return appendItems(inputList, startItems || []);\n    };\n    function styleFieldHasFocus(e) {\n      return e.control.rootControl.find('#style')[0].getEl().isEqualNode(domGlobals.document.activeElement);\n    }\n    var syncAdvancedStyleFields = function (editor, evt) {\n      if (styleFieldHasFocus(evt)) {\n        updateAdvancedFields(editor, evt);\n      } else {\n        updateStyleField(editor, evt);\n      }\n    };\n    var updateStyleField = function (editor, evt) {\n      var dom = editor.dom;\n      var rootControl = evt.control.rootControl;\n      var data = rootControl.toJSON();\n      var css = dom.parseStyle(data.style);\n      css['border-style'] = data.borderStyle;\n      css['border-color'] = data.borderColor;\n      css['background-color'] = data.backgroundColor;\n      css.width = data.width ? addSizeSuffix(data.width) : '';\n      css.height = data.height ? addSizeSuffix(data.height) : '';\n      rootControl.find('#style').value(dom.serializeStyle(dom.parseStyle(dom.serializeStyle(css))));\n    };\n    var updateAdvancedFields = function (editor, evt) {\n      var dom = editor.dom;\n      var rootControl = evt.control.rootControl;\n      var data = rootControl.toJSON();\n      var css = dom.parseStyle(data.style);\n      rootControl.find('#borderStyle').value(css['border-style'] || '');\n      rootControl.find('#borderColor').value(css['border-color'] || '');\n      rootControl.find('#backgroundColor').value(css['background-color'] || '');\n      rootControl.find('#width').value(css.width || '');\n      rootControl.find('#height').value(css.height || '');\n    };\n    var extractAdvancedStyles = function (dom, elm) {\n      var css = dom.parseStyle(dom.getAttrib(elm, 'style'));\n      var data = {};\n      if (css['border-style']) {\n        data.borderStyle = css['border-style'];\n      }\n      if (css['border-color']) {\n        data.borderColor = css['border-color'];\n      }\n      if (css['background-color']) {\n        data.backgroundColor = css['background-color'];\n      }\n      data.style = dom.serializeStyle(css);\n      return data;\n    };\n    var createStyleForm = function (editor) {\n      var createColorPickAction = function () {\n        var colorPickerCallback = getColorPickerCallback(editor);\n        if (colorPickerCallback) {\n          return function (evt) {\n            return colorPickerCallback.call(editor, function (value) {\n              evt.control.value(value).fire('change');\n            }, evt.control.value());\n          };\n        }\n      };\n      return {\n        title: 'Advanced',\n        type: 'form',\n        defaults: { onchange: curry(updateStyleField, editor) },\n        items: [\n          {\n            label: 'Style',\n            name: 'style',\n            type: 'textbox',\n            onchange: curry(updateAdvancedFields, editor)\n          },\n          {\n            type: 'form',\n            padding: 0,\n            formItemDefaults: {\n              layout: 'grid',\n              alignH: [\n                'start',\n                'right'\n              ]\n            },\n            defaults: { size: 7 },\n            items: [\n              {\n                label: 'Border style',\n                type: 'listbox',\n                name: 'borderStyle',\n                width: 90,\n                onselect: curry(updateStyleField, editor),\n                values: [\n                  {\n                    text: 'Select...',\n                    value: ''\n                  },\n                  {\n                    text: 'Solid',\n                    value: 'solid'\n                  },\n                  {\n                    text: 'Dotted',\n                    value: 'dotted'\n                  },\n                  {\n                    text: 'Dashed',\n                    value: 'dashed'\n                  },\n                  {\n                    text: 'Double',\n                    value: 'double'\n                  },\n                  {\n                    text: 'Groove',\n                    value: 'groove'\n                  },\n                  {\n                    text: 'Ridge',\n                    value: 'ridge'\n                  },\n                  {\n                    text: 'Inset',\n                    value: 'inset'\n                  },\n                  {\n                    text: 'Outset',\n                    value: 'outset'\n                  },\n                  {\n                    text: 'None',\n                    value: 'none'\n                  },\n                  {\n                    text: 'Hidden',\n                    value: 'hidden'\n                  }\n                ]\n              },\n              {\n                label: 'Border color',\n                type: 'colorbox',\n                name: 'borderColor',\n                onaction: createColorPickAction()\n              },\n              {\n                label: 'Background color',\n                type: 'colorbox',\n                name: 'backgroundColor',\n                onaction: createColorPickAction()\n              }\n            ]\n          }\n        ]\n      };\n    };\n    var Helpers = {\n      createStyleForm: createStyleForm,\n      buildListItems: buildListItems,\n      updateStyleField: updateStyleField,\n      extractAdvancedStyles: extractAdvancedStyles,\n      updateAdvancedFields: updateAdvancedFields,\n      syncAdvancedStyleFields: syncAdvancedStyleFields\n    };\n\n    var updateStyles = function (elm, cssText) {\n      delete elm.dataset.mceStyle;\n      elm.style.cssText += ';' + cssText;\n    };\n    var extractDataFromElement = function (editor, elm) {\n      var dom = editor.dom;\n      var data = {\n        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        scope: dom.getAttrib(elm, 'scope'),\n        class: dom.getAttrib(elm, 'class'),\n        type: elm.nodeName.toLowerCase(),\n        style: '',\n        align: '',\n        valign: ''\n      };\n      global$1.each('left center right'.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, 'align' + name)) {\n          data.align = name;\n        }\n      });\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, 'valign' + name)) {\n          data.valign = name;\n        }\n      });\n      if (hasAdvancedCellTab(editor)) {\n        global$1.extend(data, Helpers.extractAdvancedStyles(dom, elm));\n      }\n      return data;\n    };\n    var onSubmitCellForm = function (editor, cells, evt) {\n      var dom = editor.dom;\n      var data;\n      function setAttrib(elm, name, value) {\n        if (cells.length === 1 || value) {\n          dom.setAttrib(elm, name, value);\n        }\n      }\n      function setStyle(elm, name, value) {\n        if (cells.length === 1 || value) {\n          dom.setStyle(elm, name, value);\n        }\n      }\n      if (hasAdvancedCellTab(editor)) {\n        Helpers.syncAdvancedStyleFields(editor, evt);\n      }\n      data = evt.control.rootControl.toJSON();\n      editor.undoManager.transact(function () {\n        global$1.each(cells, function (cellElm) {\n          setAttrib(cellElm, 'scope', data.scope);\n          if (cells.length === 1) {\n            setAttrib(cellElm, 'style', data.style);\n          } else {\n            updateStyles(cellElm, data.style);\n          }\n          setAttrib(cellElm, 'class', data.class);\n          setStyle(cellElm, 'width', addSizeSuffix(data.width));\n          setStyle(cellElm, 'height', addSizeSuffix(data.height));\n          if (data.type && cellElm.nodeName.toLowerCase() !== data.type) {\n            cellElm = dom.rename(cellElm, data.type);\n          }\n          if (cells.length === 1) {\n            Styles$1.unApplyAlign(editor, cellElm);\n            Styles$1.unApplyVAlign(editor, cellElm);\n          }\n          if (data.align) {\n            Styles$1.applyAlign(editor, cellElm, data.align);\n          }\n          if (data.valign) {\n            Styles$1.applyVAlign(editor, cellElm, data.valign);\n          }\n        });\n        editor.focus();\n      });\n    };\n    var open = function (editor) {\n      var cellElm, data, classListCtrl, cells = [];\n      cells = editor.dom.select('td[data-mce-selected],th[data-mce-selected]');\n      cellElm = editor.dom.getParent(editor.selection.getStart(), 'td,th');\n      if (!cells.length && cellElm) {\n        cells.push(cellElm);\n      }\n      cellElm = cellElm || cells[0];\n      if (!cellElm) {\n        return;\n      }\n      if (cells.length > 1) {\n        data = {\n          width: '',\n          height: '',\n          scope: '',\n          class: '',\n          align: '',\n          valign: '',\n          style: '',\n          type: cellElm.nodeName.toLowerCase()\n        };\n      } else {\n        data = extractDataFromElement(editor, cellElm);\n      }\n      if (getCellClassList(editor).length > 0) {\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: Helpers.buildListItems(getCellClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'td',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n      var generalCellForm = {\n        type: 'form',\n        layout: 'flex',\n        direction: 'column',\n        labelGapCalc: 'children',\n        padding: 0,\n        items: [\n          {\n            type: 'form',\n            layout: 'grid',\n            columns: 2,\n            labelGapCalc: false,\n            padding: 0,\n            defaults: {\n              type: 'textbox',\n              maxWidth: 50\n            },\n            items: [\n              {\n                label: 'Width',\n                name: 'width',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Height',\n                name: 'height',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Cell type',\n                name: 'type',\n                type: 'listbox',\n                text: 'None',\n                minWidth: 90,\n                maxWidth: null,\n                values: [\n                  {\n                    text: 'Cell',\n                    value: 'td'\n                  },\n                  {\n                    text: 'Header cell',\n                    value: 'th'\n                  }\n                ]\n              },\n              {\n                label: 'Scope',\n                name: 'scope',\n                type: 'listbox',\n                text: 'None',\n                minWidth: 90,\n                maxWidth: null,\n                values: [\n                  {\n                    text: 'None',\n                    value: ''\n                  },\n                  {\n                    text: 'Row',\n                    value: 'row'\n                  },\n                  {\n                    text: 'Column',\n                    value: 'col'\n                  },\n                  {\n                    text: 'Row group',\n                    value: 'rowgroup'\n                  },\n                  {\n                    text: 'Column group',\n                    value: 'colgroup'\n                  }\n                ]\n              },\n              {\n                label: 'H Align',\n                name: 'align',\n                type: 'listbox',\n                text: 'None',\n                minWidth: 90,\n                maxWidth: null,\n                values: [\n                  {\n                    text: 'None',\n                    value: ''\n                  },\n                  {\n                    text: 'Left',\n                    value: 'left'\n                  },\n                  {\n                    text: 'Center',\n                    value: 'center'\n                  },\n                  {\n                    text: 'Right',\n                    value: 'right'\n                  }\n                ]\n              },\n              {\n                label: 'V Align',\n                name: 'valign',\n                type: 'listbox',\n                text: 'None',\n                minWidth: 90,\n                maxWidth: null,\n                values: [\n                  {\n                    text: 'None',\n                    value: ''\n                  },\n                  {\n                    text: 'Top',\n                    value: 'top'\n                  },\n                  {\n                    text: 'Middle',\n                    value: 'middle'\n                  },\n                  {\n                    text: 'Bottom',\n                    value: 'bottom'\n                  }\n                ]\n              }\n            ]\n          },\n          classListCtrl\n        ]\n      };\n      if (hasAdvancedCellTab(editor)) {\n        editor.windowManager.open({\n          title: 'Cell properties',\n          bodyType: 'tabpanel',\n          data: data,\n          body: [\n            {\n              title: 'General',\n              type: 'form',\n              items: generalCellForm\n            },\n            Helpers.createStyleForm(editor)\n          ],\n          onsubmit: curry(onSubmitCellForm, editor, cells)\n        });\n      } else {\n        editor.windowManager.open({\n          title: 'Cell properties',\n          data: data,\n          body: generalCellForm,\n          onsubmit: curry(onSubmitCellForm, editor, cells)\n        });\n      }\n    };\n    var CellDialog = { open: open };\n\n    var extractDataFromElement$1 = function (editor, elm) {\n      var dom = editor.dom;\n      var data = {\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        scope: dom.getAttrib(elm, 'scope'),\n        class: dom.getAttrib(elm, 'class'),\n        align: '',\n        style: '',\n        type: elm.parentNode.nodeName.toLowerCase()\n      };\n      global$1.each('left center right'.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, 'align' + name)) {\n          data.align = name;\n        }\n      });\n      if (hasAdvancedRowTab(editor)) {\n        global$1.extend(data, Helpers.extractAdvancedStyles(dom, elm));\n      }\n      return data;\n    };\n    var switchRowType = function (dom, rowElm, toType) {\n      var tableElm = dom.getParent(rowElm, 'table');\n      var oldParentElm = rowElm.parentNode;\n      var parentElm = dom.select(toType, tableElm)[0];\n      if (!parentElm) {\n        parentElm = dom.create(toType);\n        if (tableElm.firstChild) {\n          if (tableElm.firstChild.nodeName === 'CAPTION') {\n            dom.insertAfter(parentElm, tableElm.firstChild);\n          } else {\n            tableElm.insertBefore(parentElm, tableElm.firstChild);\n          }\n        } else {\n          tableElm.appendChild(parentElm);\n        }\n      }\n      parentElm.appendChild(rowElm);\n      if (!oldParentElm.hasChildNodes()) {\n        dom.remove(oldParentElm);\n      }\n    };\n    function onSubmitRowForm(editor, rows, oldData, evt) {\n      var dom = editor.dom;\n      function setAttrib(elm, name, value) {\n        if (rows.length === 1 || value) {\n          dom.setAttrib(elm, name, value);\n        }\n      }\n      function setStyle(elm, name, value) {\n        if (rows.length === 1 || value) {\n          dom.setStyle(elm, name, value);\n        }\n      }\n      if (hasAdvancedRowTab(editor)) {\n        Helpers.syncAdvancedStyleFields(editor, evt);\n      }\n      var data = evt.control.rootControl.toJSON();\n      editor.undoManager.transact(function () {\n        global$1.each(rows, function (rowElm) {\n          setAttrib(rowElm, 'scope', data.scope);\n          setAttrib(rowElm, 'style', data.style);\n          setAttrib(rowElm, 'class', data.class);\n          setStyle(rowElm, 'height', addSizeSuffix(data.height));\n          if (data.type !== rowElm.parentNode.nodeName.toLowerCase()) {\n            switchRowType(editor.dom, rowElm, data.type);\n          }\n          if (data.align !== oldData.align) {\n            Styles$1.unApplyAlign(editor, rowElm);\n            Styles$1.applyAlign(editor, rowElm, data.align);\n          }\n        });\n        editor.focus();\n      });\n    }\n    var open$1 = function (editor) {\n      var dom = editor.dom;\n      var tableElm, cellElm, rowElm, classListCtrl, data;\n      var rows = [];\n      var generalRowForm;\n      tableElm = dom.getParent(editor.selection.getStart(), 'table');\n      cellElm = dom.getParent(editor.selection.getStart(), 'td,th');\n      global$1.each(tableElm.rows, function (row) {\n        global$1.each(row.cells, function (cell) {\n          if (dom.getAttrib(cell, 'data-mce-selected') || cell === cellElm) {\n            rows.push(row);\n            return false;\n          }\n        });\n      });\n      rowElm = rows[0];\n      if (!rowElm) {\n        return;\n      }\n      if (rows.length > 1) {\n        data = {\n          height: '',\n          scope: '',\n          style: '',\n          class: '',\n          align: '',\n          type: rowElm.parentNode.nodeName.toLowerCase()\n        };\n      } else {\n        data = extractDataFromElement$1(editor, rowElm);\n      }\n      if (getRowClassList(editor).length > 0) {\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: Helpers.buildListItems(getRowClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'tr',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n      generalRowForm = {\n        type: 'form',\n        columns: 2,\n        padding: 0,\n        defaults: { type: 'textbox' },\n        items: [\n          {\n            type: 'listbox',\n            name: 'type',\n            label: 'Row type',\n            text: 'Header',\n            maxWidth: null,\n            values: [\n              {\n                text: 'Header',\n                value: 'thead'\n              },\n              {\n                text: 'Body',\n                value: 'tbody'\n              },\n              {\n                text: 'Footer',\n                value: 'tfoot'\n              }\n            ]\n          },\n          {\n            type: 'listbox',\n            name: 'align',\n            label: 'Alignment',\n            text: 'None',\n            maxWidth: null,\n            values: [\n              {\n                text: 'None',\n                value: ''\n              },\n              {\n                text: 'Left',\n                value: 'left'\n              },\n              {\n                text: 'Center',\n                value: 'center'\n              },\n              {\n                text: 'Right',\n                value: 'right'\n              }\n            ]\n          },\n          {\n            label: 'Height',\n            name: 'height'\n          },\n          classListCtrl\n        ]\n      };\n      if (hasAdvancedRowTab(editor)) {\n        editor.windowManager.open({\n          title: 'Row properties',\n          data: data,\n          bodyType: 'tabpanel',\n          body: [\n            {\n              title: 'General',\n              type: 'form',\n              items: generalRowForm\n            },\n            Helpers.createStyleForm(editor)\n          ],\n          onsubmit: curry(onSubmitRowForm, editor, rows, data)\n        });\n      } else {\n        editor.windowManager.open({\n          title: 'Row properties',\n          data: data,\n          body: generalRowForm,\n          onsubmit: curry(onSubmitRowForm, editor, rows, data)\n        });\n      }\n    };\n    var RowDialog = { open: open$1 };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var DefaultRenderOptions = {\n      styles: {\n        'border-collapse': 'collapse',\n        'width': '100%'\n      },\n      attributes: { border: '1' },\n      percentages: true\n    };\n    var makeTable = function () {\n      return Element.fromTag('table');\n    };\n    var tableBody = function () {\n      return Element.fromTag('tbody');\n    };\n    var tableRow = function () {\n      return Element.fromTag('tr');\n    };\n    var tableHeaderCell = function () {\n      return Element.fromTag('th');\n    };\n    var tableCell = function () {\n      return Element.fromTag('td');\n    };\n    var render$1 = function (rows, columns, rowHeaders, columnHeaders, renderOpts) {\n      if (renderOpts === void 0) {\n        renderOpts = DefaultRenderOptions;\n      }\n      var table = makeTable();\n      setAll$1(table, renderOpts.styles);\n      setAll(table, renderOpts.attributes);\n      var tbody = tableBody();\n      append(table, tbody);\n      var trs = [];\n      for (var i = 0; i < rows; i++) {\n        var tr = tableRow();\n        for (var j = 0; j < columns; j++) {\n          var td = i < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n          if (j < columnHeaders) {\n            set(td, 'scope', 'row');\n          }\n          if (i < rowHeaders) {\n            set(td, 'scope', 'col');\n          }\n          append(td, Element.fromTag('br'));\n          if (renderOpts.percentages) {\n            set$1(td, 'width', 100 / columns + '%');\n          }\n          append(tr, td);\n        }\n        trs.push(tr);\n      }\n      append$1(tbody, trs);\n      return table;\n    };\n\n    var get$7 = function (element) {\n      return element.dom().innerHTML;\n    };\n    var getOuter$2 = function (element) {\n      var container = Element.fromTag('div');\n      var clone = Element.fromDom(element.dom().cloneNode(true));\n      append(container, clone);\n      return get$7(container);\n    };\n\n    var placeCaretInCell = function (editor, cell) {\n      editor.selection.select(cell.dom(), true);\n      editor.selection.collapse(true);\n    };\n    var selectFirstCellInTable = function (editor, tableElm) {\n      descendant$1(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n    };\n    var fireEvents = function (editor, table) {\n      each(descendants$1(table, 'tr'), function (row) {\n        fireNewRow(editor, row.dom());\n        each(descendants$1(row, 'th,td'), function (cell) {\n          fireNewCell(editor, cell.dom());\n        });\n      });\n    };\n    var isPercentage = function (width) {\n      return isString(width) && width.indexOf('%') !== -1;\n    };\n    var insert$1 = function (editor, columns, rows) {\n      var defaultStyles = getDefaultStyles(editor);\n      var options = {\n        styles: defaultStyles,\n        attributes: getDefaultAttributes(editor),\n        percentages: isPercentage(defaultStyles.width) && !isPixelsForced(editor)\n      };\n      var table = render$1(rows, columns, 0, 0, options);\n      set(table, 'data-mce-id', '__mce');\n      var html = getOuter$2(table);\n      editor.insertContent(html);\n      return descendant$1(getBody$1(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n        if (isPixelsForced(editor)) {\n          set$1(table, 'width', get$1(table, 'width'));\n        }\n        remove(table, 'data-mce-id');\n        fireEvents(editor, table);\n        selectFirstCellInTable(editor, table);\n        return table.dom();\n      }).getOr(null);\n    };\n    var InsertTable = { insert: insert$1 };\n\n    function styleTDTH(dom, elm, name, value) {\n      if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n        dom.setStyle(elm, name, value);\n      } else {\n        if (elm.children) {\n          for (var i = 0; i < elm.children.length; i++) {\n            styleTDTH(dom, elm.children[i], name, value);\n          }\n        }\n      }\n    }\n    var extractDataFromElement$2 = function (editor, tableElm) {\n      var dom = editor.dom;\n      var data = {\n        width: dom.getStyle(tableElm, 'width') || dom.getAttrib(tableElm, 'width'),\n        height: dom.getStyle(tableElm, 'height') || dom.getAttrib(tableElm, 'height'),\n        cellspacing: dom.getStyle(tableElm, 'border-spacing') || dom.getAttrib(tableElm, 'cellspacing'),\n        cellpadding: dom.getAttrib(tableElm, 'data-mce-cell-padding') || dom.getAttrib(tableElm, 'cellpadding') || Styles$1.getTDTHOverallStyle(editor.dom, tableElm, 'padding'),\n        border: dom.getAttrib(tableElm, 'data-mce-border') || dom.getAttrib(tableElm, 'border') || Styles$1.getTDTHOverallStyle(editor.dom, tableElm, 'border'),\n        borderColor: dom.getAttrib(tableElm, 'data-mce-border-color'),\n        caption: !!dom.select('caption', tableElm)[0],\n        class: dom.getAttrib(tableElm, 'class')\n      };\n      global$1.each('left center right'.split(' '), function (name) {\n        if (editor.formatter.matchNode(tableElm, 'align' + name)) {\n          data.align = name;\n        }\n      });\n      if (hasAdvancedTableTab(editor)) {\n        global$1.extend(data, Helpers.extractAdvancedStyles(dom, tableElm));\n      }\n      return data;\n    };\n    var applyDataToElement = function (editor, tableElm, data) {\n      var dom = editor.dom;\n      var attrs = {};\n      var styles = {};\n      attrs.class = data.class;\n      styles.height = addSizeSuffix(data.height);\n      if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n        attrs.width = removePxSuffix(data.width);\n      } else {\n        styles.width = addSizeSuffix(data.width);\n      }\n      if (shouldStyleWithCss(editor)) {\n        styles['border-width'] = addSizeSuffix(data.border);\n        styles['border-spacing'] = addSizeSuffix(data.cellspacing);\n        global$1.extend(attrs, {\n          'data-mce-border-color': data.borderColor,\n          'data-mce-cell-padding': data.cellpadding,\n          'data-mce-border': data.border\n        });\n      } else {\n        global$1.extend(attrs, {\n          border: data.border,\n          cellpadding: data.cellpadding,\n          cellspacing: data.cellspacing\n        });\n      }\n      if (shouldStyleWithCss(editor)) {\n        if (tableElm.children) {\n          for (var i = 0; i < tableElm.children.length; i++) {\n            styleTDTH(dom, tableElm.children[i], {\n              'border-width': addSizeSuffix(data.border),\n              'border-color': data.borderColor,\n              'padding': addSizeSuffix(data.cellpadding)\n            });\n          }\n        }\n      }\n      if (data.style) {\n        global$1.extend(styles, dom.parseStyle(data.style));\n      } else {\n        styles = global$1.extend({}, dom.parseStyle(dom.getAttrib(tableElm, 'style')), styles);\n      }\n      attrs.style = dom.serializeStyle(styles);\n      dom.setAttribs(tableElm, attrs);\n    };\n    var onSubmitTableForm = function (editor, tableElm, evt) {\n      var dom = editor.dom;\n      var captionElm;\n      var data;\n      if (hasAdvancedTableTab(editor)) {\n        Helpers.syncAdvancedStyleFields(editor, evt);\n      }\n      data = evt.control.rootControl.toJSON();\n      if (data.class === false) {\n        delete data.class;\n      }\n      editor.undoManager.transact(function () {\n        if (!tableElm) {\n          tableElm = InsertTable.insert(editor, data.cols || 1, data.rows || 1);\n        }\n        applyDataToElement(editor, tableElm, data);\n        captionElm = dom.select('caption', tableElm)[0];\n        if (captionElm && !data.caption) {\n          dom.remove(captionElm);\n        }\n        if (!captionElm && data.caption) {\n          captionElm = dom.create('caption');\n          captionElm.innerHTML = !global$2.ie ? '<br data-mce-bogus=\"1\"/>' : '\\xA0';\n          tableElm.insertBefore(captionElm, tableElm.firstChild);\n        }\n        Styles$1.unApplyAlign(editor, tableElm);\n        if (data.align) {\n          Styles$1.applyAlign(editor, tableElm, data.align);\n        }\n        editor.focus();\n        editor.addVisual();\n      });\n    };\n    var open$2 = function (editor, isProps) {\n      var dom = editor.dom;\n      var tableElm, colsCtrl, rowsCtrl, classListCtrl, data = {}, generalTableForm;\n      if (isProps === true) {\n        tableElm = dom.getParent(editor.selection.getStart(), 'table');\n        if (tableElm) {\n          data = extractDataFromElement$2(editor, tableElm);\n        }\n      } else {\n        colsCtrl = {\n          label: 'Cols',\n          name: 'cols'\n        };\n        rowsCtrl = {\n          label: 'Rows',\n          name: 'rows'\n        };\n      }\n      if (getTableClassList(editor).length > 0) {\n        if (data.class) {\n          data.class = data.class.replace(/\\s*mce\\-item\\-table\\s*/g, '');\n        }\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: Helpers.buildListItems(getTableClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'table',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n      generalTableForm = {\n        type: 'form',\n        layout: 'flex',\n        direction: 'column',\n        labelGapCalc: 'children',\n        padding: 0,\n        items: [\n          {\n            type: 'form',\n            labelGapCalc: false,\n            padding: 0,\n            layout: 'grid',\n            columns: 2,\n            defaults: {\n              type: 'textbox',\n              maxWidth: 50\n            },\n            items: hasAppearanceOptions(editor) ? [\n              colsCtrl,\n              rowsCtrl,\n              {\n                label: 'Width',\n                name: 'width',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Height',\n                name: 'height',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Cell spacing',\n                name: 'cellspacing'\n              },\n              {\n                label: 'Cell padding',\n                name: 'cellpadding'\n              },\n              {\n                label: 'Border',\n                name: 'border'\n              },\n              {\n                label: 'Caption',\n                name: 'caption',\n                type: 'checkbox'\n              }\n            ] : [\n              colsCtrl,\n              rowsCtrl,\n              {\n                label: 'Width',\n                name: 'width',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Height',\n                name: 'height',\n                onchange: curry(Helpers.updateStyleField, editor)\n              }\n            ]\n          },\n          {\n            label: 'Alignment',\n            name: 'align',\n            type: 'listbox',\n            text: 'None',\n            values: [\n              {\n                text: 'None',\n                value: ''\n              },\n              {\n                text: 'Left',\n                value: 'left'\n              },\n              {\n                text: 'Center',\n                value: 'center'\n              },\n              {\n                text: 'Right',\n                value: 'right'\n              }\n            ]\n          },\n          classListCtrl\n        ]\n      };\n      if (hasAdvancedTableTab(editor)) {\n        editor.windowManager.open({\n          title: 'Table properties',\n          data: data,\n          bodyType: 'tabpanel',\n          body: [\n            {\n              title: 'General',\n              type: 'form',\n              items: generalTableForm\n            },\n            Helpers.createStyleForm(editor)\n          ],\n          onsubmit: curry(onSubmitTableForm, editor, tableElm)\n        });\n      } else {\n        editor.windowManager.open({\n          title: 'Table properties',\n          data: data,\n          body: generalTableForm,\n          onsubmit: curry(onSubmitTableForm, editor, tableElm)\n        });\n      }\n    };\n    var TableDialog = { open: open$2 };\n\n    var each$3 = global$1.each;\n    var registerCommands = function (editor, actions, cellSelection, selections, clipboardRows) {\n      var isRoot = getIsRoot(editor);\n      var eraseTable = function () {\n        getSelectionStartCell().orThunk(getSelectionStartCaption).each(function (cellOrCaption) {\n          var table = TableLookup.table(cellOrCaption, isRoot);\n          table.filter(not(isRoot)).each(function (table) {\n            var cursor = Element.fromText('');\n            after(table, cursor);\n            remove$2(table);\n            var rng = editor.dom.createRng();\n            rng.setStart(cursor.dom(), 0);\n            rng.setEnd(cursor.dom(), 0);\n            editor.selection.setRng(rng);\n          });\n        });\n      };\n      var getSelectionStartFromSelector = function (selector) {\n        return function () {\n          return Option.from(editor.dom.getParent(editor.selection.getStart(), selector)).map(Element.fromDom);\n        };\n      };\n      var getSelectionStartCaption = getSelectionStartFromSelector('caption');\n      var getSelectionStartCell = getSelectionStartFromSelector('th,td');\n      var getTableFromCell = function (cell) {\n        return TableLookup.table(cell, isRoot);\n      };\n      var getSize = function (table) {\n        return {\n          width: getPixelWidth$1(table.dom()),\n          height: getPixelWidth$1(table.dom())\n        };\n      };\n      var resizeChange = function (editor, oldSize, table) {\n        var newSize = getSize(table);\n        if (oldSize.width !== newSize.width || oldSize.height !== newSize.height) {\n          fireObjectResizeStart(editor, table.dom(), oldSize.width, oldSize.height);\n          fireObjectResized(editor, table.dom(), newSize.width, newSize.height);\n        }\n      };\n      var actOnSelection = function (execute) {\n        getSelectionStartCell().each(function (cell) {\n          getTableFromCell(cell).each(function (table) {\n            var targets = TableTargets.forMenu(selections, table, cell);\n            var beforeSize = getSize(table);\n            execute(table, targets).each(function (rng) {\n              resizeChange(editor, beforeSize, table);\n              editor.selection.setRng(rng);\n              editor.focus();\n              cellSelection.clear(table);\n              removeDataStyle(table);\n            });\n          });\n        });\n      };\n      var copyRowSelection = function (execute) {\n        return getSelectionStartCell().bind(function (cell) {\n          return getTableFromCell(cell).bind(function (table) {\n            var doc = Element.fromDom(editor.getDoc());\n            var targets = TableTargets.forMenu(selections, table, cell);\n            var generators = TableFill.cellOperations(noop, doc, Option.none());\n            return CopyRows.copyRows(table, targets, generators);\n          });\n        });\n      };\n      var pasteOnSelection = function (execute) {\n        clipboardRows.get().each(function (rows) {\n          var clonedRows = map(rows, function (row) {\n            return deep(row);\n          });\n          getSelectionStartCell().each(function (cell) {\n            getTableFromCell(cell).each(function (table) {\n              var doc = Element.fromDom(editor.getDoc());\n              var generators = TableFill.paste(doc);\n              var targets = TableTargets.pasteRows(selections, table, cell, clonedRows, generators);\n              execute(table, targets).each(function (rng) {\n                editor.selection.setRng(rng);\n                editor.focus();\n                cellSelection.clear(table);\n              });\n            });\n          });\n        });\n      };\n      each$3({\n        mceTableSplitCells: function () {\n          actOnSelection(actions.unmergeCells);\n        },\n        mceTableMergeCells: function () {\n          actOnSelection(actions.mergeCells);\n        },\n        mceTableInsertRowBefore: function () {\n          actOnSelection(actions.insertRowsBefore);\n        },\n        mceTableInsertRowAfter: function () {\n          actOnSelection(actions.insertRowsAfter);\n        },\n        mceTableInsertColBefore: function () {\n          actOnSelection(actions.insertColumnsBefore);\n        },\n        mceTableInsertColAfter: function () {\n          actOnSelection(actions.insertColumnsAfter);\n        },\n        mceTableDeleteCol: function () {\n          actOnSelection(actions.deleteColumn);\n        },\n        mceTableDeleteRow: function () {\n          actOnSelection(actions.deleteRow);\n        },\n        mceTableCutRow: function (grid) {\n          clipboardRows.set(copyRowSelection());\n          actOnSelection(actions.deleteRow);\n        },\n        mceTableCopyRow: function (grid) {\n          clipboardRows.set(copyRowSelection());\n        },\n        mceTablePasteRowBefore: function (grid) {\n          pasteOnSelection(actions.pasteRowsBefore);\n        },\n        mceTablePasteRowAfter: function (grid) {\n          pasteOnSelection(actions.pasteRowsAfter);\n        },\n        mceTableDelete: eraseTable\n      }, function (func, name) {\n        editor.addCommand(name, func);\n      });\n      each$3({\n        mceInsertTable: curry(TableDialog.open, editor),\n        mceTableProps: curry(TableDialog.open, editor, true),\n        mceTableRowProps: curry(RowDialog.open, editor),\n        mceTableCellProps: curry(CellDialog.open, editor)\n      }, function (func, name) {\n        editor.addCommand(name, function (ui, val) {\n          func(val);\n        });\n      });\n    };\n    var Commands = { registerCommands: registerCommands };\n\n    var only = function (element) {\n      var parent = Option.from(element.dom().documentElement).map(Element.fromDom).getOr(element);\n      return {\n        parent: constant(parent),\n        view: constant(element),\n        origin: constant(Position(0, 0))\n      };\n    };\n    var detached = function (editable, chrome) {\n      var origin = function () {\n        return absolute(chrome);\n      };\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: origin\n      };\n    };\n    var body$1 = function (editable, chrome) {\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: constant(Position(0, 0))\n      };\n    };\n    var ResizeWire = {\n      only: only,\n      detached: detached,\n      body: body$1\n    };\n\n    var Event = function (fields) {\n      var struct = Immutable.apply(null, fields);\n      var handlers = [];\n      var bind = function (handler) {\n        if (handler === undefined) {\n          throw new Error('Event bind error: undefined handler');\n        }\n        handlers.push(handler);\n      };\n      var unbind = function (handler) {\n        handlers = filter(handlers, function (h) {\n          return h !== handler;\n        });\n      };\n      var trigger = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        var event = struct.apply(null, args);\n        each(handlers, function (handler) {\n          handler(event);\n        });\n      };\n      return {\n        bind: bind,\n        unbind: unbind,\n        trigger: trigger\n      };\n    };\n\n    var create$1 = function (typeDefs) {\n      var registry = map$1(typeDefs, function (event) {\n        return {\n          bind: event.bind,\n          unbind: event.unbind\n        };\n      });\n      var trigger = map$1(typeDefs, function (event) {\n        return event.trigger;\n      });\n      return {\n        registry: registry,\n        trigger: trigger\n      };\n    };\n    var Events = { create: create$1 };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: constant(target),\n        x: constant(x),\n        y: constant(y),\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: constant(raw)\n      };\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (!filter(rawEvent)) {\n          return;\n        }\n        var target = Element.fromDom(rawEvent.target);\n        var stop = function () {\n          rawEvent.stopPropagation();\n        };\n        var prevent = function () {\n          rawEvent.preventDefault();\n        };\n        var kill = compose(prevent, stop);\n        var evt = mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n        handler(evt);\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom().addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom().removeEventListener(event, handler, useCapture);\n    };\n\n    var filter$1 = constant(true);\n    var bind$2 = function (element, event, handler) {\n      return bind$1(element, event, filter$1, handler);\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge$3 = baseMerge(shallow$1);\n\n    var styles$1 = css('ephox-dragster');\n    var Styles$2 = { resolve: styles$1.resolve };\n\n    var Blocker = function (options) {\n      var settings = merge$3({ layerClass: Styles$2.resolve('blocker') }, options);\n      var div = Element.fromTag('div');\n      set(div, 'role', 'presentation');\n      setAll$1(div, {\n        position: 'fixed',\n        left: '0px',\n        top: '0px',\n        width: '100%',\n        height: '100%'\n      });\n      add$2(div, Styles$2.resolve('blocker'));\n      add$2(div, settings.layerClass);\n      var element = function () {\n        return div;\n      };\n      var destroy = function () {\n        remove$2(div);\n      };\n      return {\n        element: element,\n        destroy: destroy\n      };\n    };\n\n    var DragMode = exactly([\n      'compare',\n      'extract',\n      'mutate',\n      'sink'\n    ]);\n    var DragSink = exactly([\n      'element',\n      'start',\n      'stop',\n      'destroy'\n    ]);\n    var DragApi = exactly([\n      'forceDrop',\n      'drop',\n      'move',\n      'delayDrop'\n    ]);\n\n    var compare = function (old, nu) {\n      return Position(nu.left() - old.left(), nu.top() - old.top());\n    };\n    var extract$1 = function (event) {\n      return Option.some(Position(event.x(), event.y()));\n    };\n    var mutate = function (mutation, info) {\n      mutation.mutate(info.left(), info.top());\n    };\n    var sink = function (dragApi, settings) {\n      var blocker = Blocker(settings);\n      var mdown = bind$2(blocker.element(), 'mousedown', dragApi.forceDrop);\n      var mup = bind$2(blocker.element(), 'mouseup', dragApi.drop);\n      var mmove = bind$2(blocker.element(), 'mousemove', dragApi.move);\n      var mout = bind$2(blocker.element(), 'mouseout', dragApi.delayDrop);\n      var destroy = function () {\n        blocker.destroy();\n        mup.unbind();\n        mmove.unbind();\n        mout.unbind();\n        mdown.unbind();\n      };\n      var start = function (parent) {\n        append(parent, blocker.element());\n      };\n      var stop = function () {\n        remove$2(blocker.element());\n      };\n      return DragSink({\n        element: blocker.element,\n        start: start,\n        stop: stop,\n        destroy: destroy\n      });\n    };\n    var MouseDrag = DragMode({\n      compare: compare,\n      extract: extract$1,\n      sink: sink,\n      mutate: mutate\n    });\n\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n        }\n        timer = domGlobals.setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    function InDrag () {\n      var previous = Option.none();\n      var reset = function () {\n        previous = Option.none();\n      };\n      var update = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.compare(old, nu);\n        });\n        previous = Option.some(nu);\n        return result;\n      };\n      var onEvent = function (event, mode) {\n        var dataOption = mode.extract(event);\n        dataOption.each(function (data) {\n          var offset = update(mode, data);\n          offset.each(function (d) {\n            events.trigger.move(d);\n          });\n        });\n      };\n      var events = Events.create({ move: Event(['info']) });\n      return {\n        onEvent: onEvent,\n        reset: reset,\n        events: events.registry\n      };\n    }\n\n    function NoDrag () {\n      return {\n        onEvent: noop,\n        reset: noop\n      };\n    }\n\n    function Movement () {\n      var noDragState = NoDrag();\n      var inDragState = InDrag();\n      var dragState = noDragState;\n      var on = function () {\n        dragState.reset();\n        dragState = inDragState;\n      };\n      var off = function () {\n        dragState.reset();\n        dragState = noDragState;\n      };\n      var onEvent = function (event, mode) {\n        dragState.onEvent(event, mode);\n      };\n      var isOn = function () {\n        return dragState === inDragState;\n      };\n      return {\n        on: on,\n        off: off,\n        isOn: isOn,\n        onEvent: onEvent,\n        events: inDragState.events\n      };\n    }\n\n    var setup = function (mutation, mode, settings) {\n      var active = false;\n      var events = Events.create({\n        start: Event([]),\n        stop: Event([])\n      });\n      var movement = Movement();\n      var drop = function () {\n        sink.stop();\n        if (movement.isOn()) {\n          movement.off();\n          events.trigger.stop();\n        }\n      };\n      var throttledDrop = last$2(drop, 200);\n      var go = function (parent) {\n        sink.start(parent);\n        movement.on();\n        events.trigger.start();\n      };\n      var mousemove = function (event) {\n        throttledDrop.cancel();\n        movement.onEvent(event, mode);\n      };\n      movement.events.move.bind(function (event) {\n        mode.mutate(mutation, event.info());\n      });\n      var on = function () {\n        active = true;\n      };\n      var off = function () {\n        active = false;\n      };\n      var runIfActive = function (f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (active) {\n            f.apply(null, args);\n          }\n        };\n      };\n      var sink = mode.sink(DragApi({\n        forceDrop: drop,\n        drop: runIfActive(drop),\n        move: runIfActive(mousemove),\n        delayDrop: runIfActive(throttledDrop.throttle)\n      }), settings);\n      var destroy = function () {\n        sink.destroy();\n      };\n      return {\n        element: sink.element,\n        go: go,\n        on: on,\n        off: off,\n        destroy: destroy,\n        events: events.registry\n      };\n    };\n    var Dragging = { setup: setup };\n\n    var transform$1 = function (mutation, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n      return Dragging.setup(mutation, mode, settings);\n    };\n    var Dragger = { transform: transform$1 };\n\n    var Mutation = function () {\n      var events = Events.create({\n        drag: Event([\n          'xDelta',\n          'yDelta'\n        ])\n      });\n      var mutate = function (x, y) {\n        events.trigger.drag(x, y);\n      };\n      return {\n        mutate: mutate,\n        events: events.registry\n      };\n    };\n\n    var BarMutation = function () {\n      var events = Events.create({\n        drag: Event([\n          'xDelta',\n          'yDelta',\n          'target'\n        ])\n      });\n      var target = Option.none();\n      var delegate = Mutation();\n      delegate.events.drag.bind(function (event) {\n        target.each(function (t) {\n          events.trigger.drag(event.xDelta(), event.yDelta(), t);\n        });\n      });\n      var assign = function (t) {\n        target = Option.some(t);\n      };\n      var get = function () {\n        return target;\n      };\n      return {\n        assign: assign,\n        get: get,\n        mutate: delegate.mutate,\n        events: events.registry\n      };\n    };\n\n    var isContentEditableTrue = function (elm) {\n      return get(elm, 'contenteditable') === 'true';\n    };\n    var findClosestContentEditable = function (target, isRoot) {\n      return closest$1(target, '[contenteditable]', isRoot);\n    };\n\n    var resizeBarDragging = Styles.resolve('resizer-bar-dragging');\n    var BarManager = function (wire, direction, hdirection) {\n      var mutation = BarMutation();\n      var resizing = Dragger.transform(mutation, {});\n      var hoverTable = Option.none();\n      var getResizer = function (element, type) {\n        return Option.from(get(element, type));\n      };\n      mutation.events.drag.bind(function (event) {\n        getResizer(event.target(), 'data-row').each(function (_dataRow) {\n          var currentRow = CellUtils.getInt(event.target(), 'top');\n          set$1(event.target(), 'top', currentRow + event.yDelta() + 'px');\n        });\n        getResizer(event.target(), 'data-column').each(function (_dataCol) {\n          var currentCol = CellUtils.getInt(event.target(), 'left');\n          set$1(event.target(), 'left', currentCol + event.xDelta() + 'px');\n        });\n      });\n      var getDelta = function (target, dir) {\n        var newX = CellUtils.getInt(target, dir);\n        var oldX = parseInt(get(target, 'data-initial-' + dir), 10);\n        return newX - oldX;\n      };\n      resizing.events.stop.bind(function () {\n        mutation.get().each(function (target) {\n          hoverTable.each(function (table) {\n            getResizer(target, 'data-row').each(function (row) {\n              var delta = getDelta(target, 'top');\n              remove(target, 'data-initial-top');\n              events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n            });\n            getResizer(target, 'data-column').each(function (column) {\n              var delta = getDelta(target, 'left');\n              remove(target, 'data-initial-left');\n              events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n            });\n            Bars.refresh(wire, table, hdirection, direction);\n          });\n        });\n      });\n      var handler = function (target, dir) {\n        events.trigger.startAdjust();\n        mutation.assign(target);\n        set(target, 'data-initial-' + dir, parseInt(get$1(target, dir), 10));\n        add$2(target, resizeBarDragging);\n        set$1(target, 'opacity', '0.2');\n        resizing.go(wire.parent());\n      };\n      var mousedown = bind$2(wire.parent(), 'mousedown', function (event) {\n        if (Bars.isRowBar(event.target())) {\n          handler(event.target(), 'top');\n        }\n        if (Bars.isColBar(event.target())) {\n          handler(event.target(), 'left');\n        }\n      });\n      var isRoot = function (e) {\n        return eq(e, wire.view());\n      };\n      var findClosestEditableTable = function (target) {\n        return closest$1(target, 'table', isRoot).filter(function (table) {\n          return findClosestContentEditable(table, isRoot).exists(isContentEditableTrue);\n        });\n      };\n      var mouseover = bind$2(wire.view(), 'mouseover', function (event) {\n        findClosestEditableTable(event.target()).fold(function () {\n          if (inBody(event.target())) {\n            Bars.destroy(wire);\n          }\n        }, function (table) {\n          hoverTable = Option.some(table);\n          Bars.refresh(wire, table, hdirection, direction);\n        });\n      });\n      var destroy = function () {\n        mousedown.unbind();\n        mouseover.unbind();\n        resizing.destroy();\n        Bars.destroy(wire);\n      };\n      var refresh = function (tbl) {\n        Bars.refresh(wire, tbl, hdirection, direction);\n      };\n      var events = Events.create({\n        adjustHeight: Event([\n          'table',\n          'delta',\n          'row'\n        ]),\n        adjustWidth: Event([\n          'table',\n          'delta',\n          'column'\n        ]),\n        startAdjust: Event([])\n      });\n      return {\n        destroy: destroy,\n        refresh: refresh,\n        on: resizing.on,\n        off: resizing.off,\n        hideBars: curry(Bars.hide, wire),\n        showBars: curry(Bars.show, wire),\n        events: events.registry\n      };\n    };\n\n    var create$2 = function (wire, vdirection) {\n      var hdirection = BarPositions.height;\n      var manager = BarManager(wire, vdirection, hdirection);\n      var events = Events.create({\n        beforeResize: Event(['table']),\n        afterResize: Event(['table']),\n        startDrag: Event([])\n      });\n      manager.events.adjustHeight.bind(function (event) {\n        events.trigger.beforeResize(event.table());\n        var delta = hdirection.delta(event.delta(), event.table());\n        Adjustments.adjustHeight(event.table(), delta, event.row(), hdirection);\n        events.trigger.afterResize(event.table());\n      });\n      manager.events.startAdjust.bind(function (event) {\n        events.trigger.startDrag();\n      });\n      manager.events.adjustWidth.bind(function (event) {\n        events.trigger.beforeResize(event.table());\n        var delta = vdirection.delta(event.delta(), event.table());\n        Adjustments.adjustWidth(event.table(), delta, event.column(), vdirection);\n        events.trigger.afterResize(event.table());\n      });\n      return {\n        on: manager.on,\n        off: manager.off,\n        hideBars: manager.hideBars,\n        showBars: manager.showBars,\n        destroy: manager.destroy,\n        events: events.registry\n      };\n    };\n    var TableResize = { create: create$2 };\n\n    var createContainer = function () {\n      var container = Element.fromTag('div');\n      setAll$1(container, {\n        position: 'static',\n        height: '0',\n        width: '0',\n        padding: '0',\n        margin: '0',\n        border: '0'\n      });\n      append(body(), container);\n      return container;\n    };\n    var get$8 = function (editor, container) {\n      return editor.inline ? ResizeWire.body(getBody$1(editor), createContainer()) : ResizeWire.only(Element.fromDom(editor.getDoc()));\n    };\n    var remove$6 = function (editor, wire) {\n      if (editor.inline) {\n        remove$2(wire.parent());\n      }\n    };\n    var TableWire = {\n      get: get$8,\n      remove: remove$6\n    };\n\n    var ResizeHandler = function (editor) {\n      var selectionRng = Option.none();\n      var resize = Option.none();\n      var wire = Option.none();\n      var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n      var startW, startRawW;\n      var isTable = function (elm) {\n        return elm.nodeName === 'TABLE';\n      };\n      var getRawWidth = function (elm) {\n        return editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n      };\n      var lazyResize = function () {\n        return resize;\n      };\n      var lazyWire = function () {\n        return wire.getOr(ResizeWire.only(Element.fromDom(editor.getBody())));\n      };\n      var destroy = function () {\n        resize.each(function (sz) {\n          sz.destroy();\n        });\n        wire.each(function (w) {\n          TableWire.remove(editor, w);\n        });\n      };\n      editor.on('init', function () {\n        var direction = TableDirection(Direction.directionAt);\n        var rawWire = TableWire.get(editor);\n        wire = Option.some(rawWire);\n        if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n          var sz = TableResize.create(rawWire, direction);\n          sz.on();\n          sz.events.startDrag.bind(function (event) {\n            selectionRng = Option.some(editor.selection.getRng());\n          });\n          sz.events.beforeResize.bind(function (event) {\n            var rawTable = event.table().dom();\n            fireObjectResizeStart(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n          });\n          sz.events.afterResize.bind(function (event) {\n            var table = event.table();\n            var rawTable = table.dom();\n            removeDataStyle(table);\n            selectionRng.each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n            });\n            fireObjectResized(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n            editor.undoManager.add();\n          });\n          resize = Option.some(sz);\n        }\n      });\n      editor.on('ObjectResizeStart', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          startW = e.width;\n          startRawW = getRawWidth(targetElm);\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = targetElm;\n          if (percentageBasedSizeRegex.test(startRawW)) {\n            var percentW = parseFloat(percentageBasedSizeRegex.exec(startRawW)[1]);\n            var targetPercentW = e.width * percentW / startW;\n            editor.dom.setStyle(table, 'width', targetPercentW + '%');\n          } else {\n            var newCellSizes_1 = [];\n            global$1.each(table.rows, function (row) {\n              global$1.each(row.cells, function (cell) {\n                var width = editor.dom.getStyle(cell, 'width', true);\n                newCellSizes_1.push({\n                  cell: cell,\n                  width: width\n                });\n              });\n            });\n            global$1.each(newCellSizes_1, function (newCellSize) {\n              editor.dom.setStyle(newCellSize.cell, 'width', newCellSize.width);\n              editor.dom.setAttrib(newCellSize.cell, 'width', null);\n            });\n          }\n        }\n      });\n      return {\n        lazyResize: lazyResize,\n        lazyWire: lazyWire,\n        destroy: destroy\n      };\n    };\n\n    var adt$1 = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    var none$1 = function (current) {\n      if (current === void 0) {\n        current = undefined;\n      }\n      return adt$1.none(current);\n    };\n    var CellLocation = __assign(__assign({}, adt$1), { none: none$1 });\n\n    var detect$4 = function (current, isRoot) {\n      return TableLookup.table(current, isRoot).bind(function (table) {\n        var all = TableLookup.cells(table);\n        var index = findIndex(all, function (x) {\n          return eq(current, x);\n        });\n        return index.map(function (ind) {\n          return {\n            index: constant(ind),\n            all: constant(all)\n          };\n        });\n      });\n    };\n    var next = function (current, isRoot) {\n      var detection = detect$4(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none(current);\n      }, function (info) {\n        return info.index() + 1 < info.all().length ? CellLocation.middle(current, info.all()[info.index() + 1]) : CellLocation.last(current);\n      });\n    };\n    var prev = function (current, isRoot) {\n      var detection = detect$4(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none();\n      }, function (info) {\n        return info.index() - 1 >= 0 ? CellLocation.middle(current, info.all()[info.index() - 1]) : CellLocation.first(current);\n      });\n    };\n    var CellNavigation = {\n      next: next,\n      prev: prev\n    };\n\n    var create$3 = Immutable('start', 'soffset', 'finish', 'foffset');\n    var SimRange = { create: create$3 };\n\n    var adt$2 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$1 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$2.before;\n    var on = adt$2.on;\n    var after$2 = adt$2.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$2,\n      cata: cata$1,\n      getStart: getStart\n    };\n\n    var adt$3 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$3.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$3.domRange;\n    var relative = adt$3.relative;\n    var exact = adt$3.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var Selection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var selectNodeContents = function (win, element) {\n      var rng = win.document.createRange();\n      selectNodeContentsUsing(rng, element);\n      return rng;\n    };\n    var selectNodeContentsUsing = function (rng, element) {\n      rng.selectNodeContents(element.dom());\n    };\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom());\n      }, function (e, o) {\n        rng.setStart(e.dom(), o);\n      }, function (e) {\n        rng.setStartAfter(e.dom());\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom());\n      }, function (e, o) {\n        rng.setEnd(e.dom(), o);\n      }, function (e) {\n        rng.setEndAfter(e.dom());\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: constant(rect.left),\n        top: constant(rect.top),\n        right: constant(rect.right),\n        bottom: constant(rect.bottom),\n        width: constant(rect.width),\n        height: constant(rect.height)\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Option.some(rect).map(toRect) : Option.none();\n    };\n\n    var adt$4 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(Element.fromDom(range.startContainer), range.startOffset, Element.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Option.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Option.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Option.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$4.rtl(Element.fromDom(rev.endContainer), rev.endOffset, Element.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$4.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$4.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom(), soffset);\n          rng.setEnd(finish.dom(), foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom(), foffset);\n          rng.setEnd(start.dom(), soffset);\n          return rng;\n        }\n      });\n    };\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) {\n        return 0;\n      } else if (x === maxX) {\n        return length - 1;\n      }\n      var xDelta = maxX;\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n      return 0;\n    };\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (o) {\n        var r = doc.dom().createRange();\n        r.setStart(textnode.dom(), o);\n        r.collapse(true);\n        return r;\n      };\n      var rectForOffset = function (o) {\n        var r = rangeForOffset(o);\n        return r.getBoundingClientRect();\n      };\n      var length = get$2(textnode).length;\n      var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return inRect(rect, x, y) ? Option.some(rect) : Option.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      var nodes = children(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom());\n        return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Option.none();\n      });\n    };\n    var locateNode = function (doc, node, x, y) {\n      return isText(node) ? locate(doc, node, x, y) : searchInChildren(doc, node, x, y);\n    };\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom().createRange();\n      r.selectNode(target.dom());\n      r.collapse(collapseDirection);\n      return r;\n    };\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom().createRange();\n      cursorRange.selectNode(node.dom());\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom().getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Option.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n    var search = function (doc, node, x) {\n      var f = children(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretPositionFromPoint(x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) {\n          return Option.none();\n        }\n        var r = doc.dom().createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Option.some(r);\n      });\n    };\n    var caretRangeFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretRangeFromPoint(x, y));\n    };\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locate$1(doc, node, boundedX, boundedY);\n    };\n    var searchFromPoint = function (doc, x, y) {\n      return Element.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return search(doc, elem, x);\n        };\n        return children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n    var availableSearch = document.caretPositionFromPoint ? caretPositionFromPoint : document.caretRangeFromPoint ? caretRangeFromPoint : searchFromPoint;\n    var fromPoint$1 = function (win, x, y) {\n      var doc = Element.fromDom(win.document);\n      return availableSearch(doc, x, y).map(function (rng) {\n        return SimRange.create(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset);\n      });\n    };\n\n    var beforeSpecial = function (element, offset) {\n      var name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    var preprocessRelative = function (startSitu, finishSitu) {\n      var start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      var finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return Selection.relative(start, finish);\n    };\n    var preprocessExact = function (start, soffset, finish, foffset) {\n      var startSitu = beforeSpecial(start, soffset);\n      var finishSitu = beforeSpecial(finish, foffset);\n      return Selection.relative(startSitu, finishSitu);\n    };\n    var preprocess = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          var start = Element.fromDom(rng.startContainer);\n          var finish = Element.fromDom(rng.endContainer);\n          return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n        },\n        relative: preprocessRelative,\n        exact: preprocessExact\n      });\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom().createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var after$3 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var doSetNativeRange = function (win, rng) {\n      Option.from(win.getSelection()).each(function (selection) {\n        selection.removeAllRanges();\n        selection.addRange(rng);\n      });\n    };\n    var doSetRange = function (win, start, soffset, finish, foffset) {\n      var rng = exactToNative(win, start, soffset, finish, foffset);\n      doSetNativeRange(win, rng);\n    };\n    var setLegacyRtlRange = function (win, selection, start, soffset, finish, foffset) {\n      selection.collapse(start.dom(), soffset);\n      selection.extend(finish.dom(), foffset);\n    };\n    var setRangeFromRelative = function (win, relative) {\n      return diagnose(win, relative).match({\n        ltr: function (start, soffset, finish, foffset) {\n          doSetRange(win, start, soffset, finish, foffset);\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var selection = win.getSelection();\n          if (selection.setBaseAndExtent) {\n            selection.setBaseAndExtent(start.dom(), soffset, finish.dom(), foffset);\n          } else if (selection.extend) {\n            try {\n              setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n            } catch (e) {\n              doSetRange(win, finish, foffset, start, soffset);\n            }\n          } else {\n            doSetRange(win, finish, foffset, start, soffset);\n          }\n        }\n      });\n    };\n    var setExact = function (win, start, soffset, finish, foffset) {\n      var relative = preprocessExact(start, soffset, finish, foffset);\n      setRangeFromRelative(win, relative);\n    };\n    var setRelative = function (win, startSitu, finishSitu) {\n      var relative = preprocessRelative(startSitu, finishSitu);\n      setRangeFromRelative(win, relative);\n    };\n    var toNative = function (selection) {\n      var win = Selection.getWin(selection).dom();\n      var getDomRange = function (start, soffset, finish, foffset) {\n        return exactToNative(win, start, soffset, finish, foffset);\n      };\n      var filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Option.some(SimRange.create(Element.fromDom(firstRng.startContainer), firstRng.startOffset, Element.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Option.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      var anchor = Element.fromDom(selection.anchorNode);\n      var focus = Element.fromDom(selection.focusNode);\n      return after$3(anchor, selection.anchorOffset, focus, selection.focusOffset) ? Option.some(SimRange.create(anchor, selection.anchorOffset, focus, selection.focusOffset)) : readRange(selection);\n    };\n    var setToElement = function (win, element) {\n      var rng = selectNodeContents(win, element);\n      doSetNativeRange(win, rng);\n    };\n    var getExact = function (win) {\n      return Option.from(win.getSelection()).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var get$9 = function (win) {\n      return getExact(win).map(function (range) {\n        return Selection.exact(range.start(), range.soffset(), range.finish(), range.foffset());\n      });\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n    var getAtPoint = function (win, x, y) {\n      return fromPoint$1(win, x, y);\n    };\n    var clear = function (win) {\n      var selection = win.getSelection();\n      selection.removeAllRanges();\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var forward = function (editor, isRoot, cell, lazyWire) {\n      return go(editor, isRoot, CellNavigation.next(cell), lazyWire);\n    };\n    var backward = function (editor, isRoot, cell, lazyWire) {\n      return go(editor, isRoot, CellNavigation.prev(cell), lazyWire);\n    };\n    var getCellFirstCursorPosition = function (editor, cell) {\n      var selection = Selection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    var getNewRowCursorPosition = function (editor, table) {\n      var rows = descendants$1(table, 'tr');\n      return last(rows).bind(function (last) {\n        return descendant$1(last, 'td,th').map(function (first) {\n          return getCellFirstCursorPosition(editor, first);\n        });\n      });\n    };\n    var go = function (editor, isRoot, cell, actions, lazyWire) {\n      return cell.fold(Option.none, Option.none, function (current, next) {\n        return first(next).map(function (cell) {\n          return getCellFirstCursorPosition(editor, cell);\n        });\n      }, function (current) {\n        return TableLookup.table(current, isRoot).bind(function (table) {\n          var targets = TableTargets.noMenu(current);\n          editor.undoManager.transact(function () {\n            actions.insertRowsAfter(table, targets);\n          });\n          return getNewRowCursorPosition(editor, table);\n        });\n      });\n    };\n    var rootElements = [\n      'table',\n      'li',\n      'dl'\n    ];\n    var handle$1 = function (event, editor, actions, lazyWire) {\n      if (event.keyCode === global$3.TAB) {\n        var body_1 = getBody$1(editor);\n        var isRoot_1 = function (element) {\n          var name$1 = name(element);\n          return eq(element, body_1) || contains(rootElements, name$1);\n        };\n        var rng = editor.selection.getRng();\n        if (rng.collapsed) {\n          var start = Element.fromDom(rng.startContainer);\n          TableLookup.cell(start, isRoot_1).each(function (cell) {\n            event.preventDefault();\n            var navigation = event.shiftKey ? backward : forward;\n            var rng = navigation(editor, isRoot_1, cell, actions, lazyWire);\n            rng.each(function (range) {\n              editor.selection.setRng(range);\n            });\n          });\n        }\n      }\n    };\n    var TabContext = { handle: handle$1 };\n\n    var create$4 = Immutable('selection', 'kill');\n    var Response = { create: create$4 };\n\n    var create$5 = function (start, soffset, finish, foffset) {\n      return {\n        start: constant(Situ.on(start, soffset)),\n        finish: constant(Situ.on(finish, foffset))\n      };\n    };\n    var Situs = { create: create$5 };\n\n    var convertToRange = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return SimRange.create(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset);\n    };\n    var makeSitus = Situs.create;\n    var Util = {\n      convertToRange: convertToRange,\n      makeSitus: makeSitus\n    };\n\n    var sync = function (container, isRoot, start, soffset, finish, foffset, selectRange) {\n      if (!(eq(start, finish) && soffset === foffset)) {\n        return closest$1(start, 'td,th', isRoot).bind(function (s) {\n          return closest$1(finish, 'td,th', isRoot).bind(function (f) {\n            return detect$5(container, isRoot, s, f, selectRange);\n          });\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var detect$5 = function (container, isRoot, start, finish, selectRange) {\n      if (!eq(start, finish)) {\n        return CellSelection.identify(start, finish, isRoot).bind(function (cellSel) {\n          var boxes = cellSel.boxes().getOr([]);\n          if (boxes.length > 0) {\n            selectRange(container, boxes, cellSel.start(), cellSel.finish());\n            return Option.some(Response.create(Option.some(Util.makeSitus(start, 0, start, getEnd(start))), true));\n          } else {\n            return Option.none();\n          }\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var update = function (rows, columns, container, selected, annotations) {\n      var updateSelection = function (newSels) {\n        annotations.clear(container);\n        annotations.selectRange(container, newSels.boxes(), newSels.start(), newSels.finish());\n        return newSels.boxes();\n      };\n      return CellSelection.shiftSelection(selected, rows, columns, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(updateSelection);\n    };\n    var KeySelection = {\n      sync: sync,\n      detect: detect$5,\n      update: update\n    };\n\n    var traverse = Immutable('item', 'mode');\n    var backtrack = function (universe, item, _direction, transition) {\n      if (transition === void 0) {\n        transition = sidestep;\n      }\n      return universe.property().parent(item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var sidestep = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      return direction.sibling(universe, item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var advance = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      var children = universe.property().children(item);\n      var result = direction.first(children);\n      return result.map(function (r) {\n        return traverse(r, transition);\n      });\n    };\n    var successors = [\n      {\n        current: backtrack,\n        next: sidestep,\n        fallback: Option.none()\n      },\n      {\n        current: sidestep,\n        next: advance,\n        fallback: Option.some(backtrack)\n      },\n      {\n        current: advance,\n        next: advance,\n        fallback: Option.some(sidestep)\n      }\n    ];\n    var go$1 = function (universe, item, mode, direction, rules) {\n      if (rules === void 0) {\n        rules = successors;\n      }\n      var ruleOpt = find(rules, function (succ) {\n        return succ.current === mode;\n      });\n      return ruleOpt.bind(function (rule) {\n        return rule.current(universe, item, direction, rule.next).orThunk(function () {\n          return rule.fallback.bind(function (fb) {\n            return go$1(universe, item, fb, direction);\n          });\n        });\n      });\n    };\n\n    var left = function () {\n      var sibling = function (universe, item) {\n        return universe.query().prevSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Option.some(children[children.length - 1]) : Option.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var right = function () {\n      var sibling = function (universe, item) {\n        return universe.query().nextSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Option.some(children[0]) : Option.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var Walkers = {\n      left: left,\n      right: right\n    };\n\n    var hone = function (universe, item, predicate, mode, direction, isRoot) {\n      var next = go$1(universe, item, mode, direction);\n      return next.bind(function (n) {\n        if (isRoot(n.item())) {\n          return Option.none();\n        } else {\n          return predicate(n.item()) ? Option.some(n.item()) : hone(universe, n.item(), predicate, n.mode(), direction, isRoot);\n        }\n      });\n    };\n    var left$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.left(), isRoot);\n    };\n    var right$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.right(), isRoot);\n    };\n\n    var isLeaf = function (universe) {\n      return function (element) {\n        return universe.property().children(element).length === 0;\n      };\n    };\n    var before$3 = function (universe, item, isRoot) {\n      return seekLeft(universe, item, isLeaf(universe), isRoot);\n    };\n    var after$4 = function (universe, item, isRoot) {\n      return seekRight(universe, item, isLeaf(universe), isRoot);\n    };\n    var seekLeft = left$1;\n    var seekRight = right$1;\n\n    var universe$2 = DomUniverse();\n    var before$4 = function (element, isRoot) {\n      return before$3(universe$2, element, isRoot);\n    };\n    var after$5 = function (element, isRoot) {\n      return after$4(universe$2, element, isRoot);\n    };\n    var seekLeft$1 = function (element, predicate, isRoot) {\n      return seekLeft(universe$2, element, predicate, isRoot);\n    };\n    var seekRight$1 = function (element, predicate, isRoot) {\n      return seekRight(universe$2, element, predicate, isRoot);\n    };\n\n    var ancestor$2 = function (scope, predicate, isRoot) {\n      return ancestor(scope, predicate, isRoot).isSome();\n    };\n\n    var point = Immutable('element', 'offset');\n    var delta = Immutable('element', 'deltaOffset');\n    var range$2 = Immutable('element', 'start', 'finish');\n    var points = Immutable('begin', 'end');\n    var text = Immutable('element', 'text');\n\n    var adt$5 = Adt.generate([\n      { none: ['message'] },\n      { success: [] },\n      { failedUp: ['cell'] },\n      { failedDown: ['cell'] }\n    ]);\n    var isOverlapping = function (bridge, before, after) {\n      var beforeBounds = bridge.getRect(before);\n      var afterBounds = bridge.getRect(after);\n      return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n    };\n    var isRow = function (elem) {\n      return closest$1(elem, 'tr');\n    };\n    var verify = function (bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n      return closest$1(after, 'td,th', isRoot).bind(function (afterCell) {\n        return closest$1(before, 'td,th', isRoot).map(function (beforeCell) {\n          if (!eq(afterCell, beforeCell)) {\n            return DomParent.sharedOne(isRow, [\n              afterCell,\n              beforeCell\n            ]).fold(function () {\n              return isOverlapping(bridge, beforeCell, afterCell) ? adt$5.success() : failure(beforeCell);\n            }, function (_sharedRow) {\n              return failure(beforeCell);\n            });\n          } else {\n            return eq(after, afterCell) && getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$5.none('in same cell');\n          }\n        });\n      }).getOr(adt$5.none('default'));\n    };\n    var cata$2 = function (subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n      return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n    };\n    var BeforeAfter = __assign(__assign({}, adt$5), {\n      verify: verify,\n      cata: cata$2\n    });\n\n    var inAncestor = Immutable('ancestor', 'descendants', 'element', 'index');\n    var inParent = Immutable('parent', 'children', 'element', 'index');\n    var indexInParent = function (element) {\n      return parent(element).bind(function (parent) {\n        var children$1 = children(parent);\n        return indexOf(children$1, element).map(function (index) {\n          return inParent(parent, children$1, element, index);\n        });\n      });\n    };\n    var indexOf = function (elements, element) {\n      return findIndex(elements, curry(eq, element));\n    };\n\n    var isBr = function (elem) {\n      return name(elem) === 'br';\n    };\n    var gatherer = function (cand, gather, isRoot) {\n      return gather(cand, isRoot).bind(function (target) {\n        return isText(target) && get$2(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Option.some(target);\n      });\n    };\n    var handleBr = function (isRoot, element, direction) {\n      return direction.traverse(element).orThunk(function () {\n        return gatherer(element, direction.gather, isRoot);\n      }).map(direction.relative);\n    };\n    var findBr = function (element, offset) {\n      return child(element, offset).filter(isBr).orThunk(function () {\n        return child(element, offset - 1).filter(isBr);\n      });\n    };\n    var handleParent = function (isRoot, element, offset, direction) {\n      return findBr(element, offset).bind(function (br) {\n        return direction.traverse(br).fold(function () {\n          return gatherer(br, direction.gather, isRoot).map(direction.relative);\n        }, function (adjacent) {\n          return indexInParent(adjacent).map(function (info) {\n            return Situ.on(info.parent(), info.index());\n          });\n        });\n      });\n    };\n    var tryBr = function (isRoot, element, offset, direction) {\n      var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n      return target.map(function (tgt) {\n        return {\n          start: constant(tgt),\n          finish: constant(tgt)\n        };\n      });\n    };\n    var process = function (analysis) {\n      return BeforeAfter.cata(analysis, function (message) {\n        return Option.none();\n      }, function () {\n        return Option.none();\n      }, function (cell) {\n        return Option.some(point(cell, 0));\n      }, function (cell) {\n        return Option.some(point(cell, getEnd(cell)));\n      });\n    };\n    var BrTags = {\n      tryBr: tryBr,\n      process: process\n    };\n\n    var nu$3 = MixedBag([\n      'left',\n      'top',\n      'right',\n      'bottom'\n    ], []);\n    var moveDown = function (caret, amount) {\n      return nu$3({\n        left: caret.left(),\n        top: caret.top() + amount,\n        right: caret.right(),\n        bottom: caret.bottom() + amount\n      });\n    };\n    var moveUp = function (caret, amount) {\n      return nu$3({\n        left: caret.left(),\n        top: caret.top() - amount,\n        right: caret.right(),\n        bottom: caret.bottom() - amount\n      });\n    };\n    var moveBottomTo = function (caret, bottom) {\n      var height = caret.bottom() - caret.top();\n      return nu$3({\n        left: caret.left(),\n        top: bottom - height,\n        right: caret.right(),\n        bottom: bottom\n      });\n    };\n    var moveTopTo = function (caret, top) {\n      var height = caret.bottom() - caret.top();\n      return nu$3({\n        left: caret.left(),\n        top: top,\n        right: caret.right(),\n        bottom: top + height\n      });\n    };\n    var translate = function (caret, xDelta, yDelta) {\n      return nu$3({\n        left: caret.left() + xDelta,\n        top: caret.top() + yDelta,\n        right: caret.right() + xDelta,\n        bottom: caret.bottom() + yDelta\n      });\n    };\n    var getTop$1 = function (caret) {\n      return caret.top();\n    };\n    var getBottom = function (caret) {\n      return caret.bottom();\n    };\n    var toString = function (caret) {\n      return '(' + caret.left() + ', ' + caret.top() + ') -> (' + caret.right() + ', ' + caret.bottom() + ')';\n    };\n    var Carets = {\n      nu: nu$3,\n      moveUp: moveUp,\n      moveDown: moveDown,\n      moveBottomTo: moveBottomTo,\n      moveTopTo: moveTopTo,\n      getTop: getTop$1,\n      getBottom: getBottom,\n      translate: translate,\n      toString: toString\n    };\n\n    var getPartialBox = function (bridge, element, offset) {\n      if (offset >= 0 && offset < getEnd(element)) {\n        return bridge.getRangedRect(element, offset, element, offset + 1);\n      } else if (offset > 0) {\n        return bridge.getRangedRect(element, offset - 1, element, offset);\n      }\n      return Option.none();\n    };\n    var toCaret = function (rect) {\n      return Carets.nu({\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n      });\n    };\n    var getElemBox = function (bridge, element) {\n      return Option.some(bridge.getRect(element));\n    };\n    var getBoxAt = function (bridge, element, offset) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return getPartialBox(bridge, element, offset).map(toCaret);\n      } else {\n        return Option.none();\n      }\n    };\n    var getEntireBox = function (bridge, element) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return bridge.getRangedRect(element, 0, element, getEnd(element)).map(toCaret);\n      } else {\n        return Option.none();\n      }\n    };\n    var Rectangles = {\n      getBoxAt: getBoxAt,\n      getEntireBox: getEntireBox\n    };\n\n    var JUMP_SIZE = 5;\n    var NUM_RETRIES = 100;\n    var adt$6 = Adt.generate([\n      { none: [] },\n      { retry: ['caret'] }\n    ]);\n    var isOutside = function (caret, box) {\n      return caret.left() < box.left() || Math.abs(box.right() - caret.left()) < 1 || caret.left() > box.right();\n    };\n    var inOutsideBlock = function (bridge, element, caret) {\n      return closest(element, DomStructure.isBlock).fold(constant(false), function (cell) {\n        return Rectangles.getEntireBox(bridge, cell).exists(function (box) {\n          return isOutside(caret, box);\n        });\n      });\n    };\n    var adjustDown = function (bridge, element, guessBox, original, caret) {\n      var lowerCaret = Carets.moveDown(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.bottom() - original.bottom()) < 1) {\n        return adt$6.retry(lowerCaret);\n      } else if (guessBox.top() > caret.bottom()) {\n        return adt$6.retry(lowerCaret);\n      } else if (guessBox.top() === caret.bottom()) {\n        return adt$6.retry(Carets.moveDown(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$6.retry(Carets.translate(lowerCaret, JUMP_SIZE, 0)) : adt$6.none();\n      }\n    };\n    var adjustUp = function (bridge, element, guessBox, original, caret) {\n      var higherCaret = Carets.moveUp(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.top() - original.top()) < 1) {\n        return adt$6.retry(higherCaret);\n      } else if (guessBox.bottom() < caret.top()) {\n        return adt$6.retry(higherCaret);\n      } else if (guessBox.bottom() === caret.top()) {\n        return adt$6.retry(Carets.moveUp(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$6.retry(Carets.translate(higherCaret, JUMP_SIZE, 0)) : adt$6.none();\n      }\n    };\n    var upMovement = {\n      point: Carets.getTop,\n      adjuster: adjustUp,\n      move: Carets.moveUp,\n      gather: before$4\n    };\n    var downMovement = {\n      point: Carets.getBottom,\n      adjuster: adjustDown,\n      move: Carets.moveDown,\n      gather: after$5\n    };\n    var isAtTable = function (bridge, x, y) {\n      return bridge.elementFromPoint(x, y).filter(function (elm) {\n        return name(elm) === 'table';\n      }).isSome();\n    };\n    var adjustForTable = function (bridge, movement, original, caret, numRetries) {\n      return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n    };\n    var adjustTil = function (bridge, movement, original, caret, numRetries) {\n      if (numRetries === 0) {\n        return Option.some(caret);\n      }\n      if (isAtTable(bridge, caret.left(), movement.point(caret))) {\n        return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n      }\n      return bridge.situsFromPoint(caret.left(), movement.point(caret)).bind(function (guess) {\n        return guess.start().fold(Option.none, function (element) {\n          return Rectangles.getEntireBox(bridge, element).bind(function (guessBox) {\n            return movement.adjuster(bridge, element, guessBox, original, caret).fold(Option.none, function (newCaret) {\n              return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n            });\n          }).orThunk(function () {\n            return Option.some(caret);\n          });\n        }, Option.none);\n      });\n    };\n    var ieTryDown = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left(), caret.bottom() + JUMP_SIZE);\n    };\n    var ieTryUp = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left(), caret.top() - JUMP_SIZE);\n    };\n    var checkScroll = function (movement, adjusted, bridge) {\n      if (movement.point(adjusted) > bridge.getInnerHeight()) {\n        return Option.some(movement.point(adjusted) - bridge.getInnerHeight());\n      } else if (movement.point(adjusted) < 0) {\n        return Option.some(-movement.point(adjusted));\n      } else {\n        return Option.none();\n      }\n    };\n    var retry = function (movement, bridge, caret) {\n      var moved = movement.move(caret, JUMP_SIZE);\n      var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n      return checkScroll(movement, adjusted, bridge).fold(function () {\n        return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted));\n      }, function (delta) {\n        bridge.scrollBy(0, delta);\n        return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted) - delta);\n      });\n    };\n    var Retries = {\n      tryUp: curry(retry, upMovement),\n      tryDown: curry(retry, downMovement),\n      ieTryUp: ieTryUp,\n      ieTryDown: ieTryDown,\n      getJumpSize: constant(JUMP_SIZE)\n    };\n\n    var MAX_RETRIES = 20;\n    var platform$1 = PlatformDetection$1.detect();\n    var findSpot = function (bridge, isRoot, direction) {\n      return bridge.getSelection().bind(function (sel) {\n        return BrTags.tryBr(isRoot, sel.finish(), sel.foffset(), direction).fold(function () {\n          return Option.some(point(sel.finish(), sel.foffset()));\n        }, function (brNeighbour) {\n          var range = bridge.fromSitus(brNeighbour);\n          var analysis = BeforeAfter.verify(bridge, sel.finish(), sel.foffset(), range.finish(), range.foffset(), direction.failure, isRoot);\n          return BrTags.process(analysis);\n        });\n      });\n    };\n    var scan = function (bridge, isRoot, element, offset, direction, numRetries) {\n      if (numRetries === 0) {\n        return Option.none();\n      }\n      return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n        var range = bridge.fromSitus(situs);\n        var analysis = BeforeAfter.verify(bridge, element, offset, range.finish(), range.foffset(), direction.failure, isRoot);\n        return BeforeAfter.cata(analysis, function () {\n          return Option.none();\n        }, function () {\n          return Option.some(situs);\n        }, function (cell) {\n          if (eq(element, cell) && offset === 0) {\n            return tryAgain(bridge, element, offset, Carets.moveUp, direction);\n          } else {\n            return scan(bridge, isRoot, cell, 0, direction, numRetries - 1);\n          }\n        }, function (cell) {\n          if (eq(element, cell) && offset === getEnd(cell)) {\n            return tryAgain(bridge, element, offset, Carets.moveDown, direction);\n          } else {\n            return scan(bridge, isRoot, cell, getEnd(cell), direction, numRetries - 1);\n          }\n        });\n      });\n    };\n    var tryAgain = function (bridge, element, offset, move, direction) {\n      return Rectangles.getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, move(box, Retries.getJumpSize()));\n      });\n    };\n    var tryAt = function (bridge, direction, box) {\n      if (platform$1.browser.isChrome() || platform$1.browser.isSafari() || platform$1.browser.isFirefox() || platform$1.browser.isEdge()) {\n        return direction.otherRetry(bridge, box);\n      } else if (platform$1.browser.isIE()) {\n        return direction.ieRetry(bridge, box);\n      } else {\n        return Option.none();\n      }\n    };\n    var tryCursor = function (bridge, isRoot, element, offset, direction) {\n      return Rectangles.getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, box);\n      });\n    };\n    var handle$2 = function (bridge, isRoot, direction) {\n      return findSpot(bridge, isRoot, direction).bind(function (spot) {\n        return scan(bridge, isRoot, spot.element(), spot.offset(), direction, MAX_RETRIES).map(bridge.fromSitus);\n      });\n    };\n    var TableKeys = { handle: handle$2 };\n\n    var detection = PlatformDetection$1.detect();\n    var inSameTable = function (elem, table) {\n      return ancestor$2(elem, function (e) {\n        return parent(e).exists(function (p) {\n          return eq(p, table);\n        });\n      });\n    };\n    var simulate = function (bridge, isRoot, direction, initial, anchor) {\n      return closest$1(initial, 'td,th', isRoot).bind(function (start) {\n        return closest$1(start, 'table', isRoot).bind(function (table) {\n          if (!inSameTable(anchor, table)) {\n            return Option.none();\n          }\n          return TableKeys.handle(bridge, isRoot, direction).bind(function (range) {\n            return closest$1(range.finish(), 'td,th', isRoot).map(function (finish) {\n              return {\n                start: constant(start),\n                finish: constant(finish),\n                range: constant(range)\n              };\n            });\n          });\n        });\n      });\n    };\n    var navigate = function (bridge, isRoot, direction, initial, anchor, precheck) {\n      if (detection.browser.isIE()) {\n        return Option.none();\n      } else {\n        return precheck(initial, isRoot).orThunk(function () {\n          return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n            var range = info.range();\n            return Response.create(Option.some(Util.makeSitus(range.start(), range.soffset(), range.finish(), range.foffset())), true);\n          });\n        });\n      }\n    };\n    var firstUpCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq(startRow, rows[0])) {\n            return seekLeft$1(table, function (element) {\n              return last$1(element).isSome();\n            }, isRoot).map(function (last) {\n              var lastOffset = getEnd(last);\n              return Response.create(Option.some(Util.makeSitus(last, lastOffset, last, lastOffset)), true);\n            });\n          } else {\n            return Option.none();\n          }\n        });\n      });\n    };\n    var lastDownCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq(startRow, rows[rows.length - 1])) {\n            return seekRight$1(table, function (element) {\n              return first(element).isSome();\n            }, isRoot).map(function (first) {\n              return Response.create(Option.some(Util.makeSitus(first, 0, first, 0)), true);\n            });\n          } else {\n            return Option.none();\n          }\n        });\n      });\n    };\n    var select = function (bridge, container, isRoot, direction, initial, anchor, selectRange) {\n      return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n        return KeySelection.detect(container, isRoot, info.start(), info.finish(), selectRange);\n      });\n    };\n    var VerticalMovement = {\n      navigate: navigate,\n      select: select,\n      firstUpCheck: firstUpCheck,\n      lastDownCheck: lastDownCheck\n    };\n\n    var findCell = function (target, isRoot) {\n      return closest$1(target, 'td,th', isRoot);\n    };\n    function MouseSelection (bridge, container, isRoot, annotations) {\n      var cursor = Option.none();\n      var clearState = function () {\n        cursor = Option.none();\n      };\n      var mousedown = function (event) {\n        annotations.clear(container);\n        cursor = findCell(event.target(), isRoot);\n      };\n      var mouseover = function (event) {\n        cursor.each(function (start) {\n          annotations.clear(container);\n          findCell(event.target(), isRoot).each(function (finish) {\n            CellSelection.identify(start, finish, isRoot).each(function (cellSel) {\n              var boxes = cellSel.boxes().getOr([]);\n              if (boxes.length > 1 || boxes.length === 1 && !eq(start, finish)) {\n                annotations.selectRange(container, boxes, cellSel.start(), cellSel.finish());\n                bridge.selectContents(finish);\n              }\n            });\n          });\n        });\n      };\n      var mouseup = function (_event) {\n        cursor.each(clearState);\n      };\n      return {\n        mousedown: mousedown,\n        mouseover: mouseover,\n        mouseup: mouseup\n      };\n    }\n\n    var down = {\n      traverse: nextSibling,\n      gather: after$5,\n      relative: Situ.before,\n      otherRetry: Retries.tryDown,\n      ieRetry: Retries.ieTryDown,\n      failure: BeforeAfter.failedDown\n    };\n    var up = {\n      traverse: prevSibling,\n      gather: before$4,\n      relative: Situ.before,\n      otherRetry: Retries.tryUp,\n      ieRetry: Retries.ieTryUp,\n      failure: BeforeAfter.failedUp\n    };\n    var KeyDirection = {\n      down: down,\n      up: up\n    };\n\n    var isKey = function (key) {\n      return function (keycode) {\n        return keycode === key;\n      };\n    };\n    var isUp = isKey(38);\n    var isDown = isKey(40);\n    var isNavigation = function (keycode) {\n      return keycode >= 37 && keycode <= 40;\n    };\n    var SelectionKeys = {\n      ltr: {\n        isBackward: isKey(37),\n        isForward: isKey(39)\n      },\n      rtl: {\n        isBackward: isKey(39),\n        isForward: isKey(37)\n      },\n      isUp: isUp,\n      isDown: isDown,\n      isNavigation: isNavigation\n    };\n\n    var toRaw = function (sr) {\n      return {\n        left: sr.left(),\n        top: sr.top(),\n        right: sr.right(),\n        bottom: sr.bottom(),\n        width: sr.width(),\n        height: sr.height()\n      };\n    };\n    var Rect = { toRaw: toRaw };\n\n    var isSafari = PlatformDetection$1.detect().browser.isSafari();\n    var get$a = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return Position(x, y);\n    };\n    var by = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var win = doc.defaultView;\n      win.scrollBy(x, y);\n    };\n\n    var WindowBridge = function (win) {\n      var elementFromPoint = function (x, y) {\n        return Element.fromPoint(Element.fromDom(win.document), x, y);\n      };\n      var getRect = function (element) {\n        return element.dom().getBoundingClientRect();\n      };\n      var getRangedRect = function (start, soffset, finish, foffset) {\n        var sel = Selection.exact(start, soffset, finish, foffset);\n        return getFirstRect$1(win, sel).map(Rect.toRaw);\n      };\n      var getSelection = function () {\n        return get$9(win).map(function (exactAdt) {\n          return Util.convertToRange(win, exactAdt);\n        });\n      };\n      var fromSitus = function (situs) {\n        var relative = Selection.relative(situs.start(), situs.finish());\n        return Util.convertToRange(win, relative);\n      };\n      var situsFromPoint = function (x, y) {\n        return getAtPoint(win, x, y).map(function (exact) {\n          return Situs.create(exact.start(), exact.soffset(), exact.finish(), exact.foffset());\n        });\n      };\n      var clearSelection = function () {\n        clear(win);\n      };\n      var selectContents = function (element) {\n        setToElement(win, element);\n      };\n      var setSelection = function (sel) {\n        setExact(win, sel.start(), sel.soffset(), sel.finish(), sel.foffset());\n      };\n      var setRelativeSelection = function (start, finish) {\n        setRelative(win, start, finish);\n      };\n      var getInnerHeight = function () {\n        return win.innerHeight;\n      };\n      var getScrollY = function () {\n        var pos = get$a(Element.fromDom(win.document));\n        return pos.top();\n      };\n      var scrollBy = function (x, y) {\n        by(x, y, Element.fromDom(win.document));\n      };\n      return {\n        elementFromPoint: elementFromPoint,\n        getRect: getRect,\n        getRangedRect: getRangedRect,\n        getSelection: getSelection,\n        fromSitus: fromSitus,\n        situsFromPoint: situsFromPoint,\n        clearSelection: clearSelection,\n        setSelection: setSelection,\n        setRelativeSelection: setRelativeSelection,\n        selectContents: selectContents,\n        getInnerHeight: getInnerHeight,\n        getScrollY: getScrollY,\n        scrollBy: scrollBy\n      };\n    };\n\n    var rc = Immutable('rows', 'cols');\n    var mouse = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var handlers = MouseSelection(bridge, container, isRoot, annotations);\n      return {\n        mousedown: handlers.mousedown,\n        mouseover: handlers.mouseover,\n        mouseup: handlers.mouseup\n      };\n    };\n    var keyboard = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var clearToNavigate = function () {\n        annotations.clear(container);\n        return Option.none();\n      };\n      var keydown = function (event, start, soffset, finish, foffset, direction) {\n        var realEvent = event.raw();\n        var keycode = realEvent.which;\n        var shiftKey = realEvent.shiftKey === true;\n        var handler = CellSelection.retrieve(container, annotations.selectedSelector()).fold(function () {\n          if (SelectionKeys.isDown(keycode) && shiftKey) {\n            return curry(VerticalMovement.select, bridge, container, isRoot, KeyDirection.down, finish, start, annotations.selectRange);\n          } else if (SelectionKeys.isUp(keycode) && shiftKey) {\n            return curry(VerticalMovement.select, bridge, container, isRoot, KeyDirection.up, finish, start, annotations.selectRange);\n          } else if (SelectionKeys.isDown(keycode)) {\n            return curry(VerticalMovement.navigate, bridge, isRoot, KeyDirection.down, finish, start, VerticalMovement.lastDownCheck);\n          } else if (SelectionKeys.isUp(keycode)) {\n            return curry(VerticalMovement.navigate, bridge, isRoot, KeyDirection.up, finish, start, VerticalMovement.firstUpCheck);\n          } else {\n            return Option.none;\n          }\n        }, function (selected) {\n          var update = function (attempts) {\n            return function () {\n              var navigation = findMap(attempts, function (delta) {\n                return KeySelection.update(delta.rows(), delta.cols(), container, selected, annotations);\n              });\n              return navigation.fold(function () {\n                return CellSelection.getEdges(container, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(function (edges) {\n                  var relative = SelectionKeys.isDown(keycode) || direction.isForward(keycode) ? Situ.after : Situ.before;\n                  bridge.setRelativeSelection(Situ.on(edges.first(), 0), relative(edges.table()));\n                  annotations.clear(container);\n                  return Response.create(Option.none(), true);\n                });\n              }, function (_) {\n                return Option.some(Response.create(Option.none(), true));\n              });\n            };\n          };\n          if (SelectionKeys.isDown(keycode) && shiftKey) {\n            return update([rc(+1, 0)]);\n          } else if (SelectionKeys.isUp(keycode) && shiftKey) {\n            return update([rc(-1, 0)]);\n          } else if (direction.isBackward(keycode) && shiftKey) {\n            return update([\n              rc(0, -1),\n              rc(-1, 0)\n            ]);\n          } else if (direction.isForward(keycode) && shiftKey) {\n            return update([\n              rc(0, +1),\n              rc(+1, 0)\n            ]);\n          } else if (SelectionKeys.isNavigation(keycode) && shiftKey === false) {\n            return clearToNavigate;\n          } else {\n            return Option.none;\n          }\n        });\n        return handler();\n      };\n      var keyup = function (event, start, soffset, finish, foffset) {\n        return CellSelection.retrieve(container, annotations.selectedSelector()).fold(function () {\n          var realEvent = event.raw();\n          var keycode = realEvent.which;\n          var shiftKey = realEvent.shiftKey === true;\n          if (shiftKey === false) {\n            return Option.none();\n          }\n          if (SelectionKeys.isNavigation(keycode)) {\n            return KeySelection.sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);\n          } else {\n            return Option.none();\n          }\n        }, Option.none);\n      };\n      return {\n        keydown: keydown,\n        keyup: keyup\n      };\n    };\n    var InputHandlers = {\n      mouse: mouse,\n      keyboard: keyboard\n    };\n\n    var remove$7 = function (element, classes) {\n      each(classes, function (x) {\n        remove$5(element, x);\n      });\n    };\n\n    var addClass = function (clazz) {\n      return function (element) {\n        add$2(element, clazz);\n      };\n    };\n    var removeClasses = function (classes) {\n      return function (element) {\n        remove$7(element, classes);\n      };\n    };\n\n    var byClass = function (ephemera) {\n      var addSelectionClass = addClass(ephemera.selected());\n      var removeSelectionClasses = removeClasses([\n        ephemera.selected(),\n        ephemera.lastSelected(),\n        ephemera.firstSelected()\n      ]);\n      var clear = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector());\n        each(sels, removeSelectionClasses);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionClass);\n        add$2(start, ephemera.firstSelected());\n        add$2(finish, ephemera.lastSelected());\n      };\n      return {\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var byAttr = function (ephemera) {\n      var removeSelectionAttributes = function (element) {\n        remove(element, ephemera.selected());\n        remove(element, ephemera.firstSelected());\n        remove(element, ephemera.lastSelected());\n      };\n      var addSelectionAttribute = function (element) {\n        set(element, ephemera.selected(), '1');\n      };\n      var clear = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector());\n        each(sels, removeSelectionAttributes);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionAttribute);\n        set(start, ephemera.firstSelected(), '1');\n        set(finish, ephemera.lastSelected(), '1');\n      };\n      return {\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var SelectionAnnotation = {\n      byClass: byClass,\n      byAttr: byAttr\n    };\n\n    var hasInternalTarget = function (e) {\n      return has$1(Element.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n    };\n    function CellSelection$1 (editor, lazyResize) {\n      var handlerStruct = MixedBag([\n        'mousedown',\n        'mouseover',\n        'mouseup',\n        'keyup',\n        'keydown'\n      ], []);\n      var handlers = Option.none();\n      var annotations = SelectionAnnotation.byAttr(Ephemera);\n      editor.on('init', function (e) {\n        var win = editor.getWin();\n        var body = getBody$1(editor);\n        var isRoot = getIsRoot(editor);\n        var syncSelection = function () {\n          var sel = editor.selection;\n          var start = Element.fromDom(sel.getStart());\n          var end = Element.fromDom(sel.getEnd());\n          var shared = DomParent.sharedOne(TableLookup.table, [\n            start,\n            end\n          ]);\n          shared.fold(function () {\n            annotations.clear(body);\n          }, noop);\n        };\n        var mouseHandlers = InputHandlers.mouse(win, body, isRoot, annotations);\n        var keyHandlers = InputHandlers.keyboard(win, body, isRoot, annotations);\n        var hasShiftKey = function (event) {\n          return event.raw().shiftKey === true;\n        };\n        var handleResponse = function (event, response) {\n          if (!hasShiftKey(event)) {\n            return;\n          }\n          if (response.kill()) {\n            event.kill();\n          }\n          response.selection().each(function (ns) {\n            var relative = Selection.relative(ns.start(), ns.finish());\n            var rng = asLtrRange(win, relative);\n            editor.selection.setRng(rng);\n          });\n        };\n        var keyup = function (event) {\n          var wrappedEvent = wrapEvent(event);\n          if (wrappedEvent.raw().shiftKey && SelectionKeys.isNavigation(wrappedEvent.raw().which)) {\n            var rng = editor.selection.getRng();\n            var start = Element.fromDom(rng.startContainer);\n            var end = Element.fromDom(rng.endContainer);\n            keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n              handleResponse(wrappedEvent, response);\n            });\n          }\n        };\n        var keydown = function (event) {\n          var wrappedEvent = wrapEvent(event);\n          lazyResize().each(function (resize) {\n            resize.hideBars();\n          });\n          var rng = editor.selection.getRng();\n          var startContainer = Element.fromDom(editor.selection.getStart());\n          var start = Element.fromDom(rng.startContainer);\n          var end = Element.fromDom(rng.endContainer);\n          var direction = Direction.directionAt(startContainer).isRtl() ? SelectionKeys.rtl : SelectionKeys.ltr;\n          keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n          lazyResize().each(function (resize) {\n            resize.showBars();\n          });\n        };\n        var isMouseEvent = function (event) {\n          return event.hasOwnProperty('x') && event.hasOwnProperty('y');\n        };\n        var wrapEvent = function (event) {\n          var target = Element.fromDom(event.target);\n          var stop = function () {\n            event.stopPropagation();\n          };\n          var prevent = function () {\n            event.preventDefault();\n          };\n          var kill = compose(prevent, stop);\n          return {\n            target: constant(target),\n            x: constant(isMouseEvent(event) ? event.x : null),\n            y: constant(isMouseEvent(event) ? event.y : null),\n            stop: stop,\n            prevent: prevent,\n            kill: kill,\n            raw: constant(event)\n          };\n        };\n        var isLeftMouse = function (raw) {\n          return raw.button === 0;\n        };\n        var isLeftButtonPressed = function (raw) {\n          if (raw.buttons === undefined) {\n            return true;\n          }\n          if (global$2.ie && global$2.ie >= 12 && raw.buttons === 0) {\n            return true;\n          }\n          return (raw.buttons & 1) !== 0;\n        };\n        var mouseDown = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mousedown(wrapEvent(e));\n          }\n        };\n        var mouseOver = function (e) {\n          if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseover(wrapEvent(e));\n          }\n        };\n        var mouseUp = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseup(wrapEvent(e));\n          }\n        };\n        editor.on('mousedown', mouseDown);\n        editor.on('mouseover', mouseOver);\n        editor.on('mouseup', mouseUp);\n        editor.on('keyup', keyup);\n        editor.on('keydown', keydown);\n        editor.on('nodechange', syncSelection);\n        handlers = Option.some(handlerStruct({\n          mousedown: mouseDown,\n          mouseover: mouseOver,\n          mouseup: mouseUp,\n          keyup: keyup,\n          keydown: keydown\n        }));\n      });\n      var destroy = function () {\n        handlers.each(function (handlers) {\n        });\n      };\n      return {\n        clear: annotations.clear,\n        destroy: destroy\n      };\n    }\n\n    var Selections = function (editor) {\n      var get = function () {\n        var body = getBody$1(editor);\n        return TableSelection.retrieve(body, Ephemera.selectedSelector()).fold(function () {\n          if (editor.selection.getStart() === undefined) {\n            return SelectionTypes.none();\n          } else {\n            return SelectionTypes.single(editor.selection);\n          }\n        }, function (cells) {\n          return SelectionTypes.multiple(cells);\n        });\n      };\n      return { get: get };\n    };\n\n    var each$4 = global$1.each;\n    var addButtons = function (editor) {\n      var menuItems = [];\n      each$4('inserttable tableprops deletetable | cell row column'.split(' '), function (name) {\n        if (name === '|') {\n          menuItems.push({ text: '-' });\n        } else {\n          menuItems.push(editor.menuItems[name]);\n        }\n      });\n      editor.addButton('table', {\n        type: 'menubutton',\n        title: 'Table',\n        menu: menuItems\n      });\n      function cmd(command) {\n        return function () {\n          editor.execCommand(command);\n        };\n      }\n      editor.addButton('tableprops', {\n        title: 'Table properties',\n        onclick: cmd('mceTableProps'),\n        icon: 'table'\n      });\n      editor.addButton('tabledelete', {\n        title: 'Delete table',\n        onclick: cmd('mceTableDelete')\n      });\n      editor.addButton('tablecellprops', {\n        title: 'Cell properties',\n        onclick: cmd('mceTableCellProps')\n      });\n      editor.addButton('tablemergecells', {\n        title: 'Merge cells',\n        onclick: cmd('mceTableMergeCells')\n      });\n      editor.addButton('tablesplitcells', {\n        title: 'Split cell',\n        onclick: cmd('mceTableSplitCells')\n      });\n      editor.addButton('tableinsertrowbefore', {\n        title: 'Insert row before',\n        onclick: cmd('mceTableInsertRowBefore')\n      });\n      editor.addButton('tableinsertrowafter', {\n        title: 'Insert row after',\n        onclick: cmd('mceTableInsertRowAfter')\n      });\n      editor.addButton('tabledeleterow', {\n        title: 'Delete row',\n        onclick: cmd('mceTableDeleteRow')\n      });\n      editor.addButton('tablerowprops', {\n        title: 'Row properties',\n        onclick: cmd('mceTableRowProps')\n      });\n      editor.addButton('tablecutrow', {\n        title: 'Cut row',\n        onclick: cmd('mceTableCutRow')\n      });\n      editor.addButton('tablecopyrow', {\n        title: 'Copy row',\n        onclick: cmd('mceTableCopyRow')\n      });\n      editor.addButton('tablepasterowbefore', {\n        title: 'Paste row before',\n        onclick: cmd('mceTablePasteRowBefore')\n      });\n      editor.addButton('tablepasterowafter', {\n        title: 'Paste row after',\n        onclick: cmd('mceTablePasteRowAfter')\n      });\n      editor.addButton('tableinsertcolbefore', {\n        title: 'Insert column before',\n        onclick: cmd('mceTableInsertColBefore')\n      });\n      editor.addButton('tableinsertcolafter', {\n        title: 'Insert column after',\n        onclick: cmd('mceTableInsertColAfter')\n      });\n      editor.addButton('tabledeletecol', {\n        title: 'Delete column',\n        onclick: cmd('mceTableDeleteCol')\n      });\n    };\n    var addToolbars = function (editor) {\n      var isTable = function (table) {\n        var selectorMatched = editor.dom.is(table, 'table') && editor.getBody().contains(table);\n        return selectorMatched;\n      };\n      var toolbar = getToolbar(editor);\n      if (toolbar.length > 0) {\n        editor.addContextToolbar(isTable, toolbar.join(' '));\n      }\n    };\n    var Buttons = {\n      addButtons: addButtons,\n      addToolbars: addToolbars\n    };\n\n    var addMenuItems = function (editor, selections) {\n      var targets = Option.none();\n      var tableCtrls = [];\n      var cellCtrls = [];\n      var mergeCtrls = [];\n      var unmergeCtrls = [];\n      var noTargetDisable = function (ctrl) {\n        ctrl.disabled(true);\n      };\n      var ctrlEnable = function (ctrl) {\n        ctrl.disabled(false);\n      };\n      var pushTable = function () {\n        var self = this;\n        tableCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          ctrlEnable(self);\n        });\n      };\n      var pushCell = function () {\n        var self = this;\n        cellCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          ctrlEnable(self);\n        });\n      };\n      var pushMerge = function () {\n        var self = this;\n        mergeCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          self.disabled(targets.mergable().isNone());\n        });\n      };\n      var pushUnmerge = function () {\n        var self = this;\n        unmergeCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          self.disabled(targets.unmergable().isNone());\n        });\n      };\n      var setDisabledCtrls = function () {\n        targets.fold(function () {\n          each(tableCtrls, noTargetDisable);\n          each(cellCtrls, noTargetDisable);\n          each(mergeCtrls, noTargetDisable);\n          each(unmergeCtrls, noTargetDisable);\n        }, function (targets) {\n          each(tableCtrls, ctrlEnable);\n          each(cellCtrls, ctrlEnable);\n          each(mergeCtrls, function (mergeCtrl) {\n            mergeCtrl.disabled(targets.mergable().isNone());\n          });\n          each(unmergeCtrls, function (unmergeCtrl) {\n            unmergeCtrl.disabled(targets.unmergable().isNone());\n          });\n        });\n      };\n      editor.on('init', function () {\n        editor.on('nodechange', function (e) {\n          var cellOpt = Option.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          targets = cellOpt.bind(function (cellDom) {\n            var cell = Element.fromDom(cellDom);\n            var table = TableLookup.table(cell);\n            return table.map(function (table) {\n              return TableTargets.forMenu(selections, table, cell);\n            });\n          });\n          setDisabledCtrls();\n        });\n      });\n      var generateTableGrid = function () {\n        var html = '';\n        html = '<table role=\"grid\" class=\"mce-grid mce-grid-border\" aria-readonly=\"true\">';\n        for (var y = 0; y < 10; y++) {\n          html += '<tr>';\n          for (var x = 0; x < 10; x++) {\n            html += '<td role=\"gridcell\" tabindex=\"-1\"><a id=\"mcegrid' + (y * 10 + x) + '\" href=\"#\" ' + 'data-mce-x=\"' + x + '\" data-mce-y=\"' + y + '\"></a></td>';\n          }\n          html += '</tr>';\n        }\n        html += '</table>';\n        html += '<div class=\"mce-text-center\" role=\"presentation\">1 x 1</div>';\n        return html;\n      };\n      var selectGrid = function (editor, tx, ty, control) {\n        var table = control.getEl().getElementsByTagName('table')[0];\n        var x, y, focusCell, cell, active;\n        var rtl = control.isRtl() || control.parent().rel === 'tl-tr';\n        table.nextSibling.innerHTML = tx + 1 + ' x ' + (ty + 1);\n        if (rtl) {\n          tx = 9 - tx;\n        }\n        for (y = 0; y < 10; y++) {\n          for (x = 0; x < 10; x++) {\n            cell = table.rows[y].childNodes[x].firstChild;\n            active = (rtl ? x >= tx : x <= tx) && y <= ty;\n            editor.dom.toggleClass(cell, 'mce-active', active);\n            if (active) {\n              focusCell = cell;\n            }\n          }\n        }\n        return focusCell.parentNode;\n      };\n      var insertTable = hasTableGrid(editor) === false ? {\n        text: 'Table',\n        icon: 'table',\n        context: 'table',\n        onclick: cmd('mceInsertTable')\n      } : {\n        text: 'Table',\n        icon: 'table',\n        context: 'table',\n        ariaHideMenu: true,\n        onclick: function (e) {\n          if (e.aria) {\n            this.parent().hideAll();\n            e.stopImmediatePropagation();\n            editor.execCommand('mceInsertTable');\n          }\n        },\n        onshow: function () {\n          selectGrid(editor, 0, 0, this.menu.items()[0]);\n        },\n        onhide: function () {\n          var elements = this.menu.items()[0].getEl().getElementsByTagName('a');\n          editor.dom.removeClass(elements, 'mce-active');\n          editor.dom.addClass(elements[0], 'mce-active');\n        },\n        menu: [{\n            type: 'container',\n            html: generateTableGrid(),\n            onPostRender: function () {\n              this.lastX = this.lastY = 0;\n            },\n            onmousemove: function (e) {\n              var target = e.target;\n              var x, y;\n              if (target.tagName.toUpperCase() === 'A') {\n                x = parseInt(target.getAttribute('data-mce-x'), 10);\n                y = parseInt(target.getAttribute('data-mce-y'), 10);\n                if (this.isRtl() || this.parent().rel === 'tl-tr') {\n                  x = 9 - x;\n                }\n                if (x !== this.lastX || y !== this.lastY) {\n                  selectGrid(editor, x, y, e.control);\n                  this.lastX = x;\n                  this.lastY = y;\n                }\n              }\n            },\n            onclick: function (e) {\n              var self = this;\n              if (e.target.tagName.toUpperCase() === 'A') {\n                e.preventDefault();\n                e.stopPropagation();\n                self.parent().cancel();\n                editor.undoManager.transact(function () {\n                  InsertTable.insert(editor, self.lastX + 1, self.lastY + 1);\n                });\n                editor.addVisual();\n              }\n            }\n          }]\n      };\n      function cmd(command) {\n        return function () {\n          editor.execCommand(command);\n        };\n      }\n      var tableProperties = {\n        text: 'Table properties',\n        context: 'table',\n        onPostRender: pushTable,\n        onclick: cmd('mceTableProps')\n      };\n      var deleteTable = {\n        text: 'Delete table',\n        context: 'table',\n        onPostRender: pushTable,\n        cmd: 'mceTableDelete'\n      };\n      var row = {\n        text: 'Row',\n        context: 'table',\n        menu: [\n          {\n            text: 'Insert row before',\n            onclick: cmd('mceTableInsertRowBefore'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Insert row after',\n            onclick: cmd('mceTableInsertRowAfter'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Delete row',\n            onclick: cmd('mceTableDeleteRow'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Row properties',\n            onclick: cmd('mceTableRowProps'),\n            onPostRender: pushCell\n          },\n          { text: '-' },\n          {\n            text: 'Cut row',\n            onclick: cmd('mceTableCutRow'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Copy row',\n            onclick: cmd('mceTableCopyRow'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Paste row before',\n            onclick: cmd('mceTablePasteRowBefore'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Paste row after',\n            onclick: cmd('mceTablePasteRowAfter'),\n            onPostRender: pushCell\n          }\n        ]\n      };\n      var column = {\n        text: 'Column',\n        context: 'table',\n        menu: [\n          {\n            text: 'Insert column before',\n            onclick: cmd('mceTableInsertColBefore'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Insert column after',\n            onclick: cmd('mceTableInsertColAfter'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Delete column',\n            onclick: cmd('mceTableDeleteCol'),\n            onPostRender: pushCell\n          }\n        ]\n      };\n      var cell = {\n        separator: 'before',\n        text: 'Cell',\n        context: 'table',\n        menu: [\n          {\n            text: 'Cell properties',\n            onclick: cmd('mceTableCellProps'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Merge cells',\n            onclick: cmd('mceTableMergeCells'),\n            onPostRender: pushMerge\n          },\n          {\n            text: 'Split cell',\n            onclick: cmd('mceTableSplitCells'),\n            onPostRender: pushUnmerge\n          }\n        ]\n      };\n      editor.addMenuItem('inserttable', insertTable);\n      editor.addMenuItem('tableprops', tableProperties);\n      editor.addMenuItem('deletetable', deleteTable);\n      editor.addMenuItem('row', row);\n      editor.addMenuItem('column', column);\n      editor.addMenuItem('cell', cell);\n    };\n    var MenuItems = { addMenuItems: addMenuItems };\n\n    var getClipboardRows = function (clipboardRows) {\n      return clipboardRows.get().fold(function () {\n        return;\n      }, function (rows) {\n        return map(rows, function (row) {\n          return row.dom();\n        });\n      });\n    };\n    var setClipboardRows = function (rows, clipboardRows) {\n      var sugarRows = map(rows, Element.fromDom);\n      clipboardRows.set(Option.from(sugarRows));\n    };\n    var getApi = function (editor, clipboardRows) {\n      return {\n        insertTable: function (columns, rows) {\n          return InsertTable.insert(editor, columns, rows);\n        },\n        setClipboardRows: function (rows) {\n          return setClipboardRows(rows, clipboardRows);\n        },\n        getClipboardRows: function () {\n          return getClipboardRows(clipboardRows);\n        }\n      };\n    };\n\n    function Plugin(editor) {\n      var resizeHandler = ResizeHandler(editor);\n      var cellSelection = CellSelection$1(editor, resizeHandler.lazyResize);\n      var actions = TableActions(editor, resizeHandler.lazyWire);\n      var selections = Selections(editor);\n      var clipboardRows = Cell(Option.none());\n      Commands.registerCommands(editor, actions, cellSelection, selections, clipboardRows);\n      Clipboard.registerEvents(editor, selections, actions, cellSelection);\n      MenuItems.addMenuItems(editor, selections);\n      Buttons.addButtons(editor);\n      Buttons.addToolbars(editor);\n      editor.on('PreInit', function () {\n        editor.serializer.addTempAttr(Ephemera.firstSelected());\n        editor.serializer.addTempAttr(Ephemera.lastSelected());\n      });\n      if (hasTabNavigation(editor)) {\n        editor.on('keydown', function (e) {\n          TabContext.handle(e, editor, actions, resizeHandler.lazyWire);\n        });\n      }\n      editor.on('remove', function () {\n        resizeHandler.destroy();\n        cellSelection.destroy();\n      });\n      return getApi(editor, clipboardRows);\n    }\n    global.add('table', Plugin);\n    function Plugin$1 () {\n    }\n\n    return Plugin$1;\n\n}(window));\n})();\n","(function () {\nvar bbcode = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var html2bbcode = function (s) {\n      s = global$1.trim(s);\n      var rep = function (re, str) {\n        s = s.replace(re, str);\n      };\n      rep(/<a.*?href=\\\"(.*?)\\\".*?>(.*?)<\\/a>/gi, '[url=$1]$2[/url]');\n      rep(/<font.*?color=\\\"(.*?)\\\".*?class=\\\"codeStyle\\\".*?>(.*?)<\\/font>/gi, '[code][color=$1]$2[/color][/code]');\n      rep(/<font.*?color=\\\"(.*?)\\\".*?class=\\\"quoteStyle\\\".*?>(.*?)<\\/font>/gi, '[quote][color=$1]$2[/color][/quote]');\n      rep(/<font.*?class=\\\"codeStyle\\\".*?color=\\\"(.*?)\\\".*?>(.*?)<\\/font>/gi, '[code][color=$1]$2[/color][/code]');\n      rep(/<font.*?class=\\\"quoteStyle\\\".*?color=\\\"(.*?)\\\".*?>(.*?)<\\/font>/gi, '[quote][color=$1]$2[/color][/quote]');\n      rep(/<span style=\\\"color: ?(.*?);\\\">(.*?)<\\/span>/gi, '[color=$1]$2[/color]');\n      rep(/<font.*?color=\\\"(.*?)\\\".*?>(.*?)<\\/font>/gi, '[color=$1]$2[/color]');\n      rep(/<span style=\\\"font-size:(.*?);\\\">(.*?)<\\/span>/gi, '[size=$1]$2[/size]');\n      rep(/<font>(.*?)<\\/font>/gi, '$1');\n      rep(/<img.*?src=\\\"(.*?)\\\".*?\\/>/gi, '[img]$1[/img]');\n      rep(/<span class=\\\"codeStyle\\\">(.*?)<\\/span>/gi, '[code]$1[/code]');\n      rep(/<span class=\\\"quoteStyle\\\">(.*?)<\\/span>/gi, '[quote]$1[/quote]');\n      rep(/<strong class=\\\"codeStyle\\\">(.*?)<\\/strong>/gi, '[code][b]$1[/b][/code]');\n      rep(/<strong class=\\\"quoteStyle\\\">(.*?)<\\/strong>/gi, '[quote][b]$1[/b][/quote]');\n      rep(/<em class=\\\"codeStyle\\\">(.*?)<\\/em>/gi, '[code][i]$1[/i][/code]');\n      rep(/<em class=\\\"quoteStyle\\\">(.*?)<\\/em>/gi, '[quote][i]$1[/i][/quote]');\n      rep(/<u class=\\\"codeStyle\\\">(.*?)<\\/u>/gi, '[code][u]$1[/u][/code]');\n      rep(/<u class=\\\"quoteStyle\\\">(.*?)<\\/u>/gi, '[quote][u]$1[/u][/quote]');\n      rep(/<\\/(strong|b)>/gi, '[/b]');\n      rep(/<(strong|b)>/gi, '[b]');\n      rep(/<\\/(em|i)>/gi, '[/i]');\n      rep(/<(em|i)>/gi, '[i]');\n      rep(/<\\/u>/gi, '[/u]');\n      rep(/<span style=\\\"text-decoration: ?underline;\\\">(.*?)<\\/span>/gi, '[u]$1[/u]');\n      rep(/<u>/gi, '[u]');\n      rep(/<blockquote[^>]*>/gi, '[quote]');\n      rep(/<\\/blockquote>/gi, '[/quote]');\n      rep(/<br \\/>/gi, '\\n');\n      rep(/<br\\/>/gi, '\\n');\n      rep(/<br>/gi, '\\n');\n      rep(/<p>/gi, '');\n      rep(/<\\/p>/gi, '\\n');\n      rep(/&nbsp;|\\u00a0/gi, ' ');\n      rep(/&quot;/gi, '\"');\n      rep(/&lt;/gi, '<');\n      rep(/&gt;/gi, '>');\n      rep(/&amp;/gi, '&');\n      return s;\n    };\n    var bbcode2html = function (s) {\n      s = global$1.trim(s);\n      var rep = function (re, str) {\n        s = s.replace(re, str);\n      };\n      rep(/\\n/gi, '<br />');\n      rep(/\\[b\\]/gi, '<strong>');\n      rep(/\\[\\/b\\]/gi, '</strong>');\n      rep(/\\[i\\]/gi, '<em>');\n      rep(/\\[\\/i\\]/gi, '</em>');\n      rep(/\\[u\\]/gi, '<u>');\n      rep(/\\[\\/u\\]/gi, '</u>');\n      rep(/\\[url=([^\\]]+)\\](.*?)\\[\\/url\\]/gi, '<a href=\"$1\">$2</a>');\n      rep(/\\[url\\](.*?)\\[\\/url\\]/gi, '<a href=\"$1\">$1</a>');\n      rep(/\\[img\\](.*?)\\[\\/img\\]/gi, '<img src=\"$1\" />');\n      rep(/\\[color=(.*?)\\](.*?)\\[\\/color\\]/gi, '<font color=\"$1\">$2</font>');\n      rep(/\\[code\\](.*?)\\[\\/code\\]/gi, '<span class=\"codeStyle\">$1</span>&nbsp;');\n      rep(/\\[quote.*?\\](.*?)\\[\\/quote\\]/gi, '<span class=\"quoteStyle\">$1</span>&nbsp;');\n      return s;\n    };\n    var Convert = {\n      html2bbcode: html2bbcode,\n      bbcode2html: bbcode2html\n    };\n\n    global.add('bbcode', function () {\n      return {\n        init: function (editor) {\n          editor.on('beforeSetContent', function (e) {\n            e.content = Convert.bbcode2html(e.content);\n          });\n          editor.on('postProcess', function (e) {\n            if (e.set) {\n              e.content = Convert.bbcode2html(e.content);\n            }\n            if (e.get) {\n              e.content = Convert.html2bbcode(e.content);\n            }\n          });\n        }\n      };\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar imagetools = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    function create(width, height) {\n      return resize(domGlobals.document.createElement('canvas'), width, height);\n    }\n    function clone(canvas) {\n      var tCanvas = create(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    }\n    function get2dContext(canvas) {\n      return canvas.getContext('2d');\n    }\n    function resize(canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    }\n\n    function getWidth(image) {\n      return image.naturalWidth || image.width;\n    }\n    function getHeight(image) {\n      return image.naturalHeight || image.height;\n    }\n\n    var promise = function () {\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof window.setImmediate === 'function' && window.setImmediate || function (fn) {\n        domGlobals.setTimeout(fn, 1);\n      };\n      function bind(fn, thisArg) {\n        return function () {\n          return fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var _i = 0, _a = this._deferreds; _i < _a.length; _i++) {\n          var deferred = _a[_i];\n          handle.call(this, deferred);\n        }\n        this._deferreds = [];\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        var args = Array.prototype.slice.call(values.length === 1 && isArray(values[0]) ? values[0] : values);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (reason) {\n        return new Promise(function (resolve, reject) {\n          reject(reason);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var value = values_1[_i];\n            value.then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var Promise = window.Promise ? window.Promise : promise();\n\n    function imageToBlob(image) {\n      var src = image.src;\n      if (src.indexOf('data:') === 0) {\n        return dataUriToBlob(src);\n      }\n      return anyUriToBlob(src);\n    }\n    function blobToImage(blob) {\n      return new Promise(function (resolve, reject) {\n        var blobUrl = domGlobals.URL.createObjectURL(blob);\n        var image = new domGlobals.Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        function loaded() {\n          removeListeners();\n          resolve(image);\n        }\n        function error() {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        }\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          loaded();\n        }\n      });\n    }\n    function anyUriToBlob(url) {\n      return new Promise(function (resolve, reject) {\n        var xhr = new domGlobals.XMLHttpRequest();\n        xhr.open('GET', url, true);\n        xhr.responseType = 'blob';\n        xhr.onload = function () {\n          if (this.status === 200) {\n            resolve(this.response);\n          }\n        };\n        xhr.onerror = function () {\n          var _this = this;\n          var corsError = function () {\n            var obj = new Error('No access to download image');\n            obj.code = 18;\n            obj.name = 'SecurityError';\n            return obj;\n          };\n          var genericError = function () {\n            return new Error('Error ' + _this.status + ' downloading image');\n          };\n          reject(this.status === 0 ? corsError() : genericError());\n        };\n        xhr.send();\n      });\n    }\n    function dataUriToBlobSync(uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Option.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = domGlobals.atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Option.some(new domGlobals.Blob(byteArrays, { type: mimetype }));\n    }\n    function dataUriToBlob(uri) {\n      return new Promise(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    }\n    function canvasToBlob(canvas, type, quality) {\n      type = type || 'image/png';\n      if (domGlobals.HTMLCanvasElement.prototype.toBlob) {\n        return new Promise(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    }\n    function canvasToDataURL(canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    }\n    function blobToCanvas(blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create(getWidth(image), getHeight(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    }\n    function blobToDataUri(blob) {\n      return new Promise(function (resolve) {\n        var reader = new domGlobals.FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    }\n    function revokeImageUrl(image) {\n      domGlobals.URL.revokeObjectURL(image.src);\n    }\n\n    var blobToImage$1 = function (blob) {\n      return blobToImage(blob);\n    };\n    var imageToBlob$1 = function (image) {\n      return imageToBlob(image);\n    };\n\n    function create$1(getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant(initialType);\n      function toBlob() {\n        return Promise.resolve(blob);\n      }\n      function toDataURL() {\n        return uri;\n      }\n      function toBase64() {\n        return uri.split(',')[1];\n      }\n      function toAdjustedBlob(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      }\n      function toAdjustedDataURL(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      }\n      function toAdjustedBase64(type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      }\n      function toCanvas() {\n        return getCanvas.then(clone);\n      }\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    }\n    function fromBlob(blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$1(blobToCanvas(blob), blob, uri);\n      });\n    }\n    function fromCanvas(canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$1(Promise.resolve(canvas), blob, canvas.toDataURL());\n      });\n    }\n\n    function clamp(value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    }\n    function identity() {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    }\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    function multiply(matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    }\n    function adjust(matrix, adjustValue) {\n      adjustValue = clamp(adjustValue, 0, 1);\n      return matrix.map(function (value, index) {\n        if (index % 6 === 0) {\n          value = 1 - (1 - value) * adjustValue;\n        } else {\n          value *= adjustValue;\n        }\n        return clamp(value, 0, 1);\n      });\n    }\n    function adjustContrast(matrix, value) {\n      var x;\n      value = clamp(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustSaturation(matrix, value) {\n      value = clamp(value, -1, 1);\n      var x = 1 + (value > 0 ? 3 * value : value);\n      var lumR = 0.3086;\n      var lumG = 0.6094;\n      var lumB = 0.082;\n      return multiply(matrix, [\n        lumR * (1 - x) + x,\n        lumG * (1 - x),\n        lumB * (1 - x),\n        0,\n        0,\n        lumR * (1 - x),\n        lumG * (1 - x) + x,\n        lumB * (1 - x),\n        0,\n        0,\n        lumR * (1 - x),\n        lumG * (1 - x),\n        lumB * (1 - x) + x,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustHue(matrix, angle) {\n      angle = clamp(angle, -180, 180) / 180 * Math.PI;\n      var cosVal = Math.cos(angle);\n      var sinVal = Math.sin(angle);\n      var lumR = 0.213;\n      var lumG = 0.715;\n      var lumB = 0.072;\n      return multiply(matrix, [\n        lumR + cosVal * (1 - lumR) + sinVal * -lumR,\n        lumG + cosVal * -lumG + sinVal * -lumG,\n        lumB + cosVal * -lumB + sinVal * (1 - lumB),\n        0,\n        0,\n        lumR + cosVal * -lumR + sinVal * 0.143,\n        lumG + cosVal * (1 - lumG) + sinVal * 0.14,\n        lumB + cosVal * -lumB + sinVal * -0.283,\n        0,\n        0,\n        lumR + cosVal * -lumR + sinVal * -(1 - lumR),\n        lumG + cosVal * -lumG + sinVal * lumG,\n        lumB + cosVal * (1 - lumB) + sinVal * lumB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustBrightness(matrix, value) {\n      value = clamp(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustColors(matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp(adjustR, 0, 2);\n      adjustG = clamp(adjustG, 0, 2);\n      adjustB = clamp(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustSepia(matrix, value) {\n      value = clamp(value, 0, 1);\n      return multiply(matrix, adjust([\n        0.393,\n        0.769,\n        0.189,\n        0,\n        0,\n        0.349,\n        0.686,\n        0.168,\n        0,\n        0,\n        0.272,\n        0.534,\n        0.131,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ], value));\n    }\n    function adjustGrayscale(matrix, value) {\n      value = clamp(value, 0, 1);\n      return multiply(matrix, adjust([\n        0.33,\n        0.34,\n        0.33,\n        0,\n        0,\n        0.33,\n        0.34,\n        0.33,\n        0,\n        0,\n        0.33,\n        0.34,\n        0.33,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ], value));\n    }\n\n    function colorFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyColorFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      }\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function convoluteFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyConvoluteFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pIn, pOut, aMatrix) {\n        function clamp(value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        }\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      }\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function functionColorFilter(colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        function applyLookup(pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        }\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    }\n    function complexAdjustableColorFilter(matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity(), adjust));\n      };\n    }\n    function basicColorFilter(matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    }\n    function basicConvolutionFilter(kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    }\n    var invert = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness = complexAdjustableColorFilter(adjustBrightness);\n    var hue = complexAdjustableColorFilter(adjustHue);\n    var saturate = complexAdjustableColorFilter(adjustSaturation);\n    var contrast = complexAdjustableColorFilter(adjustContrast);\n    var grayscale = complexAdjustableColorFilter(adjustGrayscale);\n    var sepia = complexAdjustableColorFilter(adjustSepia);\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity(), adjustR, adjustG, adjustB));\n    };\n    var sharpen = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var emboss = basicConvolutionFilter([\n      -2,\n      -1,\n      0,\n      -1,\n      1,\n      1,\n      0,\n      1,\n      2\n    ]);\n    var gamma = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n    var exposure = functionColorFilter(function (color, value) {\n      return 255 * (1 - Math.exp(-(color / 255) * value));\n    });\n\n    function scale(image, dW, dH) {\n      var sW = getWidth(image);\n      var sH = getHeight(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    }\n    function _scale(image, wRatio, hRatio) {\n      return new Promise(function (resolve) {\n        var sW = getWidth(image);\n        var sH = getHeight(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    }\n\n    function rotate(ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    }\n    function applyRotate(image, type, angle) {\n      var canvas = create(image.width, image.height);\n      var context = get2dContext(canvas);\n      var translateX = 0;\n      var translateY = 0;\n      angle = angle < 0 ? 360 + angle : angle;\n      if (angle === 90 || angle === 270) {\n        resize(canvas, canvas.height, canvas.width);\n      }\n      if (angle === 90 || angle === 180) {\n        translateX = canvas.width;\n      }\n      if (angle === 270 || angle === 180) {\n        translateY = canvas.height;\n      }\n      context.translate(translateX, translateY);\n      context.rotate(angle * Math.PI / 180);\n      context.drawImage(image, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function flip(ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    }\n    function applyFlip(image, type, axis) {\n      var canvas = create(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    }\n    function crop(ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    }\n    function applyCrop(image, type, x, y, w, h) {\n      var canvas = create(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    }\n    function resize$1(ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    }\n\n    var invert$1 = function (ir) {\n      return invert(ir);\n    };\n    var sharpen$1 = function (ir) {\n      return sharpen(ir);\n    };\n    var emboss$1 = function (ir) {\n      return emboss(ir);\n    };\n    var gamma$1 = function (ir, value) {\n      return gamma(ir, value);\n    };\n    var exposure$1 = function (ir, value) {\n      return exposure(ir, value);\n    };\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorize(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness$1 = function (ir, adjust) {\n      return brightness(ir, adjust);\n    };\n    var hue$1 = function (ir, adjust) {\n      return hue(ir, adjust);\n    };\n    var saturate$1 = function (ir, adjust) {\n      return saturate(ir, adjust);\n    };\n    var contrast$1 = function (ir, adjust) {\n      return contrast(ir, adjust);\n    };\n    var grayscale$1 = function (ir, adjust) {\n      return grayscale(ir, adjust);\n    };\n    var sepia$1 = function (ir, adjust) {\n      return sepia(ir, adjust);\n    };\n    var flip$1 = function (ir, axis) {\n      return flip(ir, axis);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return crop(ir, x, y, w, h);\n    };\n    var resize$2 = function (ir, w, h) {\n      return resize$1(ir, w, h);\n    };\n    var rotate$1 = function (ir, angle) {\n      return rotate(ir, angle);\n    };\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var url = function () {\n      return Global$1.getOrDie('URL');\n    };\n    var createObjectURL = function (blob) {\n      return url().createObjectURL(blob);\n    };\n    var revokeObjectURL = function (u) {\n      url().revokeObjectURL(u);\n    };\n    var URL = {\n      createObjectURL: createObjectURL,\n      revokeObjectURL: revokeObjectURL\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getToolbarItems = function (editor) {\n      return editor.getParam('imagetools_toolbar', 'rotateleft rotateright | flipv fliph | crop editimage imageoptions');\n    };\n    var getProxyUrl = function (editor) {\n      return editor.getParam('imagetools_proxy');\n    };\n    var getCorsHosts = function (editor) {\n      return editor.getParam('imagetools_cors_hosts', [], 'string[]');\n    };\n    var getCredentialsHosts = function (editor) {\n      return editor.getParam('imagetools_credentials_hosts', [], 'string[]');\n    };\n    var getApiKey = function (editor) {\n      return editor.getParam('api_key', editor.getParam('imagetools_api_key', '', 'string'), 'string');\n    };\n    var getUploadTimeout = function (editor) {\n      return editor.getParam('images_upload_timeout', 30000, 'number');\n    };\n    var shouldReuseFilename = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      function add(state) {\n        var removed;\n        removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      }\n      function undo() {\n        if (canUndo()) {\n          return data[--index];\n        }\n      }\n      function redo() {\n        if (canRedo()) {\n          return data[++index];\n        }\n      }\n      function canUndo() {\n        return index > 0;\n      }\n      function canRedo() {\n        return index !== -1 && index < data.length - 1;\n      }\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var loadImage = function (image) {\n      return new global$3(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var LoadImage = { loadImage: loadImage };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var count = 0;\n    function CropRect (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var instance;\n      var handles;\n      var dragHelpers;\n      var blockers;\n      var prefix = 'mce-';\n      var id = prefix + 'crid-' + count++;\n      handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      function getAbsoluteRect(outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      }\n      function getRelativeRect(outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      }\n      function getInnerRect() {\n        return getRelativeRect(clampRect, currentRect);\n      }\n      function moveRect(handle, startRect, deltaX, deltaY) {\n        var x, y, w, h, rect;\n        x = startRect.x;\n        y = startRect.y;\n        w = startRect.w;\n        h = startRect.h;\n        x += deltaX * handle.deltaX;\n        y += deltaY * handle.deltaY;\n        w += deltaX * handle.deltaW;\n        h += deltaY * handle.deltaH;\n        if (w < 20) {\n          w = 20;\n        }\n        if (h < 20) {\n          h = 20;\n        }\n        rect = currentRect = global$7.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      }\n      function render() {\n        function createDragHelper(handle) {\n          var startRect;\n          var DragHelper = global$6.get('DragHelper');\n          return new DragHelper(id, {\n            document: containerElm.ownerDocument,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        }\n        global$8('<div id=\"' + id + '\" class=\"' + prefix + 'croprect-container\"' + ' role=\"grid\" aria-dropeffect=\"execute\">').appendTo(containerElm);\n        global$1.each(blockers, function (blocker) {\n          global$8('#' + id, containerElm).append('<div id=\"' + id + '-' + blocker + '\"class=\"' + prefix + 'croprect-block\" style=\"display: none\" data-mce-bogus=\"all\">');\n        });\n        global$1.each(handles, function (handle) {\n          global$8('#' + id, containerElm).append('<div id=\"' + id + '-' + handle.name + '\" class=\"' + prefix + 'croprect-handle ' + prefix + 'croprect-handle-' + handle.name + '\"' + 'style=\"display: none\" data-mce-bogus=\"all\" role=\"gridcell\" tabindex=\"-1\"' + ' aria-label=\"' + handle.label + '\" aria-grabbed=\"false\">');\n        });\n        dragHelpers = global$1.map(handles, createDragHelper);\n        repaint(currentRect);\n        global$8(containerElm).on('focusin focusout', function (e) {\n          global$8(e.target).attr('aria-grabbed', e.type === 'focus');\n        });\n        global$8(containerElm).on('keydown', function (e) {\n          var activeHandle;\n          global$1.each(handles, function (handle) {\n            if (e.target.id === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          function moveAndBlock(evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          }\n          switch (e.keyCode) {\n          case global$a.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$a.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$a.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$a.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$a.ENTER:\n          case global$a.SPACEBAR:\n            e.preventDefault();\n            action();\n            break;\n          }\n        });\n      }\n      function toggleVisibility(state) {\n        var selectors;\n        selectors = global$1.map(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }).concat(global$1.map(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        })).join(',');\n        if (state) {\n          global$8(selectors, containerElm).show();\n        } else {\n          global$8(selectors, containerElm).hide();\n        }\n      }\n      function repaint(rect) {\n        function updateElementRect(name, rect) {\n          if (rect.h < 0) {\n            rect.h = 0;\n          }\n          if (rect.w < 0) {\n            rect.w = 0;\n          }\n          global$8('#' + id + '-' + name, containerElm).css({\n            left: rect.x,\n            top: rect.y,\n            width: rect.w,\n            height: rect.h\n          });\n        }\n        global$1.each(handles, function (handle) {\n          global$8('#' + id + '-' + handle.name, containerElm).css({\n            left: rect.w * handle.xMul + rect.x,\n            top: rect.h * handle.yMul + rect.y\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      }\n      function setRect(rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      }\n      function setViewPortRect(rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      }\n      function setInnerRect(rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      }\n      function setClampRect(rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      }\n      function destroy() {\n        global$1.each(dragHelpers, function (helper) {\n          helper.destroy();\n        });\n        dragHelpers = [];\n      }\n      render();\n      instance = global$1.extend({\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      }, global$9);\n      return instance;\n    }\n\n    var create$2 = function (settings) {\n      var Control = global$6.get('Control');\n      var ImagePanel = Control.extend({\n        Defaults: { classes: 'imagepanel' },\n        selection: function (rect) {\n          if (arguments.length) {\n            this.state.set('rect', rect);\n            return this;\n          }\n          return this.state.get('rect');\n        },\n        imageSize: function () {\n          var viewRect = this.state.get('viewRect');\n          return {\n            w: viewRect.w,\n            h: viewRect.h\n          };\n        },\n        toggleCropRect: function (state) {\n          this.state.set('cropEnabled', state);\n        },\n        imageSrc: function (url) {\n          var self = this, img = new domGlobals.Image();\n          img.src = url;\n          LoadImage.loadImage(img).then(function () {\n            var rect, $img;\n            var lastRect = self.state.get('viewRect');\n            $img = self.$el.find('img');\n            if ($img[0]) {\n              $img.replaceWith(img);\n            } else {\n              var bg = domGlobals.document.createElement('div');\n              bg.className = 'mce-imagepanel-bg';\n              self.getEl().appendChild(bg);\n              self.getEl().appendChild(img);\n            }\n            rect = {\n              x: 0,\n              y: 0,\n              w: img.naturalWidth,\n              h: img.naturalHeight\n            };\n            self.state.set('viewRect', rect);\n            self.state.set('rect', global$7.inflate(rect, -20, -20));\n            if (!lastRect || lastRect.w !== rect.w || lastRect.h !== rect.h) {\n              self.zoomFit();\n            }\n            self.repaintImage();\n            self.fire('load');\n          });\n        },\n        zoom: function (value) {\n          if (arguments.length) {\n            this.state.set('zoom', value);\n            return this;\n          }\n          return this.state.get('zoom');\n        },\n        postRender: function () {\n          this.imageSrc(this.settings.imageSrc);\n          return this._super();\n        },\n        zoomFit: function () {\n          var self = this;\n          var $img, pw, ph, w, h, zoom, padding;\n          padding = 10;\n          $img = self.$el.find('img');\n          pw = self.getEl().clientWidth;\n          ph = self.getEl().clientHeight;\n          w = $img[0].naturalWidth;\n          h = $img[0].naturalHeight;\n          zoom = Math.min((pw - padding) / w, (ph - padding) / h);\n          if (zoom >= 1) {\n            zoom = 1;\n          }\n          self.zoom(zoom);\n        },\n        repaintImage: function () {\n          var x, y, w, h, pw, ph, $img, $bg, zoom, rect, elm;\n          elm = this.getEl();\n          zoom = this.zoom();\n          rect = this.state.get('rect');\n          $img = this.$el.find('img');\n          $bg = this.$el.find('.mce-imagepanel-bg');\n          pw = elm.offsetWidth;\n          ph = elm.offsetHeight;\n          w = $img[0].naturalWidth * zoom;\n          h = $img[0].naturalHeight * zoom;\n          x = Math.max(0, pw / 2 - w / 2);\n          y = Math.max(0, ph / 2 - h / 2);\n          $img.css({\n            left: x,\n            top: y,\n            width: w,\n            height: h\n          });\n          $bg.css({\n            left: x,\n            top: y,\n            width: w,\n            height: h\n          });\n          if (this.cropRect) {\n            this.cropRect.setRect({\n              x: rect.x * zoom + x,\n              y: rect.y * zoom + y,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            this.cropRect.setClampRect({\n              x: x,\n              y: y,\n              w: w,\n              h: h\n            });\n            this.cropRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: pw,\n              h: ph\n            });\n          }\n        },\n        bindStates: function () {\n          var self = this;\n          function setupCropRect(rect) {\n            self.cropRect = CropRect(rect, self.state.get('viewRect'), self.state.get('viewRect'), self.getEl(), function () {\n              self.fire('crop');\n            });\n            self.cropRect.on('updateRect', function (e) {\n              var rect = e.rect;\n              var zoom = self.zoom();\n              rect = {\n                x: Math.round(rect.x / zoom),\n                y: Math.round(rect.y / zoom),\n                w: Math.round(rect.w / zoom),\n                h: Math.round(rect.h / zoom)\n              };\n              self.state.set('rect', rect);\n            });\n            self.on('remove', self.cropRect.destroy);\n          }\n          self.state.on('change:cropEnabled', function (e) {\n            self.cropRect.toggleVisibility(e.value);\n            self.repaintImage();\n          });\n          self.state.on('change:zoom', function () {\n            self.repaintImage();\n          });\n          self.state.on('change:rect', function (e) {\n            var rect = e.value;\n            if (!self.cropRect) {\n              setupCropRect(rect);\n            }\n            self.cropRect.setRect(rect);\n          });\n        }\n      });\n      return new ImagePanel(settings);\n    };\n    var ImagePanel = { create: create$2 };\n\n    function createState(blob) {\n      return {\n        blob: blob,\n        url: URL.createObjectURL(blob)\n      };\n    }\n    function destroyState(state) {\n      if (state) {\n        URL.revokeObjectURL(state.url);\n      }\n    }\n    function destroyStates(states) {\n      global$1.each(states, destroyState);\n    }\n    function open(editor, currentState, resolve, reject) {\n      var win, undoStack = UndoStack(), mainPanel, filtersPanel, tempState, cropPanel, resizePanel, flipRotatePanel, imagePanel, sidePanel, mainViewContainer, invertPanel, brightnessPanel, huePanel, saturatePanel, contrastPanel, grayscalePanel, sepiaPanel, colorizePanel, sharpenPanel, embossPanel, gammaPanel, exposurePanel, panels, width, height, ratioW, ratioH;\n      var reverseIfRtl = function (items) {\n        return editor.rtl ? items.reverse() : items;\n      };\n      function recalcSize(e) {\n        var widthCtrl, heightCtrl, newWidth, newHeight;\n        widthCtrl = win.find('#w')[0];\n        heightCtrl = win.find('#h')[0];\n        newWidth = parseInt(widthCtrl.value(), 10);\n        newHeight = parseInt(heightCtrl.value(), 10);\n        if (win.find('#constrain')[0].checked() && width && height && newWidth && newHeight) {\n          if (e.control.settings.name === 'w') {\n            newHeight = Math.round(newWidth * ratioW);\n            heightCtrl.value(newHeight);\n          } else {\n            newWidth = Math.round(newHeight * ratioH);\n            widthCtrl.value(newWidth);\n          }\n        }\n        width = newWidth;\n        height = newHeight;\n      }\n      function floatToPercent(value) {\n        return Math.round(value * 100) + '%';\n      }\n      function updateButtonUndoStates() {\n        win.find('#undo').disabled(!undoStack.canUndo());\n        win.find('#redo').disabled(!undoStack.canRedo());\n        win.statusbar.find('#save').disabled(!undoStack.canUndo());\n      }\n      function disableUndoRedo() {\n        win.find('#undo').disabled(true);\n        win.find('#redo').disabled(true);\n      }\n      function displayState(state) {\n        if (state) {\n          imagePanel.imageSrc(state.url);\n        }\n      }\n      function switchPanel(targetPanel) {\n        return function () {\n          var hidePanels = global$1.grep(panels, function (panel) {\n            return panel.settings.name !== targetPanel;\n          });\n          global$1.each(hidePanels, function (panel) {\n            panel.hide();\n          });\n          targetPanel.show();\n          targetPanel.focus();\n        };\n      }\n      function addTempState(blob) {\n        tempState = createState(blob);\n        displayState(tempState);\n      }\n      function addBlobState(blob) {\n        currentState = createState(blob);\n        displayState(currentState);\n        destroyStates(undoStack.add(currentState).removed);\n        updateButtonUndoStates();\n      }\n      function crop() {\n        var rect = imagePanel.selection();\n        blobToImageResult(currentState.blob).then(function (ir) {\n          crop$1(ir, rect.x, rect.y, rect.w, rect.h).then(imageResultToBlob).then(function (blob) {\n            addBlobState(blob);\n            cancel();\n          });\n        });\n      }\n      var tempAction = function (fn) {\n        var args = [].slice.call(arguments, 1);\n        return function () {\n          var state = tempState || currentState;\n          blobToImageResult(state.blob).then(function (ir) {\n            fn.apply(this, [ir].concat(args)).then(imageResultToBlob).then(addTempState);\n          });\n        };\n      };\n      function action(fn) {\n        var arg = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          arg[_i - 1] = arguments[_i];\n        }\n        var args = [].slice.call(arguments, 1);\n        return function () {\n          blobToImageResult(currentState.blob).then(function (ir) {\n            fn.apply(this, [ir].concat(args)).then(imageResultToBlob).then(addBlobState);\n          });\n        };\n      }\n      function cancel() {\n        displayState(currentState);\n        destroyState(tempState);\n        switchPanel(mainPanel)();\n        updateButtonUndoStates();\n      }\n      function waitForTempState(times, applyCall) {\n        if (tempState) {\n          applyCall();\n        } else {\n          setTimeout(function () {\n            if (times-- > 0) {\n              waitForTempState(times, applyCall);\n            } else {\n              editor.windowManager.alert('Error: failed to apply image operation.');\n            }\n          }, 10);\n        }\n      }\n      function applyTempState() {\n        if (tempState) {\n          addBlobState(tempState.blob);\n          cancel();\n        } else {\n          waitForTempState(100, applyTempState);\n        }\n      }\n      function zoomIn() {\n        var zoom = imagePanel.zoom();\n        if (zoom < 2) {\n          zoom += 0.1;\n        }\n        imagePanel.zoom(zoom);\n      }\n      function zoomOut() {\n        var zoom = imagePanel.zoom();\n        if (zoom > 0.1) {\n          zoom -= 0.1;\n        }\n        imagePanel.zoom(zoom);\n      }\n      function undo() {\n        currentState = undoStack.undo();\n        displayState(currentState);\n        updateButtonUndoStates();\n      }\n      function redo() {\n        currentState = undoStack.redo();\n        displayState(currentState);\n        updateButtonUndoStates();\n      }\n      function save() {\n        resolve(currentState.blob);\n        win.close();\n      }\n      function createPanel(items) {\n        return global$6.create('Form', {\n          layout: 'flex',\n          direction: 'row',\n          labelGap: 5,\n          border: '0 0 1 0',\n          align: 'center',\n          pack: 'center',\n          padding: '0 10 0 10',\n          spacing: 5,\n          flex: 0,\n          minHeight: 60,\n          defaults: {\n            classes: 'imagetool',\n            type: 'button'\n          },\n          items: items\n        });\n      }\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      function createFilterPanel(title, filter) {\n        return createPanel(reverseIfRtl([\n          {\n            text: 'Back',\n            onclick: cancel\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            text: 'Apply',\n            subtype: 'primary',\n            onclick: applyTempState\n          }\n        ])).hide().on('show', function () {\n          disableUndoRedo();\n          blobToImageResult(currentState.blob).then(function (ir) {\n            return filter(ir);\n          }).then(imageResultToBlob).then(function (blob) {\n            var newTempState = createState(blob);\n            displayState(newTempState);\n            destroyState(tempState);\n            tempState = newTempState;\n          });\n        });\n      }\n      function createVariableFilterPanel(title, filter, value, min, max) {\n        function update(value) {\n          blobToImageResult(currentState.blob).then(function (ir) {\n            return filter(ir, value);\n          }).then(imageResultToBlob).then(function (blob) {\n            var newTempState = createState(blob);\n            displayState(newTempState);\n            destroyState(tempState);\n            tempState = newTempState;\n          });\n        }\n        return createPanel(reverseIfRtl([\n          {\n            text: 'Back',\n            onclick: cancel\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            type: 'slider',\n            flex: 1,\n            ondragend: function (e) {\n              update(e.value);\n            },\n            minValue: editor.rtl ? max : min,\n            maxValue: editor.rtl ? min : max,\n            value: value,\n            previewFilter: floatToPercent\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            text: 'Apply',\n            subtype: 'primary',\n            onclick: applyTempState\n          }\n        ])).hide().on('show', function () {\n          this.find('slider').value(value);\n          disableUndoRedo();\n        });\n      }\n      function createRgbFilterPanel(title, filter) {\n        function update() {\n          var r, g, b;\n          r = win.find('#r')[0].value();\n          g = win.find('#g')[0].value();\n          b = win.find('#b')[0].value();\n          blobToImageResult(currentState.blob).then(function (ir) {\n            return filter(ir, r, g, b);\n          }).then(imageResultToBlob).then(function (blob) {\n            var newTempState = createState(blob);\n            displayState(newTempState);\n            destroyState(tempState);\n            tempState = newTempState;\n          });\n        }\n        var min = editor.rtl ? 2 : 0;\n        var max = editor.rtl ? 0 : 2;\n        return createPanel(reverseIfRtl([\n          {\n            text: 'Back',\n            onclick: cancel\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            type: 'slider',\n            label: 'R',\n            name: 'r',\n            minValue: min,\n            value: 1,\n            maxValue: max,\n            ondragend: update,\n            previewFilter: floatToPercent\n          },\n          {\n            type: 'slider',\n            label: 'G',\n            name: 'g',\n            minValue: min,\n            value: 1,\n            maxValue: max,\n            ondragend: update,\n            previewFilter: floatToPercent\n          },\n          {\n            type: 'slider',\n            label: 'B',\n            name: 'b',\n            minValue: min,\n            value: 1,\n            maxValue: max,\n            ondragend: update,\n            previewFilter: floatToPercent\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            text: 'Apply',\n            subtype: 'primary',\n            onclick: applyTempState\n          }\n        ])).hide().on('show', function () {\n          win.find('#r,#g,#b').value(1);\n          disableUndoRedo();\n        });\n      }\n      cropPanel = createPanel(reverseIfRtl([\n        {\n          text: 'Back',\n          onclick: cancel\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          text: 'Apply',\n          subtype: 'primary',\n          onclick: crop\n        }\n      ])).hide().on('show hide', function (e) {\n        imagePanel.toggleCropRect(e.type === 'show');\n      }).on('show', disableUndoRedo);\n      function toggleConstrain(e) {\n        if (e.control.value() === true) {\n          ratioW = height / width;\n          ratioH = width / height;\n        }\n      }\n      resizePanel = createPanel(reverseIfRtl([\n        {\n          text: 'Back',\n          onclick: cancel\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          type: 'textbox',\n          name: 'w',\n          label: 'Width',\n          size: 4,\n          onkeyup: recalcSize\n        },\n        {\n          type: 'textbox',\n          name: 'h',\n          label: 'Height',\n          size: 4,\n          onkeyup: recalcSize\n        },\n        {\n          type: 'checkbox',\n          name: 'constrain',\n          text: 'Constrain proportions',\n          checked: true,\n          onchange: toggleConstrain\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          text: 'Apply',\n          subtype: 'primary',\n          onclick: 'submit'\n        }\n      ])).hide().on('submit', function (e) {\n        var width = parseInt(win.find('#w').value(), 10), height = parseInt(win.find('#h').value(), 10);\n        e.preventDefault();\n        action(resize$2, width, height)();\n        cancel();\n      }).on('show', disableUndoRedo);\n      flipRotatePanel = createPanel(reverseIfRtl([\n        {\n          text: 'Back',\n          onclick: cancel\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          icon: 'fliph',\n          tooltip: 'Flip horizontally',\n          onclick: tempAction(flip$1, 'h')\n        },\n        {\n          icon: 'flipv',\n          tooltip: 'Flip vertically',\n          onclick: tempAction(flip$1, 'v')\n        },\n        {\n          icon: 'rotateleft',\n          tooltip: 'Rotate counterclockwise',\n          onclick: tempAction(rotate$1, -90)\n        },\n        {\n          icon: 'rotateright',\n          tooltip: 'Rotate clockwise',\n          onclick: tempAction(rotate$1, 90)\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          text: 'Apply',\n          subtype: 'primary',\n          onclick: applyTempState\n        }\n      ])).hide().on('show', disableUndoRedo);\n      invertPanel = createFilterPanel('Invert', invert$1);\n      sharpenPanel = createFilterPanel('Sharpen', sharpen$1);\n      embossPanel = createFilterPanel('Emboss', emboss$1);\n      brightnessPanel = createVariableFilterPanel('Brightness', brightness$1, 0, -1, 1);\n      huePanel = createVariableFilterPanel('Hue', hue$1, 180, 0, 360);\n      saturatePanel = createVariableFilterPanel('Saturate', saturate$1, 0, -1, 1);\n      contrastPanel = createVariableFilterPanel('Contrast', contrast$1, 0, -1, 1);\n      grayscalePanel = createVariableFilterPanel('Grayscale', grayscale$1, 0, 0, 1);\n      sepiaPanel = createVariableFilterPanel('Sepia', sepia$1, 0, 0, 1);\n      colorizePanel = createRgbFilterPanel('Colorize', colorize$1);\n      gammaPanel = createVariableFilterPanel('Gamma', gamma$1, 0, -1, 1);\n      exposurePanel = createVariableFilterPanel('Exposure', exposure$1, 1, 0, 2);\n      filtersPanel = createPanel(reverseIfRtl([\n        {\n          text: 'Back',\n          onclick: cancel\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          text: 'hue',\n          icon: 'hue',\n          onclick: switchPanel(huePanel)\n        },\n        {\n          text: 'saturate',\n          icon: 'saturate',\n          onclick: switchPanel(saturatePanel)\n        },\n        {\n          text: 'sepia',\n          icon: 'sepia',\n          onclick: switchPanel(sepiaPanel)\n        },\n        {\n          text: 'emboss',\n          icon: 'emboss',\n          onclick: switchPanel(embossPanel)\n        },\n        {\n          text: 'exposure',\n          icon: 'exposure',\n          onclick: switchPanel(exposurePanel)\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        }\n      ])).hide();\n      mainPanel = createPanel(reverseIfRtl([\n        {\n          tooltip: 'Crop',\n          icon: 'crop',\n          onclick: switchPanel(cropPanel)\n        },\n        {\n          tooltip: 'Resize',\n          icon: 'resize2',\n          onclick: switchPanel(resizePanel)\n        },\n        {\n          tooltip: 'Orientation',\n          icon: 'orientation',\n          onclick: switchPanel(flipRotatePanel)\n        },\n        {\n          tooltip: 'Brightness',\n          icon: 'sun',\n          onclick: switchPanel(brightnessPanel)\n        },\n        {\n          tooltip: 'Sharpen',\n          icon: 'sharpen',\n          onclick: switchPanel(sharpenPanel)\n        },\n        {\n          tooltip: 'Contrast',\n          icon: 'contrast',\n          onclick: switchPanel(contrastPanel)\n        },\n        {\n          tooltip: 'Color levels',\n          icon: 'drop',\n          onclick: switchPanel(colorizePanel)\n        },\n        {\n          tooltip: 'Gamma',\n          icon: 'gamma',\n          onclick: switchPanel(gammaPanel)\n        },\n        {\n          tooltip: 'Invert',\n          icon: 'invert',\n          onclick: switchPanel(invertPanel)\n        }\n      ]));\n      imagePanel = ImagePanel.create({\n        flex: 1,\n        imageSrc: currentState.url\n      });\n      sidePanel = global$6.create('Container', {\n        layout: 'flex',\n        direction: 'column',\n        pack: 'start',\n        border: '0 1 0 0',\n        padding: 5,\n        spacing: 5,\n        items: [\n          {\n            type: 'button',\n            icon: 'undo',\n            tooltip: 'Undo',\n            name: 'undo',\n            onclick: undo\n          },\n          {\n            type: 'button',\n            icon: 'redo',\n            tooltip: 'Redo',\n            name: 'redo',\n            onclick: redo\n          },\n          {\n            type: 'button',\n            icon: 'zoomin',\n            tooltip: 'Zoom in',\n            onclick: zoomIn\n          },\n          {\n            type: 'button',\n            icon: 'zoomout',\n            tooltip: 'Zoom out',\n            onclick: zoomOut\n          }\n        ]\n      });\n      mainViewContainer = global$6.create('Container', {\n        type: 'container',\n        layout: 'flex',\n        direction: 'row',\n        align: 'stretch',\n        flex: 1,\n        items: reverseIfRtl([\n          sidePanel,\n          imagePanel\n        ])\n      });\n      panels = [\n        mainPanel,\n        cropPanel,\n        resizePanel,\n        flipRotatePanel,\n        filtersPanel,\n        invertPanel,\n        brightnessPanel,\n        huePanel,\n        saturatePanel,\n        contrastPanel,\n        grayscalePanel,\n        sepiaPanel,\n        colorizePanel,\n        sharpenPanel,\n        embossPanel,\n        gammaPanel,\n        exposurePanel\n      ];\n      win = editor.windowManager.open({\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        minWidth: Math.min(global$5.DOM.getViewPort().w, 800),\n        minHeight: Math.min(global$5.DOM.getViewPort().h, 650),\n        title: 'Edit image',\n        items: panels.concat([mainViewContainer]),\n        buttons: reverseIfRtl([\n          {\n            text: 'Save',\n            name: 'save',\n            subtype: 'primary',\n            onclick: save\n          },\n          {\n            text: 'Cancel',\n            onclick: 'close'\n          }\n        ])\n      });\n      win.on('close', function () {\n        reject();\n        destroyStates(undoStack.data);\n        undoStack = null;\n        tempState = null;\n      });\n      undoStack.add(currentState);\n      updateButtonUndoStates();\n      imagePanel.on('load', function () {\n        width = imagePanel.imageSize().w;\n        height = imagePanel.imageSize().h;\n        ratioW = height / width;\n        ratioH = width / height;\n        win.find('#w').value(width);\n        win.find('#h').value(height);\n      });\n      imagePanel.on('crop', crop);\n    }\n    function edit(editor, imageResult) {\n      return new global$3(function (resolve, reject) {\n        return imageResult.toBlob().then(function (blob) {\n          open(editor, createState(blob), resolve, reject);\n        });\n      });\n    }\n    var Dialog = { edit: edit };\n\n    function getImageSize(img) {\n      var width, height;\n      function isPxValue(value) {\n        return /^[0-9\\.]+px$/.test(value);\n      }\n      width = img.style.width;\n      height = img.style.height;\n      if (width || height) {\n        if (isPxValue(width) && isPxValue(height)) {\n          return {\n            w: parseInt(width, 10),\n            h: parseInt(height, 10)\n          };\n        }\n        return null;\n      }\n      width = img.width;\n      height = img.height;\n      if (width && height) {\n        return {\n          w: parseInt(width, 10),\n          h: parseInt(height, 10)\n        };\n      }\n      return null;\n    }\n    function setImageSize(img, size) {\n      var width, height;\n      if (size) {\n        width = img.style.width;\n        height = img.style.height;\n        if (width || height) {\n          img.style.width = size.w + 'px';\n          img.style.height = size.h + 'px';\n          img.removeAttribute('data-mce-style');\n        }\n        width = img.width;\n        height = img.height;\n        if (width || height) {\n          img.setAttribute('width', size.w);\n          img.setAttribute('height', size.h);\n        }\n      }\n    }\n    function getNaturalImageSize(img) {\n      return {\n        w: img.naturalWidth,\n        h: img.naturalHeight\n      };\n    }\n    var ImageSize = {\n      getImageSize: getImageSize,\n      setImageSize: setImageSize,\n      getNaturalImageSize: getNaturalImageSize\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    function FileReader () {\n      var f = Global$1.getOrDie('FileReader');\n      return new f();\n    }\n\n    function XMLHttpRequest () {\n      var f = Global$1.getOrDie('XMLHttpRequest');\n      return new f();\n    }\n\n    var isValue = function (obj) {\n      return obj !== null && obj !== undefined;\n    };\n    var traverse = function (json, path) {\n      var value;\n      value = path.reduce(function (result, key) {\n        return isValue(result) ? result[key] : undefined;\n      }, json);\n      return isValue(value) ? value : null;\n    };\n    var requestUrlAsBlob = function (url, headers, withCredentials) {\n      return new global$3(function (resolve) {\n        var xhr;\n        xhr = XMLHttpRequest();\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState === 4) {\n            resolve({\n              status: xhr.status,\n              blob: this.response\n            });\n          }\n        };\n        xhr.open('GET', url, true);\n        xhr.withCredentials = withCredentials;\n        global$1.each(headers, function (value, key) {\n          xhr.setRequestHeader(key, value);\n        });\n        xhr.responseType = 'blob';\n        xhr.send();\n      });\n    };\n    var readBlob = function (blob) {\n      return new global$3(function (resolve) {\n        var fr = FileReader();\n        fr.onload = function (e) {\n          var data = e.target;\n          resolve(data.result);\n        };\n        fr.readAsText(blob);\n      });\n    };\n    var parseJson = function (text) {\n      var json;\n      try {\n        json = JSON.parse(text);\n      } catch (ex) {\n      }\n      return json;\n    };\n    var Utils = {\n      traverse: traverse,\n      readBlob: readBlob,\n      requestUrlAsBlob: requestUrlAsBlob,\n      parseJson: parseJson\n    };\n\n    var friendlyHttpErrors = [\n      {\n        code: 404,\n        message: 'Could not find Image Proxy'\n      },\n      {\n        code: 403,\n        message: 'Rejected request'\n      },\n      {\n        code: 0,\n        message: 'Incorrect Image Proxy URL'\n      }\n    ];\n    var friendlyServiceErrors = [\n      {\n        type: 'key_missing',\n        message: 'The request did not include an api key.'\n      },\n      {\n        type: 'key_not_found',\n        message: 'The provided api key could not be found.'\n      },\n      {\n        type: 'domain_not_trusted',\n        message: 'The api key is not valid for the request origins.'\n      }\n    ];\n    var isServiceErrorCode = function (code) {\n      return code === 400 || code === 403 || code === 500;\n    };\n    var getHttpErrorMsg = function (status) {\n      var message = find(friendlyHttpErrors, function (error) {\n        return status === error.code;\n      }).fold(constant('Unknown ImageProxy error'), function (error) {\n        return error.message;\n      });\n      return 'ImageProxy HTTP error: ' + message;\n    };\n    var handleHttpError = function (status) {\n      var message = getHttpErrorMsg(status);\n      return global$3.reject(message);\n    };\n    var getServiceErrorMsg = function (type) {\n      return find(friendlyServiceErrors, function (error) {\n        return error.type === type;\n      }).fold(constant('Unknown service error'), function (error) {\n        return error.message;\n      });\n    };\n    var getServiceError = function (text) {\n      var serviceError = Utils.parseJson(text);\n      var errorType = Utils.traverse(serviceError, [\n        'error',\n        'type'\n      ]);\n      var errorMsg = errorType ? getServiceErrorMsg(errorType) : 'Invalid JSON in service error message';\n      return 'ImageProxy Service error: ' + errorMsg;\n    };\n    var handleServiceError = function (status, blob) {\n      return Utils.readBlob(blob).then(function (text) {\n        var serviceError = getServiceError(text);\n        return global$3.reject(serviceError);\n      });\n    };\n    var handleServiceErrorResponse = function (status, blob) {\n      return isServiceErrorCode(status) ? handleServiceError(status, blob) : handleHttpError(status);\n    };\n    var Errors = {\n      handleServiceErrorResponse: handleServiceErrorResponse,\n      handleHttpError: handleHttpError,\n      getHttpErrorMsg: getHttpErrorMsg,\n      getServiceErrorMsg: getServiceErrorMsg\n    };\n\n    var appendApiKey = function (url, apiKey) {\n      var separator = url.indexOf('?') === -1 ? '?' : '&';\n      if (/[?&]apiKey=/.test(url) || !apiKey) {\n        return url;\n      } else {\n        return url + separator + 'apiKey=' + encodeURIComponent(apiKey);\n      }\n    };\n    var requestServiceBlob = function (url, apiKey) {\n      var headers = {\n        'Content-Type': 'application/json;charset=UTF-8',\n        'tiny-api-key': apiKey\n      };\n      return Utils.requestUrlAsBlob(appendApiKey(url, apiKey), headers, false).then(function (result) {\n        return result.status < 200 || result.status >= 300 ? Errors.handleServiceErrorResponse(result.status, result.blob) : global$3.resolve(result.blob);\n      });\n    };\n    function requestBlob(url, withCredentials) {\n      return Utils.requestUrlAsBlob(url, {}, withCredentials).then(function (result) {\n        return result.status < 200 || result.status >= 300 ? Errors.handleHttpError(result.status) : global$3.resolve(result.blob);\n      });\n    }\n    var getUrl = function (url, apiKey, withCredentials) {\n      return apiKey ? requestServiceBlob(url, apiKey) : requestBlob(url, withCredentials);\n    };\n    var Proxy = { getUrl: getUrl };\n\n    var count$1 = 0;\n    var isEditableImage = function (editor, img) {\n      var selectorMatched = editor.dom.is(img, 'img:not([data-mce-object],[data-mce-placeholder])');\n      return selectorMatched && (isLocalImage(editor, img) || isCorsImage(editor, img) || editor.settings.imagetools_proxy);\n    };\n    var displayError = function (editor, error) {\n      editor.notificationManager.open({\n        text: error,\n        type: 'error'\n      });\n    };\n    var getSelectedImage = function (editor) {\n      return editor.selection.getNode();\n    };\n    var extractFilename = function (editor, url) {\n      var m = url.match(/\\/([^\\/\\?]+)?\\.(?:jpeg|jpg|png|gif)(?:\\?|$)/i);\n      if (m) {\n        return editor.dom.encode(m[1]);\n      }\n      return null;\n    };\n    var createId = function () {\n      return 'imagetools' + count$1++;\n    };\n    var isLocalImage = function (editor, img) {\n      var url = img.src;\n      return url.indexOf('data:') === 0 || url.indexOf('blob:') === 0 || new global$4(url).host === editor.documentBaseURI.host;\n    };\n    var isCorsImage = function (editor, img) {\n      return global$1.inArray(getCorsHosts(editor), new global$4(img.src).host) !== -1;\n    };\n    var isCorsWithCredentialsImage = function (editor, img) {\n      return global$1.inArray(getCredentialsHosts(editor), new global$4(img.src).host) !== -1;\n    };\n    var imageToBlob$2 = function (editor, img) {\n      var src = img.src, apiKey;\n      if (isCorsImage(editor, img)) {\n        return Proxy.getUrl(img.src, null, isCorsWithCredentialsImage(editor, img));\n      }\n      if (!isLocalImage(editor, img)) {\n        src = getProxyUrl(editor);\n        src += (src.indexOf('?') === -1 ? '?' : '&') + 'url=' + encodeURIComponent(img.src);\n        apiKey = getApiKey(editor);\n        return Proxy.getUrl(src, apiKey, false);\n      }\n      return imageToBlob$1(img);\n    };\n    var findSelectedBlob = function (editor) {\n      var blobInfo;\n      blobInfo = editor.editorUpload.blobCache.getByUri(getSelectedImage(editor).src);\n      if (blobInfo) {\n        return global$3.resolve(blobInfo.blob());\n      }\n      return imageToBlob$2(editor, getSelectedImage(editor));\n    };\n    var startTimedUpload = function (editor, imageUploadTimerState) {\n      var imageUploadTimer = global$2.setEditorTimeout(editor, function () {\n        editor.editorUpload.uploadImagesAuto();\n      }, getUploadTimeout(editor));\n      imageUploadTimerState.set(imageUploadTimer);\n    };\n    var cancelTimedUpload = function (imageUploadTimerState) {\n      clearTimeout(imageUploadTimerState.get());\n    };\n    var updateSelectedImage = function (editor, ir, uploadImmediately, imageUploadTimerState, size) {\n      return ir.toBlob().then(function (blob) {\n        var uri, name, blobCache, blobInfo, selectedImage;\n        blobCache = editor.editorUpload.blobCache;\n        selectedImage = getSelectedImage(editor);\n        uri = selectedImage.src;\n        if (shouldReuseFilename(editor)) {\n          blobInfo = blobCache.getByUri(uri);\n          if (blobInfo) {\n            uri = blobInfo.uri();\n            name = blobInfo.name();\n          } else {\n            name = extractFilename(editor, uri);\n          }\n        }\n        blobInfo = blobCache.create({\n          id: createId(),\n          blob: blob,\n          base64: ir.toBase64(),\n          uri: uri,\n          name: name\n        });\n        blobCache.add(blobInfo);\n        editor.undoManager.transact(function () {\n          function imageLoadedHandler() {\n            editor.$(selectedImage).off('load', imageLoadedHandler);\n            editor.nodeChanged();\n            if (uploadImmediately) {\n              editor.editorUpload.uploadImagesAuto();\n            } else {\n              cancelTimedUpload(imageUploadTimerState);\n              startTimedUpload(editor, imageUploadTimerState);\n            }\n          }\n          editor.$(selectedImage).on('load', imageLoadedHandler);\n          if (size) {\n            editor.$(selectedImage).attr({\n              width: size.w,\n              height: size.h\n            });\n          }\n          editor.$(selectedImage).attr({ src: blobInfo.blobUri() }).removeAttr('data-mce-src');\n        });\n        return blobInfo;\n      });\n    };\n    var selectedImageOperation = function (editor, imageUploadTimerState, fn, size) {\n      return function () {\n        return editor._scanForImages().then(curry(findSelectedBlob, editor)).then(blobToImageResult).then(fn).then(function (imageResult) {\n          return updateSelectedImage(editor, imageResult, false, imageUploadTimerState, size);\n        }, function (error) {\n          displayError(editor, error);\n        });\n      };\n    };\n    var rotate$2 = function (editor, imageUploadTimerState, angle) {\n      return function () {\n        var size = ImageSize.getImageSize(getSelectedImage(editor));\n        var flippedSize = size ? {\n          w: size.h,\n          h: size.w\n        } : null;\n        return selectedImageOperation(editor, imageUploadTimerState, function (imageResult) {\n          return rotate$1(imageResult, angle);\n        }, flippedSize)();\n      };\n    };\n    var flip$2 = function (editor, imageUploadTimerState, axis) {\n      return function () {\n        return selectedImageOperation(editor, imageUploadTimerState, function (imageResult) {\n          return flip$1(imageResult, axis);\n        })();\n      };\n    };\n    var editImageDialog = function (editor, imageUploadTimerState) {\n      return function () {\n        var img = getSelectedImage(editor), originalSize = ImageSize.getNaturalImageSize(img);\n        var handleDialogBlob = function (blob) {\n          return new global$3(function (resolve) {\n            blobToImage$1(blob).then(function (newImage) {\n              var newSize = ImageSize.getNaturalImageSize(newImage);\n              if (originalSize.w !== newSize.w || originalSize.h !== newSize.h) {\n                if (ImageSize.getImageSize(img)) {\n                  ImageSize.setImageSize(img, newSize);\n                }\n              }\n              URL.revokeObjectURL(newImage.src);\n              resolve(blob);\n            });\n          });\n        };\n        var openDialog = function (editor, imageResult) {\n          return Dialog.edit(editor, imageResult).then(handleDialogBlob).then(blobToImageResult).then(function (imageResult) {\n            return updateSelectedImage(editor, imageResult, true, imageUploadTimerState);\n          }, function () {\n          });\n        };\n        findSelectedBlob(editor).then(blobToImageResult).then(curry(openDialog, editor), function (error) {\n          displayError(editor, error);\n        });\n      };\n    };\n    var Actions = {\n      rotate: rotate$2,\n      flip: flip$2,\n      editImageDialog: editImageDialog,\n      isEditableImage: isEditableImage,\n      cancelTimedUpload: cancelTimedUpload\n    };\n\n    var register = function (editor, imageUploadTimerState) {\n      global$1.each({\n        mceImageRotateLeft: Actions.rotate(editor, imageUploadTimerState, -90),\n        mceImageRotateRight: Actions.rotate(editor, imageUploadTimerState, 90),\n        mceImageFlipVertical: Actions.flip(editor, imageUploadTimerState, 'v'),\n        mceImageFlipHorizontal: Actions.flip(editor, imageUploadTimerState, 'h'),\n        mceEditImage: Actions.editImageDialog(editor, imageUploadTimerState)\n      }, function (fn, cmd) {\n        editor.addCommand(cmd, fn);\n      });\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor, imageUploadTimerState, lastSelectedImageState) {\n      editor.on('NodeChange', function (e) {\n        var lastSelectedImage = lastSelectedImageState.get();\n        if (lastSelectedImage && lastSelectedImage.src !== e.element.src) {\n          Actions.cancelTimedUpload(imageUploadTimerState);\n          editor.editorUpload.uploadImagesAuto();\n          lastSelectedImageState.set(null);\n        }\n        if (Actions.isEditableImage(editor, e.element)) {\n          lastSelectedImageState.set(e.element);\n        }\n      });\n    };\n    var UploadSelectedImage = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.addButton('rotateleft', {\n        title: 'Rotate counterclockwise',\n        cmd: 'mceImageRotateLeft'\n      });\n      editor.addButton('rotateright', {\n        title: 'Rotate clockwise',\n        cmd: 'mceImageRotateRight'\n      });\n      editor.addButton('flipv', {\n        title: 'Flip vertically',\n        cmd: 'mceImageFlipVertical'\n      });\n      editor.addButton('fliph', {\n        title: 'Flip horizontally',\n        cmd: 'mceImageFlipHorizontal'\n      });\n      editor.addButton('editimage', {\n        title: 'Edit image',\n        cmd: 'mceEditImage'\n      });\n      editor.addButton('imageoptions', {\n        title: 'Image options',\n        icon: 'options',\n        cmd: 'mceImage'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    var register$2 = function (editor) {\n      editor.addContextToolbar(curry(Actions.isEditableImage, editor), getToolbarItems(editor));\n    };\n    var ContextToolbar = { register: register$2 };\n\n    global.add('imagetools', function (editor) {\n      var imageUploadTimerState = Cell(0);\n      var lastSelectedImageState = Cell(null);\n      Commands.register(editor, imageUploadTimerState);\n      Buttons.register(editor);\n      ContextToolbar.register(editor);\n      UploadSelectedImage.setup(editor, imageUploadTimerState, lastSelectedImageState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","(function () {\nvar insertdatetime = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var getDateFormat = function (editor) {\n      return editor.getParam('insertdatetime_dateformat', editor.translate('%Y-%m-%d'));\n    };\n    var getTimeFormat = function (editor) {\n      return editor.getParam('insertdatetime_timeformat', editor.translate('%H:%M:%S'));\n    };\n    var getFormats = function (editor) {\n      return editor.getParam('insertdatetime_formats', [\n        '%H:%M:%S',\n        '%Y-%m-%d',\n        '%I:%M:%S %p',\n        '%D'\n      ]);\n    };\n    var getDefaultDateTime = function (editor) {\n      var formats = getFormats(editor);\n      return formats.length > 0 ? formats[0] : getTimeFormat(editor);\n    };\n    var shouldInsertTimeElement = function (editor) {\n      return editor.getParam('insertdatetime_element', false);\n    };\n    var Settings = {\n      getDateFormat: getDateFormat,\n      getTimeFormat: getTimeFormat,\n      getFormats: getFormats,\n      getDefaultDateTime: getDefaultDateTime,\n      shouldInsertTimeElement: shouldInsertTimeElement\n    };\n\n    var daysShort = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');\n    var daysLong = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');\n    var monthsShort = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');\n    var monthsLong = 'January February March April May June July August September October November December'.split(' ');\n    var addZeros = function (value, len) {\n      value = '' + value;\n      if (value.length < len) {\n        for (var i = 0; i < len - value.length; i++) {\n          value = '0' + value;\n        }\n      }\n      return value;\n    };\n    var getDateTime = function (editor, fmt, date) {\n      date = date || new Date();\n      fmt = fmt.replace('%D', '%m/%d/%Y');\n      fmt = fmt.replace('%r', '%I:%M:%S %p');\n      fmt = fmt.replace('%Y', '' + date.getFullYear());\n      fmt = fmt.replace('%y', '' + date.getYear());\n      fmt = fmt.replace('%m', addZeros(date.getMonth() + 1, 2));\n      fmt = fmt.replace('%d', addZeros(date.getDate(), 2));\n      fmt = fmt.replace('%H', '' + addZeros(date.getHours(), 2));\n      fmt = fmt.replace('%M', '' + addZeros(date.getMinutes(), 2));\n      fmt = fmt.replace('%S', '' + addZeros(date.getSeconds(), 2));\n      fmt = fmt.replace('%I', '' + ((date.getHours() + 11) % 12 + 1));\n      fmt = fmt.replace('%p', '' + (date.getHours() < 12 ? 'AM' : 'PM'));\n      fmt = fmt.replace('%B', '' + editor.translate(monthsLong[date.getMonth()]));\n      fmt = fmt.replace('%b', '' + editor.translate(monthsShort[date.getMonth()]));\n      fmt = fmt.replace('%A', '' + editor.translate(daysLong[date.getDay()]));\n      fmt = fmt.replace('%a', '' + editor.translate(daysShort[date.getDay()]));\n      fmt = fmt.replace('%%', '%');\n      return fmt;\n    };\n    var updateElement = function (editor, timeElm, computerTime, userTime) {\n      var newTimeElm = editor.dom.create('time', { datetime: computerTime }, userTime);\n      timeElm.parentNode.insertBefore(newTimeElm, timeElm);\n      editor.dom.remove(timeElm);\n      editor.selection.select(newTimeElm, true);\n      editor.selection.collapse(false);\n    };\n    var insertDateTime = function (editor, format) {\n      if (Settings.shouldInsertTimeElement(editor)) {\n        var userTime = getDateTime(editor, format);\n        var computerTime = void 0;\n        if (/%[HMSIp]/.test(format)) {\n          computerTime = getDateTime(editor, '%Y-%m-%dT%H:%M');\n        } else {\n          computerTime = getDateTime(editor, '%Y-%m-%d');\n        }\n        var timeElm = editor.dom.getParent(editor.selection.getStart(), 'time');\n        if (timeElm) {\n          updateElement(editor, timeElm, computerTime, userTime);\n        } else {\n          editor.insertContent('<time datetime=\"' + computerTime + '\">' + userTime + '</time>');\n        }\n      } else {\n        editor.insertContent(getDateTime(editor, format));\n      }\n    };\n    var Actions = {\n      insertDateTime: insertDateTime,\n      getDateTime: getDateTime\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceInsertDate', function () {\n        Actions.insertDateTime(editor, Settings.getDateFormat(editor));\n      });\n      editor.addCommand('mceInsertTime', function () {\n        Actions.insertDateTime(editor, Settings.getTimeFormat(editor));\n      });\n    };\n    var Commands = { register: register };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var createMenuItems = function (editor, lastFormatState) {\n      var formats = Settings.getFormats(editor);\n      return global$1.map(formats, function (fmt) {\n        return {\n          text: Actions.getDateTime(editor, fmt),\n          onclick: function () {\n            lastFormatState.set(fmt);\n            Actions.insertDateTime(editor, fmt);\n          }\n        };\n      });\n    };\n    var register$1 = function (editor, lastFormatState) {\n      var menuItems = createMenuItems(editor, lastFormatState);\n      editor.addButton('insertdatetime', {\n        type: 'splitbutton',\n        title: 'Insert date/time',\n        menu: menuItems,\n        onclick: function () {\n          var lastFormat = lastFormatState.get();\n          Actions.insertDateTime(editor, lastFormat ? lastFormat : Settings.getDefaultDateTime(editor));\n        }\n      });\n      editor.addMenuItem('insertdatetime', {\n        icon: 'date',\n        text: 'Date/time',\n        menu: menuItems,\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('insertdatetime', function (editor) {\n      var lastFormatState = Cell(null);\n      Commands.register(editor);\n      Buttons.register(editor, lastFormatState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"bbcode\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/bbcode')\n//   ES2015:\n//     import 'tinymce/plugins/bbcode'\nrequire('./plugin.js');","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","(function () {\nvar codesample = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var getContentCss = function (editor) {\n      return editor.settings.codesample_content_css;\n    };\n    var getLanguages = function (editor) {\n      return editor.settings.codesample_languages;\n    };\n    var getDialogMinWidth = function (editor) {\n      return Math.min(global$1.DOM.getViewPort().w, editor.getParam('codesample_dialog_width', 800));\n    };\n    var getDialogMinHeight = function (editor) {\n      return Math.min(global$1.DOM.getViewPort().w, editor.getParam('codesample_dialog_height', 650));\n    };\n    var Settings = {\n      getContentCss: getContentCss,\n      getLanguages: getLanguages,\n      getDialogMinWidth: getDialogMinWidth,\n      getDialogMinHeight: getDialogMinHeight\n    };\n\n    var window = {};\n    var global$2 = window;\n    var _self = typeof window !== 'undefined' ? window : typeof WorkerGlobalScope !== 'undefined' && domGlobals.self instanceof WorkerGlobalScope ? domGlobals.self : {};\n    var Prism = function () {\n      var lang = /\\blang(?:uage)?-(?!\\*)(\\w+)\\b/i;\n      var _ = _self.Prism = {\n        util: {\n          encode: function (tokens) {\n            if (tokens instanceof Token) {\n              return new Token(tokens.type, _.util.encode(tokens.content), tokens.alias);\n            } else if (_.util.type(tokens) === 'Array') {\n              return tokens.map(_.util.encode);\n            } else {\n              return tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\\u00a0/g, ' ');\n            }\n          },\n          type: function (o) {\n            return Object.prototype.toString.call(o).match(/\\[object (\\w+)\\]/)[1];\n          },\n          clone: function (o) {\n            var type = _.util.type(o);\n            switch (type) {\n            case 'Object':\n              var clone = {};\n              for (var key in o) {\n                if (o.hasOwnProperty(key)) {\n                  clone[key] = _.util.clone(o[key]);\n                }\n              }\n              return clone;\n            case 'Array':\n              return o.map && o.map(function (v) {\n                return _.util.clone(v);\n              });\n            }\n            return o;\n          }\n        },\n        languages: {\n          extend: function (id, redef) {\n            var lang = _.util.clone(_.languages[id]);\n            for (var key in redef) {\n              lang[key] = redef[key];\n            }\n            return lang;\n          },\n          insertBefore: function (inside, before, insert, root) {\n            root = root || _.languages;\n            var grammar = root[inside];\n            if (arguments.length === 2) {\n              insert = arguments[1];\n              for (var newToken in insert) {\n                if (insert.hasOwnProperty(newToken)) {\n                  grammar[newToken] = insert[newToken];\n                }\n              }\n              return grammar;\n            }\n            var ret = {};\n            for (var token in grammar) {\n              if (grammar.hasOwnProperty(token)) {\n                if (token === before) {\n                  for (var newToken in insert) {\n                    if (insert.hasOwnProperty(newToken)) {\n                      ret[newToken] = insert[newToken];\n                    }\n                  }\n                }\n                ret[token] = grammar[token];\n              }\n            }\n            _.languages.DFS(_.languages, function (key, value) {\n              if (value === root[inside] && key !== inside) {\n                this[key] = ret;\n              }\n            });\n            return root[inside] = ret;\n          },\n          DFS: function (o, callback, type) {\n            for (var i in o) {\n              if (o.hasOwnProperty(i)) {\n                callback.call(o, i, o[i], type || i);\n                if (_.util.type(o[i]) === 'Object') {\n                  _.languages.DFS(o[i], callback);\n                } else if (_.util.type(o[i]) === 'Array') {\n                  _.languages.DFS(o[i], callback, i);\n                }\n              }\n            }\n          }\n        },\n        plugins: {},\n        highlightAll: function (async, callback) {\n          var elements = domGlobals.document.querySelectorAll('code[class*=\"language-\"], [class*=\"language-\"] code, code[class*=\"lang-\"], [class*=\"lang-\"] code');\n          for (var i = 0, element = void 0; element = elements[i++];) {\n            _.highlightElement(element, async === true, callback);\n          }\n        },\n        highlightElement: function (element, async, callback) {\n          var language, grammar, parent = element;\n          while (parent && !lang.test(parent.className)) {\n            parent = parent.parentNode;\n          }\n          if (parent) {\n            language = (parent.className.match(lang) || [\n              ,\n              ''\n            ])[1];\n            grammar = _.languages[language];\n          }\n          element.className = element.className.replace(lang, '').replace(/\\s+/g, ' ') + ' language-' + language;\n          parent = element.parentNode;\n          if (/pre/i.test(parent.nodeName)) {\n            parent.className = parent.className.replace(lang, '').replace(/\\s+/g, ' ') + ' language-' + language;\n          }\n          var code = element.textContent;\n          var env = {\n            element: element,\n            language: language,\n            grammar: grammar,\n            code: code\n          };\n          if (!code || !grammar) {\n            _.hooks.run('complete', env);\n            return;\n          }\n          _.hooks.run('before-highlight', env);\n          if (async && _self.Worker) {\n            var worker = new domGlobals.Worker(_.filename);\n            worker.onmessage = function (evt) {\n              env.highlightedCode = evt.data;\n              _.hooks.run('before-insert', env);\n              env.element.innerHTML = env.highlightedCode;\n              if (callback) {\n                callback.call(env.element);\n              }\n              _.hooks.run('after-highlight', env);\n              _.hooks.run('complete', env);\n            };\n            worker.postMessage(JSON.stringify({\n              language: env.language,\n              code: env.code,\n              immediateClose: true\n            }));\n          } else {\n            env.highlightedCode = _.highlight(env.code, env.grammar, env.language);\n            _.hooks.run('before-insert', env);\n            env.element.innerHTML = env.highlightedCode;\n            if (callback) {\n              callback.call(element);\n            }\n            _.hooks.run('after-highlight', env);\n            _.hooks.run('complete', env);\n          }\n        },\n        highlight: function (text, grammar, language) {\n          var tokens = _.tokenize(text, grammar);\n          return Token.stringify(_.util.encode(tokens), language);\n        },\n        tokenize: function (text, grammar, language) {\n          var Token = _.Token;\n          var strarr = [text];\n          var rest = grammar.rest;\n          if (rest) {\n            for (var token in rest) {\n              grammar[token] = rest[token];\n            }\n            delete grammar.rest;\n          }\n          tokenloop:\n            for (var token in grammar) {\n              if (!grammar.hasOwnProperty(token) || !grammar[token]) {\n                continue;\n              }\n              var patterns = grammar[token];\n              patterns = _.util.type(patterns) === 'Array' ? patterns : [patterns];\n              for (var j = 0; j < patterns.length; ++j) {\n                var pattern = patterns[j];\n                var inside = pattern.inside;\n                var lookbehind = !!pattern.lookbehind;\n                var lookbehindLength = 0;\n                var alias = pattern.alias;\n                pattern = pattern.pattern || pattern;\n                for (var i = 0; i < strarr.length; i++) {\n                  var str = strarr[i];\n                  if (strarr.length > text.length) {\n                    break tokenloop;\n                  }\n                  if (str instanceof Token) {\n                    continue;\n                  }\n                  pattern.lastIndex = 0;\n                  var match = pattern.exec(str);\n                  if (match) {\n                    if (lookbehind) {\n                      lookbehindLength = match[1].length;\n                    }\n                    var from = match.index - 1 + lookbehindLength;\n                    match = match[0].slice(lookbehindLength);\n                    var len = match.length, to = from + len, before = str.slice(0, from + 1), after = str.slice(to + 1);\n                    var args = [\n                      i,\n                      1\n                    ];\n                    if (before) {\n                      args.push(before);\n                    }\n                    var wrapped = new Token(token, inside ? _.tokenize(match, inside) : match, alias);\n                    args.push(wrapped);\n                    if (after) {\n                      args.push(after);\n                    }\n                    Array.prototype.splice.apply(strarr, args);\n                  }\n                }\n              }\n            }\n          return strarr;\n        },\n        hooks: {\n          all: {},\n          add: function (name, callback) {\n            var hooks = _.hooks.all;\n            hooks[name] = hooks[name] || [];\n            hooks[name].push(callback);\n          },\n          run: function (name, env) {\n            var callbacks = _.hooks.all[name];\n            if (!callbacks || !callbacks.length) {\n              return;\n            }\n            for (var i = 0, callback = void 0; callback = callbacks[i++];) {\n              callback(env);\n            }\n          }\n        }\n      };\n      var Token = _.Token = function (type, content, alias) {\n        this.type = type;\n        this.content = content;\n        this.alias = alias;\n      };\n      Token.stringify = function (o, language, parent) {\n        if (typeof o === 'string') {\n          return o;\n        }\n        if (_.util.type(o) === 'Array') {\n          return o.map(function (element) {\n            return Token.stringify(element, language, o);\n          }).join('');\n        }\n        var env = {\n          type: o.type,\n          content: Token.stringify(o.content, language, parent),\n          tag: 'span',\n          classes: [\n            'token',\n            o.type\n          ],\n          attributes: {},\n          language: language,\n          parent: parent\n        };\n        if (env.type === 'comment') {\n          env.attributes.spellcheck = 'true';\n        }\n        if (o.alias) {\n          var aliases = _.util.type(o.alias) === 'Array' ? o.alias : [o.alias];\n          Array.prototype.push.apply(env.classes, aliases);\n        }\n        _.hooks.run('wrap', env);\n        var attributes = '';\n        for (var name in env.attributes) {\n          attributes += (attributes ? ' ' : '') + name + '=\"' + (env.attributes[name] || '') + '\"';\n        }\n        return '<' + env.tag + ' class=\"' + env.classes.join(' ') + '\" ' + attributes + '>' + env.content + '</' + env.tag + '>';\n      };\n      if (!_self.document) {\n        if (!_self.addEventListener) {\n          return _self.Prism;\n        }\n        _self.addEventListener('message', function (evt) {\n          var message = JSON.parse(evt.data), lang = message.language, code = message.code, immediateClose = message.immediateClose;\n          _self.postMessage(_.highlight(code, _.languages[lang], lang));\n          if (immediateClose) {\n            _self.close();\n          }\n        }, false);\n        return _self.Prism;\n      }\n    }();\n    if (typeof global$2 !== 'undefined') {\n      global$2.Prism = Prism;\n    }\n    Prism.languages.markup = {\n      comment: /<!--[\\w\\W]*?-->/,\n      prolog: /<\\?[\\w\\W]+?\\?>/,\n      doctype: /<!DOCTYPE[\\w\\W]+?>/,\n      cdata: /<!\\[CDATA\\[[\\w\\W]*?]]>/i,\n      tag: {\n        pattern: /<\\/?[^\\s>\\/=.]+(?:\\s+[^\\s>\\/=]+(?:=(?:(\"|')(?:\\\\\\1|\\\\?(?!\\1)[\\w\\W])*\\1|[^\\s'\">=]+))?)*\\s*\\/?>/i,\n        inside: {\n          'tag': {\n            pattern: /^<\\/?[^\\s>\\/]+/i,\n            inside: {\n              punctuation: /^<\\/?/,\n              namespace: /^[^\\s>\\/:]+:/\n            }\n          },\n          'attr-value': {\n            pattern: /=(?:('|\")[\\w\\W]*?(\\1)|[^\\s>]+)/i,\n            inside: { punctuation: /[=>\"']/ }\n          },\n          'punctuation': /\\/?>/,\n          'attr-name': {\n            pattern: /[^\\s>\\/]+/,\n            inside: { namespace: /^[^\\s>\\/:]+:/ }\n          }\n        }\n      },\n      entity: /&#?[\\da-z]{1,8};/i\n    };\n    Prism.hooks.add('wrap', function (env) {\n      if (env.type === 'entity') {\n        env.attributes.title = env.content.replace(/&amp;/, '&');\n      }\n    });\n    Prism.languages.xml = Prism.languages.markup;\n    Prism.languages.html = Prism.languages.markup;\n    Prism.languages.mathml = Prism.languages.markup;\n    Prism.languages.svg = Prism.languages.markup;\n    Prism.languages.css = {\n      comment: /\\/\\*[\\w\\W]*?\\*\\//,\n      atrule: {\n        pattern: /@[\\w-]+?.*?(;|(?=\\s*\\{))/i,\n        inside: { rule: /@[\\w-]+/ }\n      },\n      url: /url\\((?:([\"'])(\\\\(?:\\r\\n|[\\w\\W])|(?!\\1)[^\\\\\\r\\n])*\\1|.*?)\\)/i,\n      selector: /[^\\{\\}\\s][^\\{\\};]*?(?=\\s*\\{)/,\n      string: /(\"|')(\\\\(?:\\r\\n|[\\w\\W])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n      property: /(\\b|\\B)[\\w-]+(?=\\s*:)/i,\n      important: /\\B!important\\b/i,\n      function: /[-a-z0-9]+(?=\\()/i,\n      punctuation: /[(){};:]/\n    };\n    Prism.languages.css.atrule.inside.rest = Prism.util.clone(Prism.languages.css);\n    if (Prism.languages.markup) {\n      Prism.languages.insertBefore('markup', 'tag', {\n        style: {\n          pattern: /<style[\\w\\W]*?>[\\w\\W]*?<\\/style>/i,\n          inside: {\n            tag: {\n              pattern: /<style[\\w\\W]*?>|<\\/style>/i,\n              inside: Prism.languages.markup.tag.inside\n            },\n            rest: Prism.languages.css\n          },\n          alias: 'language-css'\n        }\n      });\n      Prism.languages.insertBefore('inside', 'attr-value', {\n        'style-attr': {\n          pattern: /\\s*style=(\"|').*?\\1/i,\n          inside: {\n            'attr-name': {\n              pattern: /^\\s*style/i,\n              inside: Prism.languages.markup.tag.inside\n            },\n            'punctuation': /^\\s*=\\s*['\"]|['\"]\\s*$/,\n            'attr-value': {\n              pattern: /.+/i,\n              inside: Prism.languages.css\n            }\n          },\n          alias: 'language-css'\n        }\n      }, Prism.languages.markup.tag);\n    }\n    Prism.languages.clike = {\n      'comment': [\n        {\n          pattern: /(^|[^\\\\])\\/\\*[\\w\\W]*?\\*\\//,\n          lookbehind: true\n        },\n        {\n          pattern: /(^|[^\\\\:])\\/\\/.*/,\n          lookbehind: true\n        }\n      ],\n      'string': /([\"'])(\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n      'class-name': {\n        pattern: /((?:\\b(?:class|interface|extends|implements|trait|instanceof|new)\\s+)|(?:catch\\s+\\())[a-z0-9_\\.\\\\]+/i,\n        lookbehind: true,\n        inside: { punctuation: /(\\.|\\\\)/ }\n      },\n      'keyword': /\\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\\b/,\n      'boolean': /\\b(true|false)\\b/,\n      'function': /[a-z0-9_]+(?=\\()/i,\n      'number': /\\b-?(?:0x[\\da-f]+|\\d*\\.?\\d+(?:e[+-]?\\d+)?)\\b/i,\n      'operator': /--?|\\+\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\|\\|?|\\?|\\*|\\/|~|\\^|%/,\n      'punctuation': /[{}[\\];(),.:]/\n    };\n    Prism.languages.javascript = Prism.languages.extend('clike', {\n      keyword: /\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\\b/,\n      number: /\\b-?(0x[\\dA-Fa-f]+|0b[01]+|0o[0-7]+|\\d*\\.?\\d+([Ee][+-]?\\d+)?|NaN|Infinity)\\b/,\n      function: /[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*(?=\\()/i\n    });\n    Prism.languages.insertBefore('javascript', 'keyword', {\n      regex: {\n        pattern: /(^|[^/])\\/(?!\\/)(\\[.+?]|\\\\.|[^/\\\\\\r\\n])+\\/[gimyu]{0,5}(?=\\s*($|[\\r\\n,.;})]))/,\n        lookbehind: true\n      }\n    });\n    Prism.languages.insertBefore('javascript', 'class-name', {\n      'template-string': {\n        pattern: /`(?:\\\\`|\\\\?[^`])*`/,\n        inside: {\n          interpolation: {\n            pattern: /\\$\\{[^}]+\\}/,\n            inside: {\n              'interpolation-punctuation': {\n                pattern: /^\\$\\{|\\}$/,\n                alias: 'punctuation'\n              },\n              'rest': Prism.languages.javascript\n            }\n          },\n          string: /[\\s\\S]+/\n        }\n      }\n    });\n    if (Prism.languages.markup) {\n      Prism.languages.insertBefore('markup', 'tag', {\n        script: {\n          pattern: /<script[\\w\\W]*?>[\\w\\W]*?<\\/script>/i,\n          inside: {\n            tag: {\n              pattern: /<script[\\w\\W]*?>|<\\/script>/i,\n              inside: Prism.languages.markup.tag.inside\n            },\n            rest: Prism.languages.javascript\n          },\n          alias: 'language-javascript'\n        }\n      });\n    }\n    Prism.languages.js = Prism.languages.javascript;\n    Prism.languages.c = Prism.languages.extend('clike', {\n      keyword: /\\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\\b/,\n      operator: /\\-[>-]?|\\+\\+?|!=?|<<?=?|>>?=?|==?|&&?|\\|?\\||[~^%?*\\/]/,\n      number: /\\b-?(?:0x[\\da-f]+|\\d*\\.?\\d+(?:e[+-]?\\d+)?)[ful]*\\b/i\n    });\n    Prism.languages.insertBefore('c', 'string', {\n      macro: {\n        pattern: /(^\\s*)#\\s*[a-z]+([^\\r\\n\\\\]|\\\\.|\\\\(?:\\r\\n?|\\n))*/im,\n        lookbehind: true,\n        alias: 'property',\n        inside: {\n          string: {\n            pattern: /(#\\s*include\\s*)(<.+?>|(\"|')(\\\\?.)+?\\3)/,\n            lookbehind: true\n          }\n        }\n      }\n    });\n    delete Prism.languages.c['class-name'];\n    delete Prism.languages.c.boolean;\n    Prism.languages.csharp = Prism.languages.extend('clike', {\n      keyword: /\\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\\b/,\n      string: [\n        /@(\"|')(\\1\\1|\\\\\\1|\\\\?(?!\\1)[\\s\\S])*\\1/,\n        /(\"|')(\\\\?.)*?\\1/\n      ],\n      number: /\\b-?(0x[\\da-f]+|\\d*\\.?\\d+)\\b/i\n    });\n    Prism.languages.insertBefore('csharp', 'keyword', {\n      preprocessor: {\n        pattern: /(^\\s*)#.*/m,\n        lookbehind: true\n      }\n    });\n    Prism.languages.cpp = Prism.languages.extend('c', {\n      keyword: /\\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\\b/,\n      boolean: /\\b(true|false)\\b/,\n      operator: /[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\\->|:{1,2}|={1,2}|\\^|~|%|&{1,2}|\\|?\\||\\?|\\*|\\/|\\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\\b/\n    });\n    Prism.languages.insertBefore('cpp', 'keyword', {\n      'class-name': {\n        pattern: /(class\\s+)[a-z0-9_]+/i,\n        lookbehind: true\n      }\n    });\n    Prism.languages.java = Prism.languages.extend('clike', {\n      keyword: /\\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\\b/,\n      number: /\\b0b[01]+\\b|\\b0x[\\da-f]*\\.?[\\da-fp\\-]+\\b|\\b\\d*\\.?\\d+(?:e[+-]?\\d+)?[df]?\\b/i,\n      operator: {\n        pattern: /(^|[^.])(?:\\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\\|[|=]?|\\*=?|\\/=?|%=?|\\^=?|[?:~])/m,\n        lookbehind: true\n      }\n    });\n    Prism.languages.php = Prism.languages.extend('clike', {\n      keyword: /\\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\\b/i,\n      constant: /\\b[A-Z0-9_]{2,}\\b/,\n      comment: {\n        pattern: /(^|[^\\\\])(?:\\/\\*[\\w\\W]*?\\*\\/|\\/\\/.*)/,\n        lookbehind: true\n      }\n    });\n    Prism.languages.insertBefore('php', 'class-name', {\n      'shell-comment': {\n        pattern: /(^|[^\\\\])#.*/,\n        lookbehind: true,\n        alias: 'comment'\n      }\n    });\n    Prism.languages.insertBefore('php', 'keyword', {\n      delimiter: /\\?>|<\\?(?:php)?/i,\n      variable: /\\$\\w+\\b/i,\n      package: {\n        pattern: /(\\\\|namespace\\s+|use\\s+)[\\w\\\\]+/,\n        lookbehind: true,\n        inside: { punctuation: /\\\\/ }\n      }\n    });\n    Prism.languages.insertBefore('php', 'operator', {\n      property: {\n        pattern: /(->)[\\w]+/,\n        lookbehind: true\n      }\n    });\n    if (Prism.languages.markup) {\n      Prism.hooks.add('before-highlight', function (env) {\n        if (env.language !== 'php') {\n          return;\n        }\n        env.tokenStack = [];\n        env.backupCode = env.code;\n        env.code = env.code.replace(/(?:<\\?php|<\\?)[\\w\\W]*?(?:\\?>)/ig, function (match) {\n          env.tokenStack.push(match);\n          return '{{{PHP' + env.tokenStack.length + '}}}';\n        });\n      });\n      Prism.hooks.add('before-insert', function (env) {\n        if (env.language === 'php') {\n          env.code = env.backupCode;\n          delete env.backupCode;\n        }\n      });\n      Prism.hooks.add('after-highlight', function (env) {\n        if (env.language !== 'php') {\n          return;\n        }\n        for (var i = 0, t = void 0; t = env.tokenStack[i]; i++) {\n          env.highlightedCode = env.highlightedCode.replace('{{{PHP' + (i + 1) + '}}}', Prism.highlight(t, env.grammar, 'php').replace(/\\$/g, '$$$$'));\n        }\n        env.element.innerHTML = env.highlightedCode;\n      });\n      Prism.hooks.add('wrap', function (env) {\n        if (env.language === 'php' && env.type === 'markup') {\n          env.content = env.content.replace(/(\\{\\{\\{PHP[0-9]+\\}\\}\\})/g, '<span class=\"token php\">$1</span>');\n        }\n      });\n      Prism.languages.insertBefore('php', 'comment', {\n        markup: {\n          pattern: /<[^?]\\/?(.*?)>/,\n          inside: Prism.languages.markup\n        },\n        php: /\\{\\{\\{PHP[0-9]+\\}\\}\\}/\n      });\n    }\n    Prism.languages.python = {\n      'comment': {\n        pattern: /(^|[^\\\\])#.*/,\n        lookbehind: true\n      },\n      'string': /\"\"\"[\\s\\S]+?\"\"\"|'''[\\s\\S]+?'''|(\"|')(?:\\\\?.)*?\\1/,\n      'function': {\n        pattern: /((?:^|\\s)def[ \\t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\\()/g,\n        lookbehind: true\n      },\n      'class-name': {\n        pattern: /(\\bclass\\s+)[a-z0-9_]+/i,\n        lookbehind: true\n      },\n      'keyword': /\\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\\b/,\n      'boolean': /\\b(?:True|False)\\b/,\n      'number': /\\b-?(?:0[bo])?(?:(?:\\d|0x[\\da-f])[\\da-f]*\\.?\\d*|\\.\\d+)(?:e[+-]?\\d+)?j?\\b/i,\n      'operator': /[-+%=]=?|!=|\\*\\*?=?|\\/\\/?=?|<[<=>]?|>[=>]?|[&|^~]|\\b(?:or|and|not)\\b/,\n      'punctuation': /[{}[\\];(),.:]/\n    };\n    (function (Prism) {\n      Prism.languages.ruby = Prism.languages.extend('clike', {\n        comment: /#(?!\\{[^\\r\\n]*?\\}).*/,\n        keyword: /\\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\\b/\n      });\n      var interpolation = {\n        pattern: /#\\{[^}]+\\}/,\n        inside: {\n          delimiter: {\n            pattern: /^#\\{|\\}$/,\n            alias: 'tag'\n          },\n          rest: Prism.util.clone(Prism.languages.ruby)\n        }\n      };\n      Prism.languages.insertBefore('ruby', 'keyword', {\n        regex: [\n          {\n            pattern: /%r([^a-zA-Z0-9\\s\\{\\(\\[<])(?:[^\\\\]|\\\\[\\s\\S])*?\\1[gim]{0,3}/,\n            inside: { interpolation: interpolation }\n          },\n          {\n            pattern: /%r\\((?:[^()\\\\]|\\\\[\\s\\S])*\\)[gim]{0,3}/,\n            inside: { interpolation: interpolation }\n          },\n          {\n            pattern: /%r\\{(?:[^#{}\\\\]|#(?:\\{[^}]+\\})?|\\\\[\\s\\S])*\\}[gim]{0,3}/,\n            inside: { interpolation: interpolation }\n          },\n          {\n            pattern: /%r\\[(?:[^\\[\\]\\\\]|\\\\[\\s\\S])*\\][gim]{0,3}/,\n            inside: { interpolation: interpolation }\n          },\n          {\n            pattern: /%r<(?:[^<>\\\\]|\\\\[\\s\\S])*>[gim]{0,3}/,\n            inside: { interpolation: interpolation }\n          },\n          {\n            pattern: /(^|[^/])\\/(?!\\/)(\\[.+?]|\\\\.|[^/\\r\\n])+\\/[gim]{0,3}(?=\\s*($|[\\r\\n,.;})]))/,\n            lookbehind: true\n          }\n        ],\n        variable: /[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\\b)/,\n        symbol: /:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\\b)/\n      });\n      Prism.languages.insertBefore('ruby', 'number', {\n        builtin: /\\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\\b/,\n        constant: /\\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\\b)/\n      });\n      Prism.languages.ruby.string = [\n        {\n          pattern: /%[qQiIwWxs]?([^a-zA-Z0-9\\s\\{\\(\\[<])(?:[^\\\\]|\\\\[\\s\\S])*?\\1/,\n          inside: { interpolation: interpolation }\n        },\n        {\n          pattern: /%[qQiIwWxs]?\\((?:[^()\\\\]|\\\\[\\s\\S])*\\)/,\n          inside: { interpolation: interpolation }\n        },\n        {\n          pattern: /%[qQiIwWxs]?\\{(?:[^#{}\\\\]|#(?:\\{[^}]+\\})?|\\\\[\\s\\S])*\\}/,\n          inside: { interpolation: interpolation }\n        },\n        {\n          pattern: /%[qQiIwWxs]?\\[(?:[^\\[\\]\\\\]|\\\\[\\s\\S])*\\]/,\n          inside: { interpolation: interpolation }\n        },\n        {\n          pattern: /%[qQiIwWxs]?<(?:[^<>\\\\]|\\\\[\\s\\S])*>/,\n          inside: { interpolation: interpolation }\n        },\n        {\n          pattern: /(\"|')(#\\{[^}]+\\}|\\\\(?:\\r?\\n|\\r)|\\\\?.)*?\\1/,\n          inside: { interpolation: interpolation }\n        }\n      ];\n    }(Prism));\n\n    function isCodeSample(elm) {\n      return elm && elm.nodeName === 'PRE' && elm.className.indexOf('language-') !== -1;\n    }\n    function trimArg(predicateFn) {\n      return function (arg1, arg2) {\n        return predicateFn(arg2);\n      };\n    }\n    var Utils = {\n      isCodeSample: isCodeSample,\n      trimArg: trimArg\n    };\n\n    var getSelectedCodeSample = function (editor) {\n      var node = editor.selection.getNode();\n      if (Utils.isCodeSample(node)) {\n        return node;\n      }\n      return null;\n    };\n    var insertCodeSample = function (editor, language, code) {\n      editor.undoManager.transact(function () {\n        var node = getSelectedCodeSample(editor);\n        code = global$1.DOM.encode(code);\n        if (node) {\n          editor.dom.setAttrib(node, 'class', 'language-' + language);\n          node.innerHTML = code;\n          Prism.highlightElement(node);\n          editor.selection.select(node);\n        } else {\n          editor.insertContent('<pre id=\"__new\" class=\"language-' + language + '\">' + code + '</pre>');\n          editor.selection.select(editor.$('#__new').removeAttr('id')[0]);\n        }\n      });\n    };\n    var getCurrentCode = function (editor) {\n      var node = getSelectedCodeSample(editor);\n      if (node) {\n        return node.textContent;\n      }\n      return '';\n    };\n    var CodeSample = {\n      getSelectedCodeSample: getSelectedCodeSample,\n      insertCodeSample: insertCodeSample,\n      getCurrentCode: getCurrentCode\n    };\n\n    var getLanguages$1 = function (editor) {\n      var defaultLanguages = [\n        {\n          text: 'HTML/XML',\n          value: 'markup'\n        },\n        {\n          text: 'JavaScript',\n          value: 'javascript'\n        },\n        {\n          text: 'CSS',\n          value: 'css'\n        },\n        {\n          text: 'PHP',\n          value: 'php'\n        },\n        {\n          text: 'Ruby',\n          value: 'ruby'\n        },\n        {\n          text: 'Python',\n          value: 'python'\n        },\n        {\n          text: 'Java',\n          value: 'java'\n        },\n        {\n          text: 'C',\n          value: 'c'\n        },\n        {\n          text: 'C#',\n          value: 'csharp'\n        },\n        {\n          text: 'C++',\n          value: 'cpp'\n        }\n      ];\n      var customLanguages = Settings.getLanguages(editor);\n      return customLanguages ? customLanguages : defaultLanguages;\n    };\n    var getCurrentLanguage = function (editor) {\n      var matches;\n      var node = CodeSample.getSelectedCodeSample(editor);\n      if (node) {\n        matches = node.className.match(/language-(\\w+)/);\n        return matches ? matches[1] : '';\n      }\n      return '';\n    };\n    var Languages = {\n      getLanguages: getLanguages$1,\n      getCurrentLanguage: getCurrentLanguage\n    };\n\n    var Dialog = {\n      open: function (editor) {\n        var minWidth = Settings.getDialogMinWidth(editor);\n        var minHeight = Settings.getDialogMinHeight(editor);\n        var currentLanguage = Languages.getCurrentLanguage(editor);\n        var currentLanguages = Languages.getLanguages(editor);\n        var currentCode = CodeSample.getCurrentCode(editor);\n        editor.windowManager.open({\n          title: 'Insert/Edit code sample',\n          minWidth: minWidth,\n          minHeight: minHeight,\n          layout: 'flex',\n          direction: 'column',\n          align: 'stretch',\n          body: [\n            {\n              type: 'listbox',\n              name: 'language',\n              label: 'Language',\n              maxWidth: 200,\n              value: currentLanguage,\n              values: currentLanguages\n            },\n            {\n              type: 'textbox',\n              name: 'code',\n              multiline: true,\n              spellcheck: false,\n              ariaLabel: 'Code view',\n              flex: 1,\n              style: 'direction: ltr; text-align: left',\n              classes: 'monospace',\n              value: currentCode,\n              autofocus: true\n            }\n          ],\n          onSubmit: function (e) {\n            CodeSample.insertCodeSample(editor, e.data.language, e.data.code);\n          }\n        });\n      }\n    };\n\n    var register = function (editor) {\n      editor.addCommand('codesample', function () {\n        var node = editor.selection.getNode();\n        if (editor.selection.isCollapsed() || Utils.isCodeSample(node)) {\n          Dialog.open(editor);\n        } else {\n          editor.formatter.toggle('code');\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor) {\n      var $ = editor.$;\n      editor.on('PreProcess', function (e) {\n        $('pre[contenteditable=false]', e.node).filter(Utils.trimArg(Utils.isCodeSample)).each(function (idx, elm) {\n          var $elm = $(elm), code = elm.textContent;\n          $elm.attr('class', $.trim($elm.attr('class')));\n          $elm.removeAttr('contentEditable');\n          $elm.empty().append($('<code></code>').each(function () {\n            this.textContent = code;\n          }));\n        });\n      });\n      editor.on('SetContent', function () {\n        var unprocessedCodeSamples = $('pre').filter(Utils.trimArg(Utils.isCodeSample)).filter(function (idx, elm) {\n          return elm.contentEditable !== 'false';\n        });\n        if (unprocessedCodeSamples.length) {\n          editor.undoManager.transact(function () {\n            unprocessedCodeSamples.each(function (idx, elm) {\n              $(elm).find('br').each(function (idx, elm) {\n                elm.parentNode.replaceChild(editor.getDoc().createTextNode('\\n'), elm);\n              });\n              elm.contentEditable = false;\n              elm.innerHTML = editor.dom.encode(elm.textContent);\n              Prism.highlightElement(elm);\n              elm.className = $.trim(elm.className);\n            });\n          });\n        }\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var loadCss = function (editor, pluginUrl, addedInlineCss, addedCss) {\n      var linkElm;\n      var contentCss = Settings.getContentCss(editor);\n      if (editor.inline && addedInlineCss.get()) {\n        return;\n      }\n      if (!editor.inline && addedCss.get()) {\n        return;\n      }\n      if (editor.inline) {\n        addedInlineCss.set(true);\n      } else {\n        addedCss.set(true);\n      }\n      if (contentCss !== false) {\n        linkElm = editor.dom.create('link', {\n          rel: 'stylesheet',\n          href: contentCss ? contentCss : pluginUrl + '/css/prism.css'\n        });\n        editor.getDoc().getElementsByTagName('head')[0].appendChild(linkElm);\n      }\n    };\n    var LoadCss = { loadCss: loadCss };\n\n    var register$1 = function (editor) {\n      editor.addButton('codesample', {\n        cmd: 'codesample',\n        title: 'Insert/Edit code sample'\n      });\n      editor.addMenuItem('codesample', {\n        cmd: 'codesample',\n        text: 'Code sample',\n        icon: 'codesample'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    var addedInlineCss = Cell(false);\n    global.add('codesample', function (editor, pluginUrl) {\n      var addedCss = Cell(false);\n      FilterContent.setup(editor);\n      Buttons.register(editor);\n      Commands.register(editor);\n      editor.on('init', function () {\n        LoadCss.loadCss(editor, pluginUrl, addedInlineCss, addedCss);\n      });\n      editor.on('dblclick', function (ev) {\n        if (Utils.isCodeSample(ev.target)) {\n          Dialog.open(editor);\n        }\n      });\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","(function () {\nvar autoresize = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var getAutoResizeMinHeight = function (editor) {\n      return parseInt(editor.getParam('autoresize_min_height', editor.getElement().offsetHeight), 10);\n    };\n    var getAutoResizeMaxHeight = function (editor) {\n      return parseInt(editor.getParam('autoresize_max_height', 0), 10);\n    };\n    var getAutoResizeOverflowPadding = function (editor) {\n      return editor.getParam('autoresize_overflow_padding', 1);\n    };\n    var getAutoResizeBottomMargin = function (editor) {\n      return editor.getParam('autoresize_bottom_margin', 50);\n    };\n    var shouldAutoResizeOnInit = function (editor) {\n      return editor.getParam('autoresize_on_init', true);\n    };\n    var Settings = {\n      getAutoResizeMinHeight: getAutoResizeMinHeight,\n      getAutoResizeMaxHeight: getAutoResizeMaxHeight,\n      getAutoResizeOverflowPadding: getAutoResizeOverflowPadding,\n      getAutoResizeBottomMargin: getAutoResizeBottomMargin,\n      shouldAutoResizeOnInit: shouldAutoResizeOnInit\n    };\n\n    var isFullscreen = function (editor) {\n      return editor.plugins.fullscreen && editor.plugins.fullscreen.isFullscreen();\n    };\n    var wait = function (editor, oldSize, times, interval, callback) {\n      global$2.setEditorTimeout(editor, function () {\n        resize(editor, oldSize);\n        if (times--) {\n          wait(editor, oldSize, times, interval, callback);\n        } else if (callback) {\n          callback();\n        }\n      }, interval);\n    };\n    var toggleScrolling = function (editor, state) {\n      var body = editor.getBody();\n      if (body) {\n        body.style.overflowY = state ? '' : 'hidden';\n        if (!state) {\n          body.scrollTop = 0;\n        }\n      }\n    };\n    var resize = function (editor, oldSize) {\n      var deltaSize, doc, body, resizeHeight, myHeight;\n      var marginTop, marginBottom, paddingTop, paddingBottom, borderTop, borderBottom;\n      var dom = editor.dom;\n      doc = editor.getDoc();\n      if (!doc) {\n        return;\n      }\n      if (isFullscreen(editor)) {\n        toggleScrolling(editor, true);\n        return;\n      }\n      body = doc.body;\n      resizeHeight = Settings.getAutoResizeMinHeight(editor);\n      marginTop = dom.getStyle(body, 'margin-top', true);\n      marginBottom = dom.getStyle(body, 'margin-bottom', true);\n      paddingTop = dom.getStyle(body, 'padding-top', true);\n      paddingBottom = dom.getStyle(body, 'padding-bottom', true);\n      borderTop = dom.getStyle(body, 'border-top-width', true);\n      borderBottom = dom.getStyle(body, 'border-bottom-width', true);\n      myHeight = body.offsetHeight + parseInt(marginTop, 10) + parseInt(marginBottom, 10) + parseInt(paddingTop, 10) + parseInt(paddingBottom, 10) + parseInt(borderTop, 10) + parseInt(borderBottom, 10);\n      if (isNaN(myHeight) || myHeight <= 0) {\n        myHeight = global$1.ie ? body.scrollHeight : global$1.webkit && body.clientHeight === 0 ? 0 : body.offsetHeight;\n      }\n      if (myHeight > Settings.getAutoResizeMinHeight(editor)) {\n        resizeHeight = myHeight;\n      }\n      var maxHeight = Settings.getAutoResizeMaxHeight(editor);\n      if (maxHeight && myHeight > maxHeight) {\n        resizeHeight = maxHeight;\n        toggleScrolling(editor, true);\n      } else {\n        toggleScrolling(editor, false);\n      }\n      if (resizeHeight !== oldSize.get()) {\n        deltaSize = resizeHeight - oldSize.get();\n        dom.setStyle(editor.iframeElement, 'height', resizeHeight + 'px');\n        oldSize.set(resizeHeight);\n        if (global$1.webkit && deltaSize < 0) {\n          resize(editor, oldSize);\n        }\n      }\n    };\n    var setup = function (editor, oldSize) {\n      editor.on('init', function () {\n        var overflowPadding, bottomMargin;\n        var dom = editor.dom;\n        overflowPadding = Settings.getAutoResizeOverflowPadding(editor);\n        bottomMargin = Settings.getAutoResizeBottomMargin(editor);\n        if (overflowPadding !== false) {\n          dom.setStyles(editor.getBody(), {\n            paddingLeft: overflowPadding,\n            paddingRight: overflowPadding\n          });\n        }\n        if (bottomMargin !== false) {\n          dom.setStyles(editor.getBody(), { paddingBottom: bottomMargin });\n        }\n      });\n      editor.on('nodechange setcontent keyup FullscreenStateChanged', function (e) {\n        resize(editor, oldSize);\n      });\n      if (Settings.shouldAutoResizeOnInit(editor)) {\n        editor.on('init', function () {\n          wait(editor, oldSize, 20, 100, function () {\n            wait(editor, oldSize, 5, 1000);\n          });\n        });\n      }\n    };\n    var Resize = {\n      setup: setup,\n      resize: resize\n    };\n\n    var register = function (editor, oldSize) {\n      editor.addCommand('mceAutoResize', function () {\n        Resize.resize(editor, oldSize);\n      });\n    };\n    var Commands = { register: register };\n\n    global.add('autoresize', function (editor) {\n      if (!editor.inline) {\n        var oldSize = Cell(0);\n        Commands.register(editor, oldSize);\n        Resize.setup(editor, oldSize);\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"paste\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/paste')\n//   ES2015:\n//     import 'tinymce/plugins/paste'\nrequire('./plugin.js');","(function () {\nvar link = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var assumeExternalTargets = function (editorSettings) {\n      return typeof editorSettings.link_assume_external_targets === 'boolean' ? editorSettings.link_assume_external_targets : false;\n    };\n    var hasContextToolbar = function (editorSettings) {\n      return typeof editorSettings.link_context_toolbar === 'boolean' ? editorSettings.link_context_toolbar : false;\n    };\n    var getLinkList = function (editorSettings) {\n      return editorSettings.link_list;\n    };\n    var hasDefaultLinkTarget = function (editorSettings) {\n      return typeof editorSettings.default_link_target === 'string';\n    };\n    var getDefaultLinkTarget = function (editorSettings) {\n      return editorSettings.default_link_target;\n    };\n    var getTargetList = function (editorSettings) {\n      return editorSettings.target_list;\n    };\n    var setTargetList = function (editor, list) {\n      editor.settings.target_list = list;\n    };\n    var shouldShowTargetList = function (editorSettings) {\n      return getTargetList(editorSettings) !== false;\n    };\n    var getRelList = function (editorSettings) {\n      return editorSettings.rel_list;\n    };\n    var hasRelList = function (editorSettings) {\n      return getRelList(editorSettings) !== undefined;\n    };\n    var getLinkClassList = function (editorSettings) {\n      return editorSettings.link_class_list;\n    };\n    var hasLinkClassList = function (editorSettings) {\n      return getLinkClassList(editorSettings) !== undefined;\n    };\n    var shouldShowLinkTitle = function (editorSettings) {\n      return editorSettings.link_title !== false;\n    };\n    var allowUnsafeLinkTarget = function (editorSettings) {\n      return typeof editorSettings.allow_unsafe_link_target === 'boolean' ? editorSettings.allow_unsafe_link_target : false;\n    };\n    var Settings = {\n      assumeExternalTargets: assumeExternalTargets,\n      hasContextToolbar: hasContextToolbar,\n      getLinkList: getLinkList,\n      hasDefaultLinkTarget: hasDefaultLinkTarget,\n      getDefaultLinkTarget: getDefaultLinkTarget,\n      getTargetList: getTargetList,\n      setTargetList: setTargetList,\n      shouldShowTargetList: shouldShowTargetList,\n      getRelList: getRelList,\n      hasRelList: hasRelList,\n      getLinkClassList: getLinkClassList,\n      hasLinkClassList: hasLinkClassList,\n      shouldShowLinkTitle: shouldShowLinkTitle,\n      allowUnsafeLinkTarget: allowUnsafeLinkTarget\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var appendClickRemove = function (link, evt) {\n      domGlobals.document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      domGlobals.document.body.removeChild(link);\n    };\n    var open = function (url) {\n      if (!global$3.ie || global$3.ie > 10) {\n        var link = domGlobals.document.createElement('a');\n        link.target = '_blank';\n        link.href = url;\n        link.rel = 'noreferrer noopener';\n        var evt = domGlobals.document.createEvent('MouseEvents');\n        evt.initMouseEvent('click', true, true, domGlobals.window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n        appendClickRemove(link, evt);\n      } else {\n        var win = domGlobals.window.open('', '_blank');\n        if (win) {\n          win.opener = null;\n          var doc = win.document;\n          doc.open();\n          doc.write('<meta http-equiv=\"refresh\" content=\"0; url=' + global$2.DOM.encode(url) + '\">');\n          doc.close();\n        }\n      }\n    };\n    var OpenUrl = { open: open };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var toggleTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var newRel = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rel) {\n        return global$4.trim(rel.sort().join(' '));\n      };\n      var addTargetRules = function (rel) {\n        rel = removeTargetRules(rel);\n        return rel.length ? rel.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rel) {\n        return rel.filter(function (val) {\n          return global$4.inArray(rules, val) === -1;\n        });\n      };\n      newRel = isUnsafe ? addTargetRules(newRel) : removeTargetRules(newRel);\n      return newRel.length ? toString(newRel) : null;\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var isLink = function (elm) {\n      return elm && elm.nodeName === 'A' && elm.href;\n    };\n    var hasLinks = function (elements) {\n      return global$4.grep(elements, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (html) {\n      if (/</.test(html) && (!/^<a [^>]+>[^<]+<\\/a>$/.test(html) || html.indexOf('href=') === -1)) {\n        return false;\n      }\n      return true;\n    };\n    var isImageFigure = function (node) {\n      return node && node.nodeName === 'FIGURE' && /\\bimage\\b/i.test(node.className);\n    };\n    var link = function (editor, attachState) {\n      return function (data) {\n        editor.undoManager.transact(function () {\n          var selectedElm = editor.selection.getNode();\n          var anchorElm = getAnchorElement(editor, selectedElm);\n          var linkAttrs = {\n            href: data.href,\n            target: data.target ? data.target : null,\n            rel: data.rel ? data.rel : null,\n            class: data.class ? data.class : null,\n            title: data.title ? data.title : null\n          };\n          if (!Settings.hasRelList(editor.settings) && Settings.allowUnsafeLinkTarget(editor.settings) === false) {\n            linkAttrs.rel = toggleTargetRules(linkAttrs.rel, linkAttrs.target === '_blank');\n          }\n          if (data.href === attachState.href) {\n            attachState.attach();\n            attachState = {};\n          }\n          if (anchorElm) {\n            editor.focus();\n            if (data.hasOwnProperty('text')) {\n              if ('innerText' in anchorElm) {\n                anchorElm.innerText = data.text;\n              } else {\n                anchorElm.textContent = data.text;\n              }\n            }\n            editor.dom.setAttribs(anchorElm, linkAttrs);\n            editor.selection.select(anchorElm);\n            editor.undoManager.add();\n          } else {\n            if (isImageFigure(selectedElm)) {\n              linkImageFigure(editor, selectedElm, linkAttrs);\n            } else if (data.hasOwnProperty('text')) {\n              editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(data.text)));\n            } else {\n              editor.execCommand('mceInsertLink', false, linkAttrs);\n            }\n          }\n        });\n      };\n    };\n    var unlink = function (editor) {\n      return function () {\n        editor.undoManager.transact(function () {\n          var node = editor.selection.getNode();\n          if (isImageFigure(node)) {\n            unlinkImageFigure(editor, node);\n          } else {\n            editor.execCommand('unlink');\n          }\n        });\n      };\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var a, img;\n      img = editor.dom.select('img', fig)[0];\n      if (img) {\n        a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var a, img;\n      img = editor.dom.select('img', fig)[0];\n      if (img) {\n        a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n    var Utils = {\n      link: link,\n      unlink: unlink,\n      isLink: isLink,\n      hasLinks: hasLinks,\n      isOnlyTextSelected: isOnlyTextSelected,\n      getAnchorElement: getAnchorElement,\n      getAnchorText: getAnchorText,\n      toggleTargetRules: toggleTargetRules\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var attachState = {};\n    var createLinkList = function (editor, callback) {\n      var linkList = Settings.getLinkList(editor.settings);\n      if (typeof linkList === 'string') {\n        global$6.send({\n          url: linkList,\n          success: function (text) {\n            callback(editor, JSON.parse(text));\n          }\n        });\n      } else if (typeof linkList === 'function') {\n        linkList(function (list) {\n          callback(editor, list);\n        });\n      } else {\n        callback(editor, linkList);\n      }\n    };\n    var buildListItems = function (inputList, itemCallback, startItems) {\n      var appendItems = function (values, output) {\n        output = output || [];\n        global$4.each(values, function (item) {\n          var menuItem = { text: item.text || item.title };\n          if (item.menu) {\n            menuItem.menu = appendItems(item.menu);\n          } else {\n            menuItem.value = item.value;\n            if (itemCallback) {\n              itemCallback(menuItem);\n            }\n          }\n          output.push(menuItem);\n        });\n        return output;\n      };\n      return appendItems(inputList, startItems || []);\n    };\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$5.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var showDialog = function (editor, linkList) {\n      var data = {};\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var anchorElm, initialText;\n      var win, onlyText, textListCtrl, linkListCtrl, relListCtrl, targetListCtrl, classListCtrl, linkTitleCtrl, value;\n      var linkListChangeHandler = function (e) {\n        var textCtrl = win.find('#text');\n        if (!textCtrl.value() || e.lastControl && textCtrl.value() === e.lastControl.text()) {\n          textCtrl.value(e.control.text());\n        }\n        win.find('#href').value(e.control.value());\n      };\n      var buildAnchorListControl = function (url) {\n        var anchorList = [];\n        global$4.each(editor.dom.select('a:not([href])'), function (anchor) {\n          var id = anchor.name || anchor.id;\n          if (id) {\n            anchorList.push({\n              text: id,\n              value: '#' + id,\n              selected: url.indexOf('#' + id) !== -1\n            });\n          }\n        });\n        if (anchorList.length) {\n          anchorList.unshift({\n            text: 'None',\n            value: ''\n          });\n          return {\n            name: 'anchor',\n            type: 'listbox',\n            label: 'Anchors',\n            values: anchorList,\n            onselect: linkListChangeHandler\n          };\n        }\n      };\n      var updateText = function () {\n        if (!initialText && onlyText && !data.text) {\n          this.parent().parent().find('#text')[0].value(this.value());\n        }\n      };\n      var urlChange = function (e) {\n        var meta = e.meta || {};\n        if (linkListCtrl) {\n          linkListCtrl.value(editor.convertURL(this.value(), 'href'));\n        }\n        global$4.each(e.meta, function (value, key) {\n          var inp = win.find('#' + key);\n          if (key === 'text') {\n            if (initialText.length === 0) {\n              inp.value(value);\n              data.text = value;\n            }\n          } else {\n            inp.value(value);\n          }\n        });\n        if (meta.attach) {\n          attachState = {\n            href: this.value(),\n            attach: meta.attach\n          };\n        }\n        if (!meta.text) {\n          updateText.call(this);\n        }\n      };\n      var onBeforeCall = function (e) {\n        e.meta = win.toJSON();\n      };\n      onlyText = Utils.isOnlyTextSelected(selection.getContent());\n      anchorElm = Utils.getAnchorElement(editor);\n      data.text = initialText = Utils.getAnchorText(editor.selection, anchorElm);\n      data.href = anchorElm ? dom.getAttrib(anchorElm, 'href') : '';\n      if (anchorElm) {\n        data.target = dom.getAttrib(anchorElm, 'target');\n      } else if (Settings.hasDefaultLinkTarget(editor.settings)) {\n        data.target = Settings.getDefaultLinkTarget(editor.settings);\n      }\n      if (value = dom.getAttrib(anchorElm, 'rel')) {\n        data.rel = value;\n      }\n      if (value = dom.getAttrib(anchorElm, 'class')) {\n        data.class = value;\n      }\n      if (value = dom.getAttrib(anchorElm, 'title')) {\n        data.title = value;\n      }\n      if (onlyText) {\n        textListCtrl = {\n          name: 'text',\n          type: 'textbox',\n          size: 40,\n          label: 'Text to display',\n          onchange: function () {\n            data.text = this.value();\n          }\n        };\n      }\n      if (linkList) {\n        linkListCtrl = {\n          type: 'listbox',\n          label: 'Link list',\n          values: buildListItems(linkList, function (item) {\n            item.value = editor.convertURL(item.value || item.url, 'href');\n          }, [{\n              text: 'None',\n              value: ''\n            }]),\n          onselect: linkListChangeHandler,\n          value: editor.convertURL(data.href, 'href'),\n          onPostRender: function () {\n            linkListCtrl = this;\n          }\n        };\n      }\n      if (Settings.shouldShowTargetList(editor.settings)) {\n        if (Settings.getTargetList(editor.settings) === undefined) {\n          Settings.setTargetList(editor, [\n            {\n              text: 'None',\n              value: ''\n            },\n            {\n              text: 'New window',\n              value: '_blank'\n            }\n          ]);\n        }\n        targetListCtrl = {\n          name: 'target',\n          type: 'listbox',\n          label: 'Target',\n          values: buildListItems(Settings.getTargetList(editor.settings))\n        };\n      }\n      if (Settings.hasRelList(editor.settings)) {\n        relListCtrl = {\n          name: 'rel',\n          type: 'listbox',\n          label: 'Rel',\n          values: buildListItems(Settings.getRelList(editor.settings), function (item) {\n            if (Settings.allowUnsafeLinkTarget(editor.settings) === false) {\n              item.value = Utils.toggleTargetRules(item.value, data.target === '_blank');\n            }\n          })\n        };\n      }\n      if (Settings.hasLinkClassList(editor.settings)) {\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: buildListItems(Settings.getLinkClassList(editor.settings), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  inline: 'a',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n      if (Settings.shouldShowLinkTitle(editor.settings)) {\n        linkTitleCtrl = {\n          name: 'title',\n          type: 'textbox',\n          label: 'Title',\n          value: data.title\n        };\n      }\n      win = editor.windowManager.open({\n        title: 'Insert link',\n        data: data,\n        body: [\n          {\n            name: 'href',\n            type: 'filepicker',\n            filetype: 'file',\n            size: 40,\n            autofocus: true,\n            label: 'Url',\n            onchange: urlChange,\n            onkeyup: updateText,\n            onpaste: updateText,\n            onbeforecall: onBeforeCall\n          },\n          textListCtrl,\n          linkTitleCtrl,\n          buildAnchorListControl(data.href),\n          linkListCtrl,\n          relListCtrl,\n          targetListCtrl,\n          classListCtrl\n        ],\n        onSubmit: function (e) {\n          var assumeExternalTargets = Settings.assumeExternalTargets(editor.settings);\n          var insertLink = Utils.link(editor, attachState);\n          var removeLink = Utils.unlink(editor);\n          var resultData = global$4.extend({}, data, e.data);\n          var href = resultData.href;\n          if (!href) {\n            removeLink();\n            return;\n          }\n          if (!onlyText || resultData.text === initialText) {\n            delete resultData.text;\n          }\n          if (href.indexOf('@') > 0 && href.indexOf('//') === -1 && href.indexOf('mailto:') === -1) {\n            delayedConfirm(editor, 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?', function (state) {\n              if (state) {\n                resultData.href = 'mailto:' + href;\n              }\n              insertLink(resultData);\n            });\n            return;\n          }\n          if (assumeExternalTargets === true && !/^\\w+:/i.test(href) || assumeExternalTargets === false && /^\\s*www[\\.|\\d\\.]/i.test(href)) {\n            delayedConfirm(editor, 'The URL you entered seems to be an external link. Do you want to add the required http:// prefix?', function (state) {\n              if (state) {\n                resultData.href = 'http://' + href;\n              }\n              insertLink(resultData);\n            });\n            return;\n          }\n          insertLink(resultData);\n        }\n      });\n    };\n    var open$1 = function (editor) {\n      createLinkList(editor, showDialog);\n    };\n    var Dialog = { open: open$1 };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var isContextMenuVisible = function (editor) {\n      var contextmenu = editor.plugins.contextmenu;\n      return contextmenu ? contextmenu.isContextMenuVisible() : false;\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          OpenUrl.open(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        Dialog.open(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var leftClickedOnAHref = function (editor) {\n      return function (elm) {\n        var sel, rng, node;\n        if (Settings.hasContextToolbar(editor.settings) && !isContextMenuVisible(editor) && Utils.isLink(elm)) {\n          sel = editor.selection;\n          rng = sel.getRng();\n          node = rng.startContainer;\n          if (node.nodeType === 3 && sel.isCollapsed() && rng.startOffset > 0 && rng.startOffset < node.data.length) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$1.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleActiveState = function (editor) {\n      return function () {\n        var self = this;\n        editor.on('nodechange', function (e) {\n          self.active(!editor.readonly && !!Utils.getAnchorElement(editor, e.element));\n        });\n      };\n    };\n    var toggleViewLinkState = function (editor) {\n      return function () {\n        var self = this;\n        var toggleVisibility = function (e) {\n          if (Utils.hasLinks(e.parents)) {\n            self.show();\n          } else {\n            self.hide();\n          }\n        };\n        if (!Utils.hasLinks(editor.dom.getParents(editor.selection.getStart()))) {\n          self.hide();\n        }\n        editor.on('nodechange', toggleVisibility);\n        self.on('remove', function () {\n          editor.off('nodechange', toggleVisibility);\n        });\n      };\n    };\n    var Actions = {\n      openDialog: openDialog,\n      gotoSelectedLink: gotoSelectedLink,\n      leftClickedOnAHref: leftClickedOnAHref,\n      setupGotoLinks: setupGotoLinks,\n      toggleActiveState: toggleActiveState,\n      toggleViewLinkState: toggleViewLinkState\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', Actions.openDialog(editor));\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', Actions.openDialog(editor));\n    };\n    var Keyboard = { setup: setup };\n\n    var setupButtons = function (editor) {\n      editor.addButton('link', {\n        active: false,\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onclick: Actions.openDialog(editor),\n        onpostrender: Actions.toggleActiveState(editor)\n      });\n      editor.addButton('unlink', {\n        active: false,\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onclick: Utils.unlink(editor),\n        onpostrender: Actions.toggleActiveState(editor)\n      });\n      if (editor.addContextToolbar) {\n        editor.addButton('openlink', {\n          icon: 'newtab',\n          tooltip: 'Open link',\n          onclick: Actions.gotoSelectedLink(editor)\n        });\n      }\n    };\n    var setupMenuItems = function (editor) {\n      editor.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'newtab',\n        onclick: Actions.gotoSelectedLink(editor),\n        onPostRender: Actions.toggleViewLinkState(editor),\n        prependToContext: true\n      });\n      editor.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link',\n        shortcut: 'Meta+K',\n        onclick: Actions.openDialog(editor),\n        stateSelector: 'a[href]',\n        context: 'insert',\n        prependToContext: true\n      });\n      editor.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onclick: Utils.unlink(editor),\n        stateSelector: 'a[href]'\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      if (editor.addContextToolbar) {\n        editor.addContextToolbar(Actions.leftClickedOnAHref(editor), 'openlink | link unlink');\n      }\n    };\n    var Controls = {\n      setupButtons: setupButtons,\n      setupMenuItems: setupMenuItems,\n      setupContextToolbars: setupContextToolbars\n    };\n\n    global.add('link', function (editor) {\n      Controls.setupButtons(editor);\n      Controls.setupMenuItems(editor);\n      Controls.setupContextToolbars(editor);\n      Actions.setupGotoLinks(editor);\n      Commands.register(editor);\n      Keyboard.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","<template>\n  <v-container fluid>\n    <v-sheet elevation=\"12\" class=\"pa-5 mt-4\">\n      <div class>{{info}}</div>\n      <v-text-field outlined dense v-model=\"account\" type=\"text\" autocomplete=\"off\" label=\"Account\"></v-text-field>\n      <v-text-field outlined dense v-model=\"pkey\" type=\"password\" autocomplete=\"new-password\" label=\"Private key\"></v-text-field>\n      <v-text-field outlined dense v-model=\"gasPrice\" type=\"text\" label=\"Gas price\"></v-text-field>\n      <v-textarea\n        v-model=\"fieldModel\"\n        label=\"Each recipient in a new line\"\n        :loading=\"loading\"\n        :no-resize=\"noResize\"\n        outlined\n        :placeholder=\"placeholder\"\n        :row-height=\"rowHeight\"\n        :rows=\"rows\"\n      ></v-textarea>\n      <v-btn @click=\"sendTx\" color=\"primary\">Send</v-btn>\n    </v-sheet>\n  </v-container>\n</template>\n\n<script>\nvar EthereumTx = require(\"ethereumjs-tx\").Transaction;\nconst Web3 = require(\"web3\");\nvar web3 = new Web3();\n\nexport default {\n  data() {\n    return {\n      showPkey: true,\n      clearable: true,\n      loading: false,\n      noResize: false,\n      outlined: false,\n      placeholder: \"address,amount\",\n      rowHeight: 16,\n      rows: 2,\n      info: \"\",\n      fieldModel: \"\", //\"0xfDAacc9935E7F02187986C59265270868B43A6ca,0.001\",\n      account: \"\", //\"0x1920Ec7Aeb55be6b83C93B34260df3cA06557311\",\n      pkey: \"\", //\"0x87f35330dc3808922198f8a828c10db903102812027f2a05283134863773a0d1\",\n      gasPrice: \"10\"\n    };\n  },\n  computed: {\n    tokenAddress() {\n      return this.$store.state.tokenAddress;\n    },\n    contractABI() {\n      return this.$store.state.contractABI;\n    },\n    infuraURL() {\n      return this.$store.state.infuraURL;\n    }\n  },\n  methods: {\n    async getTxCount() {\n      return web3.eth.getTransactionCount(this.account);\n    },\n    async sendTx() {\n      this.loading = true;\n      try {\n        var txRows = this.fieldModel.split(\"\\n\");\n        if (txRows.length > 0) {\n          var txList = [];\n          var txCount = await this.getTxCount();\n          txRows.forEach(element => {\n            console.log(element);\n            const recipient = element.split(\",\")[0];\n            const amount = web3.utils.toWei(element.split(\",\")[1]);\n            let contract = new window.web3.eth.Contract(\n              this.contractABI,\n              this.tokenAddress,\n              { from: this.metamaskAddress }\n            );\n            const txData = contract.methods\n              .transfer(recipient, amount)\n              .encodeABI();\n            const txObject = {\n              nonce: web3.utils.toHex(txCount),\n              from: this.account,\n              to: this.tokenAddress,\n              gasPrice: web3.utils.toHex(\n                web3.utils.toWei(this.gasPrice, \"gwei\")\n              ),\n              gasLimit: web3.utils.toHex(100000),\n              data: txData\n            };\n\n            console.log(txObject);\n            const privateKey = new Buffer.from(this.pkey.slice(2), \"hex\");\n            const tx = new EthereumTx(txObject);\n            tx.sign(privateKey);\n            const serializedTx = tx.serialize();\n            const _rawTx = \"0x\" + serializedTx.toString(\"hex\");\n            txList.push(_rawTx);\n            txCount++;\n          });\n          console.log(txList);\n          txList.forEach(rawTx => {\n            web3.eth.sendSignedTransaction(rawTx);\n          });\n          this.loading = false;\n        }\n      } catch (error) {\n        console.log(error);\n        this.loading = false;\n      }\n    }\n  },\n  mounted() {\n    web3 = new Web3(\n      this.infuraURL\n    );\n  }\n};\n</script>","(function () {\nvar nonbreaking = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var stringRepeat = function (string, repeats) {\n      var str = '';\n      for (var index = 0; index < repeats; index++) {\n        str += string;\n      }\n      return str;\n    };\n    var isVisualCharsEnabled = function (editor) {\n      return editor.plugins.visualchars ? editor.plugins.visualchars.isEnabled() : false;\n    };\n    var insertNbsp = function (editor, times) {\n      var nbsp = isVisualCharsEnabled(editor) ? '<span class=\"mce-nbsp\">&nbsp;</span>' : '&nbsp;';\n      editor.insertContent(stringRepeat(nbsp, times));\n      editor.dom.setAttrib(editor.dom.select('span.mce-nbsp'), 'data-mce-bogus', '1');\n    };\n    var Actions = { insertNbsp: insertNbsp };\n\n    var register = function (editor) {\n      editor.addCommand('mceNonBreaking', function () {\n        Actions.insertNbsp(editor, 1);\n      });\n    };\n    var Commands = { register: register };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var getKeyboardSpaces = function (editor) {\n      var spaces = editor.getParam('nonbreaking_force_tab', 0);\n      if (typeof spaces === 'boolean') {\n        return spaces === true ? 3 : 0;\n      } else {\n        return spaces;\n      }\n    };\n    var Settings = { getKeyboardSpaces: getKeyboardSpaces };\n\n    var setup = function (editor) {\n      var spaces = Settings.getKeyboardSpaces(editor);\n      if (spaces > 0) {\n        editor.on('keydown', function (e) {\n          if (e.keyCode === global$1.TAB && !e.isDefaultPrevented()) {\n            if (e.shiftKey) {\n              return;\n            }\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            Actions.insertNbsp(editor, spaces);\n          }\n        });\n      }\n    };\n    var Keyboard = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.addButton('nonbreaking', {\n        title: 'Nonbreaking space',\n        cmd: 'mceNonBreaking'\n      });\n      editor.addMenuItem('nonbreaking', {\n        icon: 'nonbreaking',\n        text: 'Nonbreaking space',\n        cmd: 'mceNonBreaking',\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('nonbreaking', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      Keyboard.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"charmap\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/charmap')\n//   ES2015:\n//     import 'tinymce/plugins/charmap'\nrequire('./plugin.js');","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"500\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.promoData.promoTitle))]),_c('v-card-text',[_c('v-container',[_vm._v(\" \"+_vm._s(_vm.promoData.promoText)+\" \"),(_vm.promoData.promoImg)?_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.promoData.promoImg,\"alt\":\"\"}}):_vm._e(),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"error-messages\":_vm.error,\"label\":\"Email*\",\"required\":\"\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}})],1)],1)],1)],1),_c('v-card-actions',[_c('v-btn',{attrs:{\"color\":\"grey darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.callback()}}},[_vm._v(\" \"+_vm._s(_vm.promoData.skipBtnText)+\" \")]),_c('v-spacer'),_c('v-btn',{staticClass:\"white--text\",attrs:{\"loading\":_vm.loading,\"color\":\"green darken-1\"},on:{\"click\":function($event){return _vm.dialogAction(true)}}},[_vm._v(\" \"+_vm._s(_vm.promoData.submitBtnText)+\" \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row justify=\"center\">\n    <v-dialog v-model=\"show\" persistent max-width=\"500\">\n      <v-card>\n        <v-card-title class=\"headline\">{{ promoData.promoTitle }}</v-card-title>\n        <v-card-text>\n          <v-container>\n            {{ promoData.promoText }}\n            <img\n              v-if=\"promoData.promoImg\"\n              :src=\"promoData.promoImg\"\n              alt=\"\"\n              style=\"width: 100%\"\n            />\n            <v-row>\n              <v-col cols=\"12\">\n                <v-text-field\n                  :error-messages=\"error\"\n                  v-model=\"email\"\n                  label=\"Email*\"\n                  required\n                ></v-text-field>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-text>\n        <v-card-actions>\n          <v-btn color=\"grey darken-1\" text @click=\"callback()\">\n            {{ promoData.skipBtnText }}\n          </v-btn>\n          <v-spacer></v-spacer>\n          <v-btn\n            :loading=\"loading\"\n            color=\"green darken-1\"\n            class=\"white--text\"\n            @click=\"dialogAction(true)\"\n          >\n            {{ promoData.submitBtnText }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-row>\n</template>\n\n<script>\nexport default {\n  props: {\n    show: Boolean,\n    callback: Function,\n    promoData: Object,\n  },\n  data() {\n    return {\n      loading: false,\n      email: \"\",\n      error: \"\",\n      couponId: \"\",\n      couponText: \"\",\n    };\n  },\n  computed: {\n    metamaskAddress() {\n      return this.$store.state.metamaskAddress;\n    },\n  },\n  methods: {\n    dialogAction(result) {\n      if (result && this.email != \"\") {\n        this.loading = true;\n        let _this = this;\n        this.$http\n          .post(\n            this.$HOST +\n              \"/api/submit/email/\" +\n              this.email +\n              \"?address=\" +\n              this.metamaskAddress,\n            JSON.stringify({}),\n            { withCredentials: true }\n          )\n          .then(function (response) {\n            console.log(response);\n            this.$cookie.set(\"popup_coupons_uid\", response.popup_coupons_uid);\n            _this.error = \"\";\n            _this.callback();\n          })\n          .catch(function (error) {\n            console.log(error);\n            if (error && error.response.status == 400) {\n              _this.error = error.response.data.msg;\n            }\n          });\n        this.loading = false;\n      }\n    },\n  },\n  mounted() {},\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PromoDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PromoDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PromoDialog.vue?vue&type=template&id=39b21ac2&\"\nimport script from \"./PromoDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./PromoDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","(function () {\nvar image = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasDimensions = function (editor) {\n      return editor.settings.image_dimensions === false ? false : true;\n    };\n    var hasAdvTab = function (editor) {\n      return editor.settings.image_advtab === true ? true : false;\n    };\n    var getPrependUrl = function (editor) {\n      return editor.getParam('image_prepend_url', '');\n    };\n    var getClassList = function (editor) {\n      return editor.getParam('image_class_list');\n    };\n    var hasDescription = function (editor) {\n      return editor.settings.image_description === false ? false : true;\n    };\n    var hasImageTitle = function (editor) {\n      return editor.settings.image_title === true ? true : false;\n    };\n    var hasImageCaption = function (editor) {\n      return editor.settings.image_caption === true ? true : false;\n    };\n    var getImageList = function (editor) {\n      return editor.getParam('image_list', false);\n    };\n    var hasUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', false);\n    };\n    var hasUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', false);\n    };\n    var getUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url');\n    };\n    var getUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler');\n    };\n    var getUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path');\n    };\n    var getUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials');\n    };\n    var Settings = {\n      hasDimensions: hasDimensions,\n      hasAdvTab: hasAdvTab,\n      getPrependUrl: getPrependUrl,\n      getClassList: getClassList,\n      hasDescription: hasDescription,\n      hasImageTitle: hasImageTitle,\n      hasImageCaption: hasImageCaption,\n      getImageList: getImageList,\n      hasUploadUrl: hasUploadUrl,\n      hasUploadHandler: hasUploadHandler,\n      getUploadUrl: getUploadUrl,\n      getUploadHandler: getUploadHandler,\n      getUploadBasePath: getUploadBasePath,\n      getUploadCredentials: getUploadCredentials\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    function FileReader () {\n      var f = Global$1.getOrDie('FileReader');\n      return new f();\n    }\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseIntAndGetMax = function (val1, val2) {\n      return Math.max(parseInt(val1, 10), parseInt(val2, 10));\n    };\n    var getImageSize = function (url, callback) {\n      var img = domGlobals.document.createElement('img');\n      function done(width, height) {\n        if (img.parentNode) {\n          img.parentNode.removeChild(img);\n        }\n        callback({\n          width: width,\n          height: height\n        });\n      }\n      img.onload = function () {\n        var width = parseIntAndGetMax(img.width, img.clientWidth);\n        var height = parseIntAndGetMax(img.height, img.clientHeight);\n        done(width, height);\n      };\n      img.onerror = function () {\n        done(0, 0);\n      };\n      var style = img.style;\n      style.visibility = 'hidden';\n      style.position = 'fixed';\n      style.bottom = style.left = '0px';\n      style.width = style.height = 'auto';\n      domGlobals.document.body.appendChild(img);\n      img.src = url;\n    };\n    var buildListItems = function (inputList, itemCallback, startItems) {\n      function appendItems(values, output) {\n        output = output || [];\n        global$2.each(values, function (item) {\n          var menuItem = { text: item.text || item.title };\n          if (item.menu) {\n            menuItem.menu = appendItems(item.menu);\n          } else {\n            menuItem.value = item.value;\n            itemCallback(menuItem);\n          }\n          output.push(menuItem);\n        });\n        return output;\n      }\n      return appendItems(inputList, startItems || []);\n    };\n    var removePixelSuffix = function (value) {\n      if (value) {\n        value = value.replace(/px$/, '');\n      }\n      return value;\n    };\n    var addPixelSuffix = function (value) {\n      if (value.length > 0 && /^[0-9]+$/.test(value)) {\n        value += 'px';\n      }\n      return value;\n    };\n    var mergeMargins = function (css) {\n      if (css.margin) {\n        var splitMargin = css.margin.split(' ');\n        switch (splitMargin.length) {\n        case 1:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[0];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[0];\n          break;\n        case 2:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 3:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 4:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[3];\n        }\n        delete css.margin;\n      }\n      return css;\n    };\n    var createImageList = function (editor, callback) {\n      var imageList = Settings.getImageList(editor);\n      if (typeof imageList === 'string') {\n        global$3.send({\n          url: imageList,\n          success: function (text) {\n            callback(JSON.parse(text));\n          }\n        });\n      } else if (typeof imageList === 'function') {\n        imageList(callback);\n      } else {\n        callback(imageList);\n      }\n    };\n    var waitLoadImage = function (editor, data, imgElm) {\n      function selectImage() {\n        imgElm.onload = imgElm.onerror = null;\n        if (editor.selection) {\n          editor.selection.select(imgElm);\n          editor.nodeChanged();\n        }\n      }\n      imgElm.onload = function () {\n        if (!data.width && !data.height && Settings.hasDimensions(editor)) {\n          editor.dom.setAttribs(imgElm, {\n            width: imgElm.clientWidth,\n            height: imgElm.clientHeight\n          });\n        }\n        selectImage();\n      };\n      imgElm.onerror = selectImage;\n    };\n    var blobToDataUri = function (blob) {\n      return new global$1(function (resolve, reject) {\n        var reader = FileReader();\n        reader.onload = function () {\n          resolve(reader.result);\n        };\n        reader.onerror = function () {\n          reject(reader.error.message);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var Utils = {\n      getImageSize: getImageSize,\n      buildListItems: buildListItems,\n      removePixelSuffix: removePixelSuffix,\n      addPixelSuffix: addPixelSuffix,\n      mergeMargins: mergeMargins,\n      createImageList: createImageList,\n      waitLoadImage: waitLoadImage,\n      blobToDataUri: blobToDataUri\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow);\n\n    var DOM = global$4.DOM;\n    var getHspace = function (image) {\n      if (image.style.marginLeft && image.style.marginRight && image.style.marginLeft === image.style.marginRight) {\n        return Utils.removePixelSuffix(image.style.marginLeft);\n      } else {\n        return '';\n      }\n    };\n    var getVspace = function (image) {\n      if (image.style.marginTop && image.style.marginBottom && image.style.marginTop === image.style.marginBottom) {\n        return Utils.removePixelSuffix(image.style.marginTop);\n      } else {\n        return '';\n      }\n    };\n    var getBorder = function (image) {\n      if (image.style.borderWidth) {\n        return Utils.removePixelSuffix(image.style.borderWidth);\n      } else {\n        return '';\n      }\n    };\n    var getAttrib = function (image, name) {\n      if (image.hasAttribute(name)) {\n        return image.getAttribute(name);\n      } else {\n        return '';\n      }\n    };\n    var getStyle = function (image, name) {\n      return image.style[name] ? image.style[name] : '';\n    };\n    var hasCaption = function (image) {\n      return image.parentNode !== null && image.parentNode.nodeName === 'FIGURE';\n    };\n    var setAttrib = function (image, name, value) {\n      image.setAttribute(name, value);\n    };\n    var wrapInFigure = function (image) {\n      var figureElm = DOM.create('figure', { class: 'image' });\n      DOM.insertAfter(figureElm, image);\n      figureElm.appendChild(image);\n      figureElm.appendChild(DOM.create('figcaption', { contentEditable: true }, 'Caption'));\n      figureElm.contentEditable = 'false';\n    };\n    var removeFigure = function (image) {\n      var figureElm = image.parentNode;\n      DOM.insertAfter(image, figureElm);\n      DOM.remove(figureElm);\n    };\n    var toggleCaption = function (image) {\n      if (hasCaption(image)) {\n        removeFigure(image);\n      } else {\n        wrapInFigure(image);\n      }\n    };\n    var normalizeStyle = function (image, normalizeCss) {\n      var attrValue = image.getAttribute('style');\n      var value = normalizeCss(attrValue !== null ? attrValue : '');\n      if (value.length > 0) {\n        image.setAttribute('style', value);\n        image.setAttribute('data-mce-style', value);\n      } else {\n        image.removeAttribute('style');\n      }\n    };\n    var setSize = function (name, normalizeCss) {\n      return function (image, name, value) {\n        if (image.style[name]) {\n          image.style[name] = Utils.addPixelSuffix(value);\n          normalizeStyle(image, normalizeCss);\n        } else {\n          setAttrib(image, name, value);\n        }\n      };\n    };\n    var getSize = function (image, name) {\n      if (image.style[name]) {\n        return Utils.removePixelSuffix(image.style[name]);\n      } else {\n        return getAttrib(image, name);\n      }\n    };\n    var setHspace = function (image, value) {\n      var pxValue = Utils.addPixelSuffix(value);\n      image.style.marginLeft = pxValue;\n      image.style.marginRight = pxValue;\n    };\n    var setVspace = function (image, value) {\n      var pxValue = Utils.addPixelSuffix(value);\n      image.style.marginTop = pxValue;\n      image.style.marginBottom = pxValue;\n    };\n    var setBorder = function (image, value) {\n      var pxValue = Utils.addPixelSuffix(value);\n      image.style.borderWidth = pxValue;\n    };\n    var setBorderStyle = function (image, value) {\n      image.style.borderStyle = value;\n    };\n    var getBorderStyle = function (image) {\n      return getStyle(image, 'borderStyle');\n    };\n    var isFigure = function (elm) {\n      return elm.nodeName === 'FIGURE';\n    };\n    var defaultData = function () {\n      return {\n        src: '',\n        alt: '',\n        title: '',\n        width: '',\n        height: '',\n        class: '',\n        style: '',\n        caption: false,\n        hspace: '',\n        vspace: '',\n        border: '',\n        borderStyle: ''\n      };\n    };\n    var getStyleValue = function (normalizeCss, data) {\n      var image = domGlobals.document.createElement('img');\n      setAttrib(image, 'style', data.style);\n      if (getHspace(image) || data.hspace !== '') {\n        setHspace(image, data.hspace);\n      }\n      if (getVspace(image) || data.vspace !== '') {\n        setVspace(image, data.vspace);\n      }\n      if (getBorder(image) || data.border !== '') {\n        setBorder(image, data.border);\n      }\n      if (getBorderStyle(image) || data.borderStyle !== '') {\n        setBorderStyle(image, data.borderStyle);\n      }\n      return normalizeCss(image.getAttribute('style'));\n    };\n    var create = function (normalizeCss, data) {\n      var image = domGlobals.document.createElement('img');\n      write(normalizeCss, merge(data, { caption: false }), image);\n      setAttrib(image, 'alt', data.alt);\n      if (data.caption) {\n        var figure = DOM.create('figure', { class: 'image' });\n        figure.appendChild(image);\n        figure.appendChild(DOM.create('figcaption', { contentEditable: true }, 'Caption'));\n        figure.contentEditable = 'false';\n        return figure;\n      } else {\n        return image;\n      }\n    };\n    var read = function (normalizeCss, image) {\n      return {\n        src: getAttrib(image, 'src'),\n        alt: getAttrib(image, 'alt'),\n        title: getAttrib(image, 'title'),\n        width: getSize(image, 'width'),\n        height: getSize(image, 'height'),\n        class: getAttrib(image, 'class'),\n        style: normalizeCss(getAttrib(image, 'style')),\n        caption: hasCaption(image),\n        hspace: getHspace(image),\n        vspace: getVspace(image),\n        border: getBorder(image),\n        borderStyle: getStyle(image, 'borderStyle')\n      };\n    };\n    var updateProp = function (image, oldData, newData, name, set) {\n      if (newData[name] !== oldData[name]) {\n        set(image, name, newData[name]);\n      }\n    };\n    var normalized = function (set, normalizeCss) {\n      return function (image, name, value) {\n        set(image, value);\n        normalizeStyle(image, normalizeCss);\n      };\n    };\n    var write = function (normalizeCss, newData, image) {\n      var oldData = read(normalizeCss, image);\n      updateProp(image, oldData, newData, 'caption', function (image, _name, _value) {\n        return toggleCaption(image);\n      });\n      updateProp(image, oldData, newData, 'src', setAttrib);\n      updateProp(image, oldData, newData, 'alt', setAttrib);\n      updateProp(image, oldData, newData, 'title', setAttrib);\n      updateProp(image, oldData, newData, 'width', setSize('width', normalizeCss));\n      updateProp(image, oldData, newData, 'height', setSize('height', normalizeCss));\n      updateProp(image, oldData, newData, 'class', setAttrib);\n      updateProp(image, oldData, newData, 'style', normalized(function (image, value) {\n        return setAttrib(image, 'style', value);\n      }, normalizeCss));\n      updateProp(image, oldData, newData, 'hspace', normalized(setHspace, normalizeCss));\n      updateProp(image, oldData, newData, 'vspace', normalized(setVspace, normalizeCss));\n      updateProp(image, oldData, newData, 'border', normalized(setBorder, normalizeCss));\n      updateProp(image, oldData, newData, 'borderStyle', normalized(setBorderStyle, normalizeCss));\n    };\n\n    var normalizeCss = function (editor, cssText) {\n      var css = editor.dom.styles.parse(cssText);\n      var mergedCss = Utils.mergeMargins(css);\n      var compressed = editor.dom.styles.parse(editor.dom.styles.serialize(mergedCss));\n      return editor.dom.styles.serialize(compressed);\n    };\n    var getSelectedImage = function (editor) {\n      var imgElm = editor.selection.getNode();\n      var figureElm = editor.dom.getParent(imgElm, 'figure.image');\n      if (figureElm) {\n        return editor.dom.select('img', figureElm)[0];\n      }\n      if (imgElm && (imgElm.nodeName !== 'IMG' || imgElm.getAttribute('data-mce-object') || imgElm.getAttribute('data-mce-placeholder'))) {\n        return null;\n      }\n      return imgElm;\n    };\n    var splitTextBlock = function (editor, figure) {\n      var dom = editor.dom;\n      var textBlock = dom.getParent(figure.parentNode, function (node) {\n        return editor.schema.getTextBlockElements()[node.nodeName];\n      }, editor.getBody());\n      if (textBlock) {\n        return dom.split(textBlock, figure);\n      } else {\n        return figure;\n      }\n    };\n    var readImageDataFromSelection = function (editor) {\n      var image = getSelectedImage(editor);\n      return image ? read(function (css) {\n        return normalizeCss(editor, css);\n      }, image) : defaultData();\n    };\n    var insertImageAtCaret = function (editor, data) {\n      var elm = create(function (css) {\n        return normalizeCss(editor, css);\n      }, data);\n      editor.dom.setAttrib(elm, 'data-mce-id', '__mcenew');\n      editor.focus();\n      editor.selection.setContent(elm.outerHTML);\n      var insertedElm = editor.dom.select('*[data-mce-id=\"__mcenew\"]')[0];\n      editor.dom.setAttrib(insertedElm, 'data-mce-id', null);\n      if (isFigure(insertedElm)) {\n        var figure = splitTextBlock(editor, insertedElm);\n        editor.selection.select(figure);\n      } else {\n        editor.selection.select(insertedElm);\n      }\n    };\n    var syncSrcAttr = function (editor, image) {\n      editor.dom.setAttrib(image, 'src', image.getAttribute('src'));\n    };\n    var deleteImage = function (editor, image) {\n      if (image) {\n        var elm = editor.dom.is(image.parentNode, 'figure.image') ? image.parentNode : image;\n        editor.dom.remove(elm);\n        editor.focus();\n        editor.nodeChanged();\n        if (editor.dom.isEmpty(editor.getBody())) {\n          editor.setContent('');\n          editor.selection.setCursorLocation();\n        }\n      }\n    };\n    var writeImageDataToSelection = function (editor, data) {\n      var image = getSelectedImage(editor);\n      write(function (css) {\n        return normalizeCss(editor, css);\n      }, data, image);\n      syncSrcAttr(editor, image);\n      if (isFigure(image.parentNode)) {\n        var figure = image.parentNode;\n        splitTextBlock(editor, figure);\n        editor.selection.select(image.parentNode);\n      } else {\n        editor.selection.select(image);\n        Utils.waitLoadImage(editor, data, image);\n      }\n    };\n    var insertOrUpdateImage = function (editor, data) {\n      var image = getSelectedImage(editor);\n      if (image) {\n        if (data.src) {\n          writeImageDataToSelection(editor, data);\n        } else {\n          deleteImage(editor, image);\n        }\n      } else if (data.src) {\n        insertImageAtCaret(editor, data);\n      }\n    };\n\n    var updateVSpaceHSpaceBorder = function (editor) {\n      return function (evt) {\n        var dom = editor.dom;\n        var rootControl = evt.control.rootControl;\n        if (!Settings.hasAdvTab(editor)) {\n          return;\n        }\n        var data = rootControl.toJSON();\n        var css = dom.parseStyle(data.style);\n        rootControl.find('#vspace').value('');\n        rootControl.find('#hspace').value('');\n        css = Utils.mergeMargins(css);\n        if (css['margin-top'] && css['margin-bottom'] || css['margin-right'] && css['margin-left']) {\n          if (css['margin-top'] === css['margin-bottom']) {\n            rootControl.find('#vspace').value(Utils.removePixelSuffix(css['margin-top']));\n          } else {\n            rootControl.find('#vspace').value('');\n          }\n          if (css['margin-right'] === css['margin-left']) {\n            rootControl.find('#hspace').value(Utils.removePixelSuffix(css['margin-right']));\n          } else {\n            rootControl.find('#hspace').value('');\n          }\n        }\n        if (css['border-width']) {\n          rootControl.find('#border').value(Utils.removePixelSuffix(css['border-width']));\n        } else {\n          rootControl.find('#border').value('');\n        }\n        if (css['border-style']) {\n          rootControl.find('#borderStyle').value(css['border-style']);\n        } else {\n          rootControl.find('#borderStyle').value('');\n        }\n        rootControl.find('#style').value(dom.serializeStyle(dom.parseStyle(dom.serializeStyle(css))));\n      };\n    };\n    var updateStyle = function (editor, win) {\n      win.find('#style').each(function (ctrl) {\n        var value = getStyleValue(function (css) {\n          return normalizeCss(editor, css);\n        }, merge(defaultData(), win.toJSON()));\n        ctrl.value(value);\n      });\n    };\n    var makeTab = function (editor) {\n      return {\n        title: 'Advanced',\n        type: 'form',\n        pack: 'start',\n        items: [\n          {\n            label: 'Style',\n            name: 'style',\n            type: 'textbox',\n            onchange: updateVSpaceHSpaceBorder(editor)\n          },\n          {\n            type: 'form',\n            layout: 'grid',\n            packV: 'start',\n            columns: 2,\n            padding: 0,\n            defaults: {\n              type: 'textbox',\n              maxWidth: 50,\n              onchange: function (evt) {\n                updateStyle(editor, evt.control.rootControl);\n              }\n            },\n            items: [\n              {\n                label: 'Vertical space',\n                name: 'vspace'\n              },\n              {\n                label: 'Border width',\n                name: 'border'\n              },\n              {\n                label: 'Horizontal space',\n                name: 'hspace'\n              },\n              {\n                label: 'Border style',\n                type: 'listbox',\n                name: 'borderStyle',\n                width: 90,\n                maxWidth: 90,\n                onselect: function (evt) {\n                  updateStyle(editor, evt.control.rootControl);\n                },\n                values: [\n                  {\n                    text: 'Select...',\n                    value: ''\n                  },\n                  {\n                    text: 'Solid',\n                    value: 'solid'\n                  },\n                  {\n                    text: 'Dotted',\n                    value: 'dotted'\n                  },\n                  {\n                    text: 'Dashed',\n                    value: 'dashed'\n                  },\n                  {\n                    text: 'Double',\n                    value: 'double'\n                  },\n                  {\n                    text: 'Groove',\n                    value: 'groove'\n                  },\n                  {\n                    text: 'Ridge',\n                    value: 'ridge'\n                  },\n                  {\n                    text: 'Inset',\n                    value: 'inset'\n                  },\n                  {\n                    text: 'Outset',\n                    value: 'outset'\n                  },\n                  {\n                    text: 'None',\n                    value: 'none'\n                  },\n                  {\n                    text: 'Hidden',\n                    value: 'hidden'\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      };\n    };\n    var AdvTab = { makeTab: makeTab };\n\n    var doSyncSize = function (widthCtrl, heightCtrl) {\n      widthCtrl.state.set('oldVal', widthCtrl.value());\n      heightCtrl.state.set('oldVal', heightCtrl.value());\n    };\n    var doSizeControls = function (win, f) {\n      var widthCtrl = win.find('#width')[0];\n      var heightCtrl = win.find('#height')[0];\n      var constrained = win.find('#constrain')[0];\n      if (widthCtrl && heightCtrl && constrained) {\n        f(widthCtrl, heightCtrl, constrained.checked());\n      }\n    };\n    var doUpdateSize = function (widthCtrl, heightCtrl, isContrained) {\n      var oldWidth = widthCtrl.state.get('oldVal');\n      var oldHeight = heightCtrl.state.get('oldVal');\n      var newWidth = widthCtrl.value();\n      var newHeight = heightCtrl.value();\n      if (isContrained && oldWidth && oldHeight && newWidth && newHeight) {\n        if (newWidth !== oldWidth) {\n          newHeight = Math.round(newWidth / oldWidth * newHeight);\n          if (!isNaN(newHeight)) {\n            heightCtrl.value(newHeight);\n          }\n        } else {\n          newWidth = Math.round(newHeight / oldHeight * newWidth);\n          if (!isNaN(newWidth)) {\n            widthCtrl.value(newWidth);\n          }\n        }\n      }\n      doSyncSize(widthCtrl, heightCtrl);\n    };\n    var syncSize = function (win) {\n      doSizeControls(win, doSyncSize);\n    };\n    var updateSize = function (win) {\n      doSizeControls(win, doUpdateSize);\n    };\n    var createUi = function () {\n      var recalcSize = function (evt) {\n        updateSize(evt.control.rootControl);\n      };\n      return {\n        type: 'container',\n        label: 'Dimensions',\n        layout: 'flex',\n        align: 'center',\n        spacing: 5,\n        items: [\n          {\n            name: 'width',\n            type: 'textbox',\n            maxLength: 5,\n            size: 5,\n            onchange: recalcSize,\n            ariaLabel: 'Width'\n          },\n          {\n            type: 'label',\n            text: 'x'\n          },\n          {\n            name: 'height',\n            type: 'textbox',\n            maxLength: 5,\n            size: 5,\n            onchange: recalcSize,\n            ariaLabel: 'Height'\n          },\n          {\n            name: 'constrain',\n            type: 'checkbox',\n            checked: true,\n            text: 'Constrain proportions'\n          }\n        ]\n      };\n    };\n    var SizeManager = {\n      createUi: createUi,\n      syncSize: syncSize,\n      updateSize: updateSize\n    };\n\n    var onSrcChange = function (evt, editor) {\n      var srcURL, prependURL, absoluteURLPattern;\n      var meta = evt.meta || {};\n      var control = evt.control;\n      var rootControl = control.rootControl;\n      var imageListCtrl = rootControl.find('#image-list')[0];\n      if (imageListCtrl) {\n        imageListCtrl.value(editor.convertURL(control.value(), 'src'));\n      }\n      global$2.each(meta, function (value, key) {\n        rootControl.find('#' + key).value(value);\n      });\n      if (!meta.width && !meta.height) {\n        srcURL = editor.convertURL(control.value(), 'src');\n        prependURL = Settings.getPrependUrl(editor);\n        absoluteURLPattern = new RegExp('^(?:[a-z]+:)?//', 'i');\n        if (prependURL && !absoluteURLPattern.test(srcURL) && srcURL.substring(0, prependURL.length) !== prependURL) {\n          srcURL = prependURL + srcURL;\n        }\n        control.value(srcURL);\n        Utils.getImageSize(editor.documentBaseURI.toAbsolute(control.value()), function (data) {\n          if (data.width && data.height && Settings.hasDimensions(editor)) {\n            rootControl.find('#width').value(data.width);\n            rootControl.find('#height').value(data.height);\n            SizeManager.syncSize(rootControl);\n          }\n        });\n      }\n    };\n    var onBeforeCall = function (evt) {\n      evt.meta = evt.control.rootControl.toJSON();\n    };\n    var getGeneralItems = function (editor, imageListCtrl) {\n      var generalFormItems = [\n        {\n          name: 'src',\n          type: 'filepicker',\n          filetype: 'image',\n          label: 'Source',\n          autofocus: true,\n          onchange: function (evt) {\n            onSrcChange(evt, editor);\n          },\n          onbeforecall: onBeforeCall\n        },\n        imageListCtrl\n      ];\n      if (Settings.hasDescription(editor)) {\n        generalFormItems.push({\n          name: 'alt',\n          type: 'textbox',\n          label: 'Image description'\n        });\n      }\n      if (Settings.hasImageTitle(editor)) {\n        generalFormItems.push({\n          name: 'title',\n          type: 'textbox',\n          label: 'Image Title'\n        });\n      }\n      if (Settings.hasDimensions(editor)) {\n        generalFormItems.push(SizeManager.createUi());\n      }\n      if (Settings.getClassList(editor)) {\n        generalFormItems.push({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: Utils.buildListItems(Settings.getClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  inline: 'img',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        });\n      }\n      if (Settings.hasImageCaption(editor)) {\n        generalFormItems.push({\n          name: 'caption',\n          type: 'checkbox',\n          label: 'Caption'\n        });\n      }\n      return generalFormItems;\n    };\n    var makeTab$1 = function (editor, imageListCtrl) {\n      return {\n        title: 'General',\n        type: 'form',\n        items: getGeneralItems(editor, imageListCtrl)\n      };\n    };\n    var MainTab = {\n      makeTab: makeTab$1,\n      getGeneralItems: getGeneralItems\n    };\n\n    var url = function () {\n      return Global$1.getOrDie('URL');\n    };\n    var createObjectURL = function (blob) {\n      return url().createObjectURL(blob);\n    };\n    var revokeObjectURL = function (u) {\n      url().revokeObjectURL(u);\n    };\n    var URL = {\n      createObjectURL: createObjectURL,\n      revokeObjectURL: revokeObjectURL\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    function XMLHttpRequest () {\n      var f = Global$1.getOrDie('XMLHttpRequest');\n      return new f();\n    }\n\n    var noop = function () {\n    };\n    var pathJoin = function (path1, path2) {\n      if (path1) {\n        return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n      }\n      return path2;\n    };\n    function Uploader (settings) {\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr, formData;\n        xhr = XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          var json;\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        formData = new domGlobals.FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var uploadBlob = function (blobInfo, handler) {\n        return new global$1(function (resolve, reject) {\n          try {\n            handler(blobInfo, resolve, reject, noop);\n          } catch (ex) {\n            reject(ex.message);\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var upload = function (blobInfo) {\n        return !settings.url && isDefaultHandler(settings.handler) ? global$1.reject('Upload url missing from the settings.') : uploadBlob(blobInfo, settings.handler);\n      };\n      settings = global$2.extend({\n        credentials: false,\n        handler: defaultHandler\n      }, settings);\n      return { upload: upload };\n    }\n\n    var onFileInput = function (editor) {\n      return function (evt) {\n        var Throbber = global$5.get('Throbber');\n        var rootControl = evt.control.rootControl;\n        var throbber = new Throbber(rootControl.getEl());\n        var file = evt.control.value();\n        var blobUri = URL.createObjectURL(file);\n        var uploader = Uploader({\n          url: Settings.getUploadUrl(editor),\n          basePath: Settings.getUploadBasePath(editor),\n          credentials: Settings.getUploadCredentials(editor),\n          handler: Settings.getUploadHandler(editor)\n        });\n        var finalize = function () {\n          throbber.hide();\n          URL.revokeObjectURL(blobUri);\n        };\n        throbber.show();\n        return Utils.blobToDataUri(file).then(function (dataUrl) {\n          var blobInfo = editor.editorUpload.blobCache.create({\n            blob: file,\n            blobUri: blobUri,\n            name: file.name ? file.name.replace(/\\.[^\\.]+$/, '') : null,\n            base64: dataUrl.split(',')[1]\n          });\n          return uploader.upload(blobInfo).then(function (url) {\n            var src = rootControl.find('#src');\n            src.value(url);\n            rootControl.find('tabpanel')[0].activateTab(0);\n            src.fire('change');\n            finalize();\n            return url;\n          });\n        }).catch(function (err) {\n          editor.windowManager.alert(err);\n          finalize();\n        });\n      };\n    };\n    var acceptExts = '.jpg,.jpeg,.png,.gif';\n    var makeTab$2 = function (editor) {\n      return {\n        title: 'Upload',\n        type: 'form',\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        padding: '20 20 20 20',\n        items: [\n          {\n            type: 'container',\n            layout: 'flex',\n            direction: 'column',\n            align: 'center',\n            spacing: 10,\n            items: [\n              {\n                text: 'Browse for an image',\n                type: 'browsebutton',\n                accept: acceptExts,\n                onchange: onFileInput(editor)\n              },\n              {\n                text: 'OR',\n                type: 'label'\n              }\n            ]\n          },\n          {\n            text: 'Drop an image here',\n            type: 'dropzone',\n            accept: acceptExts,\n            height: 100,\n            onchange: onFileInput(editor)\n          }\n        ]\n      };\n    };\n    var UploadTab = { makeTab: makeTab$2 };\n\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n\n    var submitForm = function (editor, evt) {\n      var win = evt.control.getRoot();\n      SizeManager.updateSize(win);\n      editor.undoManager.transact(function () {\n        var data = merge(readImageDataFromSelection(editor), win.toJSON());\n        insertOrUpdateImage(editor, data);\n      });\n      editor.editorUpload.uploadImagesAuto();\n    };\n    function Dialog (editor) {\n      function showDialog(imageList) {\n        var data = readImageDataFromSelection(editor);\n        var win, imageListCtrl;\n        if (imageList) {\n          imageListCtrl = {\n            type: 'listbox',\n            label: 'Image list',\n            name: 'image-list',\n            values: Utils.buildListItems(imageList, function (item) {\n              item.value = editor.convertURL(item.value || item.url, 'src');\n            }, [{\n                text: 'None',\n                value: ''\n              }]),\n            value: data.src && editor.convertURL(data.src, 'src'),\n            onselect: function (e) {\n              var altCtrl = win.find('#alt');\n              if (!altCtrl.value() || e.lastControl && altCtrl.value() === e.lastControl.text()) {\n                altCtrl.value(e.control.text());\n              }\n              win.find('#src').value(e.control.value()).fire('change');\n            },\n            onPostRender: function () {\n              imageListCtrl = this;\n            }\n          };\n        }\n        if (Settings.hasAdvTab(editor) || Settings.hasUploadUrl(editor) || Settings.hasUploadHandler(editor)) {\n          var body = [MainTab.makeTab(editor, imageListCtrl)];\n          if (Settings.hasAdvTab(editor)) {\n            body.push(AdvTab.makeTab(editor));\n          }\n          if (Settings.hasUploadUrl(editor) || Settings.hasUploadHandler(editor)) {\n            body.push(UploadTab.makeTab(editor));\n          }\n          win = editor.windowManager.open({\n            title: 'Insert/edit image',\n            data: data,\n            bodyType: 'tabpanel',\n            body: body,\n            onSubmit: curry(submitForm, editor)\n          });\n        } else {\n          win = editor.windowManager.open({\n            title: 'Insert/edit image',\n            data: data,\n            body: MainTab.getGeneralItems(editor, imageListCtrl),\n            onSubmit: curry(submitForm, editor)\n          });\n        }\n        SizeManager.syncSize(win);\n      }\n      function open() {\n        Utils.createImageList(editor, showDialog);\n      }\n      return { open: open };\n    }\n\n    var register = function (editor) {\n      editor.addCommand('mceImage', Dialog(editor).open);\n    };\n    var Commands = { register: register };\n\n    var hasImageClass = function (node) {\n      var className = node.attr('class');\n      return className && /\\bimage\\b/.test(className);\n    };\n    var toggleContentEditableState = function (state) {\n      return function (nodes) {\n        var i = nodes.length, node;\n        var toggleContentEditable = function (node) {\n          node.attr('contenteditable', state ? 'true' : null);\n        };\n        while (i--) {\n          node = nodes[i];\n          if (hasImageClass(node)) {\n            node.attr('contenteditable', state ? 'false' : null);\n            global$2.each(node.getAll('figcaption'), toggleContentEditable);\n          }\n        }\n      };\n    };\n    var setup = function (editor) {\n      editor.on('preInit', function () {\n        editor.parser.addNodeFilter('figure', toggleContentEditableState(true));\n        editor.serializer.addNodeFilter('figure', toggleContentEditableState(false));\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.addButton('image', {\n        icon: 'image',\n        tooltip: 'Insert/edit image',\n        onclick: Dialog(editor).open,\n        stateSelector: 'img:not([data-mce-object],[data-mce-placeholder]),figure.image'\n      });\n      editor.addMenuItem('image', {\n        icon: 'image',\n        text: 'Image',\n        onclick: Dialog(editor).open,\n        context: 'insert',\n        prependToContext: true\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('image', function (editor) {\n      FilterContent.setup(editor);\n      Buttons.register(editor);\n      Commands.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","(function () {\nvar visualchars = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get = function (toggleState) {\n      var isEnabled = function () {\n        return toggleState.get();\n      };\n      return { isEnabled: isEnabled };\n    };\n    var Api = { get: get };\n\n    var fireVisualChars = function (editor, state) {\n      return editor.fire('VisualChars', { state: state });\n    };\n    var Events = { fireVisualChars: fireVisualChars };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var value = function (element) {\n      return element.dom().nodeValue;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isText = isType$1(TEXT);\n\n    var charMap = {\n      '\\xA0': 'nbsp',\n      '\\xAD': 'shy'\n    };\n    var charMapToRegExp = function (charMap, global) {\n      var key, regExp = '';\n      for (key in charMap) {\n        regExp += key;\n      }\n      return new RegExp('[' + regExp + ']', global ? 'g' : '');\n    };\n    var charMapToSelector = function (charMap) {\n      var key, selector = '';\n      for (key in charMap) {\n        if (selector) {\n          selector += ',';\n        }\n        selector += 'span.mce-' + charMap[key];\n      }\n      return selector;\n    };\n    var Data = {\n      charMap: charMap,\n      regExp: charMapToRegExp(charMap),\n      regExpGlobal: charMapToRegExp(charMap, true),\n      selector: charMapToSelector(charMap),\n      charMapToRegExp: charMapToRegExp,\n      charMapToSelector: charMapToSelector\n    };\n\n    var wrapCharWithSpan = function (value) {\n      return '<span data-mce-bogus=\"1\" class=\"mce-' + Data.charMap[value] + '\">' + value + '</span>';\n    };\n    var Html = { wrapCharWithSpan: wrapCharWithSpan };\n\n    var isMatch = function (n) {\n      var value$1 = value(n);\n      return isText(n) && value$1 !== undefined && Data.regExp.test(value$1);\n    };\n    var filterDescendants = function (scope, predicate) {\n      var result = [];\n      var dom = scope.dom();\n      var children = map(dom.childNodes, Element.fromDom);\n      each(children, function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(filterDescendants(x, predicate));\n      });\n      return result;\n    };\n    var findParentElm = function (elm, rootElm) {\n      while (elm.parentNode) {\n        if (elm.parentNode === rootElm) {\n          return elm;\n        }\n        elm = elm.parentNode;\n      }\n    };\n    var replaceWithSpans = function (text) {\n      return text.replace(Data.regExpGlobal, Html.wrapCharWithSpan);\n    };\n    var Nodes = {\n      isMatch: isMatch,\n      filterDescendants: filterDescendants,\n      findParentElm: findParentElm,\n      replaceWithSpans: replaceWithSpans\n    };\n\n    var show = function (editor, rootElm) {\n      var node, div;\n      var nodeList = Nodes.filterDescendants(Element.fromDom(rootElm), Nodes.isMatch);\n      each(nodeList, function (n) {\n        var withSpans = Nodes.replaceWithSpans(editor.dom.encode(value(n)));\n        div = editor.dom.create('div', null, withSpans);\n        while (node = div.lastChild) {\n          editor.dom.insertAfter(node, n.dom());\n        }\n        editor.dom.remove(n.dom());\n      });\n    };\n    var hide = function (editor, body) {\n      var nodeList = editor.dom.select(Data.selector, body);\n      each(nodeList, function (node) {\n        editor.dom.remove(node, 1);\n      });\n    };\n    var toggle = function (editor) {\n      var body = editor.getBody();\n      var bookmark = editor.selection.getBookmark();\n      var parentNode = Nodes.findParentElm(editor.selection.getNode(), body);\n      parentNode = parentNode !== undefined ? parentNode : body;\n      hide(editor, parentNode);\n      show(editor, parentNode);\n      editor.selection.moveToBookmark(bookmark);\n    };\n    var VisualChars = {\n      show: show,\n      hide: hide,\n      toggle: toggle\n    };\n\n    var toggleVisualChars = function (editor, toggleState) {\n      var body = editor.getBody();\n      var selection = editor.selection;\n      var bookmark;\n      toggleState.set(!toggleState.get());\n      Events.fireVisualChars(editor, toggleState.get());\n      bookmark = selection.getBookmark();\n      if (toggleState.get() === true) {\n        VisualChars.show(editor, body);\n      } else {\n        VisualChars.hide(editor, body);\n      }\n      selection.moveToBookmark(bookmark);\n    };\n    var Actions = { toggleVisualChars: toggleVisualChars };\n\n    var register = function (editor, toggleState) {\n      editor.addCommand('mceVisualChars', function () {\n        Actions.toggleVisualChars(editor, toggleState);\n      });\n    };\n    var Commands = { register: register };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var setup = function (editor, toggleState) {\n      var debouncedToggle = global$1.debounce(function () {\n        VisualChars.toggle(editor);\n      }, 300);\n      if (editor.settings.forced_root_block !== false) {\n        editor.on('keydown', function (e) {\n          if (toggleState.get() === true) {\n            e.keyCode === 13 ? VisualChars.toggle(editor) : debouncedToggle();\n          }\n        });\n      }\n    };\n    var Keyboard = { setup: setup };\n\n    var isEnabledByDefault = function (editor) {\n      return editor.getParam('visualchars_default_state', false);\n    };\n    var Settings = { isEnabledByDefault: isEnabledByDefault };\n\n    var setup$1 = function (editor, toggleState) {\n      editor.on('init', function () {\n        var valueForToggling = !Settings.isEnabledByDefault(editor);\n        toggleState.set(valueForToggling);\n        Actions.toggleVisualChars(editor, toggleState);\n      });\n    };\n    var Bindings = { setup: setup$1 };\n\n    var toggleActiveState = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('VisualChars', function (e) {\n          ctrl.active(e.state);\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addButton('visualchars', {\n        active: false,\n        title: 'Show invisible characters',\n        cmd: 'mceVisualChars',\n        onPostRender: toggleActiveState(editor)\n      });\n      editor.addMenuItem('visualchars', {\n        text: 'Show invisible characters',\n        cmd: 'mceVisualChars',\n        onPostRender: toggleActiveState(editor),\n        selectable: true,\n        context: 'view',\n        prependToContext: true\n      });\n    };\n\n    global.add('visualchars', function (editor) {\n      var toggleState = Cell(false);\n      Commands.register(editor, toggleState);\n      register$1(editor);\n      Keyboard.setup(editor, toggleState);\n      Bindings.setup(editor, toggleState);\n      return Api.get(toggleState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","// Exports the \"noneditable\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/noneditable')\n//   ES2015:\n//     import 'tinymce/plugins/noneditable'\nrequire('./plugin.js');","(function () {\nvar emoticons = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var emoticons = [\n      [\n        'cool',\n        'cry',\n        'embarassed',\n        'foot-in-mouth'\n      ],\n      [\n        'frown',\n        'innocent',\n        'kiss',\n        'laughing'\n      ],\n      [\n        'money-mouth',\n        'sealed',\n        'smile',\n        'surprised'\n      ],\n      [\n        'tongue-out',\n        'undecided',\n        'wink',\n        'yell'\n      ]\n    ];\n    var getHtml = function (pluginUrl) {\n      var emoticonsHtml;\n      emoticonsHtml = '<table role=\"list\" class=\"mce-grid\">';\n      global$1.each(emoticons, function (row) {\n        emoticonsHtml += '<tr>';\n        global$1.each(row, function (icon) {\n          var emoticonUrl = pluginUrl + '/img/smiley-' + icon + '.gif';\n          emoticonsHtml += '<td><a href=\"#\" data-mce-url=\"' + emoticonUrl + '\" data-mce-alt=\"' + icon + '\" tabindex=\"-1\" ' + 'role=\"option\" aria-label=\"' + icon + '\"><img src=\"' + emoticonUrl + '\" style=\"width: 18px; height: 18px\" role=\"presentation\" /></a></td>';\n        });\n        emoticonsHtml += '</tr>';\n      });\n      emoticonsHtml += '</table>';\n      return emoticonsHtml;\n    };\n    var PanelHtml = { getHtml: getHtml };\n\n    var insertEmoticon = function (editor, src, alt) {\n      editor.insertContent(editor.dom.createHTML('img', {\n        src: src,\n        alt: alt\n      }));\n    };\n    var register = function (editor, pluginUrl) {\n      var panelHtml = PanelHtml.getHtml(pluginUrl);\n      editor.addButton('emoticons', {\n        type: 'panelbutton',\n        panel: {\n          role: 'application',\n          autohide: true,\n          html: panelHtml,\n          onclick: function (e) {\n            var linkElm = editor.dom.getParent(e.target, 'a');\n            if (linkElm) {\n              insertEmoticon(editor, linkElm.getAttribute('data-mce-url'), linkElm.getAttribute('data-mce-alt'));\n              this.hide();\n            }\n          }\n        },\n        tooltip: 'Emoticons'\n      });\n    };\n    var Buttons = { register: register };\n\n    global.add('emoticons', function (editor, pluginUrl) {\n      Buttons.register(editor, pluginUrl);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"anchor\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/anchor')\n//   ES2015:\n//     import 'tinymce/plugins/anchor'\nrequire('./plugin.js');","(function () {\nvar print = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var register = function (editor) {\n      editor.addCommand('mcePrint', function () {\n        if (global$1.ie && global$1.ie <= 11) {\n          editor.getDoc().execCommand('print', false, null);\n        } else {\n          editor.getWin().print();\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('print', {\n        title: 'Print',\n        cmd: 'mcePrint'\n      });\n      editor.addMenuItem('print', {\n        text: 'Print',\n        cmd: 'mcePrint',\n        icon: 'print'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('print', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      editor.addShortcut('Meta+P', '', 'mcePrint');\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar hr = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var register = function (editor) {\n      editor.addCommand('InsertHorizontalRule', function () {\n        editor.execCommand('mceInsertContent', false, '<hr />');\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('hr', {\n        icon: 'hr',\n        tooltip: 'Horizontal line',\n        cmd: 'InsertHorizontalRule'\n      });\n      editor.addMenuItem('hr', {\n        icon: 'hr',\n        text: 'Horizontal line',\n        cmd: 'InsertHorizontalRule',\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('hr', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"spellchecker\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/spellchecker')\n//   ES2015:\n//     import 'tinymce/plugins/spellchecker'\nrequire('./plugin.js');","(function () {\nvar directionality = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var setDir = function (editor, dir) {\n      var dom = editor.dom;\n      var curDir;\n      var blocks = editor.selection.getSelectedBlocks();\n      if (blocks.length) {\n        curDir = dom.getAttrib(blocks[0], 'dir');\n        global$1.each(blocks, function (block) {\n          if (!dom.getParent(block.parentNode, '*[dir=\"' + dir + '\"]', dom.getRoot())) {\n            dom.setAttrib(block, 'dir', curDir !== dir ? dir : null);\n          }\n        });\n        editor.nodeChanged();\n      }\n    };\n    var Direction = { setDir: setDir };\n\n    var register = function (editor) {\n      editor.addCommand('mceDirectionLTR', function () {\n        Direction.setDir(editor, 'ltr');\n      });\n      editor.addCommand('mceDirectionRTL', function () {\n        Direction.setDir(editor, 'rtl');\n      });\n    };\n    var Commands = { register: register };\n\n    var generateSelector = function (dir) {\n      var selector = [];\n      global$1.each('h1 h2 h3 h4 h5 h6 div p'.split(' '), function (name) {\n        selector.push(name + '[dir=' + dir + ']');\n      });\n      return selector.join(',');\n    };\n    var register$1 = function (editor) {\n      editor.addButton('ltr', {\n        title: 'Left to right',\n        cmd: 'mceDirectionLTR',\n        stateSelector: generateSelector('ltr')\n      });\n      editor.addButton('rtl', {\n        title: 'Right to left',\n        cmd: 'mceDirectionRTL',\n        stateSelector: generateSelector('rtl')\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('directionality', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"fullpage\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/fullpage')\n//   ES2015:\n//     import 'tinymce/plugins/fullpage'\nrequire('./plugin.js');","// 4.9.10 (2020-04-23)\n(function () {\n(function (domGlobals) {\n    'use strict';\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isNull = isType('null');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Option.none() : Option.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var url = function () {\n      return Global$1.getOrDie('URL');\n    };\n    var createObjectURL = function (blob) {\n      return url().createObjectURL(blob);\n    };\n    var revokeObjectURL = function (u) {\n      url().revokeObjectURL(u);\n    };\n    var URL = {\n      createObjectURL: createObjectURL,\n      revokeObjectURL: revokeObjectURL\n    };\n\n    var nav = domGlobals.navigator, userAgent = nav.userAgent;\n    var opera, webkit, ie, ie11, ie12, gecko, mac, iDevice, android, fileApi, phone, tablet, windowsPhone;\n    var matchMediaQuery = function (query) {\n      return 'matchMedia' in domGlobals.window ? domGlobals.matchMedia(query).matches : false;\n    };\n    opera = false;\n    android = /Android/.test(userAgent);\n    webkit = /WebKit/.test(userAgent);\n    ie = !webkit && !opera && /MSIE/gi.test(userAgent) && /Explorer/gi.test(nav.appName);\n    ie = ie && /MSIE (\\w+)\\./.exec(userAgent)[1];\n    ie11 = userAgent.indexOf('Trident/') !== -1 && (userAgent.indexOf('rv:') !== -1 || nav.appName.indexOf('Netscape') !== -1) ? 11 : false;\n    ie12 = userAgent.indexOf('Edge/') !== -1 && !ie && !ie11 ? 12 : false;\n    ie = ie || ie11 || ie12;\n    gecko = !webkit && !ie11 && /Gecko/.test(userAgent);\n    mac = userAgent.indexOf('Mac') !== -1;\n    iDevice = /(iPad|iPhone)/.test(userAgent);\n    fileApi = 'FormData' in domGlobals.window && 'FileReader' in domGlobals.window && 'URL' in domGlobals.window && !!URL.createObjectURL;\n    phone = matchMediaQuery('only screen and (max-device-width: 480px)') && (android || iDevice);\n    tablet = matchMediaQuery('only screen and (min-width: 800px)') && (android || iDevice);\n    windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    if (ie12) {\n      webkit = false;\n    }\n    var contentEditable = !iDevice || fileApi || parseInt(userAgent.match(/AppleWebKit\\/(\\d*)/)[1], 10) >= 534;\n    var Env = {\n      opera: opera,\n      webkit: webkit,\n      ie: ie,\n      gecko: gecko,\n      mac: mac,\n      iOS: iDevice,\n      android: android,\n      contentEditable: contentEditable,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: ie !== 8,\n      range: domGlobals.window.getSelection && 'Range' in domGlobals.window,\n      documentMode: ie && !ie12 ? domGlobals.document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: ie === false || ie > 8,\n      cacheSuffix: null,\n      container: null,\n      overrideViewPort: null,\n      experimentalShadowDom: false,\n      canHaveCSP: ie === false || ie > 11,\n      desktop: !phone && !tablet,\n      windowsPhone: windowsPhone\n    };\n\n    var promise = function () {\n      function bind(fn, thisArg) {\n        return function () {\n          fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof setImmediate === 'function' && setImmediate || function (fn) {\n        setTimeout(fn, 1);\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var i = 0, len = this._deferreds.length; i < len; i++) {\n          handle.call(this, this._deferreds[i]);\n        }\n        this._deferreds = null;\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var args = Array.prototype.slice.call(arguments.length === 1 && isArray(arguments[0]) ? arguments[0] : arguments);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (value) {\n        return new Promise(function (resolve, reject) {\n          reject(value);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var i = 0, len = values.length; i < len; i++) {\n            values[i].then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var promiseObj = window.Promise ? window.Promise : promise();\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var i, requestAnimationFrameFunc = domGlobals.window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (callback) {\n        domGlobals.window.setTimeout(callback, 0);\n      };\n      for (i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = domGlobals.window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer, func;\n      func = function () {\n        var args = arguments;\n        clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = domGlobals.document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer;\n        timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var deprecated = {\n      keyLocation: 1,\n      layerX: 1,\n      layerY: 1,\n      returnValue: 1,\n      webkitMovementX: 1,\n      webkitMovementY: 1,\n      keyIdentifier: 1\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === returnTrue || event.isDefaultPrevented === returnFalse;\n    };\n    var returnFalse = function () {\n      return false;\n    };\n    var returnTrue = function () {\n      return true;\n    };\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var getTargetFromShadowDom = function (event, defaultTarget) {\n      if (event.composedPath) {\n        var composedPath = event.composedPath();\n        if (composedPath && composedPath.length > 0) {\n          return composedPath[0];\n        }\n      }\n      return defaultTarget;\n    };\n    var fix = function (originalEvent, data) {\n      var name;\n      var event = data || {};\n      for (name in originalEvent) {\n        if (!deprecated[name]) {\n          event[name] = originalEvent[name];\n        }\n      }\n      if (!event.target) {\n        event.target = event.srcElement || domGlobals.document;\n      }\n      if (Env.experimentalShadowDom) {\n        event.target = getTargetFromShadowDom(originalEvent, event.target);\n      }\n      if (originalEvent && mouseEventRe.test(originalEvent.type) && originalEvent.pageX === undefined && originalEvent.clientX !== undefined) {\n        var eventDoc = event.target.ownerDocument || domGlobals.document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        event.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        event.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      event.preventDefault = function () {\n        event.isDefaultPrevented = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.preventDefault) {\n            originalEvent.preventDefault();\n          } else {\n            originalEvent.returnValue = false;\n          }\n        }\n      };\n      event.stopPropagation = function () {\n        event.isPropagationStopped = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.stopPropagation) {\n            originalEvent.stopPropagation();\n          } else {\n            originalEvent.cancelBubble = true;\n          }\n        }\n      };\n      event.stopImmediatePropagation = function () {\n        event.isImmediatePropagationStopped = returnTrue;\n        event.stopPropagation();\n      };\n      if (hasIsDefaultPrevented(event) === false) {\n        event.isDefaultPrevented = returnFalse;\n        event.isPropagationStopped = returnFalse;\n        event.isImmediatePropagationStopped = returnFalse;\n      }\n      if (typeof event.metaKey === 'undefined') {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n      };\n      var waitForDomLoaded = function () {\n        if (isDocReady()) {\n          removeEvent(doc, 'readystatechange', waitForDomLoaded);\n          readyHandler();\n        }\n      };\n      var tryScroll = function () {\n        try {\n          doc.documentElement.doScroll('left');\n        } catch (ex) {\n          Delay.setTimeout(tryScroll);\n          return;\n        }\n        readyHandler();\n      };\n      if (doc.addEventListener && !(Env.ie && Env.ie < 11)) {\n        if (isDocReady()) {\n          readyHandler();\n        } else {\n          addEvent(win, 'DOMContentLoaded', readyHandler);\n        }\n      } else {\n        addEvent(doc, 'readystatechange', waitForDomLoaded);\n        if (doc.documentElement.doScroll && win.self === win.top) {\n          tryScroll();\n        }\n      }\n      addEvent(win, 'load', readyHandler);\n    };\n    var EventUtils = function () {\n      var self = this;\n      var events = {}, count, expando, hasFocusIn, hasMouseEnterLeave, mouseEnterLeave;\n      expando = eventExpandoPrefix + (+new Date()).toString(32);\n      hasMouseEnterLeave = 'onmouseenter' in domGlobals.document.documentElement;\n      hasFocusIn = 'onfocusin' in domGlobals.document.documentElement;\n      mouseEnterLeave = {\n        mouseenter: 'mouseover',\n        mouseleave: 'mouseout'\n      };\n      count = 1;\n      self.domLoaded = false;\n      self.events = events;\n      var executeHandlers = function (evt, id) {\n        var callbackList, i, l, callback;\n        var container = events[id];\n        callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (i = 0, l = callbackList.length; i < l; i++) {\n            callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      self.bind = function (target, names, callback, scope) {\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = domGlobals.window;\n        var defaultNativeHandler = function (evt) {\n          executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[expando]) {\n          id = count++;\n          target[expando] = id;\n          events[id] = {};\n        } else {\n          id = target[expando];\n        }\n        scope = scope || target;\n        names = names.split(' ');\n        i = names.length;\n        while (i--) {\n          name = names[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!hasMouseEnterLeave) {\n            fakeName = mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current, related;\n                current = evt.currentTarget;\n                related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              executeHandlers(evt, id);\n            };\n          }\n          callbackList = events[id][name];\n          if (!callbackList) {\n            events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback({ type: name });\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = 0;\n        return callback;\n      };\n      self.unbind = function (target, names, callback) {\n        var id, callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return self;\n        }\n        id = target[expando];\n        if (id) {\n          eventMap = events[id];\n          if (names) {\n            names = names.split(' ');\n            i = names.length;\n            while (i--) {\n              name = names[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            for (name in eventMap) {\n              callbackList = eventMap[name];\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            }\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            return self;\n          }\n          delete events[id];\n          try {\n            delete target[expando];\n          } catch (ex) {\n            target[expando] = null;\n          }\n        }\n        return self;\n      };\n      self.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return self;\n        }\n        args = fix(null, args);\n        args.type = name;\n        args.target = target;\n        do {\n          id = target[expando];\n          if (id) {\n            executeHandlers(args, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !args.isPropagationStopped());\n        return self;\n      };\n      self.clean = function (target) {\n        var i, children;\n        var unbind = self.unbind;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return self;\n        }\n        if (target[expando]) {\n          unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[expando]) {\n              unbind(target);\n            }\n          }\n        }\n        return self;\n      };\n      self.destroy = function () {\n        events = {};\n      };\n      self.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n    };\n    EventUtils.Event = new EventUtils();\n    EventUtils.Event.bind(domGlobals.window, 'ready', function () {\n    });\n\n    var i, support, Expr, getText, isXML, tokenize, compile, select, outermostContext, sortInput, hasDuplicate, setDocument, document, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains$1, expando = 'sizzle' + -new Date(), preferredDoc = domGlobals.window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push = arr.push, slice = arr.slice, indexOf$1 = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push.apply(arr = slice.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document) {\n        setDocument(context);\n      }\n      context = context || document;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains$1(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document || doc.nodeType !== 9 || !doc.documentElement) {\n        return document;\n      }\n      document = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains$1 = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains$1(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains$1(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf$1.call(sortInput, a) - indexOf$1.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf$1.call(sortInput, a) - indexOf$1.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document) {\n        setDocument(context);\n      }\n      return contains$1(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf$1.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = domGlobals.window.location && domGlobals.window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    for (i in {\n        radio: true,\n        checkbox: true,\n        file: true,\n        password: true,\n        image: true\n      }) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    }\n    for (i in {\n        submit: true,\n        reset: true\n      }) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    }\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf$1.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf$1.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            return !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var isArray$1 = Array.isArray;\n    var toArray = function (obj) {\n      var array = obj, i, l;\n      if (!isArray$1(obj)) {\n        array = [];\n        for (i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n      }\n      return array;\n    };\n    var each$1 = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return 0;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return 0;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (o.hasOwnProperty(n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return 0;\n            }\n          }\n        }\n      }\n      return 1;\n    };\n    var map$1 = function (array, callback) {\n      var out = [];\n      each$1(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$1 = function (a, f) {\n      var o = [];\n      each$1(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$2 = function (a, v) {\n      var i, l;\n      if (a) {\n        for (i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var i = 0;\n      if (arguments.length < 3) {\n        accumulator = collection[0];\n      }\n      for (; i < collection.length; i++) {\n        accumulator = iteratee.call(thisArg, accumulator, collection[i], i);\n      }\n      return accumulator;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var find$1 = function (array, predicate, thisArg) {\n      var idx = findIndex$1(array, predicate, thisArg);\n      if (idx !== -1) {\n        return array[idx];\n      }\n      return undefined;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n    var ArrUtils = {\n      isArray: isArray$1,\n      toArray: toArray,\n      each: each$1,\n      map: map$1,\n      filter: filter$1,\n      indexOf: indexOf$2,\n      reduce: reduce,\n      findIndex: findIndex$1,\n      find: find$1,\n      last: last$1\n    };\n\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var is = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && ArrUtils.isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty = function (obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    };\n    var create = function (s, p, root) {\n      var self = this;\n      var sp, ns, cn, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend = function (obj, ext) {\n      var x = [];\n      for (var _i = 2; _i < arguments.length; _i++) {\n        x[_i - 2] = arguments[_i];\n      }\n      var i, l, name;\n      var args = arguments;\n      var value;\n      for (i = 1, l = args.length; i < l; i++) {\n        ext = args[i];\n        for (name in ext) {\n          if (ext.hasOwnProperty(name)) {\n            value = ext[name];\n            if (value !== undefined) {\n              obj[name] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        ArrUtils.each(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || domGlobals.window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve$1 = function (n, o) {\n      var i, l;\n      o = o || domGlobals.window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode = function (s, d) {\n      if (!s || is(s, 'array')) {\n        return s;\n      }\n      return ArrUtils.map(s.split(d || ','), trim);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim,\n      isArray: ArrUtils.isArray,\n      is: is,\n      toArray: ArrUtils.toArray,\n      makeMap: makeMap,\n      each: ArrUtils.each,\n      map: ArrUtils.map,\n      grep: ArrUtils.filter,\n      inArray: ArrUtils.indexOf,\n      hasOwn: hasOwnProperty,\n      extend: extend,\n      create: create,\n      walk: walk,\n      createNS: createNS,\n      resolve: resolve$1,\n      explode: explode,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var doc = domGlobals.document, push$1 = Array.prototype.push, slice$1 = Array.prototype.slice;\n    var rquickExpr$1 = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString$1 = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment = function (html, fragDoc) {\n      var frag, node, container;\n      fragDoc = fragDoc || doc;\n      container = fragDoc.createElement('div');\n      frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString$1(sourceItem)) {\n        sourceItem = createFragment(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQuery = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp$1 = /^\\s*|\\s*$/g;\n    var trim$1 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$1, '');\n    };\n    var each$2 = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep = function (array, callback) {\n      var out = [];\n      each$2(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQuery.fn = DomQuery.prototype = {\n      constructor: DomQuery,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = domGlobals.document;\n        }\n        if (isString$1(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr$1.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push$1.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString$1(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push$1.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$2(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$2(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$2(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$2(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var existingClassName, classState;\n            classState = hasClass(node, className);\n            if (classState !== state) {\n              existingClassName = node.className;\n              if (classState) {\n                node.className = trim$1((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$2(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event.fire(this, name.type, name);\n          } else {\n            Event.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return new DomQuery(slice$1.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push$1,\n      sort: [].sort,\n      splice: [].splice\n    };\n    Tools.extend(DomQuery, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray,\n      isArray: Tools.isArray,\n      each: each$2,\n      trim: trim$1,\n      grep: grep,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$2({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQuery.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        result = DomQuery(result);\n        if (selector) {\n          return result.filter(selector);\n        }\n        return result;\n      };\n    });\n    each$2({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQuery.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        result = DomQuery(result);\n        if (filter) {\n          return result.filter(filter);\n        }\n        return result;\n      };\n    });\n    DomQuery.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQuery.fn.init.prototype = DomQuery.fn;\n    DomQuery.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    var appendHooks = function (targetHooks, prop, hooks) {\n      each$2(hooks, function (name, func) {\n        targetHooks[name] = targetHooks[name] || {};\n        targetHooks[name][prop] = func;\n      });\n    };\n    if (Env.ie && Env.ie < 8) {\n      appendHooks(attrHooks, 'get', {\n        maxlength: function (elm) {\n          var value = elm.maxLength;\n          if (value === 2147483647) {\n            return undefined;\n          }\n          return value;\n        },\n        size: function (elm) {\n          var value = elm.size;\n          if (value === 20) {\n            return undefined;\n          }\n          return value;\n        },\n        class: function (elm) {\n          return elm.className;\n        },\n        style: function (elm) {\n          var value = elm.style.cssText;\n          if (value.length === 0) {\n            return undefined;\n          }\n          return value;\n        }\n      });\n      appendHooks(attrHooks, 'set', {\n        class: function (elm, value) {\n          elm.className = value;\n        },\n        style: function (elm, value) {\n          elm.style.cssText = value;\n        }\n      });\n    }\n    if (Env.ie && Env.ie < 9) {\n      cssFix.float = 'styleFloat';\n      appendHooks(cssHooks, 'set', {\n        opacity: function (elm, value) {\n          var style = elm.style;\n          if (value === null || value === '') {\n            style.removeAttribute('filter');\n          } else {\n            style.zoom = 1;\n            style.filter = 'alpha(opacity=' + value * 100 + ')';\n          }\n        }\n      });\n    }\n    DomQuery.attrHooks = attrHooks;\n    DomQuery.cssHooks = cssHooks;\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie$1 = 'IE';\n    var opera$1 = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie$1, current),\n        isOpera: isBrowser(opera$1, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie$1),\n      opera: constant(opera$1),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android$1 = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android$1, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android$1),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains$2 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var trim$2 = function (str) {\n      return str.replace(/^\\s+|\\s+$/g, '');\n    };\n    var lTrim = function (str) {\n      return str.replace(/^\\s+/g, '');\n    };\n    var rTrim = function (str) {\n      return str.replace(/\\s+$/g, '');\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$2(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$2(uastring, 'edge/') && contains$2(uastring, 'chrome') && contains$2(uastring, 'safari') && contains$2(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'chrome') && !contains$2(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'msie') || contains$2(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$2(uastring, 'safari') || contains$2(uastring, 'mobile/')) && contains$2(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$2(uastring, 'iphone') || contains$2(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each$3 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$3(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      each$3(obj, function (x, i) {\n        var branch = pred(x, i) ? t : f;\n        branch[i] = x;\n      });\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$3(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom();\n      each$3(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$1 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      var v = r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n      return v === null ? undefined : v;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom();\n      if (isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var toArray$1 = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n    var Recurse = { toArray: toArray$1 };\n\n    var node = function () {\n      var f = Global$1.getOrDie('Node');\n      return f;\n    };\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var is$1 = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$3 = browser.isIE() ? ieContains : regularContains;\n\n    var owner = function (element) {\n      return Element.fromDom(element.dom().ownerDocument);\n    };\n    var documentElement = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.documentElement);\n    };\n    var defaultView = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.defaultView);\n    };\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom();\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = Element.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var prevSibling = function (element) {\n      return Option.from(element.dom().previousSibling).map(Element.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Option.from(element.dom().nextSibling).map(Element.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(Recurse.toArray(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return Recurse.toArray(element, nextSibling);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom().childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom().childNodes.length;\n    };\n    var spot = Immutable('element', 'offset');\n\n    var browser$1 = PlatformDetection$1.detect().browser;\n    var firstElement = function (nodes) {\n      return find(nodes, isElement);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$1.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom().offsetTop;\n            var captionTop = caption.dom().offsetTop;\n            var captionHeight = caption.dom().offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0, offsetParent;\n      var doc = body.ownerDocument;\n      var pos;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$1(Element.fromDom(body), 'position') === 'static') {\n          pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType) {\n          x += offsetParent.offsetLeft || 0;\n          y += offsetParent.offsetTop || 0;\n          offsetParent = offsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(Element.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var Position = { getPos: getPos };\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module$1, undefined));\n    var Promise = module$1.exports.boltExport;\n\n    var nu$3 = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$3(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu$3(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$3,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$4 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$4,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (opt) {\n        return value(o);\n      };\n      var orThunk = function (f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    function StyleSheetLoader(document, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var maxLoadTime;\n      maxLoadTime = settings.maxLoadTime || 5000;\n      var appendToHead = function (node) {\n        document.getElementsByTagName('head')[0].appendChild(node);\n      };\n      var load = function (url, loadedCallback, errorCallback) {\n        var link, style, startTime, state;\n        var passed = function () {\n          var callbacks = state.passed;\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = 2;\n          state.passed = [];\n          state.failed = [];\n        };\n        var failed = function () {\n          var callbacks = state.failed;\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = 3;\n          state.passed = [];\n          state.failed = [];\n        };\n        var isOldWebKit = function () {\n          var webKitChunks = domGlobals.navigator.userAgent.match(/WebKit\\/(\\d*)/);\n          return !!(webKitChunks && parseInt(webKitChunks[1], 10) < 536);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (new Date().getTime() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = document.styleSheets;\n            var styleSheet, i = styleSheets.length, owner;\n            while (i--) {\n              styleSheet = styleSheets[i];\n              owner = styleSheet.ownerNode ? styleSheet.ownerNode : styleSheet.owningElement;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n          }, waitForWebKitLinkLoaded);\n        };\n        var waitForGeckoLinkLoaded = function () {\n          wait(function () {\n            try {\n              var cssRules = style.sheet.cssRules;\n              passed();\n              return !!cssRules;\n            } catch (ex) {\n            }\n          }, waitForGeckoLinkLoaded);\n        };\n        url = Tools._addCacheSuffix(url);\n        if (!loadedStates[url]) {\n          state = {\n            passed: [],\n            failed: []\n          };\n          loadedStates[url] = state;\n        } else {\n          state = loadedStates[url];\n        }\n        if (loadedCallback) {\n          state.passed.push(loadedCallback);\n        }\n        if (errorCallback) {\n          state.failed.push(errorCallback);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.type = 'text/css';\n        link.id = 'u' + idCount++;\n        link.async = false;\n        link.defer = false;\n        startTime = new Date().getTime();\n        if (settings.contentCssCors) {\n          link.crossOrigin = 'anonymous';\n        }\n        if ('onload' in link && !isOldWebKit()) {\n          link.onload = waitForWebKitLinkLoaded;\n          link.onerror = failed;\n        } else {\n          if (domGlobals.navigator.userAgent.indexOf('Firefox') > 0) {\n            style = document.createElement('style');\n            style.textContent = '@import \"' + url + '\"';\n            waitForGeckoLinkLoaded();\n            appendToHead(style);\n            return;\n          }\n          waitForWebKitLinkLoaded();\n        }\n        appendToHead(link);\n        link.href = url;\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var unbox = function (result) {\n        return result.fold(identity, identity);\n      };\n      var loadAll = function (urls, success, failure) {\n        par$1(map(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unbox));\n          } else {\n            success(parts.pass.map(unbox));\n          }\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll\n      };\n    }\n\n    function TreeWalker (startNode, rootNode) {\n      var node = startNode;\n      var findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      var findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (rootNode && sibling === rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== rootNode) {\n            return parent;\n          }\n        }\n      };\n      this.current = function () {\n        return node;\n      };\n      this.next = function (shallow) {\n        node = findSibling(node, 'firstChild', 'nextSibling', shallow);\n        return node;\n      };\n      this.prev = function (shallow) {\n        node = findSibling(node, 'lastChild', 'previousSibling', shallow);\n        return node;\n      };\n      this.prev2 = function (shallow) {\n        node = findPreviousNode(node, 'lastChild', 'previousSibling', shallow);\n        return node;\n      };\n    }\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var voids = [\n      'area',\n      'base',\n      'basefont',\n      'br',\n      'col',\n      'frame',\n      'hr',\n      'img',\n      'input',\n      'isindex',\n      'link',\n      'meta',\n      'param',\n      'embed',\n      'source',\n      'wbr',\n      'track'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, constant(true));\n        return lookup.hasOwnProperty(name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock = lazyLookup(blocks);\n    var isInline = function (node) {\n      return isElement(node) && !isBlock(node);\n    };\n    var isBr = function (node) {\n      return isElement(node) && name(node) === 'br';\n    };\n    var isTextBlock = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems);\n    var isVoid = lazyLookup(voids);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$1 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var items = names.toLowerCase().split(' ');\n      return function (node) {\n        var i, name;\n        if (node && node.nodeType) {\n          name = node.nodeName.toLowerCase();\n          for (i = 0; i < items.length; i++) {\n            if (name === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        var i, cssValue;\n        if (isElement$1(node)) {\n          for (i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasPropValue = function (propName, propValue) {\n      return function (node) {\n        return isElement$1(node) && node[propName] === propValue;\n      };\n    };\n    var hasAttribute = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$1(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$1(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus = function (node) {\n      return isElement$1(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll = function (node) {\n      return isElement$1(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable = function (node) {\n      return isElement$1(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$1(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isText$1 = isNodeType(3);\n    var isComment = isNodeType(8);\n    var isDocument = isNodeType(9);\n    var isDocumentFragment = isNodeType(11);\n    var isBr$1 = matchNodeNames('br');\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var NodeType = {\n      isText: isText$1,\n      isElement: isElement$1,\n      isComment: isComment,\n      isDocument: isDocument,\n      isDocumentFragment: isDocumentFragment,\n      isBr: isBr$1,\n      isContentEditableTrue: isContentEditableTrue,\n      isContentEditableFalse: isContentEditableFalse,\n      isRestrictedNode: isRestrictedNode,\n      matchNodeNames: matchNodeNames,\n      hasPropValue: hasPropValue,\n      hasAttribute: hasAttribute,\n      hasAttributeValue: hasAttributeValue,\n      matchStyleValues: matchStyleValues,\n      isBogus: isBogus,\n      isBogusAll: isBogusAll,\n      isTable: isTable\n    };\n\n    var surroundedBySpans = function (node) {\n      var previousIsSpan = node.previousSibling && node.previousSibling.nodeName === 'SPAN';\n      var nextIsSpan = node.nextSibling && node.nextSibling.nodeName === 'SPAN';\n      return previousIsSpan && nextIsSpan;\n    };\n    var isBookmarkNode = function (node) {\n      return node && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var trimNode = function (dom, node) {\n      var i, children = node.childNodes;\n      if (NodeType.isElement(node) && isBookmarkNode(node)) {\n        return;\n      }\n      for (i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i]);\n      }\n      if (NodeType.isDocument(node) === false) {\n        if (NodeType.isText(node) && node.nodeValue.length > 0) {\n          var trimmedLength = Tools.trim(node.nodeValue).length;\n          if (dom.isBlock(node.parentNode) || trimmedLength > 0) {\n            return;\n          }\n          if (trimmedLength === 0 && surroundedBySpans(node)) {\n            return;\n          }\n        } else if (NodeType.isElement(node)) {\n          children = node.childNodes;\n          if (children.length === 1 && isBookmarkNode(children[0])) {\n            node.parentNode.insertBefore(children[0], node);\n          }\n          if (children.length || isVoid(Element.fromDom(node))) {\n            return;\n          }\n        }\n        dom.remove(node);\n      }\n      return node;\n    };\n    var TrimNode = { trimNode: trimNode };\n\n    var makeMap$1 = Tools.makeMap;\n    var namedEntities, baseEntities, reverseEntities;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm;\n      elm = Element.fromTag('div').dom();\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$1(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$4 = Tools.each, extend$1 = Tools.extend, explode$1 = Tools.explode, inArray$1 = Tools.inArray;\n    var split = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split(children);\n        }\n        name = split(name);\n        ni = name.length;\n        while (ni--) {\n          attributesOrder = split([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[name[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        name = split(name);\n        ni = name.length;\n        attributes = split(attributes);\n        while (ni--) {\n          schemaItem = schema[name[ni]];\n          for (i = 0, l = attributes.length; i < l; i++) {\n            schemaItem.attributes[attributes[i]] = {};\n            schemaItem.attributesOrder.push(attributes[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$4(split(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$4(split(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select', 'onchange');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen');\n      }\n      each$4(split('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$4(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$1(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    function Schema(settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var validStyles;\n      var invalidStyles;\n      var schemaItems;\n      var whiteSpaceElementsMap, selfClosingElementsMap, shortEndedElementsMap, boolAttrMap, validClasses;\n      var blockElementsMap, nonEmptyElementsMap, moveCaretBeforeOnEnterElementsMap, textBlockElementsMap, textInlineElementsMap;\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n            value = extend$1(value, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      validStyles = compileElementMap(settings.valid_styles);\n      invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      validClasses = compileElementMap(settings.valid_classes, 'map');\n      whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      nonEmptyElementsMap = createLookupTable('non_empty_elements', 'td th iframe video audio object ' + 'script pre code', shortEndedElementsMap);\n      moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', 'table', nonEmptyElementsMap);\n      textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$4((settings.special || 'script noscript noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, key, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)\\])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          validElements = split(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElements.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElements[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                for (key in globalAttributes) {\n                  attributes[key] = globalAttributes[key];\n                }\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray$1(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$4(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$4(split(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$1({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$4(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$1({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)(\\w+)\\[([^\\]]+)\\]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$4(split(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$4(split(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$4(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$4(split('strong/b em/i'), function (item) {\n            item = split(item, '/');\n            elements[item[1]].outputName = item[0];\n          });\n        }\n        each$4(split('ol ul sub sup blockquote span font a table tbody tr strong em b i'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$4(split('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$4(split('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$4({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$4(explode$1(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = function () {\n        return validStyles;\n      };\n      var getInvalidStyles = function () {\n        return invalidStyles;\n      };\n      var getValidClasses = function () {\n        return validClasses;\n      };\n      var getBoolAttrs = function () {\n        return boolAttrMap;\n      };\n      var getBlockElements = function () {\n        return blockElementsMap;\n      };\n      var getTextBlockElements = function () {\n        return textBlockElementsMap;\n      };\n      var getTextInlineElements = function () {\n        return textInlineElementsMap;\n      };\n      var getShortEndedElements = function () {\n        return shortEndedElementsMap;\n      };\n      var getSelfClosingElements = function () {\n        return selfClosingElementsMap;\n      };\n      var getNonEmptyElements = function () {\n        return nonEmptyElementsMap;\n      };\n      var getMoveCaretBeforeOnEnterElements = function () {\n        return moveCaretBeforeOnEnterElementsMap;\n      };\n      var getWhiteSpaceElements = function () {\n        return whiteSpaceElementsMap;\n      };\n      var getSpecialElements = function () {\n        return specialElements;\n      };\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = function () {\n        return customElementsMap;\n      };\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    }\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    function Styles(settings, schema) {\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var encodingItems;\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = '\\uFEFF';\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top, right, bottom, left;\n            top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '', name, value;\n          var serializeStyles = function (name) {\n            var styleList, i, l, value;\n            styleList = validStyles[name];\n            if (styleList) {\n              for (i = 0, l = styleList.length; i < l; i++) {\n                name = styleList[i];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap;\n            styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            return true;\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            for (name in styles) {\n              value = styles[name];\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            }\n          }\n          return css;\n        }\n      };\n    }\n\n    var each$5 = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var whiteSpaceRegExp$2 = /^[ \\t\\r\\n]*$/;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var attrHooks = {};\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            $elm.attr('style', value);\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    function DOMUtils(doc, settings) {\n      var _this = this;\n      if (settings === void 0) {\n        settings = {};\n      }\n      var attrHooks;\n      var addedStyles = {};\n      var win = domGlobals.window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = StyleSheetLoader(doc, { contentCssCors: settings.contentCssCors });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils(settings.proxy) : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        if (elm && doc && typeof elm === 'string') {\n          var node = doc.getElementById(elm);\n          if (node && node.id !== elm) {\n            return doc.getElementsByName(elm)[1];\n          } else {\n            return node;\n          }\n        }\n        return elm;\n      };\n      var $$ = function (elm) {\n        if (typeof elm === 'string') {\n          elm = get(elm);\n        }\n        return $(elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        var originalValue, hook;\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        }\n        if (!deep) {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$5(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n        return null;\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var actWin = !argWin ? win : argWin;\n        var doc = actWin.document;\n        var rootElm =  doc.documentElement ;\n        return {\n          x: actWin.pageXOffset || rootElm.scrollLeft,\n          y: actWin.pageYOffset || rootElm.scrollTop,\n          w: actWin.innerWidth || rootElm.clientWidth,\n          h: actWin.innerHeight || rootElm.clientHeight\n        };\n      };\n      var getPos = function (elm, rootElm) {\n        return Position.getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = $$(elm).css(name, value);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.ie && Env.ie < 12 ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        var pos, size;\n        elm = get(elm);\n        pos = getPos(elm);\n        size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || !node.nodeType || node.nodeType === 9) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$5(node, function (elm, i) {\n            if (elm) {\n              if (typeof elm === 'string') {\n                elm = get(elm);\n              }\n              result.push(func.call(scope, elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : _this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$5(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (attrs.hasOwnProperty(key) && attrs[key] !== null && typeof attrs[key] !== 'undefined') {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === domGlobals.document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (url) {\n        var head;\n        if (self !== DOMUtils.DOM && doc === domGlobals.document) {\n          DOMUtils.DOM.loadCSS(url);\n          return;\n        }\n        if (!url) {\n          url = '';\n        }\n        head = doc.getElementsByTagName('head')[0];\n        each$5(url.split(','), function (url) {\n          var link;\n          url = Tools._addCacheSuffix(url);\n          if (files[url]) {\n            return;\n          }\n          files[url] = true;\n          link = create('link', {\n            rel: 'stylesheet',\n            href: url\n          });\n          head.appendChild(link);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return NodeType.isElement(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent, nextSibling;\n          parent = referenceNode.parentNode;\n          nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$5(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$5(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isEmpty = function (node, elements) {\n        var i, attributes, type, whitespace, walker, name, brCount = 0;\n        node = node.firstChild;\n        if (node) {\n          walker = new TreeWalker(node, node.parentNode);\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          do {\n            type = node.nodeType;\n            if (NodeType.isElement(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              attributes = getAttribs(node);\n              i = attributes.length;\n              while (i--) {\n                name = attributes[i].nodeName;\n                if (name === 'name' || name === 'data-mce-bookmark') {\n                  return false;\n                }\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !whiteSpaceRegExp$2.test(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && whiteSpaceRegExp$2.test(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var r = createRng(), bef, aft, pa;\n        if (parentElm && splitElm) {\n          r.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          r.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          bef = r.extractContents();\n          r = createRng();\n          r.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          r.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          aft = r.extractContents();\n          pa = parentElm.parentNode;\n          pa.insertBefore(TrimNode.trimNode(self, bef), parentElm);\n          if (replacementElm) {\n            pa.insertBefore(replacementElm, parentElm);\n          } else {\n            pa.insertBefore(splitElm, parentElm);\n          }\n          pa.insertBefore(TrimNode.trimNode(self, aft), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          while (i--) {\n            target[i] = bind(target[i], name, func, scope);\n          }\n          return target;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        return events.bind(target, name, func, scope || self);\n      };\n      var unbind = function (target, name, func) {\n        var i;\n        if (Tools.isArray(target)) {\n          i = target.length;\n          while (i--) {\n            target[i] = unbind(target[i], name, func);\n          }\n          return target;\n        }\n        if (boundEvents && (target === doc || target === win)) {\n          i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n              events.unbind(item[0], item[1], item[2]);\n            }\n          }\n        }\n        return events.unbind(target, name, func);\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && NodeType.isElement(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        while (node) {\n          if (parent === node) {\n            return true;\n          }\n          node = node.parentNode;\n        }\n        return false;\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      attrHooks = setupAttrHooks(styles, settings, function () {\n        return self;\n      });\n      return self;\n    }\n    (function (DOMUtils) {\n      DOMUtils.DOM = DOMUtils(domGlobals.document);\n      DOMUtils.nodeIndex = findNodeIndex;\n    }(DOMUtils || (DOMUtils = {})));\n    var DOMUtils$1 = DOMUtils;\n\n    var DOM = DOMUtils$1.DOM;\n    var each$6 = Tools.each, grep$2 = Tools.grep;\n    var isFunction$1 = function (f) {\n      return typeof f === 'function';\n    };\n    var ScriptLoader = function () {\n      var QUEUED = 0;\n      var LOADING = 1;\n      var LOADED = 2;\n      var FAILED = 3;\n      var states = {};\n      var queue = [];\n      var scriptLoadedCallbacks = {};\n      var queueLoadedCallbacks = [];\n      var loading = 0;\n      var loadScript = function (url, success, failure) {\n        var dom = DOM;\n        var elm, id;\n        var done = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onreadystatechange = elm.onload = elm = null;\n          }\n          success();\n        };\n        var error = function () {\n          if (isFunction$1(failure)) {\n            failure();\n          } else {\n            if (typeof console !== 'undefined' && console.log) {\n              console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        id = dom.uniqueId();\n        elm = domGlobals.document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        elm.onload = done;\n        elm.onerror = error;\n        (domGlobals.document.getElementsByTagName('head')[0] || domGlobals.document.body).appendChild(elm);\n      };\n      this.isDone = function (url) {\n        return states[url] === LOADED;\n      };\n      this.markDone = function (url) {\n        states[url] = LOADED;\n      };\n      this.add = this.load = function (url, success, scope, failure) {\n        var state = states[url];\n        if (state === undefined) {\n          queue.push(url);\n          states[url] = QUEUED;\n        }\n        if (success) {\n          if (!scriptLoadedCallbacks[url]) {\n            scriptLoadedCallbacks[url] = [];\n          }\n          scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      this.remove = function (url) {\n        delete states[url];\n        delete scriptLoadedCallbacks[url];\n      };\n      this.loadQueue = function (success, scope, failure) {\n        this.loadScripts(queue, success, scope, failure);\n      };\n      this.loadScripts = function (scripts, success, scope, failure) {\n        var loadScripts;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$6(scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction$1(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          scriptLoadedCallbacks[url] = undefined;\n        };\n        queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        loadScripts = function () {\n          var loadingScripts = grep$2(scripts);\n          scripts.length = 0;\n          each$6(loadingScripts, function (url) {\n            if (states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (states[url] !== LOADING) {\n              states[url] = LOADING;\n              loading++;\n              loadScript(url, function () {\n                states[url] = LOADED;\n                loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                states[url] = FAILED;\n                loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!loading) {\n            var notifyCallbacks = queueLoadedCallbacks.slice(0);\n            queueLoadedCallbacks.length = 0;\n            each$6(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction$1(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction$1(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n    };\n    ScriptLoader.ScriptLoader = new ScriptLoader();\n\n    var each$7 = Tools.each;\n    function AddOnManager() {\n      var _this = this;\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        var language = AddOnManager.language;\n        if (language && AddOnManager.languageLoad !== false) {\n          if (languages) {\n            languages = ',' + languages + ',';\n            if (languages.indexOf(',' + language.substr(0, 2) + ',') !== -1) {\n              language = language.substr(0, 2);\n            } else if (languages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n          }\n          ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        items.push(addOn);\n        lookup[id] = {\n          instance: addOn,\n          dependencies: dependencies\n        };\n        var result = partition(_listeners, function (listener) {\n          return listener.name === id;\n        });\n        _listeners = result.fail;\n        each$7(result.pass, function (listener) {\n          listener.callback();\n        });\n        return addOn;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = _this.urls[pluginName];\n        each$7(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each$7(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        if (lookup[name]) {\n          loadDependencies(name, addOnUrl, success, scope);\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, function () {\n            return loadDependencies(name, addOnUrl, success, scope);\n          }, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback) {\n        if (lookup.hasOwnProperty(name)) {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    }\n    (function (AddOnManager) {\n      AddOnManager.PluginManager = AddOnManager();\n      AddOnManager.ThemeManager = AddOnManager();\n    }(AddOnManager || (AddOnManager = {})));\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n    var wrap$1 = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each(children(element), function (rogue) {\n        remove$1(rogue);\n      });\n    };\n    var remove$1 = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$1(wrapper);\n    };\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = domGlobals.setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n        }\n        timer = domGlobals.setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var read = function (element, attr) {\n      var value = get(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n    var get$2 = function (element) {\n      return read(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom().classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom().classList : get$2(element);\n      if (classList.length === 0) {\n        remove(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is$1(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      return ClosestOrAncestor(is$1, ancestor$1, scope, selector, isRoot);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = Element.fromDom(rng.startContainer);\n      var root = Element.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child(start, rng.startOffset).getOr(start);\n      var closest = closest$1(newStart, selector, function (n) {\n        return eq(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Option.some(get(c, property));\n        } else {\n          return Option.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement(elem) && has$2(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = Element.fromDom(editor.getBody());\n      return descendants$1(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = Element.fromDom(editor.getBody());\n      var markers = descendants$1(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each(markers, function (m) {\n        var uid = get(m, dataAnnotationId());\n        var nodesAlready = directory.hasOwnProperty(uid) ? directory[uid] : [];\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup = function (editor, registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: Cell(Option.none())\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = callbackMap.hasOwnProperty(name) ? callbackMap[name] : initData();\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map(elements, function (elem) {\n                return elem.dom();\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last$2(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort(keys(callbackMap));\n        each(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Option.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.set(Option.none());\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!prev.is(uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(Option.some(uid));\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('nodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$1 = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        var optAnnotation = Option.from(span.attributes.map[dataAnnotation()]);\n        return optAnnotation.bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$1 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return annotations.hasOwnProperty(name) ? Option.from(annotations[name]).map(function (a) {\n          return a.settings;\n        }) : Option.none();\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var unique = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add$3 = function (element, classes) {\n      each(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n\n    var clone = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone(original, false);\n    };\n    var deep = function (original) {\n      return clone(original, true);\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(Element.fromDom(div));\n    };\n\n    var get$3 = function (element) {\n      return element.dom().innerHTML;\n    };\n    var set$1 = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom();\n      var fragment = Element.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n\n    var ZWSP = '\\uFEFF';\n    var isZwsp = function (chr) {\n      return chr === ZWSP;\n    };\n    var trim$3 = function (text) {\n      return text.replace(new RegExp(ZWSP, 'g'), '');\n    };\n    var Zwsp = {\n      isZwsp: isZwsp,\n      ZWSP: ZWSP,\n      trim: trim$3\n    };\n\n    var isElement$2 = NodeType.isElement;\n    var isText$2 = NodeType.isText;\n    var isCaretContainerBlock = function (node) {\n      if (isText$2(node)) {\n        node = node.parentNode;\n      }\n      return isElement$2(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$2(node) && Zwsp.isZwsp(node.data);\n    };\n    var isCaretContainer = function (node) {\n      return isCaretContainerBlock(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !NodeType.isBr(node.firstChild);\n    };\n    var insertInline = function (node, before) {\n      var doc, sibling, textNode, parentNode;\n      doc = node.ownerDocument;\n      textNode = doc.createTextNode(Zwsp.ZWSP);\n      parentNode = node.parentNode;\n      if (!before) {\n        sibling = node.nextSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        sibling = node.previousSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!pos || !NodeType.isText(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === Zwsp.ZWSP || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!pos || !NodeType.isText(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === Zwsp.ZWSP || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = domGlobals.document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock = function (blockName, node, before) {\n      var doc, blockNode, parentNode;\n      doc = node.ownerDocument;\n      blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[0] === Zwsp.ZWSP;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[node.data.length - 1] === Zwsp.ZWSP;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (NodeType.isBogus(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock(range.startContainer);\n    };\n\n    var isContentEditableTrue$1 = NodeType.isContentEditableTrue;\n    var isContentEditableFalse$1 = NodeType.isContentEditableFalse;\n    var isBr$2 = NodeType.isBr;\n    var isText$3 = NodeType.isText;\n    var isInvalidTextElement = NodeType.matchNodeNames('script style textarea');\n    var isAtomicInline = NodeType.matchNodeNames('img input textarea hr iframe video audio object');\n    var isTable$1 = NodeType.matchNodeNames('table');\n    var isCaretContainer$1 = isCaretContainer;\n    var isCaretCandidate = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$3(node)) {\n        if (isInvalidTextElement(node.parentNode)) {\n          return false;\n        }\n        return true;\n      }\n      return isAtomicInline(node) || isBr$2(node) || isTable$1(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return NodeType.isElement(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$1(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$1(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from$1(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$1(elm);\n      }, false) !== true;\n    };\n    var isAtomic = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate = function (node, root) {\n      return isCaretCandidate(node) && isInEditable(node, root);\n    };\n\n    var round = Math.round;\n    var clone$1 = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round(rect.left),\n        top: round(rect.top),\n        bottom: round(rect.bottom),\n        right: round(rect.right),\n        width: round(rect.width),\n        height: round(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone$1(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove = function (rect1, rect2) {\n      if (rect1.bottom - rect1.height / 2 < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n    var overflowX = function (outer, inner) {\n      if (inner.left > outer.left && inner.right < outer.right) {\n        return 0;\n      } else {\n        return inner.left < outer.left ? inner.left - outer.left : inner.right - outer.right;\n      }\n    };\n    var overflowY = function (outer, inner) {\n      if (inner.top > outer.top && inner.bottom < outer.bottom) {\n        return 0;\n      } else {\n        return inner.top < outer.top ? inner.top - outer.top : inner.bottom - outer.bottom;\n      }\n    };\n    var getOverflow = function (outer, inner) {\n      return {\n        x: overflowX(outer, inner),\n        y: overflowY(outer, inner)\n      };\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode = function (container, offset) {\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        if (offset >= container.childNodes.length) {\n          offset = container.childNodes.length - 1;\n        }\n        container = container.childNodes[offset];\n      }\n      return container;\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie())) : Option.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Option.none();\n    };\n\n    var slice$2 = [].slice;\n    var or = function () {\n      var x = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        x[_i] = arguments[_i];\n      }\n      var args = slice$2.call(arguments);\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var x = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        x[_i] = arguments[_i];\n      }\n      var args = slice$2.call(arguments);\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n    var Predicate = {\n      and: and,\n      or: or\n    };\n\n    var isElement$3 = NodeType.isElement;\n    var isCaretCandidate$1 = isCaretCandidate;\n    var isBlock$1 = NodeType.matchStyleValues('display', 'block table');\n    var isFloated = NodeType.matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = Predicate.and(isElement$3, isCaretCandidate$1, not(isFloated));\n    var isNotPre = not(NodeType.matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = NodeType.isText;\n    var isBr$3 = NodeType.isBr;\n    var nodeIndex = DOMUtils$1.nodeIndex;\n    var resolveIndex = getNode;\n    var createRange = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils$1.DOM.createRng();\n    };\n    var isWhiteSpace = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      var text;\n      if (isWhiteSpace(range.toString()) && isNotPre(container.parentNode) && NodeType.isText(container)) {\n        text = container.data;\n        if (isWhiteSpace(text[offset - 1]) || isWhiteSpace(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange(doc);\n      var nbsp = doc.createTextNode('\\xA0');\n      var parentNode = brNode.parentNode;\n      var clientRect;\n      parentNode.insertBefore(nbsp, brNode);\n      rng.setStart(nbsp, 0);\n      rng.setEnd(nbsp, 1);\n      clientRect = clone$1(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && NodeType.isText(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect = function (item) {\n      var clientRect, clientRects;\n      clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone$1(clientRects[0]);\n      } else {\n        clientRect = clone$1(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$3(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var beforeNode, node;\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), true));\n          }\n        }\n      };\n      if (isText$4(caretPosition.container())) {\n        addCharacterOffset(caretPosition.container(), caretPosition.offset());\n        return clientRects;\n      }\n      if (isElement$3(caretPosition.container())) {\n        if (caretPosition.isAtEnd()) {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$3(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n          }\n        } else {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n            return clientRects;\n          }\n          beforeNode = resolveIndex(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$3(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    function CaretPosition(container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range;\n        range = createRange(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    }\n    (function (CaretPosition) {\n      CaretPosition.fromRangeStart = function (range) {\n        return CaretPosition(range.startContainer, range.startOffset);\n      };\n      CaretPosition.fromRangeEnd = function (range) {\n        return CaretPosition(range.endContainer, range.endOffset);\n      };\n      CaretPosition.after = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node) + 1);\n      };\n      CaretPosition.before = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node));\n      };\n      CaretPosition.isAbove = function (pos1, pos2) {\n        return lift2(head(pos2.getClientRects()), last(pos1.getClientRects()), isAbove).getOr(false);\n      };\n      CaretPosition.isBelow = function (pos1, pos2) {\n        return lift2(last(pos2.getClientRects()), head(pos1.getClientRects()), isBelow).getOr(false);\n      };\n      CaretPosition.isAtStart = function (pos) {\n        return pos ? pos.isAtStart() : false;\n      };\n      CaretPosition.isAtEnd = function (pos) {\n        return pos ? pos.isAtEnd() : false;\n      };\n      CaretPosition.isTextPosition = function (pos) {\n        return pos ? NodeType.isText(pos.container()) : false;\n      };\n      CaretPosition.isElementPosition = function (pos) {\n        return CaretPosition.isTextPosition(pos) === false;\n      };\n    }(CaretPosition || (CaretPosition = {})));\n    var CaretPosition$1 = CaretPosition;\n\n    var isText$5 = NodeType.isText;\n    var isBogus$1 = NodeType.isBogus;\n    var nodeIndex$1 = DOMUtils$1.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus$1(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return ArrUtils.reduce(node.childNodes, function (result, node) {\n        if (isBogus$1(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$5(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index, numTextFragments;\n      nodes = getChildNodes(normalizedParent(node));\n      index = ArrUtils.findIndex(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      numTextFragments = ArrUtils.reduce(nodes, function (result, node, i) {\n        if (isText$5(node) && isText$5(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = ArrUtils.filter(nodes, NodeType.matchNodeNames(node.nodeName));\n      index = ArrUtils.findIndex(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$5(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$2 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$5(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil(root, container);\n      parents = ArrUtils.filter(parents, not(NodeType.isBogus));\n      path = path.concat(ArrUtils.map(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = ArrUtils.filter(nodes, function (node, index) {\n        return !isText$5(node) || !isText$5(nodes[index - 1]);\n      });\n      nodes = ArrUtils.filter(nodes, NodeType.matchNodeNames(name));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$5(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$5(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$5(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition$1(container, offset);\n    };\n    var resolve$2 = function (root, path) {\n      var parts, container, offset;\n      if (!path) {\n        return null;\n      }\n      parts = path.split(',');\n      path = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      container = ArrUtils.reduce(path, function (result, value) {\n        value = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!value) {\n          return null;\n        }\n        if (value[1] === 'text()') {\n          value[1] = '#text';\n        }\n        return resolvePathItem(result, value[1], parseInt(value[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$5(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex$1(container) + 1;\n        } else {\n          offset = nodeIndex$1(container);\n        }\n        return CaretPosition$1(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var trimEmptyTextNode = function (dom, node) {\n      if (NodeType.isText(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode(dom, node.previousSibling);\n      trimEmptyTextNode(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Option.from(frag.firstChild);\n      var lastChild = Option.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (NodeType.isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isContentEditableFalse$2 = NodeType.isContentEditableFalse;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && NodeType.isText(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (NodeType.isText(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      return bookmark;\n    };\n    var findIndex$2 = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (NodeType.isElement(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint(rng, true);\n      moveEndPoint(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (NodeType.isElement(node)) {\n        node = getNode(node, offset);\n        if (isContentEditableFalse$2(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer(node)) {\n        if (NodeType.isText(node) && isCaretContainerBlock(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$2(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$2(selection.dom.getRoot(), CaretPosition$1.fromRangeStart(rng)),\n        end: create$2(selection.dom.getRoot(), CaretPosition$1.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        'id': id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: 1\n      });\n      return { id: id };\n    };\n    var getBookmark = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(Zwsp.trim, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var GetBookmark = {\n      getBookmark: getBookmark,\n      getUndoBookmark: curry(getOffsetBookmark, identity, true),\n      getPersistentBookmark: getPersistentBookmark\n    };\n\n    var CARET_ID = '_mce_caret';\n    var isCaretNode = function (node) {\n      return NodeType.isElement(node) && node.id === CARET_ID;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isElement$4 = NodeType.isElement;\n    var isText$6 = NodeType.isText;\n    var removeNode = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var getNodeValue = function (node) {\n      try {\n        return node.nodeValue;\n      } catch (ex) {\n        return '';\n      }\n    };\n    var setNodeValue = function (node, text) {\n      if (text.length === 0) {\n        removeNode(node);\n      } else {\n        node.nodeValue = text;\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = Zwsp.trim(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$5(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        setNodeValue(caretContainer, text);\n        return CaretPosition$1(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf(from$1(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition$1(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$5(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$6(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition$1.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$5 = function (caretContainerNode) {\n      if (isElement$4(caretContainerNode) && isCaretContainer(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode(caretContainerNode);\n        }\n      }\n      if (isText$6(caretContainerNode)) {\n        var text = Zwsp.trim(getNodeValue(caretContainerNode));\n        setNodeValue(caretContainerNode, text);\n      }\n    };\n    var CaretContainerRemove = {\n      removeAndReposition: removeAndReposition,\n      remove: remove$5\n    };\n\n    var browser$2 = PlatformDetection$1.detect().browser;\n    var isContentEditableFalse$3 = NodeType.isContentEditableFalse;\n    var isTableCell$1 = function (node) {\n      return NodeType.isElement(node) && /^(TD|TH)$/i.test(node.tagName);\n    };\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var docElm, scrollX, scrollY, margin, rootRect;\n      if (root.tagName === 'BODY') {\n        docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var contentEditableFalseNodes, node, sibling, i, data;\n      contentEditableFalseNodes = DomQuery('*[contentEditable=false]', root);\n      for (i = 0; i < contentEditableFalseNodes.length; i++) {\n        node = contentEditableFalseNodes[i];\n        sibling = node.previousSibling;\n        if (endsWithCaretContainer(sibling)) {\n          data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer(sibling)) {\n          data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (root, isBlock, hasFocus) {\n      var lastVisualCaret = Cell(Option.none());\n      var cursorInterval, caretContainerNode;\n      var show = function (before, element) {\n        var clientRect, rng;\n        hide();\n        if (isTableCell$1(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock('p', element, before);\n          clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(clientRect).appendTo(root)[0];\n          lastVisualCaret.set(Option.some({\n            caret: caret,\n            element: element,\n            before: before\n          }));\n          lastVisualCaret.get().each(function (caretState) {\n            if (before) {\n              DomQuery(caretState.caret).addClass('mce-visual-caret-before');\n            }\n          });\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isContentEditableFalse$3(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          CaretContainerRemove.remove(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.get().each(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.set(Option.none());\n        });\n        clearInterval(cursorInterval);\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.get().each(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(clientRect);\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isFakeCaretTarget = function (node) {\n      return isContentEditableFalse$3(node) || NodeType.isTable(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$4 = NodeType.isContentEditableFalse;\n    var isBlockLike = NodeType.matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer$2 = isCaretContainer;\n    var isCaretContainerBlock$1 = isCaretContainerBlock;\n    var isElement$5 = NodeType.isElement;\n    var isCaretCandidate$2 = isCaretCandidate;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock$1(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new TreeWalker(node, rootNode);\n      if (isBackwards(direction)) {\n        if (isContentEditableFalse$4(node) || isCaretContainerBlock$1(node)) {\n          node = skipCaretContainers(walker.prev, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isContentEditableFalse$4(node) || isCaretContainerBlock$1(node)) {\n          node = skipCaretContainers(walker.next, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock(caretPosition1.container(), rootNode) === getParentBlock(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      var container, offset;\n      if (!caretPosition) {\n        return null;\n      }\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (!isElement$5(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock(node1, root) === getParentBlock(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var sibling, siblingName;\n      if (left) {\n        siblingName = 'previousSibling';\n      } else {\n        siblingName = 'nextSibling';\n      }\n      while (node && node !== root) {\n        sibling = node[siblingName];\n        if (isCaretContainer$2(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$4(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$2(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$1 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node, container, offset, location;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      container = range.startContainer;\n      offset = range.startOffset;\n      if (isCaretContainerBlock(container)) {\n        if (!isElement$5(container)) {\n          container = container.parentNode;\n        }\n        location = container.getAttribute('data-mce-caret');\n        if (location === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$1(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (NodeType.isText(container)) {\n        if (isCaretContainer$2(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$1(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Option.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$4);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Option.from(pos.getNode()).map(Element.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Option.from(pos.getNode(true)).map(Element.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && NodeType.isBr(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$5 = NodeType.isContentEditableFalse;\n    var isText$7 = NodeType.isText;\n    var isElement$6 = NodeType.isElement;\n    var isBr$4 = NodeType.isBr;\n    var isCaretCandidate$3 = isCaretCandidate;\n    var isAtomic$1 = isAtomic;\n    var isEditableCaretCandidate$1 = isEditableCaretCandidate;\n    var getParents = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate$3(node.previousSibling) && !isText$7(node.previousSibling)) {\n          return CaretPosition$1.before(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate$3(node.nextSibling) && !isText$7(node.nextSibling)) {\n          return CaretPosition$1.after(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$4(node)) {\n          return CaretPosition$1.before(node);\n        }\n        return CaretPosition$1.after(node);\n      }\n      return CaretPosition$1.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate$3(nextSibling)) {\n        if (isText$7(nextSibling)) {\n          return CaretPosition$1(nextSibling, 0);\n        } else {\n          return CaretPosition$1.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition(HDirection.Forwards, CaretPosition$1.after(nextNode), root);\n      }\n    };\n    var findCaretPosition = function (direction, startPos, root) {\n      var node, nextNode, innerNode;\n      var rootContentEditableFalseElm, caretPosition;\n      if (!isElement$6(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition$1.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition$1.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate$3(root.lastChild) && isElement$6(root.lastChild)) {\n          return isBr$4(root.lastChild) ? CaretPosition$1.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$7(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition$1(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition$1(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate$3(nextNode)) {\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, innerNode.data.length);\n                }\n                return CaretPosition$1.after(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, nextNode.data.length);\n            }\n            return CaretPosition$1.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate$3(nextNode)) {\n            if (isBr$4(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, 0);\n                }\n                return CaretPosition$1.before(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, 0);\n            }\n            return CaretPosition$1.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode(node, direction, constant(true), root, true);\n        if (isEditableCaretCandidate$1(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode(node, direction, isEditableCaretCandidate$1, root);\n      rootContentEditableFalseElm = ArrUtils.last(filter(getParents(container, root), isContentEditableFalse$5));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition$1.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition$1.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition$1.before(start) : CaretPosition$1.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return NodeType.isBr(node) ? CaretPosition$1.before(node) : CaretPosition$1.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition$1.isTextPosition(from) && !CaretPosition$1.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition$1.isTextPosition(position) && NodeType.isBr(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Option.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Option.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Option.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (NodeType.isText(startNode)) {\n        return Option.some(CaretPosition$1(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate(startNode)) {\n          return Option.some(forward ? CaretPosition$1.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Option.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var CaretFinder = {\n      fromPosition: fromPosition,\n      nextPosition: nextPosition,\n      prevPosition: prevPosition,\n      navigate: navigate,\n      navigateIgnore: navigateIgnore,\n      positionIn: positionIn,\n      firstPositionIn: curry(positionIn, true),\n      lastPositionIn: curry(positionIn, false)\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return typeof bookmark.start === 'string';\n    };\n    var isRangeBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (NodeType.isElement(node) && dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var rng, pos;\n      rng = dom.createRng();\n      pos = resolve$2(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$2(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(Zwsp.ZWSP);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return CaretFinder.lastPositionIn(node).fold(function () {\n        return false;\n      }, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return NodeType.isText(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (NodeType.isText(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && NodeType.isText(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            if (suffix === 'start') {\n              container = prev;\n              offset = idx;\n            } else {\n              container = prev;\n              offset = idx;\n            }\n          }\n        }\n        return Option.some(CaretPosition$1(container, offset));\n      } else {\n        return Option.none();\n      }\n    };\n    var alt = function (o1, o2) {\n      return o1.isSome() ? o1 : o2;\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Option.some(rng);\n      } else {\n        return Option.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, alt(endPos, startPos), function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex$1 = function (dom, bookmark) {\n      return Option.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$3 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Option.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex$1(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Option.some(bookmark.rng);\n        }\n      }\n      return Option.none();\n    };\n    var ResolveBookmark = { resolve: resolve$3 };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return GetBookmark.getBookmark(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      ResolveBookmark.resolve(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return NodeType.isElement(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var Bookmarks = {\n      getBookmark: getBookmark$1,\n      moveToBookmark: moveToBookmark,\n      isBookmarkNode: isBookmarkNode$1\n    };\n\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer, walker, node, nodes;\n      if (rng.startContainer === rng.endContainer) {\n        if (isInlineBlock(rng.startContainer.childNodes[rng.startOffset])) {\n          return;\n        }\n      }\n      if (container.nodeType === 1) {\n        nodes = container.childNodes;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new TreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new TreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (node = walker.current(); node; node = walker.next()) {\n          if (node.nodeType === 3 && !isWhiteSpaceNode(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        next = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[next]; node; node = node[next]) {\n          if (node.nodeType === 1 || !isWhiteSpaceNode(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (name.nodeType) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode = function (node) {\n      return node && node.nodeType === 3 && /^([\\t \\r\\n]+|)$/.test(node.nodeValue);\n    };\n    var replaceVars = function (value, vars) {\n      if (typeof value !== 'string') {\n        value = value(vars);\n      } else if (vars) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$1 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var FormatUtils = {\n      isInlineBlock: isInlineBlock,\n      moveStart: moveStart,\n      getNonWhiteSpaceSibling: getNonWhiteSpaceSibling,\n      isTextBlock: isTextBlock$1,\n      isValid: isValid,\n      isWhiteSpaceNode: isWhiteSpaceNode,\n      replaceVars: replaceVars,\n      isEq: isEq,\n      normalizeStyleValue: normalizeStyleValue,\n      getStyle: getStyle,\n      getTextDecoration: getTextDecoration,\n      getParents: getParents$1\n    };\n\n    var isBookmarkNode$2 = Bookmarks.isBookmarkNode;\n    var getParents$2 = FormatUtils.getParents, isWhiteSpaceNode$1 = FormatUtils.isWhiteSpaceNode, isTextBlock$2 = FormatUtils.isTextBlock;\n    var findLeaf = function (node, offset) {\n      if (typeof offset === 'undefined') {\n        offset = node.nodeType === 3 ? node.length : node.childNodes.length;\n      }\n      while (node && node.hasChildNodes()) {\n        node = node.childNodes[offset];\n        if (node) {\n          offset = node.nodeType === 3 ? node.length : node.childNodes.length;\n        }\n      }\n      return {\n        node: node,\n        offset: offset\n      };\n    };\n    var excludeTrailingWhitespace = function (endContainer, endOffset) {\n      var leaf = findLeaf(endContainer, endOffset);\n      if (leaf.node) {\n        while (leaf.node && leaf.offset === 0 && leaf.node.previousSibling) {\n          leaf = findLeaf(leaf.node.previousSibling);\n        }\n        if (leaf.node && leaf.offset > 0 && leaf.node.nodeType === 3 && leaf.node.nodeValue.charAt(leaf.offset - 1) === ' ') {\n          if (leaf.offset > 1) {\n            endContainer = leaf.node;\n            endContainer.splitText(leaf.offset - 1);\n          }\n        }\n      }\n      return endContainer;\n    };\n    var isBogusBr = function (node) {\n      return node.nodeName === 'BR' && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (parent.nodeType === 1 && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var findSpace = function (start, remove, node, offset) {\n      var pos, pos2;\n      var str = node.nodeValue;\n      if (typeof offset === 'undefined') {\n        offset = start ? str.length : 0;\n      }\n      if (start) {\n        pos = str.lastIndexOf(' ', offset);\n        pos2 = str.lastIndexOf('\\xA0', offset);\n        pos = pos > pos2 ? pos : pos2;\n        if (pos !== -1 && !remove && (pos < offset || !start) && pos <= str.length) {\n          pos++;\n        }\n      } else {\n        pos = str.indexOf(' ', offset);\n        pos2 = str.indexOf('\\xA0', offset);\n        pos = pos !== -1 && (pos2 === -1 || pos < pos2) ? pos : pos2;\n      }\n      return pos;\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, remove) {\n      var walker, node, pos, lastTextNode;\n      if (container.nodeType === 3) {\n        pos = findSpace(start, remove, container, offset);\n        if (pos !== -1) {\n          return {\n            container: container,\n            offset: pos\n          };\n        }\n        lastTextNode = container;\n      }\n      walker = new TreeWalker(container, dom.getParent(container, dom.isBlock) || body);\n      while (node = walker[start ? 'prev' : 'next']()) {\n        if (node.nodeType === 3 && !isBookmarkNode$2(node.parentNode)) {\n          lastTextNode = node;\n          pos = findSpace(start, remove, node);\n          if (pos !== -1) {\n            return {\n              container: node,\n              offset: pos\n            };\n          }\n        } else if (dom.isBlock(node) || FormatUtils.isEq(node, 'BR')) {\n          break;\n        }\n      }\n      if (lastTextNode) {\n        if (start) {\n          offset = 0;\n        } else {\n          offset = lastTextNode.length;\n        }\n        return {\n          container: lastTextNode,\n          offset: offset\n        };\n      }\n    };\n    var findSelectorEndPoint = function (dom, format, rng, container, siblingName) {\n      var parents, i, y, curFormat;\n      if (container.nodeType === 3 && container.nodeValue.length === 0 && container[siblingName]) {\n        container = container[siblingName];\n      }\n      parents = getParents$2(dom, container);\n      for (i = 0; i < parents.length; i++) {\n        for (y = 0; y < format.length; y++) {\n          curFormat = format[y];\n          if ('collapsed' in curFormat && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, format, container, siblingName) {\n      var node;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      if (!format[0].wrapper) {\n        node = dom.getParent(container, format[0].block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(container.nodeType === 3 ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock$2(editor, node);\n        }, scopeRoot);\n      }\n      if (node && format[0].wrapper) {\n        node = getParents$2(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (FormatUtils.isEq(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var findParentContainer = function (dom, format, startContainer, startOffset, endContainer, endOffset, start) {\n      var container, parent, sibling, siblingName, root;\n      container = parent = start ? startContainer : endContainer;\n      siblingName = start ? 'previousSibling' : 'nextSibling';\n      root = dom.getRoot();\n      if (container.nodeType === 3 && !isWhiteSpaceNode$1(container)) {\n        if (start ? startOffset > 0 : endOffset < container.nodeValue.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!format[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          if (!isBookmarkNode$2(sibling) && !isWhiteSpaceNode$1(sibling) && !isBogusBr(sibling)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var expandRng = function (editor, rng, format, remove) {\n      var endPoint, startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      if (startContainer.nodeType === 1 && startContainer.hasChildNodes()) {\n        startContainer = getNode(startContainer, startOffset);\n        if (startContainer.nodeType === 3) {\n          startOffset = 0;\n        }\n      }\n      if (endContainer.nodeType === 1 && endContainer.hasChildNodes()) {\n        endContainer = getNode(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (endContainer.nodeType === 3) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isBookmarkNode$2(startContainer.parentNode) || isBookmarkNode$2(startContainer)) {\n        startContainer = isBookmarkNode$2(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (startContainer.nodeType === 3) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isBookmarkNode$2(endContainer.parentNode) || isBookmarkNode$2(endContainer)) {\n        endContainer = isBookmarkNode$2(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (endContainer.nodeType === 3) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        endPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, remove);\n        if (endPoint) {\n          startContainer = endPoint.container;\n          startOffset = endPoint.offset;\n        }\n        endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, remove);\n        if (endPoint) {\n          endContainer = endPoint.container;\n          endOffset = endPoint.offset;\n        }\n      }\n      if (format[0].inline) {\n        endContainer = remove ? endContainer : excludeTrailingWhitespace(endContainer, endOffset);\n      }\n      if (format[0].inline || format[0].block_expand) {\n        if (!format[0].inline || (startContainer.nodeType !== 3 || startOffset === 0)) {\n          startContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, true);\n        }\n        if (!format[0].inline || (endContainer.nodeType !== 3 || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, false);\n        }\n      }\n      if (format[0].selector && format[0].expand !== false && !format[0].inline) {\n        startContainer = findSelectorEndPoint(dom, format, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, format, rng, endContainer, 'nextSibling');\n      }\n      if (format[0].block || format[0].selector) {\n        startContainer = findBlockEndPoint(editor, format, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, format, endContainer, 'nextSibling');\n        if (format[0].block) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (startContainer.nodeType === 1) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (endContainer.nodeType === 1) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n    var ExpandRange = { expandRng: expandRng };\n\n    var each$8 = Tools.each;\n    var getEndChild = function (container, index) {\n      var childNodes = container.childNodes;\n      index--;\n      if (index > childNodes.length - 1) {\n        index = childNodes.length - 1;\n      } else if (index < 0) {\n        index = 0;\n      }\n      return childNodes[index] || container;\n    };\n    var walk$1 = function (dom, rng, callback) {\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var ancestor;\n      var startPoint;\n      var endPoint;\n      var node;\n      var parent;\n      var siblings;\n      var nodes;\n      nodes = dom.select('td[data-mce-selected],th[data-mce-selected]');\n      if (nodes.length > 0) {\n        each$8(nodes, function (node) {\n          callback([node]);\n        });\n        return;\n      }\n      var exclude = function (nodes) {\n        var node;\n        node = nodes[0];\n        if (node.nodeType === 3 && node === startContainer && startOffset >= node.nodeValue.length) {\n          nodes.splice(0, 1);\n        }\n        node = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && node === endContainer && node.nodeType === 3) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        do {\n          if (node.parentNode === root) {\n            return node;\n          }\n          node = node.parentNode;\n        } while (node);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (node = startNode, parent = node.parentNode; node && node !== endNode; node = parent) {\n          parent = node.parentNode;\n          siblings = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings.length) {\n            if (!next) {\n              siblings.reverse();\n            }\n            callback(exclude(siblings));\n          }\n        }\n      };\n      if (startContainer.nodeType === 1 && startContainer.hasChildNodes()) {\n        startContainer = startContainer.childNodes[startOffset];\n      }\n      if (endContainer.nodeType === 1 && endContainer.hasChildNodes()) {\n        endContainer = getEndChild(endContainer, endOffset);\n      }\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      for (node = startContainer; node; node = node.parentNode) {\n        if (node === endContainer) {\n          return walkBoundary(startContainer, ancestor, true);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      for (node = endContainer; node; node = node.parentNode) {\n        if (node === startContainer) {\n          return walkBoundary(endContainer, ancestor);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n    var RangeWalk = { walk: walk$1 };\n\n    var zeroWidth = function () {\n      return '\\uFEFF';\n    };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom().nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get$4 = function (element) {\n      return api.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText(elem) && get$4(elem) === zeroWidth();\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem)) {\n          return 'caret';\n        } else if (!FormatUtils.isValid(editor, wrapName, nodeName) || !FormatUtils.isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var shouldApplyToTrailingSpaces = function (rng) {\n      return rng.startContainer.nodeType === 3 && rng.startContainer.nodeValue.length >= rng.startOffset && rng.startContainer.nodeValue[rng.startOffset] === '\\xA0';\n    };\n    var applyWordGrab = function (editor, rng) {\n      var r = ExpandRange.expandRng(editor, rng, [{ inline: true }], shouldApplyToTrailingSpaces(rng));\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = Element.fromTag('span', eDoc);\n      add$2(master, annotation());\n      set(master, '' + dataAnnotationId(), uid);\n      set(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll(master, attributes);\n      add$3(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = Cell(Option.none());\n      var finishWrapper = function () {\n        wrapper.set(Option.none());\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(Option.some(nu));\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap$1(elem, w);\n            break;\n          }\n        case 'skipping':\n        case 'existing':\n        case 'caret':\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map(nodes, Element.fromDom);\n        processElements(elems);\n      };\n      RangeWalk.walk(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var initialRng = editor.selection.getRng();\n        if (initialRng.collapsed) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (editor.selection.getRng().collapsed) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set$1(wrapper, '\\xA0');\n          editor.selection.getRng().insertNode(wrapper.dom());\n          editor.selection.select(wrapper.dom());\n        } else {\n          var bookmark = GetBookmark.getPersistentBookmark(editor.selection, false);\n          var rng = editor.selection.getRng();\n          annotate(editor, rng, name, settings.decorate, data);\n          editor.selection.moveToBookmark(bookmark);\n        }\n      });\n    };\n\n    function Annotator (editor) {\n      var registry = create$1();\n      setup$1(editor, registry);\n      var changes = setup(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Option.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$2(directory, function (elems) {\n            return map(elems, function (elem) {\n              return elem.dom();\n            });\n          });\n        }\n      };\n    }\n\n    var hasOnlyOneChild = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === '\\xA0';\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems$1 = function (elm) {\n      return Tools.grep(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === '\\xA0' || NodeType.isBr(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition$1.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition$1.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems$1(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n    var InsertList = {\n      isListFragment: isListFragment,\n      insertAtCaret: insertAtCaret,\n      isParentBlockLi: isParentBlockLi,\n      trimListItems: trimListItems,\n      listItems: listItems$1\n    };\n\n    var each$9 = Tools.each;\n    var ElementUtils = function (dom) {\n      this.compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$9(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (obj1.hasOwnProperty(name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (obj2.hasOwnProperty(name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !Bookmarks.isBookmarkNode(node1) && !Bookmarks.isBookmarkNode(node2);\n      };\n    };\n\n    var getLastChildren = function (elm) {\n      var children = [];\n      var rawNode = elm.dom();\n      while (rawNode) {\n        children.push(Element.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants$1(elm, 'br');\n      var brs = filter(getLastChildren(elm).slice(-1), isBr);\n      if (allBrs.length === brs.length) {\n        each(brs, remove$1);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append(elm, Element.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var isPaddingContents = function (elm) {\n      return isText(elm) ? get$4(elm) === '\\xA0' : isBr(elm);\n    };\n    var isPaddedElement = function (elm) {\n      return filter(children(elm), isPaddingContents).length === 1;\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock(elm) && isBr(lastChild) && isBlock(lastChildPrevSibling)) {\n            remove$1(lastChild);\n          }\n        });\n      });\n    };\n    var PaddingBr = {\n      removeTrailingBr: removeTrailingBr,\n      fillWithPaddingBr: fillWithPaddingBr,\n      isPaddedElement: isPaddedElement,\n      trimBlockTrailingBr: trimBlockTrailingBr\n    };\n\n    var makeMap$3 = Tools.makeMap;\n    function Writer (settings) {\n      var html = [];\n      var indent, indentBefore, indentAfter, encode, htmlOutput;\n      settings = settings || {};\n      indent = settings.indent;\n      indentBefore = makeMap$3(settings.indent_before || '');\n      indentAfter = makeMap$3(settings.indent_after || '');\n      encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    }\n\n    function HtmlSerializer (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var handlers, validate;\n        validate = settings.validate;\n        handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          var name, isEmpty, attrs, attrName, attrValue, sortedAttrs, i, l, elementRule;\n          if (!handler) {\n            name = node.name;\n            isEmpty = node.shortEnded;\n            attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              sortedAttrs = [];\n              sortedAttrs.map = {};\n              elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (i = 0, l = attrs.length; i < l; i++) {\n                  attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    }\n\n    var createRange$1 = function (sc, so, ec, eo) {\n      var rng = domGlobals.document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition$1.fromRangeStart(rng);\n      var endPos = CaretPosition$1.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return CaretFinder.fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange$1(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n    var RangeNormalizer = { normalize: normalize };\n\n    var isAfterNbsp = function (container, offset) {\n      return NodeType.isText(container) && container.nodeValue[offset - 1] === '\\xA0';\n    };\n    var trimOrPadLeftRight = function (rng, html) {\n      var container, offset;\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      var hasSiblingText = function (siblingName) {\n        return container[siblingName] && container[siblingName].nodeType === 3;\n      };\n      if (container.nodeType === 3) {\n        if (offset > 0) {\n          html = html.replace(/^&nbsp;/, ' ');\n        } else if (!hasSiblingText('previousSibling')) {\n          html = html.replace(/^ /, '&nbsp;');\n        }\n        if (offset < container.length) {\n          html = html.replace(/&nbsp;(<br>|)$/, ' ');\n        } else if (!hasSiblingText('nextSibling')) {\n          html = html.replace(/(&nbsp;| )(<br>|)$/, '&nbsp;');\n        }\n      }\n      return html;\n    };\n    var trimNbspAfterDeleteAndPadValue = function (rng, value) {\n      var container, offset;\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      if (container.nodeType === 3 && rng.collapsed) {\n        if (container.data[offset] === '\\xA0') {\n          container.deleteData(offset, 1);\n          if (!/[\\u00a0| ]$/.test(value)) {\n            value += ' ';\n          }\n        } else if (container.data[offset - 1] === '\\xA0') {\n          container.deleteData(offset - 1, 1);\n          if (!/[\\u00a0| ]$/.test(value)) {\n            value = ' ' + value;\n          }\n        }\n      }\n      return value;\n    };\n\n    var isTableCell$2 = NodeType.matchNodeNames('td th');\n    var selectionSetContent = function (editor, content) {\n      var rng = editor.selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      if (rng.collapsed && isAfterNbsp(container, offset) && NodeType.isText(container)) {\n        container.insertData(offset - 1, ' ');\n        container.deleteData(offset, 1);\n        rng.setStart(container, offset);\n        rng.setEnd(container, offset);\n        editor.selection.setRng(rng);\n      }\n      editor.selection.setContent(content);\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          selectionSetContent(editor, value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Option.from(dom.getParent(elm, 'td,th')).map(Element.fromDom).each(PaddingBr.trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody(), elementUtils_1 = new ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          for (var testNode = node.parentNode; testNode && testNode !== root_1; testNode = testNode.parentNode) {\n            if (textInlineElements[node.nodeName.toLowerCase()] && elementUtils_1.compare(testNode, node)) {\n              dom.remove(node, true);\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var umarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var parentEditableFalseElm, parentBlock, nextRng;\n      var dom = editor.dom, selection = editor.selection;\n      var node, node2;\n      var getContentEditableFalseParent = function (node) {\n        var root = editor.getBody();\n        for (; node && node !== root; node = node.parentNode) {\n          if (editor.dom.getContentEditable(node) === 'false') {\n            return node;\n          }\n        }\n        return null;\n      };\n      if (!marker) {\n        return;\n      }\n      editor.selection.scrollIntoView(marker);\n      parentEditableFalseElm = getContentEditableFalseParent(marker);\n      if (parentEditableFalseElm) {\n        dom.remove(marker);\n        selection.select(parentEditableFalseElm);\n        return;\n      }\n      var rng = dom.createRng();\n      node = marker.previousSibling;\n      if (node && node.nodeType === 3) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          node2 = marker.nextSibling;\n          if (node2 && node2.nodeType === 3) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$2(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parser, serializer, parentNode, rootNode, fragment, args;\n      var marker, rng, node, bookmarkHtml, merge;\n      var selection = editor.selection, dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(selection.getRng(), value);\n      }\n      parser = editor.parser;\n      merge = details.merge;\n      serializer = HtmlSerializer({ validate: editor.settings.validate }, editor.schema);\n      bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;&#x200B;</span>';\n      args = {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      };\n      args = editor.fire('BeforeSetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        editor.selection.setRng(RangeNormalizer.normalize(editor.selection.getRng()));\n        editor.getDoc().execCommand('Delete', false, null);\n        value = trimNbspAfterDeleteAndPadValue(editor.selection.getRng(), value);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && InsertList.isListFragment(editor.schema, fragment) && InsertList.isParentBlockLi(dom, parentNode)) {\n        rng = InsertList.insertAtCaret(serializer, dom, editor.selection.getRng(), fragment);\n        editor.selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        selectionSetContent(editor, bookmarkHtml);\n        parentNode = selection.getNode();\n        rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      umarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(editor.dom, editor.selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n    var processValue = function (value) {\n      var details;\n      if (typeof value !== 'string') {\n        details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret$1 = function (editor, value) {\n      var result = processValue(value);\n      insertHtmlAtCaret(editor, result.content, result.details);\n    };\n    var InsertContent = { insertAtCaret: insertAtCaret$1 };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return bodyObj.hasOwnProperty(editor.id) ? bodyObj[editor.id] : defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      return block === false ? '' : block;\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', ''));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', constant(true), 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var Settings = {\n      getIframeAttrs: getIframeAttrs,\n      getDocType: getDocType,\n      getDocumentBaseUrl: getDocumentBaseUrl,\n      getBodyId: getBodyId,\n      getBodyClass: getBodyClass,\n      getContentSecurityPolicy: getContentSecurityPolicy,\n      shouldPutBrInPre: shouldPutBrInPre,\n      getForcedRootBlock: getForcedRootBlock,\n      getForcedRootBlockAttrs: getForcedRootBlockAttrs,\n      getBrNewLineSelector: getBrNewLineSelector,\n      getNoNewLineSelector: getNoNewLineSelector,\n      shouldKeepStyles: shouldKeepStyles,\n      shouldEndContainerOnEmptyBlock: shouldEndContainerOnEmptyBlock,\n      getFontStyleValues: getFontStyleValues,\n      getFontSizeClasses: getFontSizeClasses,\n      getImagesDataImgFilter: getImagesDataImgFilter,\n      isAutomaticUploadsEnabled: isAutomaticUploadsEnabled,\n      shouldReuseFileName: shouldReuseFileName,\n      shouldReplaceBlobUris: shouldReplaceBlobUris,\n      getImageUploadUrl: getImageUploadUrl,\n      getImageUploadBasePath: getImageUploadBasePath,\n      getImagesUploadCredentials: getImagesUploadCredentials,\n      getImagesUploadHandler: getImagesUploadHandler,\n      shouldUseContentCssCors: shouldUseContentCssCors,\n      getInlineBoundarySelector: getInlineBoundarySelector\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$1(Element.fromDom(elm), Settings.getInlineBoundarySelector(editor));\n    };\n    var isRtl = function (element) {\n      return DOMUtils$1.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter(DOMUtils$1.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Option.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock(node1, rootNode);\n      var block2 = getParentBlock(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (NodeType.isText(container.nextSibling)) {\n            return CaretPosition$1(container.nextSibling, 0);\n          } else {\n            return CaretPosition$1.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition$1(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (NodeType.isText(container.previousSibling)) {\n            return CaretPosition$1(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition$1.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition$1(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n    var InlineUtils = {\n      isInlineTarget: isInlineTarget,\n      findRootInline: findRootInline,\n      isRtl: isRtl,\n      isAtZwsp: isAtZwsp,\n      normalizePosition: normalizePosition,\n      normalizeForwards: normalizeForwards,\n      normalizeBackwards: normalizeBackwards,\n      hasSameParentBlock: hasSameParentBlock\n    };\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq(rootNode, Element.fromDom(elm.dom().parentNode));\n      };\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      return contains$3(rootNode, elm) ? closest(elm, function (element) {\n        return isTextBlock(element) || isListItem(element);\n      }, isBeforeRoot(rootNode)) : Option.none();\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return lift2(CaretFinder.firstPositionIn(elm), CaretFinder.lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = InlineUtils.normalizePosition(true, firstPos);\n        var normalizedLastPos = InlineUtils.normalizePosition(false, lastPos);\n        var normalizedFromPos = InlineUtils.normalizePosition(false, fromPos);\n        if (forward) {\n          return CaretFinder.nextPosition(elm, normalizedFromPos).map(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          }).getOr(false);\n        } else {\n          return CaretFinder.prevPosition(elm, normalizedFromPos).map(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          }).getOr(false);\n        }\n      }).getOr(true);\n    };\n    var DeleteUtils = {\n      getParentBlock: getParentBlock$1,\n      paddEmptyBody: paddEmptyBody,\n      willDeleteLastPositionInElement: willDeleteLastPositionInElement\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$1(scope, selector, isRoot).isSome();\n    };\n\n    var hasWhitespacePreserveParent = function (rootNode, node) {\n      var rootElement = Element.fromDom(rootNode);\n      var startNode = Element.fromDom(node);\n      return ancestor$2(startNode, 'pre,code', curry(eq, rootElement));\n    };\n    var isWhitespace = function (rootNode, node) {\n      return NodeType.isText(node) && /^[ \\t\\r\\n]*$/.test(node.data) && hasWhitespacePreserveParent(rootNode, node) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return NodeType.isElement(node) && node.nodeName === 'A' && node.hasAttribute('name');\n    };\n    var isContent = function (rootNode, node) {\n      return isCaretCandidate(node) && isWhitespace(rootNode, node) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = NodeType.hasAttribute('data-mce-bookmark');\n    var isBogus$2 = NodeType.hasAttribute('data-mce-bogus');\n    var isBogusAll$1 = NodeType.hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode) {\n      var walker, node, brCount = 0;\n      if (isContent(targetNode, targetNode)) {\n        return false;\n      } else {\n        node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        walker = new TreeWalker(node, targetNode);\n        do {\n          if (isBogusAll$1(node)) {\n            node = walker.next(true);\n            continue;\n          }\n          if (isBogus$2(node)) {\n            node = walker.next();\n            continue;\n          }\n          if (NodeType.isBr(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent(targetNode, node)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty$1 = function (elm) {\n      return isEmptyNode(elm.dom());\n    };\n    var Empty = { isEmpty: isEmpty$1 };\n\n    var BlockPosition = Immutable('block', 'position');\n    var BlockBoundary = Immutable('from', 'to');\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = Element.fromDom(rootNode);\n      var containerElm = Element.fromDom(pos.container());\n      return DeleteUtils.getParentBlock(rootElm, containerElm).map(function (block) {\n        return BlockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq(blockBoundary.from().block(), blockBoundary.to().block()) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from().block()).bind(function (parent1) {\n        return parent(blockBoundary.to().block()).filter(function (parent2) {\n          return eq(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable = function (blockBoundary) {\n      return NodeType.isContentEditableFalse(blockBoundary.from().block().dom()) === false && NodeType.isContentEditableFalse(blockBoundary.to().block().dom()) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (NodeType.isBr(blockPosition.position().getNode()) && Empty.isEmpty(blockPosition.block()) === false) {\n        return CaretFinder.positionIn(false, blockPosition.block().dom()).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position())) {\n            return CaretFinder.fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Option.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition$1.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return CaretFinder.fromPosition(forward, rootNode, blockPos.position()).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return lift2(fromBlockPos, toBlockPos, BlockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable(blockBoundary);\n      });\n    };\n    var read$1 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Option.none();\n    };\n    var BlockMergeBoundary = { read: read$1 };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil$1 = function (start, root, predicate) {\n      if (contains$3(root, start)) {\n        return dropLast(parents(start, function (elm) {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents$1 = function (start, root) {\n      return parentsUntil$1(start, root, constant(false));\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents$1(start, root));\n    };\n    var Parents = {\n      parentsUntil: parentsUntil$1,\n      parents: parents$1,\n      parentsAndSelf: parentsAndSelf\n    };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex(children$1, isBlock).fold(function () {\n        return children$1;\n      }, function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each(children, remove$1);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = Parents.parentsAndSelf(block, rootNode);\n      return find(parents.reverse(), Empty.isEmpty).each(remove$1);\n    };\n    var isEmptyBefore = function (el) {\n      return filter(prevSiblings(el), function (el) {\n        return !Empty.isEmpty(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (Empty.isEmpty(toBlock)) {\n        PaddingBr.fillWithPaddingBr(toBlock);\n        return CaretFinder.firstPositionIn(toBlock.dom());\n      }\n      if (isEmptyBefore(insertionPoint) && Empty.isEmpty(fromBlock)) {\n        before(insertionPoint, Element.fromTag('br'));\n      }\n      var position = CaretFinder.prevPosition(toBlock.dom(), CaretPosition$1.before(insertionPoint.dom()));\n      each(extractChildren(fromBlock), function (child) {\n        before(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (Empty.isEmpty(toBlock)) {\n        remove$1(toBlock);\n        if (Empty.isEmpty(fromBlock)) {\n          PaddingBr.fillWithPaddingBr(fromBlock);\n        }\n        return CaretFinder.firstPositionIn(fromBlock.dom());\n      }\n      var position = CaretFinder.lastPositionIn(toBlock.dom());\n      each(extractChildren(fromBlock), function (child) {\n        append(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf = Parents.parentsAndSelf(block, toBlock);\n      return Option.from(parentsAndSelf[parentsAndSelf.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$3(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Option.none();\n    };\n    var trimBr = function (first, block) {\n      CaretFinder.positionIn(first, block.dom()).map(function (position) {\n        return position.getNode();\n      }).map(Element.fromDom).filter(isBr).each(remove$1);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n    var MergeBlocks = { mergeBlocks: mergeBlocks };\n\n    var backspaceDelete = function (editor, forward) {\n      var position;\n      var rootNode = Element.fromDom(editor.getBody());\n      position = BlockMergeBoundary.read(rootNode.dom(), forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return MergeBlocks.mergeBlocks(rootNode, forward, blockBoundary.from().block(), blockBoundary.to().block());\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n    var BlockBoundaryDelete = { backspaceDelete: backspaceDelete };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return lift2(DeleteUtils.getParentBlock(rootNode, Element.fromDom(rng.startContainer)), DeleteUtils.getParentBlock(rootNode, Element.fromDom(rng.endContainer)), function (block1, block2) {\n        if (eq(block1, block2) === false) {\n          rng.deleteContents();\n          MergeBlocks.mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = Element.fromDom(rawNode);\n      var isRoot = curry(eq, root);\n      return ancestor(node, isTableCell, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = CaretFinder.prevPosition(root.dom(), CaretPosition$1.fromRangeStart(rng)).isNone();\n      var noNext = CaretFinder.nextPosition(root.dom(), CaretPosition$1.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange = function (editor) {\n      var rootNode = Element.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$1 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange(editor);\n    };\n    var BlockRangeDelete = { backspaceDelete: backspaceDelete$1 };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              domGlobals.console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    var isBr$5 = function (pos) {\n      return getElementFromPosition(pos).exists(isBr);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter(Parents.parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n      var scope = head(parentBlocks).getOr(root);\n      return CaretFinder.fromPosition(forward, scope.dom(), pos).filter(isBr$5);\n    };\n    var isBeforeBr = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var is$2 = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is$2('\\xA0');\n    var isWhiteSpace$1 = function (chr) {\n      return /^[\\r\\n\\t ]$/.test(chr);\n    };\n    var isContent$1 = function (chr) {\n      return !isWhiteSpace$1(chr) && !isNbsp(chr);\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Option.from(pos.container()).filter(NodeType.isText).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace$1);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace$1);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return NodeType.isText(container) && container.data.length === 0;\n    };\n    var isNextToContentEditableFalse = function (relativeOffset, caretPosition) {\n      var node = getChildNodeAtRelativeOffset(relativeOffset, caretPosition);\n      return NodeType.isContentEditableFalse(node) && !NodeType.isBogusAll(node);\n    };\n    var isBeforeContentEditableFalse = curry(isNextToContentEditableFalse, 0);\n    var isAfterContentEditableFalse = curry(isNextToContentEditableFalse, -1);\n    var isNextToTable = function (relativeOffset, caretPosition) {\n      return NodeType.isTable(getChildNodeAtRelativeOffset(relativeOffset, caretPosition));\n    };\n    var isBeforeTable = curry(isNextToTable, 0);\n    var isAfterTable = curry(isNextToTable, -1);\n\n    var isCompoundElement = function (node) {\n      return isTableCell(Element.fromDom(node)) || isListItem(Element.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return NodeType.isElement(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline(Element.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(constant(false), inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return DeleteUtils.getParentBlock(Element.fromDom(root), Element.fromDom(from.getNode())).map(function (blockElm) {\n        return Empty.isEmpty(blockElm) ? DeleteAction.remove(blockElm.dom()) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Option.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return CaretFinder.fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Option.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Option.none();\n        } else if (forward && NodeType.isContentEditableFalse(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && NodeType.isContentEditableFalse(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Option.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Option.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && NodeType.isContentEditableFalse(elm.nextSibling)) {\n        return Option.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && NodeType.isContentEditableFalse(elm.previousSibling)) {\n        return Option.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Option.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Option.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Option.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Option.none();\n        } else {\n          return Option.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Option.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read$2 = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition$1.fromRangeStart(normalizedRange);\n      var rootElement = Element.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Option.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Option.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var isCollapsibleWhitespace = function (c) {\n      return ' \\f\\n\\r\\t\\x0B'.indexOf(c) !== -1;\n    };\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content.split(''), function (acc, c) {\n        if (isCollapsibleWhitespace(c) || c === '\\xA0') {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + '\\xA0'\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize$1 = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length;\n      var isStartOfContent = offset === 0;\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      return normalize$1(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      return normalize$1(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace) {\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      prevNode.appendData(nextNode.data);\n      remove$1(Element.fromDom(nextNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(prevNode, whitespaceOffset);\n      }\n      return prevNode;\n    };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition$1.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition$1.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition$1(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return NodeType.isText(node) ? CaretPosition$1(node, 0) : CaretPosition$1.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return NodeType.isText(node) ? CaretPosition$1(node, node.data.length) : CaretPosition$1.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.previousSibling)) {\n        return Option.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? CaretFinder.lastPositionIn(elm.previousSibling) : Option.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.nextSibling)) {\n        return Option.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? CaretFinder.firstPositionIn(elm.nextSibling) : Option.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition$1.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return CaretFinder.prevPosition(rootElement, startPosition).fold(function () {\n        return CaretFinder.nextPosition(rootElement, CaretPosition$1.after(elm));\n      }, Option.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return CaretFinder.nextPosition(rootElement, CaretPosition$1.after(elm)).fold(function () {\n        return CaretFinder.prevPosition(rootElement, CaretPosition$1.before(elm));\n      }, Option.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition$1 = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition$1(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom() === rawNode;\n      };\n    };\n    var isBlock$2 = function (editor, elm) {\n      return elm && editor.schema.getBlockElements().hasOwnProperty(name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (Empty.isEmpty(elm)) {\n        var br = Element.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append(elm, br);\n        return Option.some(CaretPosition$1.before(br.dom()));\n      } else {\n        return Option.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText);\n      var nextTextOpt = nextSibling(elm).filter(isText);\n      remove$1(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, function (prev, next, pos) {\n        var prevNode = prev.dom(), nextNode = next.dom();\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition$1(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom(), elm.dom().length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom(), 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom());\n      var parentBlock = ancestor(elm, curry(isBlock$2, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection(editor, forward, Option.some(paddPos));\n          }\n        });\n      }\n    };\n    var DeleteElement = { deleteElement: deleteElement };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        DeleteElement.deleteElement(editor, forward, Element.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition$1.before(element) : CaretPosition$1.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var result = read$2(editor.getBody(), forward, editor.selection.getRng()).map(function (deleteAction) {\n        return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n      });\n      return result.getOr(false);\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each(descendants$1(rootElement, '.mce-offscreen-selection'), remove$1);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedElement = editor.selection.getNode();\n      if (NodeType.isContentEditableFalse(selectedElement)) {\n        deleteOffscreenSelection(Element.fromDom(editor.getBody()));\n        DeleteElement.deleteElement(editor, forward, Element.fromDom(editor.selection.getNode()));\n        DeleteUtils.paddEmptyBody(editor);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var getContentEditableRoot = function (root, node) {\n      while (node && node !== root) {\n        if (NodeType.isContentEditableTrue(node) || NodeType.isContentEditableFalse(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var paddEmptyElement = function (editor) {\n      var br;\n      var ceRoot = getContentEditableRoot(editor.getBody(), editor.selection.getNode());\n      if (NodeType.isContentEditableTrue(ceRoot) && editor.dom.isBlock(ceRoot) && editor.dom.isEmpty(ceRoot)) {\n        br = editor.dom.create('br', { 'data-mce-bogus': '1' });\n        editor.dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        editor.selection.setRng(CaretPosition$1.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$2 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n    var CefDelete = {\n      backspaceDelete: backspaceDelete$2,\n      paddEmptyElement: paddEmptyElement\n    };\n\n    var isText$8 = NodeType.isText;\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[0] === Zwsp.ZWSP;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[node.data.length - 1] === Zwsp.ZWSP;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(Zwsp.ZWSP);\n    };\n    var insertBefore$1 = function (node) {\n      if (isText$8(node.previousSibling)) {\n        if (endsWithCaretContainer$1(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(Zwsp.ZWSP);\n          return node.previousSibling;\n        }\n      } else if (isText$8(node)) {\n        if (startsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.insertData(0, Zwsp.ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter$1 = function (node) {\n      if (isText$8(node.nextSibling)) {\n        if (startsWithCaretContainer$1(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, Zwsp.ZWSP);\n          return node.nextSibling;\n        }\n      } else if (isText$8(node)) {\n        if (endsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.appendData(Zwsp.ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline$1 = function (before, node) {\n      return before ? insertBefore$1(node) : insertAfter$1(node);\n    };\n    var insertInlineBefore = curry(insertInline$1, true);\n    var insertInlineAfter = curry(insertInline$1, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (NodeType.isText(pos.container())) {\n        return insertInline$1(before, pos.container());\n      } else {\n        return insertInline$1(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        CaretContainerRemove.remove(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Option.some(CaretPosition$1(text, text.length - 1));\n      }, function (element) {\n        return CaretFinder.firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            CaretContainerRemove.remove(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition$1(text, 1);\n          } else {\n            return CaretPosition$1(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return CaretFinder.lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            CaretContainerRemove.remove(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition$1(text, text.length - 1);\n          } else {\n            return CaretPosition$1(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        CaretContainerRemove.remove(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Option.some(CaretPosition$1(text, 1));\n      });\n    };\n    var BoundaryCaret = { renderCaret: renderCaret };\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Option.none();\n    };\n    var LazyEvaluator = { evaluateUntil: evaluateUntil };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before$3 = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeForwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return InlineUtils.findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return CaretFinder.nextPosition(scope, nPos).bind(curry(InlineUtils.findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Option.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return InlineUtils.findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = CaretFinder.prevPosition(inline, nPos);\n        return prevPos.isNone() ? Option.some(Location.start(inline)) : Option.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = CaretFinder.nextPosition(inline, nPos);\n        return nextPos.isNone() ? Option.some(Location.end(inline)) : Option.none();\n      });\n    };\n    var after$2 = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeBackwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return InlineUtils.findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return CaretFinder.prevPosition(scope, nPos).bind(curry(InlineUtils.findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Option.none);\n    };\n    var isValidLocation = function (location) {\n      return InlineUtils.isRtl(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = LazyEvaluator.evaluateUntil([\n        before$3,\n        start,\n        end,\n        after$2\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq$1 = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return lift2(InlineUtils.findRootInline(isInlineTarget, rootNode, from), InlineUtils.findRootInline(isInlineTarget, rootNode, to), function (fromInline, toInline) {\n        if (fromInline !== toInline && InlineUtils.hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(constant(true), function (fromLocation) {\n        return !isEq$1(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = InlineUtils.normalizePosition(forward, pos);\n      var to = CaretFinder.fromPosition(forward, rootNode, from).map(curry(InlineUtils.normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Option.some, Location.start), Option.none, compose(Option.some, Location.after), Option.none);\n      } else {\n        return location.fold(Option.none, compose(Option.some, Location.before), Option.none, compose(Option.some, Location.end));\n      }\n    };\n    var findLocation = function (forward, isInlineTarget, rootNode, pos) {\n      var from = InlineUtils.normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    var BoundaryLocation = {\n      readLocation: readLocation,\n      findLocation: findLocation,\n      prevLocation: curry(findLocation, false),\n      nextLocation: curry(findLocation, true),\n      getElement: getElement,\n      outside: outside,\n      inside: inside\n    };\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition$1(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition$1.fromRangeEnd(rng) : CaretPosition$1.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n    var WordSelection = {\n      hasSelectionModifyApi: hasSelectionModifyApi,\n      moveByWord: moveByWord\n    };\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var isFeatureEnabled = function (editor) {\n      return editor.settings.inline_boundaries !== false;\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return BoundaryCaret.renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation$1 = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      var location = BoundaryLocation.findLocation(forward, isInlineTarget, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var selectedInlines = filter(dom.select('*[data-mce-selected=\"inline-boundary\"]'), isInlineTarget);\n      var targetInlines = filter(elms, isInlineTarget);\n      each(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition$1.isTextPosition(pos) && InlineUtils.isAtZwsp(pos) === false) {\n          setCaretPosition(editor, CaretContainerRemove.removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter(elms, isInlineTarget);\n        each(inlines, function (inline) {\n          var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n          BoundaryLocation.readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move = function (editor, caret, forward) {\n      return function () {\n        return isFeatureEnabled(editor) ? findLocation$1(editor, caret, forward).isSome() : false;\n      };\n    };\n    var moveWord = function (forward, editor, caret) {\n      return function () {\n        return isFeatureEnabled(editor) ? WordSelection.moveByWord(forward, editor) : false;\n      };\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isFeatureEnabled(editor)) {\n          toggleInlines(isInlineTarget, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n    var BoundarySelection = {\n      move: move,\n      moveNextWord: moveNextWord,\n      movePrevWord: movePrevWord,\n      setupSelectedState: setupSelectedState,\n      setCaretPosition: setCaretPosition\n    };\n\n    var isFeatureEnabled$1 = function (editor) {\n      return editor.settings.inline_boundaries !== false;\n    };\n    var rangeFromPositions = function (from, to) {\n      var range = domGlobals.document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return lift2(CaretFinder.firstPositionIn(elm), CaretFinder.lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = InlineUtils.normalizePosition(true, firstPos);\n        var normalizedLastPos = InlineUtils.normalizePosition(false, lastPos);\n        return CaretFinder.nextPosition(elm, normalizedFirstPos).map(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        }).getOr(true);\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return BoundaryCaret.renderCaret(caret, location).map(function (pos) {\n          BoundarySelection.setCaretPosition(editor, pos);\n          return true;\n        }).getOr(false);\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        BoundaryLocation.readLocation(isInlineTarget, rootNode, CaretPosition$1.fromRangeStart(editor.selection.getRng())).map(BoundaryLocation.inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope$1(editor.getBody(), from.container());\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      var fromLocation = BoundaryLocation.readLocation(isInlineTarget, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Option.some(BoundaryLocation.inside(location))), Option.none, constant(Option.some(BoundaryLocation.outside(location))), Option.none);\n        } else {\n          return location.fold(Option.none, constant(Option.some(BoundaryLocation.outside(location))), Option.none, constant(Option.some(BoundaryLocation.inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = CaretFinder.navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return BoundaryLocation.readLocation(isInlineTarget, rootNode, pos);\n        });\n        if (fromLocation.isSome() && toLocation.isSome()) {\n          return InlineUtils.findRootInline(isInlineTarget, rootNode, from).map(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              DeleteElement.deleteElement(editor, forward, Element.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          }).getOr(false);\n        } else {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          }).getOr(false);\n        }\n      });\n    };\n    var backspaceDelete$3 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isFeatureEnabled$1(editor)) {\n        var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n    var InlineBoundaryDelete = { backspaceDelete: backspaceDelete$3 };\n\n    var tableCellRng = Immutable('start', 'end');\n    var tableSelection = Immutable('rng', 'table', 'cells');\n    var deleteAction = Adt.generate([\n      { removeTable: ['element'] },\n      { emptyCells: ['cells'] }\n    ]);\n    var isRootFromElement = function (root) {\n      return curry(eq, root);\n    };\n    var getClosestCell = function (container, isRoot) {\n      return closest$1(Element.fromDom(container), 'td,th', isRoot);\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$1(cell, 'table', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return eq(cellRng.start(), cellRng.end()) === false;\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start(), isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end(), isRoot).bind(function (endParentTable) {\n          return eq(startParentTable, endParentTable) ? Option.some(startParentTable) : Option.none();\n        });\n      });\n    };\n    var getTableCells = function (table) {\n      return descendants$1(table, 'td,th');\n    };\n    var getCellRangeFromStartTable = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start(), isRoot).bind(function (table) {\n        return last(getTableCells(table)).map(function (endCell) {\n          return tableCellRng(cellRng.start(), endCell);\n        });\n      });\n    };\n    var partialSelection = function (isRoot, rng) {\n      var startCell = getClosestCell(rng.startContainer, isRoot);\n      var endCell = getClosestCell(rng.endContainer, isRoot);\n      return rng.collapsed ? Option.none() : lift2(startCell, endCell, tableCellRng).fold(function () {\n        return startCell.fold(function () {\n          return endCell.bind(function (endCell) {\n            return getClosestTable(endCell, isRoot).bind(function (table) {\n              return head(getTableCells(table)).map(function (startCell) {\n                return tableCellRng(startCell, endCell);\n              });\n            });\n          });\n        }, function (startCell) {\n          return getClosestTable(startCell, isRoot).bind(function (table) {\n            return last(getTableCells(table)).map(function (endCell) {\n              return tableCellRng(startCell, endCell);\n            });\n          });\n        });\n      }, function (cellRng) {\n        return isWithinSameTable(isRoot, cellRng) ? Option.none() : getCellRangeFromStartTable(cellRng, isRoot);\n      });\n    };\n    var isWithinSameTable = function (isRoot, cellRng) {\n      return getTableFromCellRng(cellRng, isRoot).isSome();\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell(rng.startContainer, isRoot);\n      var endCell = getClosestCell(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng).filter(isExpandedCellRng).filter(function (cellRng) {\n        return isWithinSameTable(isRoot, cellRng);\n      }).orThunk(function () {\n        return partialSelection(isRoot, rng);\n      });\n    };\n    var getTableSelectionFromCellRng = function (cellRng, isRoot) {\n      return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n        return tableSelection(cellRng, table, getTableCells(table));\n      });\n    };\n    var getTableSelectionFromRng = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      return getCellRng(rng, isRoot).bind(function (cellRng) {\n        return getTableSelectionFromCellRng(cellRng, isRoot);\n      });\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex(cells, function (x) {\n        return eq(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return lift2(getCellIndex(tableSelection.cells(), tableSelection.rng().start()), getCellIndex(tableSelection.cells(), tableSelection.rng().end()), function (startIndex, endIndex) {\n        return tableSelection.cells().slice(startIndex, endIndex + 1);\n      });\n    };\n    var getAction = function (tableSelection) {\n      return getSelectedCells(tableSelection).map(function (selected) {\n        var cells = tableSelection.cells();\n        return selected.length === cells.length ? deleteAction.removeTable(tableSelection.table()) : deleteAction.emptyCells(selected);\n      });\n    };\n    var getActionFromCells = function (cells) {\n      return deleteAction.emptyCells(cells);\n    };\n    var getActionFromRange = function (root, rng) {\n      return getTableSelectionFromRng(root, rng).bind(getAction);\n    };\n    var TableDeleteAction = {\n      getActionFromRange: getActionFromRange,\n      getActionFromCells: getActionFromCells\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [Element.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n    var MultiRange = {\n      getRanges: getRanges,\n      getSelectedNodes: getSelectedNodes,\n      hasMultipleRanges: hasMultipleRanges\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter(MultiRange.getSelectedNodes(ranges), isTableCell);\n    };\n    var getCellsFromElement = function (elm) {\n      var selectedCells = descendants$1(elm, 'td[data-mce-selected],th[data-mce-selected]');\n      return selectedCells;\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      var rangeCells = getCellsFromRanges(ranges);\n      return selectedCells.length > 0 ? selectedCells : rangeCells;\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(MultiRange.getRanges(editor.selection.getSel()), Element.fromDom(editor.getBody()));\n    };\n    var TableCellSelection = {\n      getCellsFromRanges: getCellsFromRanges,\n      getCellsFromElement: getCellsFromElement,\n      getCellsFromElementOrRanges: getCellsFromElementOrRanges,\n      getCellsFromEditor: getCellsFromEditor\n    };\n\n    var emptyCells = function (editor, cells) {\n      each(cells, PaddingBr.fillWithPaddingBr);\n      editor.selection.setCursorLocation(cells[0].dom(), 0);\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      DeleteElement.deleteElement(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return TableDeleteAction.getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteTableElement, editor), curry(emptyCells, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange$1 = function (editor, startElm) {\n      var rootNode = Element.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      var selectedCells = TableCellSelection.getCellsFromEditor(editor);\n      return selectedCells.length !== 0 ? emptyCells(editor, selectedCells) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find(Parents.parentsAndSelf(elm, rootElm), isTableCell);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find(Parents.parentsAndSelf(elm, rootElm), function (elm) {\n        return name(elm) === 'caption';\n      });\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return CaretFinder.navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, Element.fromDom(to.getNode())).map(function (toCell) {\n          return eq(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      PaddingBr.fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom(), 0);\n      return Option.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return CaretFinder.firstPositionIn(fromCaption.dom()).bind(function (first) {\n        return CaretFinder.lastPositionIn(fromCaption.dom()).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, Element.fromDom(to.getNode())).map(function (toCaption) {\n        return eq(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return CaretFinder.navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Option.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return Empty.isEmpty(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      });\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return Empty.isEmpty(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var deleteCaret = function (editor, forward, startElm) {\n      var rootElm = Element.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption);\n      }).getOr(false);\n    };\n    var backspaceDelete$4 = function (editor, forward) {\n      var startElm = Element.fromDom(editor.selection.getStart(true));\n      var cells = TableCellSelection.getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret(editor, forward, startElm) : deleteRange$1(editor, startElm);\n    };\n    var TableDelete = { backspaceDelete: backspaceDelete$4 };\n\n    var isEq$2 = FormatUtils.isEq;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].inherit === false && ed.dom.is(node, formatList[i].selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return matchNode(editor, node, name, vars);\n    };\n    var matchName = function (dom, node, format) {\n      if (isEq$2(node, format.inline)) {\n        return true;\n      }\n      if (isEq$2(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var key, value;\n      var items = format[itemName];\n      var i;\n      if (format.onmatch) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (typeof items.length === 'undefined') {\n          for (key in items) {\n            if (items.hasOwnProperty(key)) {\n              if (itemName === 'attributes') {\n                value = dom.getAttrib(node, key);\n              } else {\n                value = FormatUtils.getStyle(dom, node, key);\n              }\n              if (similar && !value && !format.exact) {\n                return;\n              }\n              if ((!similar || format.exact) && !isEq$2(value, FormatUtils.normalizeStyleValue(dom, FormatUtils.replaceVars(items[key], vars), key))) {\n                return;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : FormatUtils.getStyle(dom, node, items[i])) {\n              return format;\n            }\n          }\n        }\n      }\n      return format;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var format, i, x, classes;\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (i = 0; i < formatList.length; i++) {\n          format = formatList[i];\n          if (matchName(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            if (classes = format.classes) {\n              for (x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, classes[x])) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match = function (editor, name, vars, node) {\n      var startNode;\n      if (node) {\n        return matchParents(editor, node, name, vars);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars)) {\n        return true;\n      }\n      startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var startElement;\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        var i, name;\n        for (i = 0; i < names.length; i++) {\n          name = names[i];\n          if (!checkedMap[name] && matchNode(editor, node, name, vars)) {\n            checkedMap[name] = true;\n            matchedFormatNames.push(name);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var startNode, parents, i, x, selector;\n      var dom = editor.dom;\n      if (formatList) {\n        startNode = editor.selection.getStart();\n        parents = FormatUtils.getParents(dom, startNode);\n        for (x = formatList.length - 1; x >= 0; x--) {\n          selector = formatList[x].selector;\n          if (!selector || formatList[x].defaultBlock) {\n            return true;\n          }\n          for (i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var MatchFormat = {\n      matchNode: matchNode,\n      matchName: matchName,\n      match: match,\n      matchAll: matchAll,\n      canApply: canApply,\n      matchesUnInheritedFormatSelector: matchesUnInheritedFormatSelector\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split$1 = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && NodeType.isText(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (NodeType.isText(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (NodeType.isText(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n    var SplitRange = { split: split$1 };\n\n    var ZWSP$1 = Zwsp.ZWSP, CARET_ID$1 = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP$1 || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      var walker;\n      if (node) {\n        walker = new TreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (node.nodeType === 3) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = Element.fromTag('span');\n      setAll(caretContainer, {\n        'id': CARET_ID$1,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append(caretContainer, Element.fromText(ZWSP$1));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP$1) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        DeleteElement.deleteElement(editor, false, Element.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var textNode = trimZwspFromCaretContainer(node);\n        if (rng.startContainer === textNode && rng.startOffset > 0) {\n          rng.setStart(textNode, rng.startOffset - 1);\n        }\n        if (rng.endContainer === textNode && rng.endOffset > 0) {\n          rng.setEnd(textNode, rng.endOffset - 1);\n        }\n        dom.remove(node, true);\n        if (block && dom.isEmpty(block)) {\n          PaddingBr.fillWithPaddingBr(Element.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID$1)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(FormatUtils.isTextBlock, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        PaddingBr.removeTrailingBr(Element.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP$1));\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var rng, caretContainer, textNode, offset, bookmark, container, text;\n      var selection = editor.selection;\n      rng = selection.getRng(true);\n      offset = rng.startOffset;\n      container = rng.startContainer;\n      text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        bookmark = selection.getBookmark();\n        rng.collapse(true);\n        rng = ExpandRange.expandRng(editor, rng, editor.formatter.get(name));\n        rng = SplitRange.split(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP$1) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom());\n          textNode = caretContainer.firstChild;\n          rng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom, selection = editor.selection;\n      var container, offset, bookmark;\n      var hasContentAfter, node, formatNode;\n      var parents = [], rng = selection.getRng();\n      var caretContainer;\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (MatchFormat.matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = ExpandRange.expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = SplitRange.split(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom();\n        var caretNode = insertFormatNodesIntoCaretContainer(parents, newCaretContainer);\n        if (caretContainer) {\n          insertCaretContainerNode(editor, newCaretContainer, caretContainer);\n        } else {\n          insertCaretContainerNode(editor, newCaretContainer, formatNode);\n        }\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP$1) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$2 = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom());\n      before(Element.fromDom(targetNode), caretContainer);\n      remove$1(Element.fromDom(targetNode));\n      return CaretPosition$1(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return inlineElements.hasOwnProperty(name(element)) && !isCaretNode(element.dom()) && !NodeType.isBogus(element.dom());\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom()) && isCaretContainerEmpty(element.dom());\n    };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = Parents.parentsAndSelf(startElm, rootElm);\n      return findIndex(parents, isBlock).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild$1 = function (elm) {\n      return children(elm).length === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map(filter(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom();\n      });\n      if (formatNodes.length === 0) {\n        DeleteElement.deleteElement(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom(), formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret$1 = function (editor, forward) {\n      var rootElm = Element.fromDom(editor.getBody());\n      var startElm = Element.fromDom(editor.selection.getStart());\n      var parentInlines = filter(getParentInlines(rootElm, startElm), hasOnlyOneChild$1);\n      return last(parentInlines).map(function (target) {\n        var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (DeleteUtils.willDeleteLastPositionInElement(forward, fromPos, target.dom()) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var backspaceDelete$5 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\n    };\n    var InlineFormatDelete = { backspaceDelete: backspaceDelete$5 };\n\n    var isContentEditableTrue$2 = NodeType.isContentEditableTrue;\n    var isContentEditableFalse$6 = NodeType.isContentEditableFalse;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView);\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return null;\n      }\n      return getNodeRange(node);\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition$1.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isContentEditableFalse$6(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isContentEditableFalse$6(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$6(node) || isContentEditableTrue$2(node);\n      });\n      if (isContentEditableFalse$6(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return null;\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      if (!range || !range.collapsed) {\n        return range;\n      }\n      var caretRange = renderCaretAtRange(editor, range, scrollIntoView);\n      if (caretRange) {\n        return caretRange;\n      }\n      return range;\n    };\n\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (NodeType.isText(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      var caretRange = showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true);\n      if (range.collapsed) {\n        var deleteRange = range.cloneRange();\n        if (forward) {\n          deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n        } else {\n          deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n        }\n        deleteRange.deleteContents();\n      } else {\n        range.deleteContents();\n      }\n      editor.selection.setRng(caretRange);\n      trimEmptyTextNode$1(editor.dom, node);\n      return true;\n    };\n    var deleteCefBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!NodeType.isText(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      var getNextPosFn = forward ? getNextVisualCaretPosition : getPrevVisualCaretPosition;\n      var isBeforeContentEditableFalseFn = forward ? isBeforeContentEditableFalse : isAfterContentEditableFalse;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = InlineUtils.normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition) {\n        return false;\n      } else if (isBeforeContentEditableFalseFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeContentEditableFalseFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$6 = function (editor, forward) {\n      return deleteCefBoundaryText(editor, forward);\n    };\n    var CefBoundaryDelete = { backspaceDelete: backspaceDelete$6 };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor) {\n      if (CefDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (CefBoundaryDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (InlineBoundaryDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (BlockBoundaryDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (TableDelete.backspaceDelete(editor)) {\n        return;\n      } else if (BlockRangeDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (InlineFormatDelete.backspaceDelete(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        DeleteUtils.paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor) {\n      if (CefDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (CefBoundaryDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (InlineBoundaryDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (BlockBoundaryDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (TableDelete.backspaceDelete(editor)) {\n        return;\n      } else if (BlockRangeDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (InlineFormatDelete.backspaceDelete(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n    var DeleteCommands = {\n      deleteCommand: deleteCommand,\n      forwardDeleteCommand: forwardDeleteCommand\n    };\n\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName);\n      };\n      var isRoot = function (elm) {\n        return eq(Element.fromDom(rootElm), elm);\n      };\n      return closest(Element.fromDom(elm), function (elm) {\n        return getProperty(elm).isSome();\n      }, isRoot).bind(getProperty);\n    };\n    var round$1 = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round$1(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      }\n      return fontSize;\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Option.from(DOMUtils$1.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Option.from(elm).map(Element.fromDom).filter(isElement).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom()).or(getComputedFontProp(propName, element.dom()));\n        }).getOr('');\n      };\n    };\n    var FontInfo = {\n      getFontSize: getFontProp('font-size'),\n      getFontFamily: compose(normalizeFontFamily, getFontProp('font-family')),\n      toPt: toPt\n    };\n\n    var findFirstCaretElement = function (editor) {\n      return CaretFinder.firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return NodeType.isText(container) ? container.parentNode : container;\n      });\n    };\n    var isRangeAtStartOfNode = function (rng, root) {\n      return rng.startContainer === root && rng.startOffset === 0;\n    };\n    var getCaretElement = function (editor) {\n      return Option.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        return isRangeAtStartOfNode(rng, root) ? Option.none() : Option.from(editor.selection.getStart(true));\n      });\n    };\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9\\.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = Settings.getFontStyleValues(editor);\n          var fontClasses = Settings.getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var fontNameAction = function (editor, value) {\n      editor.formatter.toggle('fontname', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return getCaretElement(editor).fold(function () {\n        return findFirstCaretElement(editor).map(function (caretElement) {\n          return FontInfo.getFontFamily(editor.getBody(), caretElement);\n        }).getOr('');\n      }, function (caretElement) {\n        return FontInfo.getFontFamily(editor.getBody(), caretElement);\n      });\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return getCaretElement(editor).fold(function () {\n        return findFirstCaretElement(editor).map(function (caretElement) {\n          return FontInfo.getFontSize(editor.getBody(), caretElement);\n        }).getOr('');\n      }, function (caretElement) {\n        return FontInfo.getFontSize(editor.getBody(), caretElement);\n      });\n    };\n\n    var isEq$3 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n    var RangeCompare = { isEq: isEq$3 };\n\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent = function (node, rootNode, predicate) {\n      return findParent(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable$2 = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$3 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer(node) && hasParent(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new TreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (NodeType.isBr(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (NodeType.isContentEditableFalse(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var walker, lastInlineElement, parentBlockContainer;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && NodeType.isBr(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Option.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      walker = new TreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Option.none();\n        }\n        if (NodeType.isText(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Option.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Option.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Option.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Option.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Option.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset, walker;\n      var body = dom.getRoot();\n      var node, nonEmptyElementsMap;\n      var directionLeft, isAfterNode, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      isAfterNode = NodeType.isElement(container) && offset === container.childNodes.length;\n      nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer(container)) {\n        return Option.none();\n      }\n      if (NodeType.isElement(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (NodeType.isDocument(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer(node)) {\n              return Option.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable$2(node)) {\n              return Option.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = NodeType.isText(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable$2(container)) {\n            return Option.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer(container)) {\n            return Option.none();\n          }\n          if (container.hasChildNodes() && isTable$2(container) === false) {\n            node = container;\n            walker = new TreeWalker(container, body);\n            do {\n              if (NodeType.isContentEditableFalse(node) || isCaretContainer(node)) {\n                normalized = false;\n                break;\n              }\n              if (NodeType.isText(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$3(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (NodeType.isText(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (NodeType.isElement(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && NodeType.isBr(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && NodeType.isText(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Option.some(CaretPosition(container, offset)) : Option.none();\n    };\n    var normalize$2 = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return RangeCompare.isEq(rng, normRng) ? Option.none() : Option.some(normRng);\n    };\n    var NormalizeRange = { normalize: normalize$2 };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new TreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var scrollToBr = function (dom, selection, brElm) {\n      var marker = dom.create('span', {}, '&nbsp;');\n      brElm.parentNode.insertBefore(marker, brElm);\n      selection.scrollIntoView(marker);\n      dom.remove(marker);\n    };\n    var moveSelectionToBr = function (dom, selection, brElm, extraBr) {\n      var rng = dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      selection.setRng(rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      NormalizeRange.normalize(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = evt && evt.ctrlKey;\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      scrollToBr(dom, selection, brElm);\n      moveSelectionToBr(dom, selection, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = Element.fromTag('br');\n      before(Element.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after(Element.fromDom(inline), Element.fromTag('br'));\n      }\n      var br = Element.fromTag('br');\n      after(Element.fromDom(inline), br);\n      scrollToBr(editor.dom, editor.selection, br.dom());\n      moveSelectionToBr(editor.dom, editor.selection, br.dom(), false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr$1 = function (pos) {\n      return NodeType.isBr(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr$1(CaretPosition$1.after(startNode))) {\n        return true;\n      } else {\n        return CaretFinder.nextPosition(rootNode, CaretPosition$1.after(startNode)).map(function (pos) {\n          return NodeType.isBr(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(constant(false), isAnchorLink, isAnchorLink, constant(false));\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      var position = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return BoundaryLocation.readLocation(isInlineTarget, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n    var InsertBr = { insert: insert };\n\n    var create$3 = Immutable('start', 'soffset', 'finish', 'foffset');\n    var SimRange = { create: create$3 };\n\n    var adt = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$4 = adt.before;\n    var on = adt.on;\n    var after$3 = adt.after;\n    var Situ = {\n      before: before$4,\n      on: on,\n      after: after$3,\n      cata: cata,\n      getStart: getStart\n    };\n\n    var adt$1 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$1.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$1.domRange;\n    var relative = adt$1.relative;\n    var exact = adt$1.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var Selection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$3 = PlatformDetection$1.detect().browser;\n    var clamp = function (offset, element) {\n      var max = isText(element) ? get$4(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return Selection.range(rng.start(), clamp(rng.soffset(), rng.start()), rng.finish(), clamp(rng.foffset(), rng.finish()));\n    };\n    var isOrContains = function (root, elm) {\n      return !NodeType.isRestrictedNode(elm.dom()) && (contains$3(root, elm) || eq(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start()) && isOrContains(root, rng.finish());\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$3.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return Selection.range(Element.fromDom(r.startContainer), r.startOffset, Element.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Option.none() : Option.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark$2 = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom()).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Option.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = domGlobals.document.createRange();\n      try {\n        rng.setStart(bookmark.start().dom(), bookmark.soffset());\n        rng.setEnd(bookmark.finish().dom(), bookmark.foffset());\n        return Option.some(rng);\n      } catch (_) {\n        return Option.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark$2(Element.fromDom(editor.getBody())) : Option.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = Element.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Option.from(rng) : Option.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Option.none();\n      return bookmark.bind(curry(validate, Element.fromDom(editor.getBody()))).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        editor.selection.setRng(rng);\n      });\n    };\n    var SelectionBookmark = {\n      store: store,\n      storeNative: storeNative,\n      readRange: readRange,\n      restore: restore,\n      getRng: getRng,\n      getBookmark: getBookmark$2,\n      validate: validate\n    };\n\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      if (dom.getContentEditable(element) === 'false') {\n        return;\n      }\n      var indentStyleName = useMargin ? 'margin' : 'padding';\n      indentStyleName = element.nodeName === 'TABLE' ? 'margin' : indentStyleName;\n      indentStyleName += dom.getStyle(element, 'direction', true) === 'rtl' ? 'Right' : 'Left';\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseInt(element.style[indentStyleName] || 0, 10) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseInt(element.style[indentStyleName] || 0, 10) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).map(isListComponent).getOr(false);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter(map(editor.selection.getSelectedBlocks(), Element.fromDom), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var settings = editor.settings, dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentUnit = /[a-z%]+$/i.exec(settings.indentation)[0];\n      var indentValue = parseInt(settings.indentation, 10);\n      var useMargin = editor.getParam('indent_use_margin', false);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (!settings.forced_root_block && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom());\n      });\n    };\n\n    var each$a = Tools.each, extend$2 = Tools.extend;\n    var map$3 = Tools.map, inArray$2 = Tools.inArray;\n    function EditorCommands (editor) {\n      var dom, selection, formatter;\n      var commands = {\n        state: {},\n        exec: {},\n        value: {}\n      };\n      var settings = editor.settings, bookmark;\n      editor.on('PreInit', function () {\n        dom = editor.dom;\n        selection = editor.selection;\n        settings = editor.settings;\n        formatter = editor.formatter;\n      });\n      var execCommand = function (command, ui, value, args) {\n        var func, customCommand, state = false;\n        if (editor.removed) {\n          return;\n        }\n        if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n          editor.focus();\n        } else {\n          SelectionBookmark.restore(editor);\n        }\n        args = editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        customCommand = command.toLowerCase();\n        if (func = commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$a(editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (editor.theme && editor.theme.execCommand && editor.theme.execCommand(command, ui, value)) {\n          editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      var queryCommandState = function (command) {\n        var func;\n        if (editor.quirks.isHidden() || editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      var queryCommandValue = function (command) {\n        var func;\n        if (editor.quirks.isHidden() || editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      var addCommands = function (commandList, type) {\n        type = type || 'exec';\n        each$a(commandList, function (callback, command) {\n          each$a(command.toLowerCase().split(','), function (command) {\n            commands[type][command] = callback;\n          });\n        });\n      };\n      var addCommand = function (command, callback, scope) {\n        command = command.toLowerCase();\n        commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || editor, ui, value, args);\n        };\n      };\n      var queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (commands.exec[command]) {\n          return true;\n        }\n        try {\n          return editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      var addQueryStateHandler = function (command, callback, scope) {\n        command = command.toLowerCase();\n        commands.state[command] = function () {\n          return callback.call(scope || editor);\n        };\n      };\n      var addQueryValueHandler = function (command, callback, scope) {\n        command = command.toLowerCase();\n        commands.value[command] = function () {\n          return callback.call(scope || editor);\n        };\n      };\n      var hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!commands.exec[command];\n      };\n      extend$2(this, {\n        execCommand: execCommand,\n        queryCommandState: queryCommandState,\n        queryCommandValue: queryCommandValue,\n        queryCommandSupported: queryCommandSupported,\n        addCommands: addCommands,\n        addCommand: addCommand,\n        addQueryStateHandler: addQueryStateHandler,\n        addQueryValueHandler: addQueryValueHandler,\n        hasCustomCommand: hasCustomCommand\n      });\n      var execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return editor.getDoc().execCommand(command, ui, value);\n      };\n      var isFormatMatch = function (name) {\n        return formatter.match(name);\n      };\n      var toggleFormat = function (name, value) {\n        formatter.toggle(name, value ? { value: value } : undefined);\n        editor.nodeChanged();\n      };\n      var storeSelection = function (type) {\n        bookmark = selection.getBookmark(type);\n      };\n      var restoreSelection = function () {\n        selection.moveToBookmark(bookmark);\n      };\n      addCommands({\n        'mceResetDesignMode,mceBeginUndoLevel': function () {\n        },\n        'mceEndUndoLevel,mceAddUndoLevel': function () {\n          editor.undoManager.add();\n        },\n        'Cut,Copy,Paste': function (command) {\n          var doc = editor.getDoc();\n          var failed;\n          try {\n            execNativeCommand(command);\n          } catch (ex) {\n            failed = true;\n          }\n          if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n            failed = true;\n          }\n          if (failed || !doc.queryCommandSupported(command)) {\n            var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n            if (Env.mac) {\n              msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n            }\n            editor.notificationManager.open({\n              text: msg,\n              type: 'error'\n            });\n          }\n        },\n        'unlink': function () {\n          if (selection.isCollapsed()) {\n            var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n            if (elm) {\n              editor.dom.remove(elm, true);\n            }\n            return;\n          }\n          formatter.remove('link');\n        },\n        'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n          var align = command.substring(7);\n          if (align === 'full') {\n            align = 'justify';\n          }\n          each$a('left,center,right,justify'.split(','), function (name) {\n            if (align !== name) {\n              formatter.remove('align' + name);\n            }\n          });\n          if (align !== 'none') {\n            toggleFormat('align' + align);\n          }\n        },\n        'InsertUnorderedList,InsertOrderedList': function (command) {\n          var listElm, listParent;\n          execNativeCommand(command);\n          listElm = dom.getParent(selection.getNode(), 'ol,ul');\n          if (listElm) {\n            listParent = listElm.parentNode;\n            if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n              storeSelection();\n              dom.split(listParent, listElm);\n              restoreSelection();\n            }\n          }\n        },\n        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n          toggleFormat(command);\n        },\n        'ForeColor,HiliteColor': function (command, ui, value) {\n          toggleFormat(command, value);\n        },\n        'FontName': function (command, ui, value) {\n          fontNameAction(editor, value);\n        },\n        'FontSize': function (command, ui, value) {\n          fontSizeAction(editor, value);\n        },\n        'RemoveFormat': function (command) {\n          formatter.remove(command);\n        },\n        'mceBlockQuote': function () {\n          toggleFormat('blockquote');\n        },\n        'FormatBlock': function (command, ui, value) {\n          return toggleFormat(value || 'p');\n        },\n        'mceCleanup': function () {\n          var bookmark = selection.getBookmark();\n          editor.setContent(editor.getContent());\n          selection.moveToBookmark(bookmark);\n        },\n        'mceRemoveNode': function (command, ui, value) {\n          var node = value || selection.getNode();\n          if (node !== editor.getBody()) {\n            storeSelection();\n            editor.dom.remove(node, true);\n            restoreSelection();\n          }\n        },\n        'mceSelectNodeDepth': function (command, ui, value) {\n          var counter = 0;\n          dom.getParent(selection.getNode(), function (node) {\n            if (node.nodeType === 1 && counter++ === value) {\n              selection.select(node);\n              return false;\n            }\n          }, editor.getBody());\n        },\n        'mceSelectNode': function (command, ui, value) {\n          selection.select(value);\n        },\n        'mceInsertContent': function (command, ui, value) {\n          InsertContent.insertAtCaret(editor, value);\n        },\n        'mceInsertRawHTML': function (command, ui, value) {\n          selection.setContent('tiny_mce_marker');\n          var content = editor.getContent();\n          editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n            return value;\n          }));\n        },\n        'mceToggleFormat': function (command, ui, value) {\n          toggleFormat(value);\n        },\n        'mceSetContent': function (command, ui, value) {\n          editor.setContent(value);\n        },\n        'Indent,Outdent': function (command) {\n          handle(editor, command);\n        },\n        'mceRepaint': function () {\n        },\n        'InsertHorizontalRule': function () {\n          editor.execCommand('mceInsertContent', false, '<hr />');\n        },\n        'mceToggleVisualAid': function () {\n          editor.hasVisual = !editor.hasVisual;\n          editor.addVisual();\n        },\n        'mceReplaceContent': function (command, ui, value) {\n          editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, selection.getContent({ format: 'text' })));\n        },\n        'mceInsertLink': function (command, ui, value) {\n          var anchor;\n          if (typeof value === 'string') {\n            value = { href: value };\n          }\n          anchor = dom.getParent(selection.getNode(), 'a');\n          value.href = value.href.replace(' ', '%20');\n          if (!anchor || !value.href) {\n            formatter.remove('link');\n          }\n          if (value.href) {\n            formatter.apply('link', value, anchor);\n          }\n        },\n        'selectAll': function () {\n          var editingHost = dom.getParent(selection.getStart(), NodeType.isContentEditableTrue);\n          if (editingHost) {\n            var rng = dom.createRng();\n            rng.selectNodeContents(editingHost);\n            selection.setRng(rng);\n          }\n        },\n        'delete': function () {\n          DeleteCommands.deleteCommand(editor);\n        },\n        'forwardDelete': function () {\n          DeleteCommands.forwardDeleteCommand(editor);\n        },\n        'mceNewDocument': function () {\n          editor.setContent('');\n        },\n        'InsertLineBreak': function (command, ui, value) {\n          InsertBr.insert(editor, value);\n          return true;\n        }\n      });\n      var alignStates = function (name) {\n        return function () {\n          var nodes = selection.isCollapsed() ? [dom.getParent(selection.getNode(), dom.isBlock)] : selection.getSelectedBlocks();\n          var matches = map$3(nodes, function (node) {\n            return !!formatter.matchNode(node, name);\n          });\n          return inArray$2(matches, true) !== -1;\n        };\n      };\n      addCommands({\n        'JustifyLeft': alignStates('alignleft'),\n        'JustifyCenter': alignStates('aligncenter'),\n        'JustifyRight': alignStates('alignright'),\n        'JustifyFull': alignStates('alignjustify'),\n        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n          return isFormatMatch(command);\n        },\n        'mceBlockQuote': function () {\n          return isFormatMatch('blockquote');\n        },\n        'Outdent': function () {\n          var node;\n          if (settings.inline_styles) {\n            if ((node = dom.getParent(selection.getStart(), dom.isBlock)) && parseInt(node.style.paddingLeft, 10) > 0) {\n              return true;\n            }\n            if ((node = dom.getParent(selection.getEnd(), dom.isBlock)) && parseInt(node.style.paddingLeft, 10) > 0) {\n              return true;\n            }\n          }\n          return queryCommandState('InsertUnorderedList') || queryCommandState('InsertOrderedList') || !settings.inline_styles && !!dom.getParent(selection.getNode(), 'BLOCKQUOTE');\n        },\n        'InsertUnorderedList,InsertOrderedList': function (command) {\n          var list = dom.getParent(selection.getNode(), 'ul,ol');\n          return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n        }\n      }, 'state');\n      addCommands({\n        Undo: function () {\n          editor.undoManager.undo();\n        },\n        Redo: function () {\n          editor.undoManager.redo();\n        }\n      });\n      addQueryValueHandler('FontName', function () {\n        return fontNameQuery(editor);\n      }, this);\n      addQueryValueHandler('FontSize', function () {\n        return fontSizeQuery(editor);\n      }, this);\n    }\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend', ' ');\n    var Dispatcher = function (settings) {\n      var self = this;\n      var scope, bindings = {}, toggleEvent;\n      var returnFalse = function () {\n        return false;\n      };\n      var returnTrue = function () {\n        return true;\n      };\n      settings = settings || {};\n      scope = settings.scope || self;\n      toggleEvent = settings.toggleEvent || returnFalse;\n      var fire = function (name, args) {\n        var handlers, i, l, callback;\n        name = name.toLowerCase();\n        args = args || {};\n        args.type = name;\n        if (!args.target) {\n          args.target = scope;\n        }\n        if (!args.preventDefault) {\n          args.preventDefault = function () {\n            args.isDefaultPrevented = returnTrue;\n          };\n          args.stopPropagation = function () {\n            args.isPropagationStopped = returnTrue;\n          };\n          args.stopImmediatePropagation = function () {\n            args.isImmediatePropagationStopped = returnTrue;\n          };\n          args.isDefaultPrevented = returnFalse;\n          args.isPropagationStopped = returnFalse;\n          args.isImmediatePropagationStopped = returnFalse;\n        }\n        if (settings.beforeFire) {\n          settings.beforeFire(args);\n        }\n        handlers = bindings[name];\n        if (handlers) {\n          for (i = 0, l = handlers.length; i < l; i++) {\n            callback = handlers[i];\n            if (callback.once) {\n              off(name, callback.func);\n            }\n            if (args.isImmediatePropagationStopped()) {\n              args.stopPropagation();\n              return args;\n            }\n            if (callback.func.call(scope, args) === false) {\n              args.preventDefault();\n              return args;\n            }\n          }\n        }\n        return args;\n      };\n      var on = function (name, callback, prepend, extra) {\n        var handlers, names, i;\n        if (callback === false) {\n          callback = returnFalse;\n        }\n        if (callback) {\n          callback = { func: callback };\n          if (extra) {\n            Tools.extend(callback, extra);\n          }\n          names = name.toLowerCase().split(' ');\n          i = names.length;\n          while (i--) {\n            name = names[i];\n            handlers = bindings[name];\n            if (!handlers) {\n              handlers = bindings[name] = [];\n              toggleEvent(name, true);\n            }\n            if (prepend) {\n              handlers.unshift(callback);\n            } else {\n              handlers.push(callback);\n            }\n          }\n        }\n        return self;\n      };\n      var off = function (name, callback) {\n        var i, handlers, bindingName, names, hi;\n        if (name) {\n          names = name.toLowerCase().split(' ');\n          i = names.length;\n          while (i--) {\n            name = names[i];\n            handlers = bindings[name];\n            if (!name) {\n              for (bindingName in bindings) {\n                toggleEvent(bindingName, false);\n                delete bindings[bindingName];\n              }\n              return self;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                hi = handlers.length;\n                while (hi--) {\n                  if (handlers[hi].func === callback) {\n                    handlers = handlers.slice(0, hi).concat(handlers.slice(hi + 1));\n                    bindings[name] = handlers;\n                  }\n                }\n              }\n              if (!handlers.length) {\n                toggleEvent(name, false);\n                delete bindings[name];\n              }\n            }\n          }\n        } else {\n          for (name in bindings) {\n            toggleEvent(name, false);\n          }\n          bindings = {};\n        }\n        return self;\n      };\n      var once = function (name, callback, prepend) {\n        return on(name, callback, prepend, { once: true });\n      };\n      var has = function (name) {\n        name = name.toLowerCase();\n        return !(!bindings[name] || bindings[name].length === 0);\n      };\n      self.fire = fire;\n      self.on = on;\n      self.off = off;\n      self.once = once;\n      self.has = has;\n    };\n    Dispatcher.isNative = function (name) {\n      return !!nativeEvents[name.toLowerCase()];\n    };\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new Dispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (Dispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        args = getEventDispatcher(self).fire(name, args, bubble);\n        if (bubble !== false && self.parent) {\n          var parent = self.parent();\n          while (parent && !args.isPropagationStopped()) {\n            parent.fire(name, args, false);\n            parent = parent.parent();\n          }\n        }\n        return args;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var Events = {\n      firePreProcess: firePreProcess,\n      firePostProcess: firePostProcess,\n      fireRemove: fireRemove,\n      fireDetach: fireDetach,\n      fireSwitchMode: fireSwitchMode,\n      fireObjectResizeStart: fireObjectResizeStart,\n      fireObjectResized: fireObjectResized\n    };\n\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, state);\n      } catch (ex) {\n      }\n    };\n    var toggleClass = function (elm, cls, state) {\n      if (has$2(elm, cls) && state === false) {\n        remove$4(elm, cls);\n      } else if (state) {\n        add$2(elm, cls);\n      }\n    };\n    var toggleReadOnly = function (editor, state) {\n      toggleClass(Element.fromDom(editor.getBody()), 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor.readonly = true;\n        editor.getBody().contentEditable = 'false';\n      } else {\n        editor.readonly = false;\n        editor.getBody().contentEditable = 'true';\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        editor.focus();\n        editor.nodeChanged();\n      }\n    };\n    var setMode = function (editor, mode) {\n      if (mode === getMode(editor)) {\n        return;\n      }\n      if (editor.initialized) {\n        toggleReadOnly(editor, mode === 'readonly');\n      } else {\n        editor.on('init', function () {\n          toggleReadOnly(editor, mode === 'readonly');\n        });\n      }\n      Events.fireSwitchMode(editor, mode);\n    };\n    var getMode = function (editor) {\n      return editor.readonly ? 'readonly' : 'design';\n    };\n    var isReadOnly = function (editor) {\n      return editor.readonly === true;\n    };\n\n    var DOM$1 = DOMUtils$1.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      if (editor.settings.event_root) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$1.select(editor.settings.event_root)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !editor.readonly;\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly(editor)) {\n        e.preventDefault();\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var eventRootElm, delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      eventRootElm = getEventTarget(editor, eventName);\n      if (editor.settings.event_root) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            var name;\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                for (name in customEventRootDelegates) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                }\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$1.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$1.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$1.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        var name;\n        if (self.delegates) {\n          for (name in self.delegates) {\n            self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          }\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    };\n    EditorObservable = Tools.extend({}, Observable, EditorObservable);\n    var EditorObservable$1 = EditorObservable;\n\n    var sectionResult = Immutable('sections', 'settings');\n    var detection = PlatformDetection$1.detect();\n    var isTouch = detection.deviceType.isTouch();\n    var mobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultMobileSettings = { theme: 'mobile' };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map(isString(pluginNames) ? pluginNames.split(' ') : [], trim$2);\n      return filter(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterMobilePlugins = function (plugins) {\n      return filter(plugins, curry(contains, mobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      var sections = sectionResult.sections();\n      var sectionSettings = sections.hasOwnProperty(name) ? sections[name] : {};\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return sectionResult.sections().hasOwnProperty(name);\n    };\n    var getDefaultSettings = function (id, documentBaseUrl, editor) {\n      return {\n        id: id,\n        theme: 'modern',\n        delta_width: 0,\n        delta_height: 0,\n        popup_css: '',\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_style_values: 'xx-small,x-small,small,medium,large,x-large,xx-large',\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        render_ui: true,\n        indentation: '40px',\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: 'simple',\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        ie7_compat: true\n      };\n    };\n    var getExternalPlugins = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var processPlugins = function (isTouchDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var plugins = normalizePlugins(settings.plugins);\n      var platformPlugins = isTouchDevice && hasSection(sectionResult, 'mobile') ? filterMobilePlugins(plugins) : plugins;\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isTouchDevice, sectionResult) {\n      var isInline = sectionResult.settings().inline;\n      return isTouchDevice && hasSection(sectionResult, 'mobile') && !isInline;\n    };\n    var combineSettings = function (isTouchDevice, defaultSettings, defaultOverrideSettings, settings) {\n      var sectionResult = extractSections(['mobile'], settings);\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isTouchDevice, sectionResult) ? getSection(sectionResult, 'mobile', defaultMobileSettings) : {}, {\n        validate: true,\n        content_editable: sectionResult.settings().inline,\n        external_plugins: getExternalPlugins(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isTouchDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(id, documentBaseUrl, editor);\n      return combineSettings(isTouch, defaultSettings, defaultOverrideSettings, settings);\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Option.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var each$b = Tools.each, explode$2 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    function Shortcuts (editor) {\n      var self = this;\n      var shortcuts = {};\n      var pendingPatterns = [];\n      var parseShortcut = function (pattern) {\n        var id, key;\n        var shortcut = {};\n        each$b(explode$2(pattern, '+'), function (value) {\n          if (value in modifierNames) {\n            shortcut[value] = true;\n          } else {\n            if (/^[0-9]{2,}$/.test(value)) {\n              shortcut.keyCode = parseInt(value, 10);\n            } else {\n              shortcut.charCode = value.charCodeAt(0);\n              shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n            }\n          }\n        });\n        id = [shortcut.keyCode];\n        for (key in modifierNames) {\n          if (shortcut[key]) {\n            id.push(key);\n          } else {\n            shortcut[key] = false;\n          }\n        }\n        shortcut.id = id.join(',');\n        if (shortcut.access) {\n          shortcut.alt = true;\n          if (Env.mac) {\n            shortcut.ctrl = true;\n          } else {\n            shortcut.shift = true;\n          }\n        }\n        if (shortcut.meta) {\n          if (Env.mac) {\n            shortcut.meta = true;\n          } else {\n            shortcut.ctrl = true;\n            shortcut.meta = false;\n          }\n        }\n        return shortcut;\n      };\n      var createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts;\n        shortcuts = Tools.map(explode$2(pattern, '>'), parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      var hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      var isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      var matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      var executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      editor.on('keyup keypress keydown', function (e) {\n        if ((hasModifier(e) || isFunctionKey(e)) && !e.isDefaultPrevented()) {\n          each$b(shortcuts, function (shortcut) {\n            if (matchShortcut(e, shortcut)) {\n              pendingPatterns = shortcut.subpatterns.slice(0);\n              if (e.type === 'keydown') {\n                executeShortcutAction(shortcut);\n              }\n              return true;\n            }\n          });\n          if (matchShortcut(e, pendingPatterns[0])) {\n            if (pendingPatterns.length === 1) {\n              if (e.type === 'keydown') {\n                executeShortcutAction(pendingPatterns[0]);\n              }\n            }\n            pendingPatterns.shift();\n          }\n        }\n      });\n      self.add = function (pattern, desc, cmdFunc, scope) {\n        var cmd;\n        cmd = cmdFunc;\n        if (typeof cmdFunc === 'string') {\n          cmdFunc = function () {\n            editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          cmdFunc = function () {\n            editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        }\n        each$b(explode$2(Tools.trim(pattern.toLowerCase())), function (pattern) {\n          var shortcut = createShortcut(pattern, desc, cmdFunc, scope);\n          shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      self.remove = function (pattern) {\n        var shortcut = createShortcut(pattern);\n        if (shortcuts[shortcut.id]) {\n          delete shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n    }\n\n    var hasFocus = function (element) {\n      var doc = owner(element).dom();\n      return element.dom() === doc.activeElement;\n    };\n    var active = function (_doc) {\n      var doc = _doc !== undefined ? _doc.dom() : domGlobals.document;\n      return Option.from(doc.activeElement).map(Element.fromDom);\n    };\n    var search = function (element) {\n      return active(owner(element)).filter(function (e) {\n        return element.dom().contains(e.dom());\n      });\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Option.from(getNode(rng.startContainer, rng.startOffset)).map(Element.fromDom) : Option.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Option.some(node);\n        } else if (contains$3(root, node) === false) {\n          return Option.some(root);\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var normalizeSelection = function (editor, rng) {\n      getFocusInElement(Element.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return CaretFinder.firstPositionIn(elm.dom());\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus(Element.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(Element.fromDom(rawBody));\n    };\n    var hasFocus$1 = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection, contentEditable = editor.settings.content_editable;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (editor.bookmark !== undefined && hasFocus$1(editor) === false) {\n        SelectionBookmark.getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      if (!contentEditable) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || contentEditable) {\n        focusBody(body);\n        normalizeSelection(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      skipFocus ? activateEditor(editor) : focusEditor(editor);\n    };\n    var EditorFocus = {\n      focus: focus,\n      hasFocus: hasFocus$1\n    };\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom();\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$1(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect$1 = function (elm) {\n      return elm.dom().getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect$1(elm);\n      var deltaX = inline ? clientRect.left + elm.dom().clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom().clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = Element.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Option.from(node).map(Element.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(function (container) {\n        return contains$3(owner(container), container);\n      }).getOr(false);\n    };\n    var EditorView = {\n      isXYInContentArea: isXYInContentArea,\n      isEditorAttachedToDom: isEditorAttachedToDom\n    };\n\n    function NotificationManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    }\n\n    function NotificationManager (editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Option.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (args) {\n        if (editor.removed || !EditorView.isEditorAttachedToDom(editor)) {\n          return;\n        }\n        return find(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), args);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(args, function () {\n            closeNotification(notification);\n            reposition();\n          });\n          addNotification(notification);\n          reposition();\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = function () {\n        return notifications;\n      };\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = editor.settings.service_message;\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0,\n              icon: ''\n            });\n          }\n        });\n        editor.on('ResizeEditor ResizeWindow', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    }\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    function WindowManager (editor) {\n      var windows = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          return f ? f.apply(scope, arguments) : undefined;\n        };\n      };\n      var fireOpenEvent = function (win) {\n        editor.fire('OpenWindow', { win: win });\n      };\n      var fireCloseEvent = function (win) {\n        editor.fire('CloseWindow', { win: win });\n      };\n      var addWindow = function (win) {\n        windows.push(win);\n        fireOpenEvent(win);\n      };\n      var closeWindow = function (win) {\n        findIndex(windows, function (otherWindow) {\n          return otherWindow === win;\n        }).each(function (index) {\n          windows.splice(index, 1);\n          fireCloseEvent(win);\n          if (windows.length === 0) {\n            editor.focus();\n          }\n        });\n      };\n      var getTopWindow = function () {\n        return Option.from(windows[windows.length - 1]);\n      };\n      var open = function (args, params) {\n        editor.editorManager.setActive(editor);\n        SelectionBookmark.store(editor);\n        var win = getImplementation().open(args, params, closeWindow);\n        addWindow(win);\n        return win;\n      };\n      var alert = function (message, callback, scope) {\n        var win = getImplementation().alert(message, funcBind(scope ? scope : this, callback), closeWindow);\n        addWindow(win);\n      };\n      var confirm = function (message, callback, scope) {\n        var win = getImplementation().confirm(message, funcBind(scope ? scope : this, callback), closeWindow);\n        addWindow(win);\n      };\n      var close = function () {\n        getTopWindow().each(function (win) {\n          getImplementation().close(win);\n          closeWindow(win);\n        });\n      };\n      var getParams = function () {\n        return getTopWindow().map(getImplementation().getParams).getOr(null);\n      };\n      var setParams = function (params) {\n        getTopWindow().each(function (win) {\n          getImplementation().setParams(win, params);\n        });\n      };\n      var getWindows = function () {\n        return windows;\n      };\n      editor.on('remove', function () {\n        each(windows.slice(0), function (win) {\n          getImplementation().close(win);\n        });\n      });\n      return {\n        windows: windows,\n        open: open,\n        alert: alert,\n        confirm: confirm,\n        close: close,\n        getParams: getParams,\n        setParams: setParams,\n        getWindows: getWindows\n      };\n    }\n\n    var data = {};\n    var code = 'en';\n    var I18n = {\n      setCode: function (newCode) {\n        if (newCode) {\n          code = newCode;\n          this.rtl = this.data[newCode] ? this.data[newCode]._dir === 'rtl' : false;\n        }\n      },\n      getCode: function () {\n        return code;\n      },\n      rtl: false,\n      add: function (code, items) {\n        var langData = data[code];\n        if (!langData) {\n          data[code] = langData = {};\n        }\n        for (var name in items) {\n          langData[name] = items[name];\n        }\n        this.setCode(code);\n      },\n      translate: function (text) {\n        var langData = data[code] || {};\n        var toString = function (obj) {\n          if (Tools.is(obj, 'function')) {\n            return Object.prototype.toString.call(obj);\n          }\n          return !isEmpty(obj) ? '' + obj : '';\n        };\n        var isEmpty = function (text) {\n          return text === '' || text === null || Tools.is(text, 'undefined');\n        };\n        var getLangData = function (text) {\n          text = toString(text);\n          return Tools.hasOwn(langData, text) ? toString(langData[text]) : text;\n        };\n        if (isEmpty(text)) {\n          return '';\n        }\n        if (Tools.is(text, 'object') && Tools.hasOwn(text, 'raw')) {\n          return toString(text.raw);\n        }\n        if (Tools.is(text, 'array')) {\n          var values_1 = text.slice(1);\n          text = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n            return Tools.hasOwn(values_1, $2) ? toString(values_1[$2]) : $1;\n          });\n        }\n        return getLangData(text).replace(/{context:\\w+}$/, '');\n      },\n      data: data\n    };\n\n    var PluginManager = AddOnManager.PluginManager;\n    var resolvePluginName = function (targetUrl, suffix) {\n      for (var name in PluginManager.urls) {\n        var matchUrl = PluginManager.urls[name] + '/plugin' + suffix + '.js';\n        if (matchUrl === targetUrl) {\n          return name;\n        }\n      }\n      return null;\n    };\n    var pluginUrlToMessage = function (editor, url) {\n      var plugin = resolvePluginName(url, editor.suffix);\n      return plugin ? I18n.translate([\n        'Failed to load plugin: {0} from url {1}',\n        plugin,\n        url\n      ]) : I18n.translate([\n        'Failed to load plugin url: {0}',\n        url\n      ]);\n    };\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var pluginLoadError = function (editor, url) {\n      displayError(editor, pluginUrlToMessage(editor, url));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = domGlobals.window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, arguments);\n        } else {\n          console.log.apply(console, arguments);\n        }\n      }\n    };\n    var ErrorReporter = {\n      pluginLoadError: pluginLoadError,\n      pluginInitError: pluginInitError,\n      uploadError: uploadError,\n      displayError: displayError,\n      initError: initError\n    };\n\n    var PluginManager$1 = AddOnManager.PluginManager;\n\n    var ThemeManager = AddOnManager.ThemeManager;\n\n    function XMLHttpRequest () {\n      var f = Global$1.getOrDie('XMLHttpRequest');\n      return new f();\n    }\n\n    function Uploader (uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr, formData;\n        xhr = XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          var json;\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        formData = new domGlobals.FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, error) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: error\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          var noop = function () {\n          };\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error) {\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error));\n              resolve(handlerFailure(blobInfo, error));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              if (!notification) {\n                notification = openNotification();\n              }\n              notification.progressBar.value(percent);\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    }\n\n    function FileReader () {\n      var f = Global$1.getOrDie('FileReader');\n      return new f();\n    }\n\n    function Uint8Array (arr) {\n      var f = Global$1.getOrDie('Uint8Array');\n      return new f(arr);\n    }\n\n    var requestAnimationFrame$1 = function (callback) {\n      var f = Global$1.getOrDie('requestAnimationFrame');\n      f(callback);\n    };\n    var atob = function (base64) {\n      var f = Global$1.getOrDie('atob');\n      return f(base64);\n    };\n    var Window = {\n      atob: atob,\n      requestAnimationFrame: requestAnimationFrame$1\n    };\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr = XMLHttpRequest();\n          xhr.open('GET', url, true);\n          xhr.responseType = 'blob';\n          xhr.onload = function () {\n            if (this.status === 200) {\n              resolve(this.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr.onerror = rejectWithError;\n          xhr.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri = function (uri) {\n      var type, matches;\n      var uriParts = decodeURIComponent(uri).split(',');\n      matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var str, arr, i;\n        var uriParts = parseDataUri(uri);\n        try {\n          str = Window.atob(uriParts.data);\n        } catch (e) {\n          resolve(new domGlobals.Blob([]));\n          return;\n        }\n        arr = Uint8Array(str.length);\n        for (i = 0; i < arr.length; i++) {\n          arr[i] = str.charCodeAt(i);\n        }\n        resolve(new domGlobals.Blob([arr], { type: uriParts.type }));\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var Conversions = {\n      uriToBlob: uriToBlob,\n      blobToDataUri: blobToDataUri,\n      parseDataUri: parseDataUri\n    };\n\n    var count = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          Conversions.uriToBlob(img.src).then(function (blob) {\n            Conversions.blobToDataUri(blob).then(function (dataUri) {\n              base64 = Conversions.parseDataUri(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      base64 = Conversions.parseDataUri(img.src).data;\n      blobInfo = blobCache.findFirst(function (cachedBlobInfo) {\n        return cachedBlobInfo.base64() === base64;\n      });\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        Conversions.uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from$1(elm.getElementsByTagName('img')) : [];\n    };\n    function ImageScanner (uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        var images;\n        if (!predicate) {\n          predicate = constant(true);\n        }\n        images = filter(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map(images, function (img) {\n          if (cachedPromises[img.src]) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    }\n\n    var count$1 = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count$1++ + seed();\n    };\n    var Uuid = { uuid: uuid };\n\n    function BlobCache () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, filename) {\n        if (isString(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        var id, name;\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        id = o.id || Uuid.uuid('blobid');\n        name = o.name || id;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(name + '.' + mimeToExt(o.blob.type)),\n          blob: constant(o.blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(o.blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var findFirst = function (predicate) {\n        return filter(cache, predicate)[0];\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each(cache, function (cachedBlobInfo) {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    }\n\n    function UploadStatus () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    }\n\n    function EditorUpload (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function () {\n        return '?' + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', 'src=\"' + replacementUrl + '\"');\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var openNotification = function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n      var replaceImageUri = function (image, resultUri) {\n        blobCache.removeByUri(image.src);\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': Settings.shouldReuseFileName(editor) ? resultUri + cacheInvalidator() : resultUri,\n          'data-mce-src': editor.convertURL(resultUri, 'src')\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = Uploader(uploadStatus, {\n            url: Settings.getImageUploadUrl(editor),\n            basePath: Settings.getImageUploadBasePath(editor),\n            credentials: Settings.getImagesUploadCredentials(editor),\n            handler: Settings.getImagesUploadHandler(editor)\n          });\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos;\n          blobInfos = map(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification).then(aliveGuard(function (result) {\n            var filteredResult = map(result, function (uploadInfo, index) {\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && Settings.shouldReplaceBlobUris(editor)) {\n                replaceImageUri(image, uploadInfo.url);\n              } else if (uploadInfo.error) {\n                ErrorReporter.uploadError(editor, uploadInfo.error);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status\n              };\n            });\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (Settings.isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = Settings.getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              ErrorReporter.displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          each(result, function (resultItem) {\n            replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n            resultItem.image.src = resultItem.blobInfo.blobUri();\n            resultItem.image.removeAttribute('data-mce-src');\n          });\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('setContent', function () {\n        if (Settings.isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('getContent', function (e) {\n        if (e.source_view || e.format === 'raw') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    }\n\n    var isBlockElement = function (blockElements, node) {\n      return blockElements.hasOwnProperty(node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (NodeType.isText(node)) {\n        return true;\n      } else if (NodeType.isElement(node)) {\n        return !isBlockElement(blockElements, node) && !Bookmarks.isBookmarkNode(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(Parents.parents(Element.fromDom(node), Element.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom());\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (NodeType.isText(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var settings = editor.settings, dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rng;\n      var startContainer, startOffset, endContainer, endOffset, rootBlockNode;\n      var tempNode, wrapped, restoreSelection;\n      var rootNodeName, forcedRootBlock;\n      forcedRootBlock = settings.forced_root_block;\n      if (!node || !NodeType.isElement(node) || !forcedRootBlock) {\n        return;\n      }\n      rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      rng = selection.getRng();\n      startContainer = rng.startContainer;\n      startOffset = rng.startOffset;\n      endContainer = rng.endContainer;\n      endOffset = rng.endOffset;\n      restoreSelection = EditorFocus.hasFocus(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, editor.settings.forced_root_block_attrs);\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$3 = function (editor) {\n      if (editor.settings.forced_root_block) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n    var ForceBlocks = { setup: setup$3 };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (NodeType.isText(sc)) {\n        return so === 0 ? Option.some(Element.fromDom(sc)) : Option.none();\n      } else {\n        return Option.from(sc.childNodes[so]).map(Element.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (NodeType.isText(ec)) {\n        return eo === ec.data.length ? Option.some(Element.fromDom(ec)) : Option.none();\n      } else {\n        return Option.from(ec.childNodes[eo - 1]).map(Element.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren$1 = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren$1(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren$1(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return lift2(getStartNode(rng), getEndNode(rng), function (startNode, endNode) {\n        var start = find(getFirstChildren(elm), curry(eq, startNode));\n        var end = find(getLastChildren$1(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint$1 = function (dom, rng, node, start) {\n      var root = node, walker = new TreeWalker(node, root);\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      do {\n        if (node.nodeType === 3 && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (nonEmptyElementsMap[node.nodeName] && !/^(TD|TH)$/.test(node.nodeName)) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n        if (Env.ie && Env.ie < 11 && dom.isBlock(node) && dom.isEmpty(node)) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, 0);\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n\n    function NodeChange (editor) {\n      var lastRng, lastPath = [];\n      var isSameElementPath = function (startElm) {\n        var i, currentPath;\n        currentPath = editor.$(startElm).parentsUntil(editor.getBody()).add(startElm);\n        if (currentPath.length === lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            lastPath = currentPath;\n            return true;\n          }\n        }\n        lastPath = currentPath;\n        return false;\n      };\n      if (!('onselectionchange' in editor.getDoc())) {\n        editor.on('NodeChange Click MouseUp KeyUp Focus', function (e) {\n          var nativeRng, fakeRng;\n          nativeRng = editor.selection.getRng();\n          fakeRng = {\n            startContainer: nativeRng.startContainer,\n            startOffset: nativeRng.startOffset,\n            endContainer: nativeRng.endContainer,\n            endOffset: nativeRng.endOffset\n          };\n          if (e.type === 'nodechange' || !RangeCompare.isEq(fakeRng, lastRng)) {\n            editor.fire('SelectionChange');\n          }\n          lastRng = fakeRng;\n        });\n      }\n      editor.on('contextmenu', function () {\n        editor.fire('SelectionChange');\n      });\n      editor.on('SelectionChange', function () {\n        var startElm = editor.selection.getStart(true);\n        if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n          return;\n        }\n        if (hasAnyRanges(editor) && !isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n          editor.nodeChanged({ selectionChange: true });\n        }\n      });\n      editor.on('MouseUp', function (e) {\n        if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n          if (editor.selection.getNode().nodeName === 'IMG') {\n            Delay.setEditorTimeout(editor, function () {\n              editor.nodeChanged();\n            });\n          } else {\n            editor.nodeChanged();\n          }\n        }\n      });\n      this.nodeChanged = function (args) {\n        var selection = editor.selection;\n        var node, parents, root;\n        if (editor.initialized && selection && !editor.settings.disable_nodechange && !editor.readonly) {\n          root = editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== editor.getDoc() || !editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          editor.fire('NodeChange', args);\n        }\n      };\n    }\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || this.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map(clientRects, function (clientRect) {\n          clientRect = clone$1(clientRect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (NodeType.isElement(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (NodeType.isText(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (node) {\n      return foldl(node, function (result, node) {\n        return result.concat(getNodeClientRects(node));\n      }, []);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil = function (direction, root, predicateFn, node) {\n      while (node = findNode(node, direction, isEditableCaretCandidate, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0, node;\n      var result = [];\n      var targetClientRect;\n      var add = function (node) {\n        var i, clientRect, clientRects;\n        clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (i = 0; i < clientRects.length; i++) {\n          clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, ArrUtils.last(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      targetClientRect = ArrUtils.last(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      node = caretPosition.getNode();\n      add(node);\n      findUntil(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil, VDirection.Up, isAbove, isBelow);\n    var downUntil = curry(walkUntil, VDirection.Down, isBelow, isAbove);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn, isBelowFn, isAboveFn, caretPosition;\n      var result = [];\n      var line = 0, clientRect, targetClientRect;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return ArrUtils.last(caretPosition.getClientRects());\n        }\n        return ArrUtils.last(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow;\n        isAboveFn = isAbove;\n        caretPosition = CaretPosition$1.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove;\n        isAboveFn = isBelow;\n        caretPosition = CaretPosition$1.before(node);\n      }\n      targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        clientRect = getClientRect(caretPosition);\n        if (isAboveFn(clientRect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(clientRect, ArrUtils.last(result))) {\n          line++;\n        }\n        clientRect = clone$1(clientRect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$7 = NodeType.isContentEditableFalse;\n    var findNode$1 = findNode;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInside = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var findClosestClientRect = function (clientRects, clientX) {\n      return ArrUtils.reduce(clientRects, function (oldClientRect, clientRect) {\n        var oldDistance, newDistance;\n        oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (isInside(clientX, clientRect)) {\n          return clientRect;\n        }\n        if (isInside(clientX, oldClientRect)) {\n          return oldClientRect;\n        }\n        if (newDistance === oldDistance && isContentEditableFalse$7(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil$1 = function (direction, root, predicateFn, node) {\n      while (node = findNode$1(node, direction, isEditableCaretCandidate, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var findLineNodeRects = function (root, targetNodeRect) {\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects;\n        lineRects = filter(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil$1(VDirection.Up, root, curry(collect, isAbove), targetNodeRect.node);\n      walkUntil$1(VDirection.Down, root, curry(collect, isBelow), targetNodeRect.node);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter(from$1(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestCaret = function (root, clientX, clientY) {\n      var closestNodeRect;\n      var contentEditableFalseNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter(contentEditableFalseNodeRects, function (rect) {\n        return clientY >= rect.top && clientY <= rect.bottom;\n      });\n      closestNodeRect = findClosestClientRect(targetNodeRects, clientX);\n      if (closestNodeRect) {\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect), clientX);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.ie && Env.ie <= 11 && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (NodeType.isElement(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n    var RangePoint = { isXYWithinRange: isXYWithinRange };\n\n    var getAbsolutePosition = function (elm) {\n      var doc, docElem, win, clientRect;\n      clientRect = elm.getBoundingClientRect();\n      doc = elm.ownerDocument;\n      docElem = doc.documentElement;\n      win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n    var MousePosition = { calc: calc };\n\n    var isContentEditableFalse$8 = NodeType.isContentEditableFalse, isContentEditableTrue$3 = NodeType.isContentEditableTrue;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$8(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      if (isContentEditableFalse$8(targetElement)) {\n        return false;\n      }\n      return true;\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var clonedElm = elm.cloneNode(true);\n      editor.dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      editor.dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = editor.dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      editor.dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      editor.dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var hasDraggableElement = function (state) {\n      return state.element;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start$1 = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find(editor.dom.getParents(e.target), Predicate.or(isContentEditableFalse$8, isContentEditableTrue$3)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.element = ceElm;\n            state.screenX = e.screenX;\n            state.screenY = e.screenY;\n            state.maxX = (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2;\n            state.maxY = (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2;\n            state.relX = e.pageX - elmPos.x;\n            state.relY = e.pageY - elmPos.y;\n            state.width = ceElm.offsetWidth;\n            state.height = ceElm.offsetHeight;\n            state.ghost = createGhost(editor, ceElm, state.width, state.height);\n          }\n        }\n      };\n    };\n    var move$1 = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      return function (e) {\n        var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n        if (hasDraggableElement(state) && !state.dragging && movement > 10) {\n          var args = editor.fire('dragstart', { target: state.element });\n          if (args.isDefaultPrevented()) {\n            return;\n          }\n          state.dragging = true;\n          editor.focus();\n        }\n        if (state.dragging) {\n          var targetPos = applyRelPos(state, MousePosition.calc(editor, e));\n          appendGhostToBody(state.ghost, editor.getBody());\n          moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n          throttledPlaceCaretAt(e.clientX, e.clientY);\n        }\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        if (state.dragging) {\n          if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n            var targetClone_1 = cloneElement(state.element);\n            var args = editor.fire('drop', {\n              targetClone: targetClone_1,\n              clientX: e.clientX,\n              clientY: e.clientY\n            });\n            if (!args.isDefaultPrevented()) {\n              targetClone_1 = args.targetClone;\n              editor.undoManager.transact(function () {\n                removeElement(state.element);\n                editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                editor._selectionOverrides.hideFakeCaret();\n              });\n            }\n          }\n        }\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        if (state.dragging) {\n          editor.fire('dragend');\n        }\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.dragging = false;\n      state.element = null;\n      removeElement(state.ghost);\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = {};\n      var pageDom, dragStartHandler, dragHandler, dropHandler, dragEndHandler, rootDocument;\n      pageDom = DOMUtils$1.DOM;\n      rootDocument = domGlobals.document;\n      dragStartHandler = start$1(state, editor);\n      dragHandler = move$1(state, editor);\n      dropHandler = drop(state, editor);\n      dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$8(realTarget) || isContentEditableFalse$8(editor.dom.getContentEditableParent(realTarget))) {\n          e.preventDefault();\n        }\n      });\n    };\n    var init = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n    };\n    var DragDropOverrides = { init: init };\n\n    var setup$4 = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, editor.selection.getRng(), false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n    var CefFocus = { setup: setup$4 };\n\n    var isContentEditableTrue$4 = NodeType.isContentEditableTrue;\n    var isContentEditableFalse$9 = NodeType.isContentEditableFalse;\n    var getContentEditableRoot$1 = function (editor, node) {\n      var root = editor.getBody();\n      while (node && node !== root) {\n        if (isContentEditableTrue$4(node) || isContentEditableFalse$9(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var SelectionOverrides = function (editor) {\n      var isBlock = function (node) {\n        return editor.dom.isBlock(node);\n      };\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor.getBody(), isBlock, function () {\n        return EditorFocus.hasFocus(editor);\n      });\n      var realSelectionId = 'sel-' + editor.dom.uniqueId();\n      var selectedContentEditableNode;\n      var isFakeSelectionElement = function (elm) {\n        return editor.dom.hasClass(elm, 'mce-offscreen-selection');\n      };\n      var getRealSelectionElement = function () {\n        var container = editor.dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          editor.selection.setRng(range);\n        }\n      };\n      var getRange = function () {\n        return editor.selection.getRng();\n      };\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e;\n        e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          editor.selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var getNormalizedRangeEndPoint = function (direction, range) {\n        range = normalizeRange(direction, rootNode, range);\n        if (direction === -1) {\n          return CaretPosition$1.fromRangeStart(range);\n        }\n        return CaretPosition$1.fromRangeEnd(range);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          editor.selection.scrollIntoView(blockCaretContainer[0]);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && EditorView.isXYInContentArea(editor, e.clientX, e.clientY)) {\n            setRange(renderCaretAtRange(editor, range, false));\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot;\n          contentEditableRoot = getContentEditableRoot$1(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$9(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue$4(contentEditableRoot)) {\n              if (editor.dom.isChildOf(contentEditableRoot, editor.selection.getNode())) {\n                removeContentEditableSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', function () {\n          removeContentEditableSelection();\n        });\n        editor.on('ResizeWindow FullscreenStateChanged', function () {\n          return fakeCaret.reposition();\n        });\n        var handleTouchSelect = function (editor) {\n          var moved = false;\n          editor.on('touchstart', function () {\n            moved = false;\n          });\n          editor.on('touchmove', function () {\n            moved = true;\n          });\n          editor.on('touchend', function (e) {\n            var contentEditableRoot = getContentEditableRoot$1(editor, e.target);\n            if (isContentEditableFalse$9(contentEditableRoot)) {\n              if (!moved) {\n                e.preventDefault();\n                setContentEditableSelection(selectNode(editor, contentEditableRoot));\n              }\n            }\n          });\n        };\n        var hasNormalCaretPosition = function (elm) {\n          var caretWalker = CaretWalker(elm);\n          if (!elm.firstChild) {\n            return false;\n          }\n          var startPos = CaretPosition$1.before(elm.firstChild);\n          var newPos = caretWalker.next(startPos);\n          return newPos && !isBeforeContentEditableFalse(newPos) && !isAfterContentEditableFalse(newPos);\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = editor.dom.getParent(node1, editor.dom.isBlock);\n          var block2 = editor.dom.getParent(node2, editor.dom.isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = editor.dom.getParent(targetNode, editor.dom.isBlock);\n          var caretBlock = editor.dom.getParent(caretNode, editor.dom.isBlock);\n          if (targetBlock && editor.dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse$9(getContentEditableRoot$1(editor, targetBlock)) === false) {\n            return true;\n          }\n          return targetBlock && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        handleTouchSelect(editor);\n        editor.on('mousedown', function (e) {\n          var contentEditableRoot;\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !editor.dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (EditorView.isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          contentEditableRoot = getContentEditableRoot$1(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$9(contentEditableRoot)) {\n              e.preventDefault();\n              setContentEditableSelection(selectNode(editor, contentEditableRoot));\n            } else {\n              removeContentEditableSelection();\n              if (!(isContentEditableTrue$4(contentEditableRoot) && e.shiftKey) && !RangePoint.isXYWithinRange(e.clientX, e.clientY, editor.selection.getRng())) {\n                hideFakeCaret();\n                editor.selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeContentEditableSelection();\n            hideFakeCaret();\n            var caretInfo = closestCaret(rootNode, e.clientX, e.clientY);\n            if (caretInfo) {\n              if (!hasBetterMouseTarget(e.target, caretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, caretInfo.node, caretInfo.before, false);\n                editor.getBody().focus();\n                setRange(range);\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          switch (e.keyCode) {\n          default:\n            if (isContentEditableFalse$9(editor.selection.getNode())) {\n              e.preventDefault();\n            }\n            break;\n          }\n        });\n        editor.on('getSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedContentEditableNode) {\n            if (!selectedContentEditableNode.parentNode) {\n              selectedContentEditableNode = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedContentEditableNode);\n            e.range = rng;\n          }\n        });\n        editor.on('setSelectionRange', function (e) {\n          e.range = normalizeShortEndedElementSelection(e.range);\n          var rng = setContentEditableSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(rng.startContainer.parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(rng.startContainer.parentNode)) {\n            removeContentEditableSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText);\n            }\n          }\n        });\n        DragDropOverrides.init(editor);\n        CefFocus.setup(editor);\n      };\n      var addCss = function () {\n        var styles = editor.contentStyles, rootClass = '.mce-content-body';\n        styles.push(fakeCaret.getCss());\n        styles.push(rootClass + ' .mce-offscreen-selection {' + 'position: absolute;' + 'left: -9999999999px;' + 'max-width: 1000000px;' + '}' + rootClass + ' *[contentEditable=false] {' + 'cursor: default;' + '}' + rootClass + ' *[contentEditable=true] {' + 'cursor: text;' + '}');\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer(node) || startsWithCaretContainer(node) || endsWithCaretContainer(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var normalizeShortEndedElementSelection = function (rng) {\n        var shortEndedElements = editor.schema.getShortEndedElements();\n        var newRng = editor.dom.createRng();\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        if (has(shortEndedElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has(shortEndedElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      var setContentEditableSelection = function (range, forward) {\n        var node;\n        var $ = editor.$;\n        var dom = editor.dom;\n        var $realSelectionContainer, sel, startContainer, startOffset, endOffset, e, caretPosition, targetClone, origTargetClone;\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            if (forward === false) {\n              caretPosition = getNormalizedRangeEndPoint(-1, range);\n              if (isFakeCaretTarget(caretPosition.getNode(true))) {\n                return showCaret(-1, caretPosition.getNode(true), false, false);\n              }\n              if (isFakeCaretTarget(caretPosition.getNode())) {\n                return showCaret(-1, caretPosition.getNode(), !caretPosition.isAtEnd(), false);\n              }\n            } else {\n              caretPosition = getNormalizedRangeEndPoint(1, range);\n              if (isFakeCaretTarget(caretPosition.getNode())) {\n                return showCaret(1, caretPosition.getNode(), !caretPosition.isAtEnd(), false);\n              }\n              if (isFakeCaretTarget(caretPosition.getNode(true))) {\n                return showCaret(1, caretPosition.getNode(true), false, false);\n              }\n            }\n          }\n          return null;\n        }\n        startContainer = range.startContainer;\n        startOffset = range.startOffset;\n        endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse$9(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          node = startContainer.childNodes[startOffset];\n        }\n        if (!isContentEditableFalse$9(node)) {\n          return null;\n        }\n        targetClone = origTargetClone = node.cloneNode(true);\n        e = editor.fire('ObjectSelected', {\n          target: node,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        $realSelectionContainer = descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom()]);\n        });\n        targetClone = e.targetClone;\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        range = editor.dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          range.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          range.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append('\\xA0').append(targetClone).append('\\xA0');\n          range.setStart($realSelectionContainer[0].firstChild, 1);\n          range.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        sel = editor.selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(range);\n        each(descendants$1(Element.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          remove(elm, 'data-mce-selected');\n        });\n        node.setAttribute('data-mce-selected', '1');\n        selectedContentEditableNode = node;\n        hideFakeCaret();\n        return range;\n      };\n      var removeContentEditableSelection = function () {\n        if (selectedContentEditableNode) {\n          selectedContentEditableNode.removeAttribute('data-mce-selected');\n          descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$1);\n          selectedContentEditableNode = null;\n        }\n        descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$1);\n        selectedContentEditableNode = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedContentEditableNode = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse) {\n        registerEvents();\n        addCss();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var trimComments = function (text) {\n      var sanitizedText = text;\n      while (/<!--|--!?>/g.test(sanitizedText)) {\n        sanitizedText = sanitizedText.replace(/<!--|--!?>/g, '');\n      }\n      return sanitizedText;\n    };\n    var isInvalidUri = function (settings, uri) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return settings.allow_svg_data_urls === false && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var findEndTagIndex = function (schema, html, startIndex) {\n      var count = 1, index, matches, tokenRegExp, shortEndedElements;\n      shortEndedElements = schema.getShortEndedElements();\n      tokenRegExp = /<([!?\\/])?([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\/|\\s+)>/g;\n      tokenRegExp.lastIndex = index = startIndex;\n      while (matches = tokenRegExp.exec(html)) {\n        index = tokenRegExp.lastIndex;\n        if (matches[1] === '/') {\n          count--;\n        } else if (!matches[1]) {\n          if (matches[2] in shortEndedElements) {\n            continue;\n          }\n          count++;\n        }\n        if (count === 0) {\n          break;\n        }\n      }\n      return index;\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name = matches[1];\n        var value = matches[2];\n        return typeof name === 'string' && name.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    function SaxParser(settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var noop = function () {\n      };\n      settings = settings || {};\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parse = function (html) {\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, removeInternalElements, shortEndedElements, fillAttrsMap, isShortEnded;\n        var validate, elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced, processHtml;\n        var anyAttributesRequired, selfClosing, tokenRegExp, attrRegExp, specialElements, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var fixSelfClosing;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,formaction,poster,xlink:href');\n        var scriptUriRegExp = /((java|vb)script|mhtml):/i;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var parseAttribute = function (match, name, value, val2, val3) {\n          var attrRule, i;\n          var trimRegExp = /[\\s\\u0000-\\u001F]+/g;\n          name = name.toLowerCase();\n          value = name in fillAttrsMap ? name : decode(value || val2 || val3 || '');\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              i = validAttributePatterns.length;\n              while (i--) {\n                attrRule = validAttributePatterns[i];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          if (filteredUrlAttrs[name] && !settings.allow_script_urls) {\n            var uri = value.replace(trimRegExp, '');\n            try {\n              uri = decodeURIComponent(uri);\n            } catch (ex) {\n              uri = unescape(uri);\n            }\n            if (scriptUriRegExp.test(uri)) {\n              return;\n            }\n            if (isInvalidUri(settings, uri)) {\n              return;\n            }\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)--!?>)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:!DOCTYPE([\\\\w\\\\W]*?)>)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)((?:\\\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\\\/|\\\\s+)>)' + ')', 'g');\n        attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        shortEndedElements = schema.getShortEndedElements();\n        selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        fillAttrsMap = schema.getBoolAttrs();\n        validate = settings.validate;\n        removeInternalElements = settings.remove_internals;\n        fixSelfClosing = settings.fix_self_closing;\n        specialElements = schema.getSpecialElements();\n        processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          if (index < matches.index) {\n            text(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[6]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[7]) {\n            if (matches.index + matches[0].length > html.length) {\n              text(decode(html.substr(matches.index)));\n              index = matches.index + matches[0].length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[8]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[8]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, parseAttribute);\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matches[0].length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  text(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            if (value.charAt(0) === '>') {\n              value = ' ' + value;\n            }\n            if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n              value = ' ' + value;\n            }\n            comment(value);\n          } else if (value = matches[2]) {\n            cdata(trimComments(value));\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if (value = matches[4]) {\n            pi(value, matches[5]);\n          }\n          index = matches.index + matches[0].length;\n        }\n        if (index < html.length) {\n          text(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      return { parse: parse };\n    }\n    (function (SaxParser) {\n      SaxParser.findEndTag = findEndTagIndex;\n    }(SaxParser || (SaxParser = {})));\n    var SaxParser$1 = SaxParser;\n\n    var trimHtml = function (tempAttrs, html) {\n      var trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\n      return html.replace(trimContentRegExp, '');\n    };\n    var trimInternal = function (serializer, html) {\n      var content = html;\n      var bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\n      var endTagIndex, index, matchLength, matches, shortEndedElements;\n      var schema = serializer.schema;\n      content = trimHtml(serializer.getTempAttrs(), content);\n      shortEndedElements = schema.getShortEndedElements();\n      while (matches = bogusAllRegExp.exec(content)) {\n        index = bogusAllRegExp.lastIndex;\n        matchLength = matches[0].length;\n        if (shortEndedElements[matches[1]]) {\n          endTagIndex = index;\n        } else {\n          endTagIndex = SaxParser$1.findEndTag(schema, content, index);\n        }\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\n        bogusAllRegExp.lastIndex = index - matchLength;\n      }\n      return Zwsp.trim(content);\n    };\n    var trimExternal = trimInternal;\n    var TrimHtml = {\n      trimExternal: trimExternal,\n      trimInternal: trimInternal\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n    var Diff = {\n      KEEP: KEEP,\n      DELETE: DELETE,\n      INSERT: INSERT,\n      diff: diff\n    };\n\n    var getOuterHtml = function (elm) {\n      if (NodeType.isElement(elm)) {\n        return elm.outerHTML;\n      } else if (NodeType.isText(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (NodeType.isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment$1 = function (html) {\n      var frag, node, container;\n      container = domGlobals.document.createElement('div');\n      frag = domGlobals.document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment$1(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each(diff, function (action) {\n        if (action[0] === Diff.KEEP) {\n          index++;\n        } else if (action[0] === Diff.INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === Diff.DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$3 = function (elm) {\n      return filter(map(from$1(elm.childNodes), getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map(from$1(elm.childNodes), getOuterHtml);\n      applyDiff(Diff.diff(currentFragments, fragments), elm);\n      return elm;\n    };\n    var Fragments = {\n      read: read$3,\n      write: write\n    };\n\n    var undoLevelDocument = Cell(Option.none());\n    var lazyTempDocument = function () {\n      return undoLevelDocument.get().getOrThunk(function () {\n        var doc = domGlobals.document.implementation.createHTMLDocument('undo');\n        undoLevelDocument.set(Option.some(doc));\n        return doc;\n      });\n    };\n    var hasIframes = function (html) {\n      return html.indexOf('</iframe>') !== -1;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var fragments, content, trimmedFragments;\n      fragments = Fragments.read(editor.getBody());\n      trimmedFragments = bind(fragments, function (html) {\n        var trimmed = TrimHtml.trimInternal(editor.serializer, html);\n        return trimmed.length > 0 ? [trimmed] : [];\n      });\n      content = trimmedFragments.join('');\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\n    };\n    var applyToEditor = function (editor, level, before) {\n      if (level.type === 'fragmented') {\n        Fragments.write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, { format: 'raw' });\n      }\n      editor.selection.moveToBookmark(before ? level.beforeBookmark : level.bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = Element.fromTag('body', lazyTempDocument());\n      set$1(elm, getLevelContent(level));\n      each(descendants$1(elm, '*[data-mce-bogus]'), unwrap);\n      return get$3(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$4 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n    var Levels = {\n      createFragmentedLevel: createFragmentedLevel,\n      createCompleteLevel: createCompleteLevel,\n      createFromEditor: createFromEditor,\n      applyToEditor: applyToEditor,\n      isEq: isEq$4\n    };\n\n    function UndoManager (editor) {\n      var self = this, index = 0, data = [], beforeBookmark, isFirstTypedCharacter, locks = 0;\n      var isUnlocked = function () {\n        return locks === 0;\n      };\n      var setTyping = function (typing) {\n        if (isUnlocked()) {\n          self.typing = typing;\n        }\n      };\n      var setDirty = function (state) {\n        editor.setDirty(state);\n      };\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(false);\n        self.add({}, e);\n      };\n      var endTyping = function () {\n        if (self.typing) {\n          setTyping(false);\n          self.add();\n        }\n      };\n      editor.on('init', function () {\n        self.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command;\n        if (cmd !== 'Undo' && cmd !== 'Redo' && cmd !== 'mceRepaint') {\n          endTyping();\n          self.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command;\n        if (cmd !== 'Undo' && cmd !== 'Redo' && cmd !== 'mceRepaint') {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart Cut', function () {\n        self.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('DragEnd', addNonTypingUndoLevel);\n      editor.on('KeyUp', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter && self.typing && Levels.isEq(Levels.createFromEditor(editor), data[0]) === false) {\n          if (editor.isDirty() === false) {\n            setDirty(true);\n            editor.fire('change', {\n              level: data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter = false;\n          editor.nodeChanged();\n        }\n      });\n      editor.on('KeyDown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (self.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !self.typing && !modKey) {\n          self.beforeChange();\n          setTyping(true);\n          self.add({}, e);\n          isFirstTypedCharacter = true;\n        }\n      });\n      editor.on('MouseDown', function (e) {\n        if (self.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n      self = {\n        data: data,\n        typing: false,\n        beforeChange: function () {\n          if (isUnlocked()) {\n            beforeBookmark = GetBookmark.getUndoBookmark(editor.selection);\n          }\n        },\n        add: function (level, event) {\n          var i;\n          var settings = editor.settings;\n          var lastLevel, currentLevel;\n          currentLevel = Levels.createFromEditor(editor);\n          level = level || {};\n          level = Tools.extend(level, currentLevel);\n          if (isUnlocked() === false || editor.removed) {\n            return null;\n          }\n          lastLevel = data[index];\n          if (editor.fire('BeforeAddUndo', {\n              level: level,\n              lastLevel: lastLevel,\n              originalEvent: event\n            }).isDefaultPrevented()) {\n            return null;\n          }\n          if (lastLevel && Levels.isEq(lastLevel, level)) {\n            return null;\n          }\n          if (data[index]) {\n            data[index].beforeBookmark = beforeBookmark;\n          }\n          if (settings.custom_undo_redo_levels) {\n            if (data.length > settings.custom_undo_redo_levels) {\n              for (i = 0; i < data.length - 1; i++) {\n                data[i] = data[i + 1];\n              }\n              data.length--;\n              index = data.length;\n            }\n          }\n          level.bookmark = GetBookmark.getUndoBookmark(editor.selection);\n          if (index < data.length - 1) {\n            data.length = index + 1;\n          }\n          data.push(level);\n          index = data.length - 1;\n          var args = {\n            level: level,\n            lastLevel: lastLevel,\n            originalEvent: event\n          };\n          editor.fire('AddUndo', args);\n          if (index > 0) {\n            setDirty(true);\n            editor.fire('change', args);\n          }\n          return level;\n        },\n        undo: function () {\n          var level;\n          if (self.typing) {\n            self.add();\n            self.typing = false;\n            setTyping(false);\n          }\n          if (index > 0) {\n            level = data[--index];\n            Levels.applyToEditor(editor, level, true);\n            setDirty(true);\n            editor.fire('undo', { level: level });\n          }\n          return level;\n        },\n        redo: function () {\n          var level;\n          if (index < data.length - 1) {\n            level = data[++index];\n            Levels.applyToEditor(editor, level, false);\n            setDirty(true);\n            editor.fire('redo', { level: level });\n          }\n          return level;\n        },\n        clear: function () {\n          data = [];\n          index = 0;\n          self.typing = false;\n          self.data = data;\n          editor.fire('ClearUndos');\n        },\n        hasUndo: function () {\n          return index > 0 || self.typing && data[0] && !Levels.isEq(Levels.createFromEditor(editor), data[0]);\n        },\n        hasRedo: function () {\n          return index < data.length - 1 && !self.typing;\n        },\n        transact: function (callback) {\n          endTyping();\n          self.beforeChange();\n          self.ignore(callback);\n          return self.add();\n        },\n        ignore: function (callback) {\n          try {\n            locks++;\n            callback();\n          } finally {\n            locks--;\n          }\n        },\n        extra: function (callback1, callback2) {\n          var lastLevel, bookmark;\n          if (self.transact(callback1)) {\n            bookmark = data[index].bookmark;\n            lastLevel = data[index - 1];\n            Levels.applyToEditor(editor, lastLevel, true);\n            if (self.transact(callback2)) {\n              data[index - 1].beforeBookmark = bookmark;\n            }\n          }\n        }\n      };\n      return self;\n    }\n\n    var postProcessHooks = {}, filter$2 = ArrUtils.filter, each$c = ArrUtils.each;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = hooks = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess = function (name, editor) {\n      each$c(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var isPre, blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && ArrUtils.indexOf(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      isPre = NodeType.matchNodeNames('pre');\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$c(filter$2(filter$2(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n    var Hooks = { postProcess: postProcess };\n\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$d = Tools.each;\n    var isEq$5 = FormatUtils.isEq;\n    var isTableCell$4 = function (node) {\n      return /^(TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container, offset, lastIdx;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (NodeType.isElement(container)) {\n        lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (NodeType.isText(container) && start && offset >= container.nodeValue.length) {\n        container = new TreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (NodeType.isText(container) && !start && offset === 0) {\n        container = new TreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var wrap$2 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = Element.fromDom(node);\n      var wrapper = Element.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append$1(wrapper, siblings);\n      if (next) {\n        before(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after(start, wrapper);\n        append(wrapper, start);\n      }\n      return wrapper.dom();\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$5(node, format.inline)) {\n        return true;\n      }\n      if (isEq$5(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return NodeType.isElement(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.tagName === 'A';\n    };\n    var find$3 = function (dom, node, next, inc) {\n      node = FormatUtils.getNonWhiteSpaceSibling(node, next, inc);\n      return !node || (node.nodeName === 'BR' || dom.isBlock(node));\n    };\n    var removeNode$1 = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = ed.settings.forced_root_block;\n      if (format.block) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find$3(dom, node, false) && !find$3(dom, node.firstChild, true, 1)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find$3(dom, node, true) && !find$3(dom, node.lastChild, false, 1)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$5(node, format.list_block)) {\n              each$d(Tools.grep(node.childNodes), function (node) {\n                if (FormatUtils.isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$2(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = 0;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (format.selector && format.inline && !isEq$5(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, 1);\n    };\n    var removeFormat = function (ed, format, vars, node, compareNode) {\n      var i, attrs, stylesModified;\n      var dom = ed.dom;\n      if (!matchName$1(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return false;\n      }\n      if (format.remove !== 'all') {\n        each$d(format.styles, function (value, name) {\n          value = FormatUtils.normalizeStyleValue(dom, FormatUtils.replaceVars(value, vars), name);\n          if (typeof name === 'number') {\n            name = value;\n            compareNode = 0;\n          }\n          if (format.remove_similar || (!compareNode || isEq$5(FormatUtils.getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(node, name, '');\n          }\n          stylesModified = 1;\n        });\n        if (stylesModified && dom.getAttrib(node, 'style') === '') {\n          node.removeAttribute('style');\n          node.removeAttribute('data-mce-style');\n        }\n        each$d(format.attributes, function (value, name) {\n          var valueOut;\n          value = FormatUtils.replaceVars(value, vars);\n          if (typeof name === 'number') {\n            name = value;\n            compareNode = 0;\n          }\n          if (!compareNode || isEq$5(dom.getAttrib(compareNode, name), value)) {\n            if (name === 'class') {\n              value = dom.getAttrib(node, name);\n              if (value) {\n                valueOut = '';\n                each$d(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(node, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (name === 'class') {\n              node.removeAttribute('className');\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              node.removeAttribute('data-mce-' + name);\n            }\n            node.removeAttribute(name);\n          }\n        });\n        each$d(format.classes, function (value) {\n          value = FormatUtils.replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(node, value);\n          }\n        });\n        attrs = dom.getAttribs(node);\n        for (i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return false;\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode$1(ed, node, format);\n        return true;\n      }\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each$d(FormatUtils.getParents(editor.dom, container.parentNode).reverse(), function (parent) {\n        var format;\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          format = MatchFormat.matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var parent, clone, lastClone, firstClone, i, formatRootParent;\n      var dom = editor.dom;\n      if (formatRoot) {\n        formatRootParent = formatRoot.parentNode;\n        for (parent = container.parentNode; parent && parent !== formatRootParent; parent = parent.parentNode) {\n          clone = dom.clone(parent, false);\n          for (i = 0; i < formatList.length; i++) {\n            if (removeFormat(editor, formatList[i], vars, clone, clone)) {\n              clone = 0;\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n        }\n      }\n      return container;\n    };\n    var remove$6 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name), format = formatList[0];\n      var bookmark, rng, contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return Bookmarks.isBookmarkNode(node) && NodeType.isElement(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var process = function (node) {\n        var children, i, l, lastContentEditable, hasContentEditableState;\n        if (NodeType.isElement(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        children = Tools.grep(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          for (i = 0, l = formatList.length; i < l; i++) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (i = 0, l = children.length; i < l; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (NodeType.isText(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var commonAncestorContainer = rng.commonAncestorContainer;\n        rng = ExpandRange.expandRng(ed, rng, formatList, true);\n        if (format.split) {\n          rng = SplitRange.split(rng);\n          startContainer = getContainer(ed, rng, true);\n          endContainer = getContainer(ed, rng);\n          if (startContainer !== endContainer) {\n            if (/^(TR|TH|TD)$/.test(startContainer.nodeName) && startContainer.firstChild) {\n              if (startContainer.nodeName === 'TR') {\n                startContainer = startContainer.firstChild.firstChild || startContainer;\n              } else {\n                startContainer = startContainer.firstChild || startContainer;\n              }\n            }\n            if (commonAncestorContainer && /^T(HEAD|BODY|FOOT|R)$/.test(commonAncestorContainer.nodeName) && isTableCell$4(endContainer) && endContainer.firstChild) {\n              endContainer = endContainer.firstChild || endContainer;\n            }\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Option.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Option.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$2(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$2(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          rng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          rng.startOffset = dom.nodeIndex(startContainer);\n          rng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          rng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        RangeWalk.walk(dom, rng, function (nodes) {\n          each$d(nodes, function (node) {\n            process(node);\n            if (NodeType.isElement(node) && ed.dom.getStyle(node, 'text-decoration') === 'underline' && node.parentNode && FormatUtils.getTextDecoration(dom, node.parentNode) === 'underline') {\n              removeFormat(ed, {\n                deep: false,\n                exact: true,\n                inline: 'span',\n                styles: { textDecoration: 'underline' }\n              }, null, node);\n            }\n          });\n        });\n      };\n      if (node) {\n        if (node.nodeType) {\n          rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        return;\n      }\n      if (!selection.isCollapsed() || !format.inline || dom.select('td[data-mce-selected],th[data-mce-selected]').length) {\n        bookmark = GetBookmark.getPersistentBookmark(ed.selection, true);\n        removeRngStyle(selection.getRng());\n        selection.moveToBookmark(bookmark);\n        if (format.inline && MatchFormat.match(ed, name, vars, selection.getStart())) {\n          FormatUtils.moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n    };\n    var RemoveFormat = {\n      removeFormat: removeFormat,\n      remove: remove$6\n    };\n\n    var each$e = Tools.each;\n    var isElementNode = function (node) {\n      return node && node.nodeType === 1 && !Bookmarks.isBookmarkNode(node) && !isCaretNode(node) && !NodeType.isBogus(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      var sibling;\n      for (sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (sibling.nodeType === 3 && sibling.nodeValue.length !== 0) {\n          return node;\n        }\n        if (sibling.nodeType === 1 && !Bookmarks.isBookmarkNode(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var sibling, tmpSibling;\n      var elementUtils = new ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (sibling = prev.nextSibling; sibling && sibling !== next;) {\n            tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var processChildElements = function (node, filter, process) {\n      each$e(node.childNodes, function (node) {\n        if (isElementNode(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var hasStyle = function (dom, name) {\n      return curry(function (name, node) {\n        return !!(node && FormatUtils.getStyle(dom, node, name));\n      }, name);\n    };\n    var applyStyle = function (dom, name, value) {\n      return curry(function (name, value, node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      }, name, value);\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var processUnderlineAndColor = function (dom, node) {\n      var textDecoration;\n      if (node.nodeType === 1 && node.parentNode && node.parentNode.nodeType === 1) {\n        textDecoration = FormatUtils.getTextDecoration(dom, node.parentNode);\n        if (dom.getStyle(node, 'color') && textDecoration) {\n          dom.setStyle(node, 'text-decoration', textDecoration);\n        } else if (dom.getStyle(node, 'text-decoration') === textDecoration) {\n          dom.setStyle(node, 'text-decoration', null);\n        }\n      }\n    };\n    var mergeUnderlineAndColor = function (dom, format, vars, node) {\n      if (format.styles.color || format.styles.textDecoration) {\n        Tools.walk(node, curry(processUnderlineAndColor, dom), 'childNodes');\n        processUnderlineAndColor(dom, node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', FormatUtils.replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (format.inline === 'sub' || format.inline === 'sup') {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        node = mergeSiblingsNodes(dom, FormatUtils.getNonWhiteSpaceSibling(node), node);\n        node = mergeSiblingsNodes(dom, node, FormatUtils.getNonWhiteSpaceSibling(node, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$e(dom.select(selector, node), function (node) {\n          if (isElementNode(node)) {\n            each$e(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$e(formatList, function (format) {\n        each$e(editor.dom.select(format.inline, node), function (child) {\n          if (!isElementNode(child)) {\n            return;\n          }\n          RemoveFormat.removeFormat(editor, format, vars, child, format.exact ? child : null);\n        });\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (MatchFormat.matchNode(editor, node.parentNode, name, vars)) {\n        if (RemoveFormat.removeFormat(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (MatchFormat.matchNode(editor, parent, name, vars)) {\n            RemoveFormat.removeFormat(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n    var MergeFormats = {\n      mergeWithChildren: mergeWithChildren,\n      mergeUnderlineAndColor: mergeUnderlineAndColor,\n      mergeBackgroundColorAndFontSize: mergeBackgroundColorAndFontSize,\n      mergeSubSup: mergeSubSup,\n      mergeSiblings: mergeSiblings,\n      mergeWithParents: mergeWithParents\n    };\n\n    var each$f = Tools.each;\n    var isElementNode$1 = function (node) {\n      return node && node.nodeType === 1 && !Bookmarks.isBookmarkNode(node) && !isCaretNode(node) && !NodeType.isBogus(node);\n    };\n    var applyFormat = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var bookmark, rng;\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom, selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        fmt = fmt || format;\n        if (elm) {\n          if (fmt.onformat) {\n            fmt.onformat(elm, fmt, vars, node);\n          }\n          each$f(fmt.styles, function (value, name) {\n            dom.setStyle(elm, name, FormatUtils.replaceVars(value, vars));\n          });\n          if (fmt.styles) {\n            var styleVal = dom.getAttrib(elm, 'style');\n            if (styleVal) {\n              elm.setAttribute('data-mce-style', styleVal);\n            }\n          }\n          each$f(fmt.attributes, function (value, name) {\n            dom.setAttrib(elm, name, FormatUtils.replaceVars(value, vars));\n          });\n          each$f(fmt.classes, function (value) {\n            value = FormatUtils.replaceVars(value, vars);\n            if (!dom.hasClass(elm, value)) {\n              dom.addClass(elm, value);\n            }\n          });\n        }\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        if (!format.selector) {\n          return false;\n        }\n        each$f(formatList, function (format) {\n          if ('collapsed' in format && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var applyRngStyle = function (dom, rng, bookmark, nodeSpecific) {\n        var newWrappers = [];\n        var wrapName, wrapElm, contentEditable = true;\n        wrapName = format.inline || format.block;\n        wrapElm = dom.create(wrapName);\n        setElementFormat(wrapElm);\n        RangeWalk.walk(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var nodeName, parentName, hasContentEditableState, lastContentEditable;\n            lastContentEditable = contentEditable;\n            nodeName = node.nodeName.toLowerCase();\n            parentName = node.parentNode.nodeName.toLowerCase();\n            if (node.nodeType === 1 && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (FormatUtils.isEq(nodeName, 'br')) {\n              currentWrapElm = 0;\n              if (format.block) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (format.wrapper && MatchFormat.matchNode(ed, node, name, vars)) {\n              currentWrapElm = 0;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && format.block && !format.wrapper && FormatUtils.isTextBlock(ed, nodeName) && FormatUtils.isValid(ed, parentName, wrapName)) {\n              node = dom.rename(node, wrapName);\n              setElementFormat(node);\n              newWrappers.push(node);\n              currentWrapElm = 0;\n              return;\n            }\n            if (format.selector) {\n              var found = applyNodeStyle(formatList, node);\n              if (!format.inline || found) {\n                currentWrapElm = 0;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && FormatUtils.isValid(ed, wrapName, nodeName) && FormatUtils.isValid(ed, parentName, wrapName) && !(!nodeSpecific && node.nodeType === 3 && node.nodeValue.length === 1 && node.nodeValue.charCodeAt(0) === 65279) && !isCaretNode(node) && (!format.inline || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = 0;\n              each$f(Tools.grep(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = 0;\n            }\n          };\n          each$f(nodes, process);\n        });\n        if (format.links === true) {\n          each$f(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$f(Tools.grep(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$f(newWrappers, function (node) {\n          var childCount;\n          var getChildCount = function (node) {\n            var count = 0;\n            each$f(node.childNodes, function (node) {\n              if (!FormatUtils.isWhiteSpaceNode(node) && !Bookmarks.isBookmarkNode(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var getChildElementNode = function (root) {\n            var child = false;\n            each$f(root.childNodes, function (node) {\n              if (isElementNode$1(node)) {\n                child = node;\n                return false;\n              }\n            });\n            return child;\n          };\n          var mergeStyles = function (node) {\n            var child, clone;\n            child = getChildElementNode(node);\n            if (child && !Bookmarks.isBookmarkNode(child) && MatchFormat.matchName(dom, child, format)) {\n              clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, 1);\n            }\n            return clone || node;\n          };\n          childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, 1);\n            return;\n          }\n          if (format.inline || format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            MergeFormats.mergeWithChildren(ed, formatList, vars, node);\n            MergeFormats.mergeWithParents(ed, format, name, vars, node);\n            MergeFormats.mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            MergeFormats.mergeSubSup(dom, format, vars, node);\n            MergeFormats.mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          if (formatList[i].ceFalseOverride && dom.is(node, formatList[i].selector)) {\n            setElementFormat(node, formatList[i]);\n            return;\n          }\n        }\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (node.nodeType) {\n            if (!applyNodeStyle(formatList, node)) {\n              rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, ExpandRange.expandRng(ed, rng, formatList), null, true);\n            }\n          } else {\n            applyRngStyle(dom, node, null, true);\n          }\n        } else {\n          if (!isCollapsed || !format.inline || dom.select('td[data-mce-selected],th[data-mce-selected]').length) {\n            var curSelNode = ed.selection.getNode();\n            if (!ed.settings.forced_root_block && formatList[0].defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat(ed, formatList[0].defaultBlock);\n            }\n            ed.selection.setRng(RangeNormalizer.normalize(ed.selection.getRng()));\n            bookmark = GetBookmark.getPersistentBookmark(ed.selection, true);\n            applyRngStyle(dom, ExpandRange.expandRng(ed, selection.getRng(), formatList));\n            if (format.styles) {\n              MergeFormats.mergeUnderlineAndColor(dom, format, vars, curSelNode);\n            }\n            selection.moveToBookmark(bookmark);\n            FormatUtils.moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        Hooks.postProcess(name, ed);\n      }\n    };\n    var ApplyFormat = { applyFormat: applyFormat };\n\n    var each$g = Tools.each;\n    var setup$5 = function (formatChangeData, editor) {\n      var currentFormats = {};\n      formatChangeData.set({});\n      editor.on('NodeChange', function (e) {\n        var parents = FormatUtils.getParents(editor.dom, e.element);\n        var matchedFormats = {};\n        parents = Tools.grep(parents, function (node) {\n          return node.nodeType === 1 && !node.getAttribute('data-mce-bogus');\n        });\n        each$g(formatChangeData.get(), function (callbacks, format) {\n          each$g(parents, function (node) {\n            if (editor.formatter.matchNode(node, format, {}, callbacks.similar)) {\n              if (!currentFormats[format]) {\n                each$g(callbacks, function (callback) {\n                  callback(true, {\n                    node: node,\n                    format: format,\n                    parents: parents\n                  });\n                });\n                currentFormats[format] = callbacks;\n              }\n              matchedFormats[format] = callbacks;\n              return false;\n            }\n            if (MatchFormat.matchesUnInheritedFormatSelector(editor, node, format)) {\n              return false;\n            }\n          });\n        });\n        each$g(currentFormats, function (callbacks, format) {\n          if (!matchedFormats[format]) {\n            delete currentFormats[format];\n            each$g(callbacks, function (callback) {\n              callback(false, {\n                node: e.element,\n                format: format,\n                parents: parents\n              });\n            });\n          }\n        });\n      });\n    };\n    var addListeners = function (formatChangeData, formats, callback, similar) {\n      var formatChangeItems = formatChangeData.get();\n      each$g(formats.split(','), function (format) {\n        if (!formatChangeItems[format]) {\n          formatChangeItems[format] = [];\n          formatChangeItems[format].similar = similar;\n        }\n        formatChangeItems[format].push(callback);\n      });\n      formatChangeData.set(formatChangeItems);\n    };\n    var formatChanged = function (editor, formatChangeState, formats, callback, similar) {\n      if (formatChangeState.get() === null) {\n        setup$5(formatChangeState, editor);\n      }\n      addListeners(formatChangeState, formats, callback, similar);\n    };\n    var FormatChanged = { formatChanged: formatChanged };\n\n    var get$5 = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all'\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all'\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all'\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all'\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: 1,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function () {\n            return true;\n          },\n          onformat: function (elm, fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n    var DefaultFormats = { get: get$5 };\n\n    function FormatRegistry (editor) {\n      var formats = {};\n      var get = function (name) {\n        return name ? formats[name] : formats;\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (typeof name !== 'string') {\n            Tools.each(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            format = format.length ? format : [format];\n            Tools.each(format, function (format) {\n              if (typeof format.deep === 'undefined') {\n                format.deep = !format.selector;\n              }\n              if (typeof format.split === 'undefined') {\n                format.split = !format.selector || format.inline;\n              }\n              if (typeof format.remove === 'undefined' && format.selector && !format.inline) {\n                format.remove = 'none';\n              }\n              if (format.selector && format.inline) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (typeof format.classes === 'string') {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(DefaultFormats.get(editor.dom));\n      register(editor.settings.formats);\n      return {\n        get: get,\n        register: register,\n        unregister: unregister\n      };\n    }\n\n    var each$h = Tools.each;\n    var dom = DOMUtils$1.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        var elm;\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate, parentRequired;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var selectorToHtml = function (selector, editor) {\n      return parsedSelectorToHtml(parseSelector(selector), editor);\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag, previewElm, items;\n      var previewCss = '', parentFontSize, previewStyles;\n      previewStyles = editor.settings.preview_styles;\n      if (previewStyles === false) {\n        return '';\n      }\n      if (typeof previewStyles !== 'string') {\n        previewStyles = 'font-family font-size font-weight font-style text-decoration ' + 'text-transform color background-color border border-radius outline text-shadow';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        previewStyles = format.preview;\n        if (previewStyles === false) {\n          return '';\n        }\n      }\n      name = format.block || format.inline || 'span';\n      items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$h(format.styles, function (value, name) {\n        value = removeVars(value);\n        if (value) {\n          dom.setStyle(previewElm, name, value);\n        }\n      });\n      each$h(format.attributes, function (value, name) {\n        value = removeVars(value);\n        if (value) {\n          dom.setAttrib(previewElm, name, value);\n        }\n      });\n      each$h(format.classes, function (value) {\n        value = removeVars(value);\n        if (!dom.hasClass(previewElm, value)) {\n          dom.addClass(previewElm, value);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$h(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n    var Preview = {\n      getCssText: getCssText,\n      parseSelector: parseSelector,\n      selectorToHtml: selectorToHtml\n    };\n\n    var toggle = function (editor, formats, name, vars, node) {\n      var fmt = formats.get(name);\n      if (MatchFormat.match(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        RemoveFormat.remove(editor, name, vars, node);\n      } else {\n        ApplyFormat.applyFormat(editor, name, vars, node);\n      }\n    };\n    var ToggleFormat = { toggle: toggle };\n\n    var setup$6 = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n    var FormatShortcuts = { setup: setup$6 };\n\n    function Formatter (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      FormatShortcuts.setup(editor);\n      setup$2(editor);\n      return {\n        get: formats.get,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: curry(ApplyFormat.applyFormat, editor),\n        remove: curry(RemoveFormat.remove, editor),\n        toggle: curry(ToggleFormat.toggle, editor, formats),\n        match: curry(MatchFormat.match, editor),\n        matchAll: curry(MatchFormat.matchAll, editor),\n        matchNode: curry(MatchFormat.matchNode, editor),\n        canApply: curry(MatchFormat.canApply, editor),\n        formatChanged: curry(FormatChanged.formatChanged, editor, formatChangeState),\n        getCssText: curry(Preview.getCssText, editor)\n      };\n    }\n\n    var hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$2.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow$1);\n\n    var register = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('tabindex', node.attributes.map['data-mce-tabindex']);\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        while (i--) {\n          node = nodes[i];\n          value = node.attributes.map[internalName];\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attributes.map[name];\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, value;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.attributes.map['data-mce-type'] === 'bookmark' && !args.cleanup) {\n            var hasChildren = Option.from(node.firstChild).exists(function (firstChild) {\n              return !Zwsp.isZwsp(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var i = nodes.length, node, value, type;\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        while (i--) {\n          node = nodes[i];\n          value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, '');\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !('type' in node.attributes.map)) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var brNode1, brNode2;\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n    var DomSerializerFilters = {\n      register: register,\n      trimTrailingBr: trimTrailingBr\n    };\n\n    var preProcess = function (editor, node, args) {\n      var impl, doc, oldDoc;\n      var dom = editor.dom;\n      node = node.cloneNode(true);\n      impl = domGlobals.document.implementation;\n      if (impl.createHTMLDocument) {\n        doc = impl.createHTMLDocument('');\n        Tools.each(node.nodeName === 'BODY' ? node.childNodes : [node], function (node) {\n          doc.body.appendChild(doc.importNode(node, true));\n        });\n        if (node.nodeName !== 'BODY') {\n          node = doc.body.firstChild;\n        } else {\n          node = doc.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc;\n      }\n      Events.firePreProcess(editor, merge(args, { node: node }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return node;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n    var DomSerializerPreProcess = { process: process };\n\n    var removeAttrs = function (node, names) {\n      each(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$1 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n    var LegacyFilter = { register: register$1 };\n\n    var whiteSpaceRegExp$3 = /^[ \\t\\r\\n]*$/;\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$2 = function (node, root, prev) {\n      var sibling;\n      var parent;\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (parent = node.parent; parent && parent !== root; parent = parent.parent) {\n          sibling = parent[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var Node$1 = function () {\n      function Node(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      Node.create = function (name, attrs) {\n        var node, attrName;\n        node = new Node(name, typeLookup[name] || 1);\n        if (attrs) {\n          for (attrName in attrs) {\n            node.attr(attrName, attrs[attrName]);\n          }\n        }\n        return node;\n      };\n      Node.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      Node.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs, i;\n        if (typeof name !== 'string') {\n          for (i in name) {\n            self.attr(i, name[i]);\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs = attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      Node.prototype.clone = function () {\n        var self = this;\n        var clone = new Node(self.name, self.type);\n        var i, l, selfAttrs, selfAttr, cloneAttrs;\n        if (selfAttrs = self.attributes) {\n          cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (i = 0, l = selfAttrs.length; i < l; i++) {\n            selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      Node.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      Node.prototype.unwrap = function () {\n        var self = this;\n        var node, next;\n        for (node = self.firstChild; node;) {\n          next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      Node.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      Node.prototype.append = function (node) {\n        var self = this;\n        var last;\n        if (node.parent) {\n          node.remove();\n        }\n        last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      Node.prototype.insert = function (node, refNode, before) {\n        var parent;\n        if (node.parent) {\n          node.remove();\n        }\n        parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      Node.prototype.getAll = function (name) {\n        var self = this;\n        var node;\n        var collection = [];\n        for (node = self.firstChild; node; node = walk$2(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      Node.prototype.empty = function () {\n        var self = this;\n        var nodes, i, node;\n        if (self.firstChild) {\n          nodes = [];\n          for (node = self.firstChild; node; node = walk$2(node, self)) {\n            nodes.push(node);\n          }\n          i = nodes.length;\n          while (i--) {\n            node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      Node.prototype.isEmpty = function (elements, whitespace, predicate) {\n        var self = this;\n        var node = self.firstChild, i, name;\n        whitespace = whitespace || {};\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attributes.map['data-mce-bogus']) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              i = node.attributes.length;\n              while (i--) {\n                name = node.attributes[i].name;\n                if (name === 'name' || name.indexOf('data-mce-bookmark') === 0) {\n                  return false;\n                }\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !whiteSpaceRegExp$3.test(node.value)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && whiteSpaceRegExp$3.test(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$2(node, self));\n        }\n        return true;\n      };\n      Node.prototype.walk = function (prev) {\n        return walk$2(this, null, prev);\n      };\n      return Node;\n    }();\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new Node$1('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new Node$1('#text', 3)).value = '\\xA0';\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === '\\xA0';\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty$2 = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (blockElements[node.name] || node.name === 'br');\n    };\n\n    var register$2 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getNonEmptyElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName !== 'br') {\n                    break;\n                  }\n                  if (prevName === 'br') {\n                    node = null;\n                    break;\n                  }\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new Node$1('#text', 3);\n                textNode.value = '\\xA0';\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length, node;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new Node$1('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var i = nodes.length, node, classList, ci, className, classValue;\n          var validClasses = schema.getValidClasses();\n          var validClassesMap, valid;\n          while (i--) {\n            node = nodes[i];\n            classList = node.attr('class').split(' ');\n            classValue = '';\n            for (ci = 0; ci < classList.length; ci++) {\n              className = classList[ci];\n              valid = false;\n              validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n    };\n\n    var makeMap$4 = Tools.makeMap, each$i = Tools.each, explode$3 = Tools.explode, extend$3 = Tools.extend;\n    function DomParser (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var ni, node, parent, parents, newParent, currentNode, tempNode, childNode, i;\n        var nonEmptyElements, whitespaceElements, nonSplitableElements, textBlockElements, specialElements, sibling, nextNode;\n        nonSplitableElements = makeMap$4('tr,td,th,tbody,thead,tfoot,table');\n        nonEmptyElements = schema.getNonEmptyElements();\n        whitespaceElements = schema.getWhiteSpaceElements();\n        textBlockElements = schema.getTextBlockElements();\n        specialElements = schema.getSpecialElements();\n        for (ni = 0; ni < nodes.length; ni++) {\n          node = nodes[ni];\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap(node);\n            continue;\n          }\n          parents = [node];\n          for (parent = node.parent; parent && !schema.isValidChild(parent.name, node.name) && !nonSplitableElements[parent.name]; parent = parent.parent) {\n            parents.push(parent);\n          }\n          if (parent && parents.length > 1) {\n            parents.reverse();\n            newParent = currentNode = filterNode(parents[0].clone());\n            for (i = 0; i < parents.length - 1; i++) {\n              if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                tempNode = filterNode(parents[i].clone());\n                currentNode.append(tempNode);\n              } else {\n                tempNode = currentNode;\n              }\n              for (childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                nextNode = childNode.next;\n                tempNode.append(childNode);\n                childNode = nextNode;\n              }\n              currentNode = tempNode;\n            }\n            if (!isEmpty$2(schema, nonEmptyElements, whitespaceElements, newParent)) {\n              parent.insert(newParent, parents[0], true);\n              parent.insert(node, newParent);\n            } else {\n              parent.insert(node, parents[0], true);\n            }\n            parent = parents[0];\n            if (isEmpty$2(schema, nonEmptyElements, whitespaceElements, parent) || hasOnlyChild(parent, 'br')) {\n              parent.empty().remove();\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new Node$1('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new Node$1('div', 1)));\n            } else {\n              if (specialElements[node.name]) {\n                node.empty().remove();\n              } else {\n                node.unwrap();\n              }\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var i, name, list;\n        name = node.name;\n        if (name in nodeFilters) {\n          list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        i = attributeFilters.length;\n        while (i--) {\n          name = attributeFilters[i].name;\n          if (name in node.attributes.map) {\n            list = matchedAttributes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[name] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$i(explode$3(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name in nodeFilters) {\n          if (nodeFilters.hasOwnProperty(name)) {\n            out.push({\n              name: name,\n              callbacks: nodeFilters[name]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$i(explode$3(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var parser, nodes, i, l, fi, fl, list, name;\n        var blockElements;\n        var invalidChildren = [];\n        var isInWhiteSpacePreservedElement;\n        var node;\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        blockElements = extend$3(makeMap$4('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var rootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        isInWhiteSpacePreservedElement = whiteSpaceElements.hasOwnProperty(args.context) || whiteSpaceElements.hasOwnProperty(settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, next, rootBlockNode;\n          var trim = function (rootBlockNode) {\n            if (rootBlockNode) {\n              node = rootBlockNode.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlockNode.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new Node$1(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var textNode, textNodeNext, textVal, sibling;\n          var blockElements = schema.getBlockElements();\n          for (textNode = node.prev; textNode && textNode.type === 3;) {\n            textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var name;\n          var output = {};\n          for (name in input) {\n            if (name !== 'li' && name !== 'p') {\n              output[name] = input[name];\n            }\n          }\n          return output;\n        };\n        parser = SaxParser$1({\n          validate: validate,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode;\n            newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var newNode, attrFiltersLen, elementRule, attrName, parent;\n            elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              parent = children[node.name];\n              if (parent && children[newNode.name] && !parent[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, elementRule, text, sibling, tempNode;\n            elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              if (elementRule.removeEmpty && isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node)) {\n                if (!node.attributes.map.name && !node.attr('id')) {\n                  tempNode = node.parent;\n                  if (blockElements[node.name]) {\n                    node.empty().remove();\n                  } else {\n                    node.unwrap();\n                  }\n                  node = tempNode;\n                  return;\n                }\n              }\n              if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node))) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = node.parent;\n            }\n          }\n        }, schema);\n        var rootNode = node = new Node$1(args.context || settings.root_name, 11);\n        parser.parse(html);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$2(exports, settings);\n      LegacyFilter.register(exports, settings);\n      return exports;\n    }\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess$1 = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = Events.firePostProcess(editor, merge(args, { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = Zwsp.trim(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(Element.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? merge({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      DomSerializerFilters.trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess$1(editor, args, content);\n    };\n    function DomSerializer (settings, editor) {\n      var dom, schema, htmlParser;\n      var tempAttrs = ['data-mce-selected'];\n      dom = editor && editor.dom ? editor.dom : DOMUtils$1.DOM;\n      schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      htmlParser = DomParser(settings, schema);\n      DomSerializerFilters.register(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        var args = merge({ format: 'html' }, parserArgs ? parserArgs : {});\n        var targetNode = DomSerializerPreProcess.process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: function (rules) {\n          schema.addValidElements(rules);\n        },\n        setRules: function (rules) {\n          schema.setValidElements(rules);\n        },\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: function () {\n          return tempAttrs;\n        }\n      };\n    }\n\n    function DomSerializer$1 (settings, editor) {\n      var domSerializer = DomSerializer(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs\n      };\n    }\n\n    function BookmarkManager(selection) {\n      return {\n        getBookmark: curry(Bookmarks.getBookmark, selection),\n        moveToBookmark: curry(Bookmarks.moveToBookmark, selection)\n      };\n    }\n    (function (BookmarkManager) {\n      BookmarkManager.isBookmarkNode = Bookmarks.isBookmarkNode;\n    }(BookmarkManager || (BookmarkManager = {})));\n    var BookmarkManager$1 = BookmarkManager;\n\n    var isContentEditableFalse$a = NodeType.isContentEditableFalse;\n    var isContentEditableTrue$5 = NodeType.isContentEditableTrue;\n    var getContentEditableRoot$2 = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue$5(node) || isContentEditableFalse$a(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var ControlSelection = function (selection, editor) {\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, resizeHandles, selectedHandle;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = domGlobals.document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var rootClass = '.mce-content-body';\n      editor.contentStyles.push(rootClass + ' div.mce-resizehandle {' + 'position: absolute;' + 'border: 1px solid black;' + 'box-sizing: content-box;' + 'background: #FFF;' + 'width: 7px;' + 'height: 7px;' + 'z-index: 10000' + '}' + rootClass + ' .mce-resizehandle:hover {' + 'background: #000' + '}' + rootClass + ' img[data-mce-selected],' + rootClass + ' hr[data-mce-selected] {' + 'outline: 1px solid black;' + 'resize: none' + '}' + rootClass + ' .mce-clonedresizable {' + 'position: absolute;' + (Env.gecko ? '' : 'outline: 1px dashed black;') + 'opacity: .5;' + 'filter: alpha(opacity=50);' + 'z-index: 10000' + '}' + rootClass + ' .mce-resize-helper {' + 'background: #555;' + 'background: rgba(0,0,0,0.75);' + 'border-radius: 3px;' + 'border: 1px;' + 'color: white;' + 'display: none;' + 'font-family: sans-serif;' + 'font-size: 12px;' + 'white-space: nowrap;' + 'line-height: 14px;' + 'margin: 5px 10px;' + 'padding: 5px;' + 'position: absolute;' + 'z-index: 10001' + '}');\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        return isImage(evt.target) && !RangePoint.isXYWithinRange(evt.clientX, evt.clientY, range);\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTarget = function (elm) {\n        return editor.dom.is(elm, 'figure.image') ? elm.querySelector('img') : elm;\n      };\n      var isResizable = function (elm) {\n        var selector = editor.settings.object_resizing;\n        if (selector === false || Env.iOS) {\n          return false;\n        }\n        if (typeof selector !== 'string') {\n          selector = 'table,img,figure.image,div';\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        return is$1(Element.fromDom(elm), selector);\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if (isImage(selectedElm) && editor.settings.resize_img_proportional !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e) || isImage(selectedElm) && selectedHandle[2] * selectedHandle[3] !== 0;\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        dom.setStyles(getResizeTarget(selectedElmGhost), {\n          width: width,\n          height: height\n        });\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          Events.fireObjectResizeStart(editor, selectedElm, startW, startH);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        resizeStarted = false;\n        var setSizeProp = function (name, value) {\n          if (value) {\n            if (selectedElm.style[name] || !editor.schema.isValid(selectedElm.nodeName.toLowerCase(), name)) {\n              dom.setStyle(getResizeTarget(selectedElm), name, value);\n            } else {\n              dom.setAttrib(getResizeTarget(selectedElm), name, value);\n            }\n          }\n        };\n        setSizeProp('width', width);\n        setSizeProp('height', height);\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        showResizeRect(selectedElm);\n        Events.fireObjectResized(editor, selectedElm, width, height);\n        dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        var position, targetWidth, targetHeight, e, rect;\n        hideResizeRect();\n        unbindResizeHandleEvents();\n        position = dom.getPos(targetElm, rootElement);\n        selectedElmX = position.x;\n        selectedElmY = position.y;\n        rect = targetElm.getBoundingClientRect();\n        targetWidth = rect.width || rect.right - rect.left;\n        targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        e = editor.fire('ObjectSelected', { target: targetElm });\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = getResizeTarget(selectedElm).clientWidth;\n              startH = getResizeTarget(selectedElm).clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              handle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              selectedElmGhost = selectedElm.cloneNode(true);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = false;\n              selectedElmGhost.unSelectabe = true;\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              selectedElmGhost.removeAttribute('data-mce-selected');\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        selectedElm.setAttribute('data-mce-selected', '1');\n      };\n      var hideResizeRect = function () {\n        var name, handleElm;\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute('data-mce-selected');\n        }\n        for (name in resizeHandles) {\n          handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        }\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute('data-mce-selected');\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$a(getContentEditableRoot$2(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        for (var name in resizeHandles) {\n          var handle = resizeHandles[name];\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        }\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, false);\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.ie && Env.ie >= 11) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          editor.dom.bind(rootElement, 'mscontrolselect', function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu', contextMenuSelectImage);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    var getPos$1 = function (elm) {\n      var x = 0, y = 0;\n      var offsetParent = elm;\n      while (offsetParent && offsetParent.nodeType) {\n        x += offsetParent.offsetLeft || 0;\n        y += offsetParent.offsetTop || 0;\n        offsetParent = offsetParent.offsetParent;\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var fireScrollIntoViewEvent = function (editor, elm, alignToTop) {\n      var scrollEvent = {\n        elm: elm,\n        alignToTop: alignToTop\n      };\n      editor.fire('scrollIntoView', scrollEvent);\n      return scrollEvent.isDefaultPrevented();\n    };\n    var scrollElementIntoView = function (editor, elm, alignToTop) {\n      var y, viewPort;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      var viewPortY, viewPortH, offsetY = 0;\n      if (fireScrollIntoViewEvent(editor, elm, alignToTop)) {\n        return;\n      }\n      if (!NodeType.isElement(elm)) {\n        return;\n      }\n      if (alignToTop === false) {\n        offsetY = elm.offsetHeight;\n      }\n      if (root.nodeName !== 'BODY') {\n        var scrollContainer = editor.selection.getScrollContainer();\n        if (scrollContainer) {\n          y = getPos$1(elm).y - getPos$1(scrollContainer).y + offsetY;\n          viewPortH = scrollContainer.clientHeight;\n          viewPortY = scrollContainer.scrollTop;\n          if (y < viewPortY || y + 25 > viewPortY + viewPortH) {\n            scrollContainer.scrollTop = y < viewPortY ? y : y - viewPortH + 25;\n          }\n          return;\n        }\n      }\n      viewPort = dom.getViewPort(editor.getWin());\n      y = dom.getPos(elm).y + offsetY;\n      viewPortY = viewPort.y;\n      viewPortH = viewPort.h;\n      if (y < viewPort.y || y + 25 > viewPortY + viewPortH) {\n        editor.getWin().scrollTo(0, y < viewPortY ? y : y - viewPortH + 25);\n      }\n    };\n    var getViewPortRect = function (editor) {\n      if (editor.inline) {\n        return editor.getBody().getBoundingClientRect();\n      } else {\n        var win = editor.getWin();\n        return {\n          left: 0,\n          right: win.innerWidth,\n          top: 0,\n          bottom: win.innerHeight,\n          width: win.innerWidth,\n          height: win.innerHeight\n        };\n      }\n    };\n    var scrollBy = function (editor, dx, dy) {\n      if (editor.inline) {\n        editor.getBody().scrollLeft += dx;\n        editor.getBody().scrollTop += dy;\n      } else {\n        editor.getWin().scrollBy(dx, dy);\n      }\n    };\n    var scrollRangeIntoView = function (editor, rng) {\n      head(CaretPosition.fromRangeStart(rng).getClientRects()).each(function (rngRect) {\n        var bodyRect = getViewPortRect(editor);\n        var overflow = getOverflow(bodyRect, rngRect);\n        var margin = 4;\n        var dx = overflow.x > 0 ? overflow.x + margin : overflow.x - margin;\n        var dy = overflow.y > 0 ? overflow.y + margin : overflow.y - margin;\n        scrollBy(editor, overflow.x !== 0 ? dx : 0, overflow.y !== 0 ? dy : 0);\n      });\n    };\n    var ScrollIntoView = {\n      scrollElementIntoView: scrollElementIntoView,\n      scrollRangeIntoView: scrollRangeIntoView\n    };\n\n    var hasCeProperty = function (node) {\n      return NodeType.isContentEditableTrue(node) || NodeType.isContentEditableFalse(node);\n    };\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var element, rng, rects;\n      element = doc.elementFromPoint(clientX, clientY);\n      rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return NodeType.isContentEditableFalse(findParent$1(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint$1 = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (doc.caretRangeFromPoint) {\n        rng = doc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n    var CaretRangeFromPoint = { fromPoint: fromPoint$1 };\n\n    var processRanges = function (editor, ranges) {\n      return map(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n    var EventProcessRanges = { processRanges: processRanges };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || domGlobals.document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom());\n      });\n      return Element.fromDom(fragment);\n    };\n\n    var tableModel = Immutable('element', 'width', 'rows');\n    var tableRow = Immutable('element', 'cells');\n    var cellPosition = Immutable('x', 'y');\n    var getSpan = function (td, key) {\n      var value = parseInt(get(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows();\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells();\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows();\n      var cells = rows[y] ? rows[y].cells() : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells().length > acc ? row.cells().length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows();\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells();\n        for (var x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Option.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Option.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows();\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells();\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element(), slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x(), sy = startPos.y();\n      var ex = endPos.x(), ey = endPos.y();\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element(), getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element());\n      var tableBody = Element.fromTag('tbody');\n      append$1(tableBody, rows);\n      append(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map(table.rows(), function (row) {\n        var cells = map(row.cells(), function (cell) {\n          var td = deep(cell);\n          remove(td, 'colspan');\n          remove(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element());\n        append$1(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom$1 = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each(descendants$1(tableElm, 'tr'), function (tr, y) {\n        each(descendants$1(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element(), getWidth(table.rows()), table.rows());\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n    var SimpleTableModel = {\n      fromDom: fromDom$1,\n      toDom: toDom,\n      subsection: subsection\n    };\n\n    var findParentListContainer = function (parents) {\n      return find(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          return [\n            Element.fromTag('li'),\n            Element.fromTag(name(listCont))\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap$3 = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = Element.fromDom(rng.commonAncestorContainer);\n      var parents = Parents.parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter(parents, function (elm) {\n        return isInline(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap$3(Element.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$1(cell, 'table', curry(eq, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = SimpleTableModel.fromDom(tableElm);\n        return SimpleTableModel.subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([SimpleTableModel.toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$4 = function (rootNode, ranges) {\n      var selectedCells = TableCellSelection.getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n    var FragmentReader = { read: read$4 };\n\n    var getTextContent = function (editor) {\n      return Option.from(editor.selection.getRng()).map(function (rng) {\n        var bin = editor.dom.add(editor.getBody(), 'div', {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = Zwsp.trim(bin.innerText);\n        editor.dom.remove(bin);\n        return text;\n      }).getOr('');\n    };\n    var getHtmlContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var fragment;\n      var ranges = EventProcessRanges.processRanges(editor, MultiRange.getRanges(sel));\n      fragment = args.contextual ? FragmentReader.read(Element.fromDom(editor.getBody()), ranges).dom() : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var getContent = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      args.get = true;\n      args.format = args.format || 'html';\n      args.selection = true;\n      args = editor.fire('BeforeGetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('GetContent', args);\n        return args.content;\n      }\n      if (args.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        args.getInner = true;\n        var content = getHtmlContent(editor, args);\n        if (args.format === 'tree') {\n          return content;\n        } else {\n          args.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', args);\n          return args.content;\n        }\n      }\n    };\n    var GetSelectionContent = { getContent: getContent };\n\n    var setContent = function (editor, content, args) {\n      var rng = editor.selection.getRng(), caretNode;\n      var doc = editor.getDoc();\n      var frag, temp;\n      args = args || { format: 'html' };\n      args.set = true;\n      args.selection = true;\n      args.content = content;\n      if (!args.no_events) {\n        args = editor.fire('BeforeSetContent', args);\n        if (args.isDefaultPrevented()) {\n          editor.fire('SetContent', args);\n          return;\n        }\n      }\n      content = args.content;\n      if (rng.insertNode) {\n        content += '<span id=\"__caret\">_</span>';\n        if (rng.startContainer === doc && rng.endContainer === doc) {\n          doc.body.innerHTML = content;\n        } else {\n          rng.deleteContents();\n          if (doc.body.childNodes.length === 0) {\n            doc.body.innerHTML = content;\n          } else {\n            if (rng.createContextualFragment) {\n              rng.insertNode(rng.createContextualFragment(content));\n            } else {\n              frag = doc.createDocumentFragment();\n              temp = doc.createElement('div');\n              frag.appendChild(temp);\n              temp.outerHTML = content;\n              rng.insertNode(frag);\n            }\n          }\n        }\n        caretNode = editor.dom.get('__caret');\n        rng = doc.createRange();\n        rng.setStartBefore(caretNode);\n        rng.setEndBefore(caretNode);\n        editor.selection.setRng(rng);\n        editor.dom.remove('__caret');\n        try {\n          editor.selection.setRng(rng);\n        } catch (ex) {\n        }\n      } else {\n        if (rng.item) {\n          doc.execCommand('Delete', false, null);\n          rng = editor.getRng();\n        }\n        if (/^\\s+/.test(content)) {\n          rng.pasteHTML('<span id=\"__mce_tmp\">_</span>' + content);\n          editor.dom.remove('__mce_tmp');\n        } else {\n          rng.pasteHTML(content);\n        }\n      }\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n    };\n    var SetSelectionContent = { setContent: setContent };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Option.from(container).map(Element.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement(elm) ? Option.some(elm) : parent(elm);\n      }).map(function (elm) {\n        return elm.dom();\n      }).getOr(root);\n    };\n    var getStart$2 = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && NodeType.isText(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode$1 = function (root, rng) {\n      var elm, startContainer, endContainer, startOffset, endOffset;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      startOffset = rng.startOffset;\n      endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node, root;\n      var selectedBlocks = [];\n      root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart$2(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new TreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select$1 = function (dom, node, content) {\n      return Option.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint$1(dom, rng, node, true);\n          moveEndPoint$1(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var each$j = Tools.each;\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$3(Element.fromDom(node.ownerDocument), Element.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var Selection$1 = function (dom, win, serializer, editor) {\n      var bookmarkManager, controlSelection;\n      var selectedRange, explicitRange, selectorChangedData;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (!node) {\n          moveEndPoint$1(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        } else {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        }\n      };\n      var getContent = function (args) {\n        return GetSelectionContent.getContent(editor, args);\n      };\n      var setContent = function (content, args) {\n        return SetSelectionContent.setContent(editor, content, args);\n      };\n      var getStart = function (real) {\n        return getStart$2(editor.getBody(), getRng(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select = function (node, content) {\n        select$1(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng = function () {\n        var selection, rng, elm, doc;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        if (!win) {\n          return null;\n        }\n        doc = win.document;\n        if (typeof doc === 'undefined' || doc === null) {\n          return null;\n        }\n        if (editor.bookmark !== undefined && EditorFocus.hasFocus(editor) === false) {\n          var bookmark = SelectionBookmark.getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return EventProcessRanges.processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !NodeType.isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n          }\n        } catch (ex) {\n        }\n        rng = EventProcessRanges.processRanges(editor, [rng])[0];\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var sel, node, evt;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        sel = getSel();\n        evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode = function () {\n        return getNode$1(editor.getBody(), getRng());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        var anchorRange, focusRange;\n        if (!sel || !sel.anchorNode || !sel.focusNode) {\n          return true;\n        }\n        anchorRange = dom.createRng();\n        anchorRange.setStart(sel.anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        focusRange = dom.createRng();\n        focusRange.setStart(sel.focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize = function () {\n        var rng = getRng();\n        var sel = getSel();\n        if (!MultiRange.hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = NormalizeRange.normalize(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        var currentSelectors;\n        if (!selectorChangedData) {\n          selectorChangedData = {};\n          currentSelectors = {};\n          editor.on('NodeChange', function (e) {\n            var node = e.element, parents = dom.getParents(node, null, dom.getRoot()), matchedSelectors = {};\n            each$j(selectorChangedData, function (callbacks, selector) {\n              each$j(parents, function (node) {\n                if (dom.is(node, selector)) {\n                  if (!currentSelectors[selector]) {\n                    each$j(callbacks, function (callback) {\n                      callback(true, {\n                        node: node,\n                        selector: selector,\n                        parents: parents\n                      });\n                    });\n                    currentSelectors[selector] = callbacks;\n                  }\n                  matchedSelectors[selector] = callbacks;\n                  return false;\n                }\n              });\n            });\n            each$j(currentSelectors, function (callbacks, selector) {\n              if (!matchedSelectors[selector]) {\n                delete currentSelectors[selector];\n                each$j(callbacks, function (callback) {\n                  callback(false, {\n                    node: node,\n                    selector: selector,\n                    parents: parents\n                  });\n                });\n              }\n            });\n          });\n        }\n        if (!selectorChangedData[selector]) {\n          selectorChangedData[selector] = [];\n        }\n        selectorChangedData[selector].push(callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        return ScrollIntoView.scrollElementIntoView(editor, elm, alignToTop);\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(CaretRangeFromPoint.fromPoint(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng();\n        return rng.collapsed ? CaretPosition$1.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng,\n        getStart: getStart,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize,\n        selectorChanged: selectorChanged,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      bookmarkManager = BookmarkManager$1(exports);\n      controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? positions.reverse() : positions;\n    };\n    var walk$3 = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (NodeType.isBr(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start, nextPos;\n      var positions = [];\n      while (currentPos) {\n        nextPos = walk$3(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (NodeType.isBr(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Option.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Option.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Option.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Option.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Option.some(newPos);\n        }, function (lastPos) {\n          return lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Option.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var getFirstLinePositions = function (scope) {\n      return CaretFinder.firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return CaretFinder.lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var isContentEditableFalse$b = NodeType.isContentEditableFalse;\n    var getSelectedNode$1 = getSelectedNode;\n    var moveToCeFalseHorizontally = function (direction, editor, getNextPosFn, range) {\n      var forwards = direction === HDirection.Forwards;\n      var isBeforeContentEditableFalseFn = forwards ? isBeforeContentEditableFalse : isAfterContentEditableFalse;\n      if (!range.collapsed) {\n        var node = getSelectedNode$1(range);\n        if (isContentEditableFalse$b(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, true);\n        }\n      }\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeContentEditableFalseFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = InlineUtils.normalizePosition(forwards, getNextPosFn(caretPosition));\n      if (!nextCaretPosition) {\n        if (rangeIsInContainerBlock) {\n          return range;\n        }\n        return null;\n      }\n      if (isBeforeContentEditableFalseFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, true);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeContentEditableFalseFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, true);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaret(editor, nextCaretPosition.toRange(), true);\n      }\n      return null;\n    };\n    var moveToCeFalseVertically = function (direction, editor, walkerFn, range) {\n      var caretPosition, linePositions, nextLinePositions;\n      var closestNextLineRect, caretClientRect, clientX;\n      var dist1, dist2, contentEditableFalseNode;\n      contentEditableFalseNode = getSelectedNode$1(range);\n      caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      nextLinePositions = filter(linePositions, isLine(1));\n      caretClientRect = ArrUtils.last(caretPosition.getClientRects());\n      if (isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition)) {\n        contentEditableFalseNode = caretPosition.getNode();\n      }\n      if (isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition)) {\n        contentEditableFalseNode = caretPosition.getNode(true);\n      }\n      if (!caretClientRect) {\n        return null;\n      }\n      clientX = caretClientRect.left;\n      closestNextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (closestNextLineRect) {\n        if (isContentEditableFalse$b(closestNextLineRect.node)) {\n          dist1 = Math.abs(clientX - closestNextLineRect.left);\n          dist2 = Math.abs(clientX - closestNextLineRect.right);\n          return showCaret(direction, editor, closestNextLineRect.node, dist1 < dist2, true);\n        }\n      }\n      if (contentEditableFalseNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), contentEditableFalseNode);\n        closestNextLineRect = findClosestClientRect(filter(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaret(editor, closestNextLineRect.position.toRange(), true);\n        }\n        closestNextLineRect = ArrUtils.last(filter(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaret(editor, closestNextLineRect.position.toRange(), true);\n        }\n      }\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(Settings.getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var pre, caretPos, newBlock;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      if (range.collapsed && editor.settings.forced_root_block) {\n        pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        if (direction === 1) {\n          caretPos = getNextVisualCaretPosition(CaretPosition$1.fromRangeStart(range));\n        } else {\n          caretPos = getPrevVisualCaretPosition(CaretPosition$1.fromRangeStart(range));\n        }\n        if (!caretPos) {\n          newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      var newRange;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var getNextPosFn = forward ? getNextVisualCaretPosition : getPrevVisualCaretPosition;\n      var range = editor.selection.getRng();\n      newRange = moveToCeFalseHorizontally(direction, editor, getNextPosFn, range);\n      if (newRange) {\n        return newRange;\n      }\n      newRange = exitPreBlock(editor, direction, range);\n      if (newRange) {\n        return newRange;\n      }\n      return null;\n    };\n    var getVerticalRange = function (editor, down) {\n      var newRange;\n      var direction = down ? 1 : -1;\n      var walkerFn = down ? downUntil : upUntil;\n      var range = editor.selection.getRng();\n      newRange = moveToCeFalseVertically(direction, editor, walkerFn, range);\n      if (newRange) {\n        return newRange;\n      }\n      newRange = exitPreBlock(editor, direction, range);\n      if (newRange) {\n        return newRange;\n      }\n      return null;\n    };\n    var moveH = function (editor, forward) {\n      return function () {\n        var newRng = getHorizontalRange(editor, forward);\n        if (newRng) {\n          editor.selection.setRng(newRng);\n          return true;\n        } else {\n          return false;\n        }\n      };\n    };\n    var moveV = function (editor, down) {\n      return function () {\n        var newRng = getVerticalRange(editor, down);\n        if (newRng) {\n          editor.selection.setRng(newRng);\n          return true;\n        } else {\n          return false;\n        }\n      };\n    };\n    var isCefPosition = function (forward) {\n      return function (pos) {\n        return forward ? isAfterContentEditableFalse(pos) : isBeforeContentEditableFalse(pos);\n      };\n    };\n    var moveToLineEndPoint = function (editor, forward) {\n      return function () {\n        var from = forward ? CaretPosition$1.fromRangeEnd(editor.selection.getRng()) : CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        var result = forward ? getPositionsUntilNextLine(editor.getBody(), from) : getPositionsUntilPreviousLine(editor.getBody(), from);\n        var to = forward ? last(result.positions) : head(result.positions);\n        return to.filter(isCefPosition(forward)).fold(constant(false), function (pos) {\n          editor.selection.setRng(pos.toRange());\n          return true;\n        });\n      };\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone$1(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Option.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Option.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Option.none());\n    };\n    var getClosestCell$1 = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants$1(Element.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom();\n      });\n      var corners = filter(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove$1 = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow$1 = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell$1, getBottomValue, isAbove$1);\n    var getClosestCellBelow = curry(getClosestCell$1, getTopValue, isBelow$1);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      ScrollIntoView.scrollRangeIntoView(editor, rng);\n    };\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.map(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      }).getOr(false);\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !NodeType.isBr(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition$1.fromRangeStart(rng);\n      return CaretFinder.positionIn(!forward, table).map(function (pos) {\n        return pos.isEqual(caretPos);\n      }).getOr(false);\n    };\n    var navigateHorizontally = function (editor, forward, table, td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        var newRng = showCaret(direction, editor, table, !forward, true);\n        moveToRange(editor, newRng);\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition$1.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition$1.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return NodeType.isElement(node) && node.nodeName === 'TABLE' ? Option.some(node) : Option.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = Settings.getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = Element.fromTag(forcedRootBlock);\n          setAll(element, Settings.getForcedRootBlockAttrs(editor));\n          append(element, Element.fromTag('br'));\n          if (down) {\n            after(Element.fromDom(table), element);\n          } else {\n            before(Element.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom(), 0);\n          rng.setEnd(element.dom(), 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return CaretFinder.positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition$1.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var moveH$1 = function (editor, forward) {\n      return function () {\n        return Option.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n          return Option.from(editor.dom.getParent(td, 'table')).map(function (table) {\n            return navigateHorizontally(editor, forward, table);\n          });\n        }).getOr(false);\n      };\n    };\n    var moveV$1 = function (editor, forward) {\n      return function () {\n        return Option.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n          return Option.from(editor.dom.getParent(td, 'table')).map(function (table) {\n            return navigateVertically(editor, forward, table, td);\n          });\n        }).getOr(false);\n      };\n    };\n\n    var isTarget = function (node) {\n      return contains(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = domGlobals.document.createRange();\n      rng.setStartBefore(target.dom());\n      rng.setEndBefore(target.dom());\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = Element.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock$1 = function (root, forward, blockName, attrs) {\n      var block = Element.fromTag(blockName);\n      var br = Element.fromTag('br');\n      setAll(block, attrs);\n      append(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock$1(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq, root);\n      return closest(Element.fromDom(pos.container()), isBlock, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom(), pos) : isAtFirstLine(root.dom(), pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = Element.fromDom(editor.getBody());\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var rootBlock = Settings.getForcedRootBlock(editor);\n      var rootBlockAttrs = Settings.getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$2 = function (editor, forward) {\n      return function () {\n        if (editor.selection.isCollapsed()) {\n          return moveCaretToNewEmptyLine(editor, forward);\n        } else {\n          return false;\n        }\n      };\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map(patterns, function (pattern) {\n        return merge({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var args = Array.prototype.slice.call(arguments, 1);\n      return function () {\n        return f.apply(null, args);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n    var MatchKeys = {\n      match: match$1,\n      action: action,\n      execute: execute\n    };\n\n    var executeKeydownOverride = function (editor, caret, evt) {\n      var os = PlatformDetection$1.detect().os;\n      MatchKeys.execute([\n        {\n          keyCode: VK.RIGHT,\n          action: moveH(editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: moveH(editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV(editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: moveH$1(editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: moveH$1(editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV$1(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV$1(editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: BoundarySelection.move(editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: BoundarySelection.move(editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: BoundarySelection.moveNextWord(editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: BoundarySelection.movePrevWord(editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV$2(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV$2(editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$7 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, caret, evt);\n        }\n      });\n    };\n    var ArrowKeys = { setup: setup$7 };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      MatchKeys.execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(CefDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(CefDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(CefBoundaryDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(CefBoundaryDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(InlineBoundaryDelete.backspaceDelete, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(InlineBoundaryDelete.backspaceDelete, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(TableDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(TableDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(BlockRangeDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(BlockRangeDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(BlockBoundaryDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(BlockBoundaryDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(InlineFormatDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(InlineFormatDelete.backspaceDelete, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      MatchKeys.execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(CefDelete.paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(CefDelete.paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$8 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n    var DeleteBackspaceKeys = { setup: setup$8 };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var walker, node, rng, lastNode = root, tempElm;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode('\\xA0'), root.firstChild);\n        }\n      }\n      rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        walker = new TreeWalker(root, root);\n        while (node = walker.current()) {\n          if (NodeType.isText(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (NodeType.isBr(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      dom.remove(tempElm);\n      editor.selection.scrollIntoView(root);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock$2 = function (editor) {\n      return Option.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock$2(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock$2(editor).filter(function (elm) {\n        return isListItem(Element.fromDom(elm));\n      }).isSome();\n    };\n    var NewLineUtils = {\n      moveToCaretPosition: moveToCaretPosition,\n      getEditableRoot: getEditableRoot,\n      getParentBlock: getParentBlock$2,\n      getParentBlockName: getParentBlockName,\n      isListItemParentBlock: isListItemParentBlock\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var hasParent$1 = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (NodeType.isElement(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert$1 = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n      }\n      dom.remove(parentBlock);\n      NewLineUtils.moveToCaretPosition(editor, newBlock);\n    };\n    var InsertLi = { insert: insert$1 };\n\n    var trimZwsp = function (fragment) {\n      each(descendants(Element.fromDom(fragment), isText), function (text) {\n        var rawNode = text.dom();\n        rawNode.nodeValue = Zwsp.trim(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell$5 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (NodeType.isElement(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (NodeType.isText(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === Zwsp.ZWSP ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === Zwsp.ZWSP ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (NodeType.isText(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var applyAttributes = function (editor, node, forcedRootBlockAttrs) {\n      Option.from(forcedRootBlockAttrs.style).map(editor.dom.parseStyle).each(function (attrStyles) {\n        var currentStyles = getAllRaw(Element.fromDom(node));\n        var newStyles = __assign(__assign({}, currentStyles), attrStyles);\n        editor.dom.setStyles(node, newStyles);\n      });\n      var attrClassesOpt = Option.from(forcedRootBlockAttrs.class).map(function (attrClasses) {\n        return attrClasses.split(/\\s+/);\n      });\n      var currentClassesOpt = Option.from(node.className).map(function (currentClasses) {\n        return filter(currentClasses.split(/\\s+/), function (clazz) {\n          return clazz !== '';\n        });\n      });\n      lift2(attrClassesOpt, currentClassesOpt, function (attrClasses, currentClasses) {\n        var filteredClasses = filter(currentClasses, function (clazz) {\n          return !contains(attrClasses, clazz);\n        });\n        var newClasses = __spreadArrays(attrClasses, filteredClasses);\n        editor.dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      var appliedAttrs = [\n        'style',\n        'class'\n      ];\n      var remainingAttrs = bifilter(forcedRootBlockAttrs, function (_, attrs) {\n        return !contains(appliedAttrs, attrs);\n      }).t;\n      editor.dom.setAttribs(node, remainingAttrs);\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = Settings.getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        var forcedRootBlockAttrs = Settings.getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot$1(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell$5(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      var lastChild;\n      block.normalize();\n      lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$2 = function (editor, evt) {\n      var tmpRng, editableRoot, container, offset, parentBlock, shiftKey;\n      var newBlock, fragment, containerBlock, parentBlockName, containerBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (Settings.shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || Bookmarks.isBookmarkNode(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        setForcedBlockAttrs(editor, block);\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var walker, node, name, normalizedOffset;\n        normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (NodeType.isText(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && NodeType.isElement(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        walker = new TreeWalker(container, parentBlock);\n        if (NodeType.isText(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (NodeType.isElement(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (NodeType.isText(node) && !/^[ \\t\\r\\n]*$/.test(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (Settings.shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        NewLineUtils.moveToCaretPosition(editor, newBlock);\n      };\n      NormalizeRange.normalize(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = Settings.getForcedRootBlock(editor);\n      shiftKey = evt.shiftKey;\n      if (NodeType.isElement(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && NodeType.isText(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      editableRoot = getEditableRoot$1(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !evt.ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          InsertLi.insert(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        NewLineUtils.moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        NewLineUtils.moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          NewLineUtils.moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n    var InsertBlock = { insert: insert$2 };\n\n    var matchesSelector = function (editor, selector) {\n      return NewLineUtils.getParentBlock(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$1(Element.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, Settings.getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine = function (editor) {\n      return matchesSelector(editor, Settings.getNoNewLineSelector(editor));\n    };\n    var ContextSelectors = {\n      shouldInsertBr: shouldInsertBr,\n      shouldBlockNewLine: shouldBlockNewLine\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine$1 = function (editor, shiftKey) {\n      return ContextSelectors.shouldBlockNewLine(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, shiftKey) {\n        var brMode = Settings.getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, shiftKey) {\n        return NewLineUtils.isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, shiftKey) {\n        var state = NewLineUtils.getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre$1 = function (requiredState) {\n      return function (editor, shiftKey) {\n        return Settings.shouldPutBrInPre(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, shiftKey) {\n      return ContextSelectors.shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = Settings.getForcedRootBlock(editor);\n      var rootEditable = NewLineUtils.getEditableRoot(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match$2 = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Option.some(action) : Option.none();\n      };\n    };\n    var getAction$1 = function (editor, evt) {\n      return LazyEvaluator.evaluateUntil([\n        match$2([shouldBlockNewLine$1], newLineAction.none()),\n        match$2([inSummaryBlock()], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false)\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true)\n        ], newLineAction.br()),\n        match$2([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([inListBlock(true)], newLineAction.block()),\n        match$2([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match$2([isBrMode(true)], newLineAction.br()),\n        match$2([inBrContext], newLineAction.br()),\n        match$2([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        evt.shiftKey\n      ]).getOr(newLineAction.none());\n    };\n    var NewLineAction = { getAction: getAction$1 };\n\n    var insert$3 = function (editor, evt) {\n      NewLineAction.getAction(editor, evt).fold(function () {\n        InsertBr.insert(editor, evt);\n      }, function () {\n        InsertBlock.insert(editor, evt);\n      }, noop);\n    };\n    var InsertNewLine = { insert: insert$3 };\n\n    var endTypingLevel = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevel(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        InsertNewLine.insert(editor, event);\n      });\n    };\n    var setup$9 = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n    var EnterKey = { setup: setup$9 };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (NodeType.isText(container)) {\n        container.insertData(offset, text);\n        return Option.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = Element.fromText(text);\n          if (pos.isAtEnd()) {\n            after(elm, textNode);\n          } else {\n            before(elm, textNode);\n          }\n          return CaretPosition(textNode.dom(), text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, '\\xA0');\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return CaretFinder.navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock = function (root, pos) {\n      return find(Parents.parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom(), pos).forall(function (newPos) {\n        return getClosestBlock(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom()) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom()) === false && contains$3(fromBlock, Element.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary = function (forward, root, pos) {\n      return getClosestBlock(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom(), pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom()) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom(), pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var nbsp = '\\xA0';\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      var parentBlocks = filter(Parents.parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || CaretFinder.prevPosition(getClosestBlock$1(root, pos).dom(), pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || CaretFinder.nextPosition(getClosestBlock$1(root, pos).dom(), pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest(elm, isElement);\n      }).exists(function (elm) {\n        return isPreValue(get$1(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return CaretFinder.prevPosition(root.dom(), pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return CaretFinder.nextPosition(root.dom(), pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (NodeType.isText(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      var afterPos = leanRight(pos);\n      if (isInPre(afterPos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, afterPos) || isAfterBlock(root, afterPos) || isBeforeBr(root, afterPos) || hasSpaceAfter(root, afterPos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, pos);\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return NodeType.isText(container) && contains$2(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      var chars = text.split('');\n      return map(chars, function (chr, i) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent$1(chars[i - 1]) && isContent$1(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Option.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Option.some(pos) : Option.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = Element.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return CaretFinder.prevPosition(root.dom(), CaretPosition$1.before(element));\n        }, function (element) {\n          return CaretFinder.firstPositionIn(element);\n        }, function (element) {\n          return CaretFinder.lastPositionIn(element);\n        }, function (element) {\n          return CaretFinder.nextPosition(root.dom(), CaretPosition$1.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection$1 = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var root = Element.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n        var caretPosition = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return BoundaryLocation.readLocation(isInlineTarget, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection$1(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride$2 = function (editor, evt) {\n      MatchKeys.execute([{\n          keyCode: VK.SPACEBAR,\n          action: MatchKeys.action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$a = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, evt);\n        }\n      });\n    };\n    var SpaceKey = { setup: setup$a };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(Element.fromDom(editor.getBody()), '*[data-mce-caret]').fold(constant(null), function (elm) {\n        return elm.dom();\n      });\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$b = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n    var CaretContainerInput = { setup: setup$b };\n\n    var browser$4 = PlatformDetection$1.detect().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser$4.isIE()) {\n        editor.on('keypress', function (e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$c = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var executeKeydownOverride$3 = function (editor, evt) {\n      MatchKeys.execute([\n        {\n          keyCode: VK.END,\n          action: moveToLineEndPoint(editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: moveToLineEndPoint(editor, false)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$d = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, evt);\n        }\n      });\n    };\n    var HomeEndKeys = { setup: setup$d };\n\n    var setup$e = function (editor) {\n      var caret = BoundarySelection.setupSelectedState(editor);\n      CaretContainerInput.setup(editor);\n      ArrowKeys.setup(editor, caret);\n      DeleteBackspaceKeys.setup(editor, caret);\n      EnterKey.setup(editor);\n      SpaceKey.setup(editor);\n      setup$c(editor);\n      HomeEndKeys.setup(editor);\n    };\n    var KeyboardOverrides = { setup: setup$e };\n\n    function Quirks (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, settings = editor.settings, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var inputMethodFocus = function () {\n        if (!editor.settings.content_editable) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!domGlobals.Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, container, offset, root, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          container = rng.startContainer;\n          offset = rng.startOffset;\n          root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!settings.object_resizing) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!settings.readonly) {\n          editor.on('BeforeExecCommand MouseDown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (settings.forced_root_block) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', settings.forced_root_block);\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (domGlobals.document.activeElement === domGlobals.document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              editor.selection.getSel().modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = CaretRangeFromPoint.fromPoint(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = function () {\n      };\n      var isHidden = function () {\n        var sel;\n        if (!isGecko || editor.removed) {\n          return 0;\n        }\n        sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      removeBlockQuoteOnBackSpace();\n      emptyEditorWhenDeleting();\n      if (!Env.windowsPhone) {\n        normalizeSelection();\n      }\n      if (isWebKit) {\n        inputMethodFocus();\n        selectControlElements();\n        setDefaultBlockType();\n        blockFormSubmitInsideEditor();\n        disableBackspaceIntoATable();\n        removeAppleInterchangeBrs();\n        if (Env.iOS) {\n          restoreFocusOnKeyDown();\n          bodyHeight();\n          tapLinksAndImages();\n        } else {\n          selectAll();\n        }\n      }\n      if (Env.ie >= 11) {\n        bodyHeight();\n        disableBackspaceIntoATable();\n      }\n      if (Env.ie) {\n        selectAll();\n        disableAutoUrlDetect();\n        ieInternalDragAndDrop();\n      }\n      if (isGecko) {\n        removeHrOnBackspace();\n        focusBody();\n        removeStylesWhenDeletingAcrossBlockElements();\n        setGeckoEditingOptions();\n        addBrAfterLastLinks();\n        showBrokenImageIcon();\n        blockCmdArrowNavigation();\n        disableBackspaceIntoATable();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    }\n\n    var isTextBlockNode = function (node) {\n      return NodeType.isElement(node) && isTextBlock(Element.fromDom(node));\n    };\n    var normalizeSelection$1 = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          CaretFinder.firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          CaretFinder.lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(RangeNormalizer.normalize(rng));\n    };\n    var setup$f = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection$1(editor);\n        }\n      });\n    };\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$g = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var DOM$2 = DOMUtils$1.DOM;\n    var appendStyle = function (editor, text) {\n      var head = Element.fromDom(editor.getDoc().head);\n      var tag = Element.fromTag('style');\n      set(tag, 'type', 'text/css');\n      append(tag, Element.fromText(text));\n      append(head, tag);\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(editor.settings, editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node;\n        var dom = editor.dom;\n        var value, internalName;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          internalName = 'data-mce-' + name;\n          if (!node.attributes.map[internalName]) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length, node, type;\n        while (i--) {\n          node = nodes[i];\n          type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      parser.addNodeFilter('#cdata', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.type = 8;\n          node.name = '#comment';\n          node.value = '[CDATA[' + node.value + ']]';\n        }\n      });\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length, node;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new Node$1('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      editor.fire('init');\n      editor.focus(true);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader = function (editor) {\n      return editor.inline ? DOM$2.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc(), body, contentCssText;\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !settings.content_editable) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (settings.content_editable) {\n        editor.on('remove', function () {\n          var bodyEl = this.getBody();\n          DOM$2.removeClass(bodyEl, 'mce-content-body');\n          DOM$2.removeClass(bodyEl, 'mce-edit-focus');\n          DOM$2.setAttrib(bodyEl, 'contentEditable', null);\n        });\n        DOM$2.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = settings.content_document || domGlobals.document;\n        editor.contentWindow = settings.content_window || domGlobals.window;\n        editor.bodyElement = targetElm;\n        settings.content_document = settings.content_window = null;\n        settings.root_name = targetElm.nodeName.toLowerCase();\n      }\n      body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$2.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(settings);\n      editor.dom = DOMUtils$1(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        class_filter: settings.class_filter,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: settings.content_editable,\n        schema: editor.schema,\n        contentCssCors: Settings.shouldUseContentCssCors(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer$1(settings, editor);\n      editor.selection = Selection$1(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$g(editor);\n      setup$f(editor);\n      KeyboardOverrides.setup(editor);\n      ForceBlocks.setup(editor);\n      editor.fire('PreInit');\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$2.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      editor.fire('PostRender');\n      if (settings.directionality) {\n        body.dir = settings.directionality;\n      }\n      if (settings.nowrap) {\n        body.style.whiteSpace = 'nowrap';\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      editor.load({\n        initial: true,\n        format: 'html'\n      });\n      editor.startContent = editor.getContent({ format: 'raw' });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n      if (editor.contentStyles.length > 0) {\n        contentCssText = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText);\n      }\n      getStyleSheetLoader(editor).loadAll(editor.contentCSS, function (_) {\n        initEditor(editor);\n      }, function (urls) {\n        initEditor(editor);\n      });\n      if (settings.content_style) {\n        appendStyle(editor, settings.content_style);\n      }\n    };\n    var InitContentBody = { initContentBody: initContentBody };\n\n    var DOM$3 = DOMUtils$1.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (domGlobals.document.domain !== domGlobals.window.location.hostname && Env.ie && Env.ie < 12) {\n        var bodyUuid = Uuid.uuid('mce');\n        editor[bodyUuid] = function () {\n          InitContentBody.initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + domGlobals.document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$3.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var normalizeHeight = function (height) {\n      var normalizedHeight = typeof height === 'number' ? height + 'px' : height;\n      return normalizedHeight ? normalizedHeight : '';\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = Element.fromTag('iframe');\n      setAll(iframe, customAttrs);\n      setAll(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      setAll$1(iframe, {\n        width: '100%',\n        height: normalizeHeight(height),\n        display: 'block'\n      });\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var bodyId, bodyClass, iframeHTML;\n      iframeHTML = Settings.getDocType(editor) + '<html><head>';\n      if (Settings.getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      bodyId = Settings.getBodyId(editor);\n      bodyClass = Settings.getBodyClass(editor);\n      if (Settings.getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + Settings.getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head><body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\"><br></body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var title = editor.editorManager.translate('Rich Text Area. Press ALT-F9 for menu. ' + 'Press ALT-F10 for toolbar. Press ALT-0 for help');\n      var ifr = createIframeElement(editor.id, title, o.height, Settings.getIframeAttrs(editor)).dom();\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$3.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$3.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$3.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$3.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        InitContentBody.initContentBody(editor);\n      }\n    };\n    var InitIframe = { init: init$1 };\n\n    var DOM$4 = DOMUtils$1.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager$1.get(plugin);\n      var pluginUrl = PluginManager$1.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager$1.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          ErrorReporter.pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(editor.settings.plugins.split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initTheme = function (editor) {\n      var Theme;\n      var theme = editor.settings.theme;\n      if (isString(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      var w, h, minHeight, re, info;\n      var settings = editor.settings;\n      var elm = editor.getElement();\n      w = settings.width || DOM$4.getStyle(elm, 'width') || '100%';\n      h = settings.height || DOM$4.getStyle(elm, 'height') || elm.offsetHeight;\n      minHeight = settings.min_height || 100;\n      re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + w)) {\n        w = Math.max(parseInt(w, 10), 100);\n      }\n      if (re.test('' + h)) {\n        h = Math.max(parseInt(h, 10), minHeight);\n      }\n      info = editor.theme.renderUI({\n        targetNode: elm,\n        width: w,\n        height: h,\n        deltaWidth: settings.delta_width,\n        deltaHeight: settings.delta_height\n      });\n      if (!settings.content_editable) {\n        h = (info.iframeHeight || h) + (typeof h === 'number' ? info.deltaHeight || 0 : '');\n        if (h < minHeight) {\n          h = minHeight;\n        }\n      }\n      info.height = h;\n      return info;\n    };\n    var renderFromThemeFunc = function (editor) {\n      var info;\n      var elm = editor.getElement();\n      info = editor.settings.theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$4.create('div');\n      DOM$4.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var settings = editor.settings, elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString(settings.theme)) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(settings.theme)) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var init$2 = function (editor) {\n      var settings = editor.settings;\n      var elm = editor.getElement();\n      var boxInfo;\n      editor.rtl = settings.rtl_ui || editor.editorManager.i18n.rtl;\n      editor.editorManager.i18n.setCode(settings.language);\n      settings.aria_label = settings.aria_label || DOM$4.getAttrib(elm, 'aria-label', editor.getLang('aria.rich_text_area'));\n      editor.fire('ScriptsLoaded');\n      initTheme(editor);\n      initPlugins(editor);\n      boxInfo = renderThemeUi(editor);\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      if (settings.content_css) {\n        Tools.each(Tools.explode(settings.content_css), function (u) {\n          editor.contentCSS.push(editor.documentBaseURI.toAbsolute(u));\n        });\n      }\n      if (settings.content_editable) {\n        return InitContentBody.initContentBody(editor);\n      } else {\n        return InitIframe.init(editor, boxInfo);\n      }\n    };\n    var Init = { init: init$2 };\n\n    var DOM$5 = DOMUtils$1.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var settings = editor.settings;\n      if (settings.language && settings.language !== 'en' && !settings.language_url) {\n        settings.language_url = editor.editorManager.baseURL + '/langs/' + settings.language + '.js';\n      }\n      if (settings.language_url && !editor.editorManager.i18n.data[settings.language]) {\n        scriptLoader.add(settings.language_url);\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var settings = editor.settings, theme = settings.theme;\n      if (isString(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !ThemeManager.urls.hasOwnProperty(theme)) {\n          var themeUrl = settings.theme_url;\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var loadPlugins = function (settings, suffix) {\n      if (Tools.isArray(settings.plugins)) {\n        settings.plugins = settings.plugins.join(' ');\n      }\n      Tools.each(settings.external_plugins, function (url, name) {\n        PluginManager$1.load(name, url);\n        settings.plugins += ' ' + name;\n      });\n      Tools.each(settings.plugins.split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager$1.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager$1.dependencies(plugin);\n            Tools.each(dependencies, function (dep) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: dep,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              dep = PluginManager$1.createUrl(defaultSettings, dep);\n              PluginManager$1.load(dep.resource, dep);\n            });\n          } else {\n            PluginManager$1.load(plugin, {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadPlugins(editor.settings, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            Init.init(editor);\n          }\n        }, editor, function (urls) {\n          ErrorReporter.pluginLoadError(editor, urls[0]);\n          if (!editor.removed) {\n            Init.init(editor);\n          }\n        });\n      });\n    };\n    var render = function (editor) {\n      var settings = editor.settings, id = editor.id;\n      var readyHandler = function () {\n        DOM$5.unbind(domGlobals.window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$5.bind(domGlobals.window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      if (!settings.inline) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$5.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (settings.hidden_input && !/TEXTAREA|INPUT/i.test(editor.getElement().nodeName)) {\n          DOM$5.insertAfter(DOM$5.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$5.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.setContent(editor.startContent, { format: 'raw' });\n        });\n        if (settings.submit_patch && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (settings.encoding === 'xml') {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$5.encode(e.content);\n          }\n        });\n      }\n      if (settings.add_form_submit_trigger) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (settings.add_unload_trigger) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n    var Render = { render: render };\n\n    var add$4 = function (editor, name, settings) {\n      var sidebars = editor.sidebars ? editor.sidebars : [];\n      sidebars.push({\n        name: name,\n        settings: settings\n      });\n      editor.sidebars = sidebars;\n    };\n    var Sidebar = { add: add$4 };\n\n    var each$k = Tools.each, trim$4 = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var URI = function (url, settings) {\n      var self = this;\n      var baseUri, baseUrl;\n      url = trim$4(url);\n      settings = self.settings = settings || {};\n      baseUri = settings.base_uri;\n      if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n        self.source = url;\n        return;\n      }\n      var isProtocolRelative = url.indexOf('//') === 0;\n      if (url.indexOf('/') === 0 && !isProtocolRelative) {\n        url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n      }\n      if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n        baseUrl = settings.base_uri ? settings.base_uri.path : new URI(domGlobals.document.location.href).directory;\n        if (settings.base_uri.protocol == '') {\n          url = '//mce_host' + self.toAbsPath(baseUrl, url);\n        } else {\n          url = /([^#?]*)([#?]?.*)/.exec(url);\n          url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, url[1]) + url[2];\n        }\n      }\n      url = url.replace(/@@/g, '(mce_at)');\n      url = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n      each$k(queryParts, function (v, i) {\n        var part = url[i];\n        if (part) {\n          part = part.replace(/\\(mce_at\\)/g, '@@');\n        }\n        self[v] = part;\n      });\n      if (baseUri) {\n        if (!self.protocol) {\n          self.protocol = baseUri.protocol;\n        }\n        if (!self.userInfo) {\n          self.userInfo = baseUri.userInfo;\n        }\n        if (!self.port && self.host === 'mce_host') {\n          self.port = baseUri.port;\n        }\n        if (!self.host || self.host === 'mce_host') {\n          self.host = baseUri.host;\n        }\n        self.source = '';\n      }\n      if (isProtocolRelative) {\n        self.protocol = '';\n      }\n    };\n    URI.prototype = {\n      setPath: function (path) {\n        var self = this;\n        path = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        self.path = path[0];\n        self.directory = path[1];\n        self.file = path[2];\n        self.source = '';\n        self.getURI();\n      },\n      toRelative: function (uri) {\n        var self = this;\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        uri = new URI(uri, { base_uri: self });\n        if (uri.host !== 'mce_host' && self.host !== uri.host && uri.host || self.port !== uri.port || self.protocol !== uri.protocol && uri.protocol !== '') {\n          return uri.getURI();\n        }\n        var tu = self.getURI(), uu = uri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = self.toRelPath(self.path, uri.path);\n        if (uri.query) {\n          output += '?' + uri.query;\n        }\n        if (uri.anchor) {\n          output += '#' + uri.anchor;\n        }\n        return output;\n      },\n      toAbsolute: function (uri, noHost) {\n        uri = new URI(uri, { base_uri: this });\n        return uri.getURI(noHost && this.isSameOrigin(uri));\n      },\n      isSameOrigin: function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      },\n      toRelPath: function (base, path) {\n        var items, breakPoint = 0, out = '', i, l;\n        base = base.substring(0, base.lastIndexOf('/'));\n        base = base.split('/');\n        items = path.split('/');\n        if (base.length >= items.length) {\n          for (i = 0, l = base.length; i < l; i++) {\n            if (i >= items.length || base[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (base.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= base.length || base[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = base.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      },\n      toAbsPath: function (base, path) {\n        var i, nb = 0, o = [], tr, outPath;\n        tr = /\\/$/.test(path) ? '/' : '';\n        base = base.split('/');\n        path = path.split('/');\n        each$k(base, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        base = o;\n        for (i = path.length - 1, o = []; i >= 0; i--) {\n          if (path[i].length === 0 || path[i] === '.') {\n            continue;\n          }\n          if (path[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(path[i]);\n        }\n        i = base.length - nb;\n        if (i <= 0) {\n          outPath = o.reverse().join('/');\n        } else {\n          outPath = base.slice(0, i).join('/') + '/' + o.reverse().join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      },\n      getURI: function (noProtoHost) {\n        var s;\n        var self = this;\n        if (!self.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (self.protocol) {\n              s += self.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (self.userInfo) {\n              s += self.userInfo + '@';\n            }\n            if (self.host) {\n              s += self.host;\n            }\n            if (self.port) {\n              s += ':' + self.port;\n            }\n          }\n          if (self.path) {\n            s += self.path;\n          }\n          if (self.query) {\n            s += '?' + self.query;\n          }\n          if (self.anchor) {\n            s += '#' + self.anchor;\n          }\n          self.source = s;\n        }\n        return self.source;\n      }\n    };\n    URI.parseDataUri = function (uri) {\n      var type, matches;\n      uri = decodeURIComponent(uri).split(',');\n      matches = /data:([^;]+)/.exec(uri[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uri[1]\n      };\n    };\n    URI.getDocumentBaseUrl = function (loc) {\n      var baseUrl;\n      if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n        baseUrl = loc.href;\n      } else {\n        baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n      }\n      if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n        baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n        if (!/[\\/\\\\]$/.test(baseUrl)) {\n          baseUrl += '/';\n        }\n      }\n      return baseUrl;\n    };\n\n    var defaultFormat = 'html';\n    var trimEmptyContents = function (editor, html) {\n      var blockName = Settings.getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var getContentFromBody = function (editor, args, body) {\n      var content;\n      args.format = args.format ? args.format : defaultFormat;\n      args.get = true;\n      args.getInner = true;\n      if (!args.no_events) {\n        editor.fire('BeforeGetContent', args);\n      }\n      if (args.format === 'raw') {\n        content = Tools.trim(TrimHtml.trimExternal(editor.serializer, body.innerHTML));\n      } else if (args.format === 'text') {\n        content = Zwsp.trim(body.innerText || body.textContent);\n      } else if (args.format === 'tree') {\n        return editor.serializer.serialize(body, args);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, args));\n      }\n      if (args.format !== 'text' && !isWsPreserveElement(Element.fromDom(body))) {\n        args.content = Tools.trim(content);\n      } else {\n        args.content = content;\n      }\n      if (!args.no_events) {\n        editor.fire('GetContent', args);\n      }\n      return args.content;\n    };\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return Option.from(editor.getBody()).fold(constant(args.format === 'tree' ? new Node$1('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, body);\n      });\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name in nodeMatches) {\n        if (nodeMatches.hasOwnProperty(name)) {\n          matches.push(nodeMatches[name]);\n        }\n      }\n      for (var name in attrMatches) {\n        if (attrMatches.hasOwnProperty(name)) {\n          matches.push(attrMatches[name]);\n        }\n      }\n      return matches;\n    };\n    var filter$3 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each(matches, function (match) {\n        each(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var defaultFormat$1 = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof Node$1;\n    };\n    var moveSelection = function (editor) {\n      if (EditorFocus.hasFocus(editor)) {\n        CaretFinder.firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = NodeType.isTable(node) ? CaretFinder.firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html) {\n      editor.dom.setHTML(editor.getBody(), html);\n      moveSelection(editor);\n    };\n    var setContentString = function (editor, body, content, args) {\n      var forcedRootBlockName, padd;\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        forcedRootBlockName = Settings.getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, editor.settings.forced_root_block_attrs, content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(Element.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$3(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = isWsPreserveElement(Element.fromDom(body)) ? html : Tools.trim(html);\n      setEditorHtml(editor, args.content);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setContent$1 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      args.format = args.format ? args.format : defaultFormat$1;\n      args.set = true;\n      args.content = isTreeNode(content) ? '' : content;\n      if (!isTreeNode(content) && !args.no_events) {\n        editor.fire('BeforeSetContent', args);\n        content = args.content;\n      }\n      return Option.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, args) : setContentString(editor, body, content, args);\n      });\n    };\n\n    var DOM$6 = DOMUtils$1.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$6.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Option.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$6.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove$7 = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$6.remove(element.nextSibling);\n        }\n        Events.fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        Events.fireDetach(editor);\n        DOM$6.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var DOM$7 = DOMUtils$1.DOM;\n    var extend$4 = Tools.extend, each$l = Tools.each;\n    var resolve$4 = Tools.resolve;\n    var ie$2 = Env.ie;\n    var Editor = function (id, settings, editorManager) {\n      var self = this;\n      var documentBaseUrl = self.documentBaseUrl = editorManager.documentBaseURL;\n      var baseUri = editorManager.baseURI;\n      settings = getEditorSettings(self, id, documentBaseUrl, editorManager.defaultSettings, settings);\n      self.settings = settings;\n      AddOnManager.language = settings.language || 'en';\n      AddOnManager.languageLoad = settings.language_load;\n      AddOnManager.baseURL = editorManager.baseURL;\n      self.id = id;\n      self.setDirty(false);\n      self.plugins = {};\n      self.documentBaseURI = new URI(settings.document_base_url, { base_uri: baseUri });\n      self.baseURI = baseUri;\n      self.contentCSS = [];\n      self.contentStyles = [];\n      self.shortcuts = new Shortcuts(self);\n      self.loadedCSS = {};\n      self.editorCommands = new EditorCommands(self);\n      self.suffix = editorManager.suffix;\n      self.editorManager = editorManager;\n      self.inline = settings.inline;\n      self.buttons = {};\n      self.menuItems = {};\n      if (settings.cache_suffix) {\n        Env.cacheSuffix = settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n      }\n      if (settings.override_viewport === false) {\n        Env.overrideViewPort = false;\n      }\n      editorManager.fire('SetupEditor', { editor: self });\n      self.execCallback('setup', self);\n      self.$ = DomQuery.overrideDefaults(function () {\n        return {\n          context: self.inline ? self.getBody() : self.getDoc(),\n          element: self.getBody()\n        };\n      });\n    };\n    Editor.prototype = {\n      render: function () {\n        Render.render(this);\n      },\n      focus: function (skipFocus) {\n        EditorFocus.focus(this, skipFocus);\n      },\n      hasFocus: function () {\n        return EditorFocus.hasFocus(this);\n      },\n      execCallback: function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve$4(scope) : 0;\n          callback = resolve$4(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, Array.prototype.slice.call(arguments, 1));\n      },\n      translate: function (text) {\n        if (text && Tools.is(text, 'string')) {\n          var lang_1 = this.settings.language || 'en', i18n_1 = this.editorManager.i18n;\n          text = i18n_1.data[lang_1 + '.' + text] || text.replace(/\\{\\#([^\\}]+)\\}/g, function (a, b) {\n            return i18n_1.data[lang_1 + '.' + b] || '{#' + b + '}';\n          });\n        }\n        return this.editorManager.translate(text);\n      },\n      getLang: function (name, defaultVal) {\n        return this.editorManager.i18n.data[(this.settings.language || 'en') + '.' + name] || (defaultVal !== undefined ? defaultVal : '{#' + name + '}');\n      },\n      getParam: function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      },\n      nodeChanged: function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      },\n      addButton: function (name, settings) {\n        var self = this;\n        if (settings.cmd) {\n          settings.onclick = function () {\n            self.execCommand(settings.cmd);\n          };\n        }\n        if (settings.stateSelector && typeof settings.active === 'undefined') {\n          settings.active = false;\n        }\n        if (!settings.text && !settings.icon) {\n          settings.icon = name;\n        }\n        settings.tooltip = settings.tooltip || settings.title;\n        self.buttons[name] = settings;\n      },\n      addSidebar: function (name, settings) {\n        return Sidebar.add(this, name, settings);\n      },\n      addMenuItem: function (name, settings) {\n        var self = this;\n        if (settings.cmd) {\n          settings.onclick = function () {\n            self.execCommand(settings.cmd);\n          };\n        }\n        self.menuItems[name] = settings;\n      },\n      addContextToolbar: function (predicate, items) {\n        var self = this;\n        var selector;\n        self.contextToolbars = self.contextToolbars || [];\n        if (typeof predicate === 'string') {\n          selector = predicate;\n          predicate = function (elm) {\n            return self.dom.is(elm, selector);\n          };\n        }\n        self.contextToolbars.push({\n          id: Uuid.uuid('mcet'),\n          predicate: predicate,\n          items: items\n        });\n      },\n      addCommand: function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      },\n      addQueryStateHandler: function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      },\n      addQueryValueHandler: function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      },\n      addShortcut: function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      },\n      execCommand: function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      },\n      queryCommandState: function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      },\n      queryCommandValue: function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      },\n      queryCommandSupported: function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      },\n      show: function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = true;\n          } else {\n            DOM$7.show(self.getContainer());\n            DOM$7.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      },\n      hide: function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie$2 && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = false;\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$7.hide(self.getContainer());\n            DOM$7.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      },\n      isHidden: function () {\n        return !!this.hidden;\n      },\n      setProgressState: function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      },\n      load: function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          html = self.setContent(elm.value !== undefined ? elm.value : elm.innerHTML, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      },\n      save: function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!/TEXTAREA|INPUT/i.test(elm.nodeName)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$7.getParent(self.id, 'form')) {\n            each$l(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      },\n      setContent: function (content, args) {\n        return setContent$1(this, content, args);\n      },\n      getContent: function (args) {\n        return getContent$1(this, args);\n      },\n      insertContent: function (content, args) {\n        if (args) {\n          content = extend$4({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      },\n      isDirty: function () {\n        return !this.isNotDirty;\n      },\n      setDirty: function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      },\n      setMode: function (mode) {\n        setMode(this, mode);\n      },\n      getContainer: function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$7.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      },\n      getContentAreaContainer: function () {\n        return this.contentAreaContainer;\n      },\n      getElement: function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$7.get(this.id);\n        }\n        return this.targetElm;\n      },\n      getWin: function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      },\n      getDoc: function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      },\n      getBody: function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      },\n      convertURL: function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      },\n      addVisual: function (elm) {\n        var self = this;\n        var settings = self.settings;\n        var dom = self.dom;\n        var cls;\n        elm = elm || self.getBody();\n        if (self.hasVisual === undefined) {\n          self.hasVisual = settings.visual;\n        }\n        each$l(dom.select('table,a', elm), function (elm) {\n          var value;\n          switch (elm.nodeName) {\n          case 'TABLE':\n            cls = settings.visual_table_class || 'mce-item-table';\n            value = dom.getAttrib(elm, 'border');\n            if ((!value || value === '0') && self.hasVisual) {\n              dom.addClass(elm, cls);\n            } else {\n              dom.removeClass(elm, cls);\n            }\n            return;\n          case 'A':\n            if (!dom.getAttrib(elm, 'href')) {\n              value = dom.getAttrib(elm, 'name') || elm.id;\n              cls = settings.visual_anchor_class || 'mce-item-anchor';\n              if (value && self.hasVisual) {\n                dom.addClass(elm, cls);\n              } else {\n                dom.removeClass(elm, cls);\n              }\n            }\n            return;\n          }\n        });\n        self.fire('VisualAid', {\n          element: elm,\n          hasVisual: self.hasVisual\n        });\n      },\n      remove: function () {\n        remove$7(this);\n      },\n      destroy: function (automatic) {\n        destroy(this, automatic);\n      },\n      uploadImages: function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      },\n      _scanForImages: function () {\n        return this.editorUpload.scanForImages();\n      }\n    };\n    extend$4(Editor.prototype, EditorObservable$1);\n\n    var isEditorUIElement = function (elm) {\n      return elm.className.toString().indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils$1.DOM.bind(domGlobals.document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils$1.DOM.unbind(domGlobals.document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        SelectionBookmark.store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = PlatformDetection$1.detect().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup nodechange', function (e) {\n        if (!isManualNodeChange(e)) {\n          SelectionBookmark.store(editor);\n        }\n      });\n    };\n    var register$3 = function (editor) {\n      var throttledStore = first(function () {\n        SelectionBookmark.store(editor);\n      }, 0);\n      if (editor.inline) {\n        registerPageMouseUp(editor, throttledStore);\n      }\n      editor.on('init', function () {\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n    var SelectionRestore = { register: register$3 };\n\n    var documentFocusInHandler;\n    var DOM$8 = DOMUtils$1.DOM;\n    var isEditorUIElement$1 = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = editor ? editor.settings.custom_ui_selector : '';\n      var parent = DOM$8.getParent(elm, function (elm) {\n        return isEditorUIElement$1(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function () {\n      try {\n        return domGlobals.document.activeElement;\n      } catch (ex) {\n        return domGlobals.document.body;\n      }\n    };\n    var registerEvents = function (editorManager, e) {\n      var editor = e.editor;\n      SelectionRestore.register(editor);\n      editor.on('focusin', function () {\n        var self = this;\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== self) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: self });\n          }\n          editorManager.setActive(self);\n          editorManager.focusedEditor = self;\n          self.fire('focus', { blurredEditor: focusedEditor });\n          self.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        var self = this;\n        Delay.setEditorTimeout(self, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(self, getActiveElement()) && focusedEditor === self) {\n            self.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          var target;\n          target = e.target;\n          if (activeEditor && target.ownerDocument === domGlobals.document) {\n            if (target !== domGlobals.document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n              activeEditor.fire('blur', { focusedEditor: null });\n              editorManager.focusedEditor = null;\n            }\n          }\n        };\n        DOM$8.bind(domGlobals.document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$8.unbind(domGlobals.document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$h = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n    var FocusController = {\n      setup: setup$h,\n      isEditorUIElement: isEditorUIElement$1,\n      isUIElement: isUIElement\n    };\n\n    var DOM$9 = DOMUtils$1.DOM;\n    var explode$4 = Tools.explode, each$m = Tools.each, extend$5 = Tools.extend;\n    var instanceCounter = 0, beforeUnloadDelegate, EditorManager, boundGlobalEvents = false;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$m(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    EditorManager = {\n      defaultSettings: {},\n      $: DomQuery,\n      majorVersion: '4',\n      minorVersion: '9.10',\n      releaseDate: '2020-04-23',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '';\n        documentBaseURL = URI.getDocumentBaseUrl(domGlobals.document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        var preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = domGlobals.document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            var src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && domGlobals.document.currentScript) {\n            var src = domGlobals.document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        FocusController.setup(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl, suffix;\n        baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n          this.baseURI = new URI(this.baseURL);\n        }\n        suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        for (var name in pluginBaseUrls) {\n          AddOnManager.PluginManager.urls[name] = pluginBaseUrls[name];\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result, invalidInlineTargets;\n        invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = elm.name;\n            if (id && !DOM$9.get(id)) {\n              id = elm.name;\n            } else {\n              id = DOM$9.uniqueId();\n            }\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, Array.prototype.slice.call(arguments, 2));\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM$9.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var l, targets = [];\n          if (Env.ie && Env.ie < 11) {\n            ErrorReporter.initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          }\n          if (settings.types) {\n            each$m(settings.types, function (type) {\n              targets = targets.concat(DOM$9.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM$9.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            l = settings.elements || '';\n            if (l.length > 0) {\n              each$m(explode$4(l), function (id) {\n                var elm;\n                if (elm = DOM$9.get(id)) {\n                  targets.push(elm);\n                } else {\n                  each$m(domGlobals.document.forms, function (f) {\n                    each$m(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM$9.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$m(DOM$9.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM$9.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$m(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM$9.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$5({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$m(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                ErrorReporter.initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM$9.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString(id)) {\n          return find(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor;\n        existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function () {\n            self.fire('BeforeUnload');\n          };\n          DOM$9.bind(window, 'beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString(selector)) {\n          each$m(DOM$9.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          DOM$9.unbind(window, 'beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', 0, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$m(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      }\n    };\n    extend$5(EditorManager, Observable);\n    EditorManager.setup();\n    var EditorManager$1 = EditorManager;\n\n    function RangeUtils(dom) {\n      var walk = function (rng, callback) {\n        return RangeWalk.walk(dom, rng, callback);\n      };\n      var split = SplitRange.split;\n      var normalize = function (rng) {\n        return NormalizeRange.normalize(dom, rng).fold(constant(false), function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split,\n        normalize: normalize\n      };\n    }\n    (function (RangeUtils) {\n      RangeUtils.compareRanges = RangeCompare.isEq;\n      RangeUtils.getCaretRangeFromPoint = CaretRangeFromPoint.fromPoint;\n      RangeUtils.getSelectedNode = getSelectedNode;\n      RangeUtils.getNode = getNode;\n    }(RangeUtils || (RangeUtils = {})));\n    var RangeUtils$1 = RangeUtils;\n\n    var min = Math.min, max = Math.max, round$2 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x, y, w, h, targetW, targetH;\n      x = targetRect.x;\n      y = targetRect.y;\n      w = rect.w;\n      h = rect.h;\n      targetW = targetRect.w;\n      targetH = targetRect.h;\n      rel = (rel || '').split('');\n      if (rel[0] === 'b') {\n        y += targetH;\n      }\n      if (rel[1] === 'r') {\n        x += targetW;\n      }\n      if (rel[0] === 'c') {\n        y += round$2(targetH / 2);\n      }\n      if (rel[1] === 'c') {\n        x += round$2(targetW / 2);\n      }\n      if (rel[3] === 'b') {\n        y -= h;\n      }\n      if (rel[4] === 'r') {\n        x -= w;\n      }\n      if (rel[3] === 'c') {\n        y -= round$2(h / 2);\n      }\n      if (rel[4] === 'c') {\n        x -= round$2(w / 2);\n      }\n      return create$4(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$4(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1, y1, x2, y2;\n      x1 = max(rect.x, cropRect.x);\n      y1 = max(rect.y, cropRect.y);\n      x2 = min(rect.x + rect.w, cropRect.x + cropRect.w);\n      y2 = min(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$4(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp$1 = function (rect, clampRect, fixedSize) {\n      var underflowX1, underflowY1, overflowX2, overflowY2, x1, y1, x2, y2, cx2, cy2;\n      x1 = rect.x;\n      y1 = rect.y;\n      x2 = rect.x + rect.w;\n      y2 = rect.y + rect.h;\n      cx2 = clampRect.x + clampRect.w;\n      cy2 = clampRect.y + clampRect.h;\n      underflowX1 = max(0, clampRect.x - x1);\n      underflowY1 = max(0, clampRect.y - y1);\n      overflowX2 = max(0, x2 - cx2);\n      overflowY2 = max(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$4(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$4 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$4(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp$1,\n      create: create$4,\n      fromClientRect: fromClientRect\n    };\n\n    var types = {};\n    var Factory = {\n      add: function (type, typeClass) {\n        types[type.toLowerCase()] = typeClass;\n      },\n      has: function (type) {\n        return !!types[type.toLowerCase()];\n      },\n      get: function (type) {\n        var lctype = type.toLowerCase();\n        var controlType = types.hasOwnProperty(lctype) ? types[lctype] : null;\n        if (controlType === null) {\n          throw new Error('Could not find module for type: ' + type);\n        }\n        return controlType;\n      },\n      create: function (type, settings) {\n        var ControlType;\n        if (typeof type === 'string') {\n          settings = settings || {};\n          settings.type = type;\n        } else {\n          settings = type;\n          type = settings.type;\n        }\n        type = type.toLowerCase();\n        ControlType = types[type];\n        if (!ControlType) {\n          throw new Error('Could not find control by type: ' + type);\n        }\n        ControlType = new ControlType(settings);\n        ControlType.type = type;\n        return ControlType;\n      }\n    };\n\n    var each$n = Tools.each, extend$6 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (prop) {\n      var self = this;\n      var _super = self.prototype;\n      var prototype, name, member;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          var ret;\n          self._super = _super[name];\n          ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      prototype = new self();\n      initializing = false;\n      if (prop.Mixins) {\n        each$n(prop.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              prop[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          prop.Mixins = _super.Mixins.concat(prop.Mixins);\n        }\n      }\n      if (prop.Methods) {\n        each$n(prop.Methods.split(','), function (name) {\n          prop[name] = dummy;\n        });\n      }\n      if (prop.Properties) {\n        each$n(prop.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          prop[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (prop.Statics) {\n        each$n(prop.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (prop.Defaults && _super.Defaults) {\n        prop.Defaults = extend$6({}, _super.Defaults, prop.Defaults);\n      }\n      for (name in prop) {\n        member = prop[name];\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      }\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min$1 = Math.min, max$1 = Math.max, round$3 = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v, d, minRGB, maxRGB;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        minRGB = min$1(r, min$1(g, b));\n        maxRGB = max$1(r, max$1(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round$3(h),\n          s: round$3(s * 100),\n          v: round$3(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        var side, chroma, x, match;\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max$1(0, min$1(saturation, 1));\n        brightness = max$1(0, min$1(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round$3(255 * brightness);\n          return;\n        }\n        side = hue / 60;\n        chroma = brightness * saturation;\n        x = chroma * (1 - Math.abs(side % 2 - 1));\n        match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round$3(255 * (r + match));\n        g = round$3(255 * (g + match));\n        b = round$3(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (o, quote) {\n      var i, v, t, name;\n      quote = quote || '\"';\n      if (o === null) {\n        return 'null';\n      }\n      t = typeof o;\n      if (t === 'string') {\n        v = '\\bb\\tt\\nn\\ff\\rr\"\"\\'\\'\\\\\\\\';\n        return quote + o.replace(/([\\u0080-\\uFFFF\\x00-\\x1f\\\"\\'\\\\])/g, function (a, b) {\n          if (quote === '\"' && a === '\\'') {\n            return a;\n          }\n          i = v.indexOf(b);\n          if (i + 1) {\n            return '\\\\' + v.charAt(i + 1);\n          }\n          a = b.charCodeAt().toString(16);\n          return '\\\\u' + '0000'.substring(a.length) + a;\n        }) + quote;\n      }\n      if (t === 'object') {\n        if (o.hasOwnProperty && Object.prototype.toString.call(o) === '[object Array]') {\n          for (i = 0, v = '['; i < o.length; i++) {\n            v += (i > 0 ? ',' : '') + serialize(o[i], quote);\n          }\n          return v + ']';\n        }\n        v = '{';\n        for (name in o) {\n          if (o.hasOwnProperty(name)) {\n            v += typeof o[name] !== 'function' ? (v.length > 1 ? ',' + quote : quote) + name + quote + ':' + serialize(o[name], quote) : '';\n          }\n        }\n        return v + '}';\n      }\n      return '' + o;\n    };\n    var JSON$1 = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils$1.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async === false ? false : true;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = XMLHttpRequest();\n        if (xhr) {\n          if (xhr.overrideMimeType) {\n            xhr.overrideMimeType(settings.content_type);\n          }\n          xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n          if (settings.crossDomain) {\n            xhr.withCredentials = true;\n          }\n          if (settings.content_type) {\n            xhr.setRequestHeader('Content-Type', settings.content_type);\n          }\n          if (settings.requestheaders) {\n            Tools.each(settings.requestheaders, function (header) {\n              xhr.setRequestHeader(header.key, header.value);\n            });\n          }\n          xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n          xhr = XHR.fire('beforeSend', {\n            xhr: xhr,\n            settings: settings\n          }).xhr;\n          xhr.send(settings.data);\n          if (!settings.async) {\n            return ready();\n          }\n          setTimeout(ready, 10);\n        }\n      }\n    };\n    Tools.extend(XHR, Observable);\n\n    var extend$7 = Tools.extend;\n    var JSONRequest = function (settings) {\n      this.settings = extend$7({}, settings);\n      this.count = 0;\n    };\n    JSONRequest.sendRPC = function (o) {\n      return new JSONRequest().send(o);\n    };\n    JSONRequest.prototype = {\n      send: function (args) {\n        var ecb = args.error, scb = args.success;\n        args = extend$7(this.settings, args);\n        args.success = function (c, x) {\n          c = JSON$1.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(args.error_scope || args.scope, c.error, x);\n          } else {\n            scb.call(args.success_scope || args.scope, c.result);\n          }\n        };\n        args.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(args.error_scope || args.scope, ty, x);\n          }\n        };\n        args.data = JSON$1.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        args.content_type = 'application/json';\n        XHR.send(args);\n      }\n    };\n\n    var create$5 = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      localStorage = domGlobals.window.localStorage;\n    } catch (e) {\n      localStorage = create$5();\n    }\n    var LocalStorage = localStorage;\n\n    var tinymce = EditorManager$1;\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: Dispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSON$1,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: TreeWalker,\n        DOMUtils: DOMUtils$1,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils$1,\n        Serializer: DomSerializer$1,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager$1,\n        Selection: Selection$1,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: Node$1,\n        Schema: Schema,\n        SaxParser: SaxParser$1,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: HtmlSerializer\n      },\n      ui: { Factory: Factory },\n      Env: Env,\n      AddOnManager: AddOnManager,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable$1,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager$1,\n      DOM: DOMUtils$1.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: AddOnManager.PluginManager,\n      ThemeManager: AddOnManager.ThemeManager,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    tinymce = Tools.extend(tinymce, publicApi);\n    var Tinymce = tinymce;\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(Tinymce);\n    exportToModuleLoaders(Tinymce);\n\n}(window));\n})();\n","(function () {\nvar spellchecker = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasProPlugin = function (editor) {\n      if (/(^|[ ,])tinymcespellchecker([, ]|$)/.test(editor.settings.plugins) && global.get('tinymcespellchecker')) {\n        if (typeof domGlobals.window.console !== 'undefined' && domGlobals.window.console.log) {\n          domGlobals.window.console.log('Spell Checker Pro is incompatible with Spell Checker plugin! ' + 'Remove \\'spellchecker\\' from the \\'plugins\\' option.');\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var DetectProPlugin = { hasProPlugin: hasProPlugin };\n\n    var getLanguages = function (editor) {\n      var defaultLanguages = 'English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv';\n      return editor.getParam('spellchecker_languages', defaultLanguages);\n    };\n    var getLanguage = function (editor) {\n      var defaultLanguage = editor.getParam('language', 'en');\n      return editor.getParam('spellchecker_language', defaultLanguage);\n    };\n    var getRpcUrl = function (editor) {\n      return editor.getParam('spellchecker_rpc_url');\n    };\n    var getSpellcheckerCallback = function (editor) {\n      return editor.getParam('spellchecker_callback');\n    };\n    var getSpellcheckerWordcharPattern = function (editor) {\n      var defaultPattern = new RegExp('[^' + '\\\\s!\"#$%&()*+,-./:;<=>?@[\\\\]^_{|}`' + '\\xA7\\xA9\\xAB\\xAE\\xB1\\xB6\\xB7\\xB8\\xBB' + '\\xBC\\xBD\\xBE\\xBF\\xD7\\xF7\\xA4\\u201D\\u201C\\u201E\\xA0\\u2002\\u2003\\u2009' + ']+', 'g');\n      return editor.getParam('spellchecker_wordchar_pattern', defaultPattern);\n    };\n    var Settings = {\n      getLanguages: getLanguages,\n      getLanguage: getLanguage,\n      getRpcUrl: getRpcUrl,\n      getSpellcheckerCallback: getSpellcheckerCallback,\n      getSpellcheckerWordcharPattern: getSpellcheckerWordcharPattern\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var fireSpellcheckStart = function (editor) {\n      return editor.fire('SpellcheckStart');\n    };\n    var fireSpellcheckEnd = function (editor) {\n      return editor.fire('SpellcheckEnd');\n    };\n    var Events = {\n      fireSpellcheckStart: fireSpellcheckStart,\n      fireSpellcheckEnd: fireSpellcheckEnd\n    };\n\n    function isContentEditableFalse(node) {\n      return node && node.nodeType === 1 && node.contentEditable === 'false';\n    }\n    var DomTextMatcher = function (node, editor) {\n      var m, matches = [], text;\n      var dom = editor.dom;\n      var blockElementsMap, hiddenTextElementsMap, shortEndedElementsMap;\n      blockElementsMap = editor.schema.getBlockElements();\n      hiddenTextElementsMap = editor.schema.getWhiteSpaceElements();\n      shortEndedElementsMap = editor.schema.getShortEndedElements();\n      function createMatch(m, data) {\n        if (!m[0]) {\n          throw new Error('findAndReplaceDOMText cannot handle zero-length matches');\n        }\n        return {\n          start: m.index,\n          end: m.index + m[0].length,\n          text: m[0],\n          data: data\n        };\n      }\n      function getText(node) {\n        var txt;\n        if (node.nodeType === 3) {\n          return node.data;\n        }\n        if (hiddenTextElementsMap[node.nodeName] && !blockElementsMap[node.nodeName]) {\n          return '';\n        }\n        if (isContentEditableFalse(node)) {\n          return '\\n';\n        }\n        txt = '';\n        if (blockElementsMap[node.nodeName] || shortEndedElementsMap[node.nodeName]) {\n          txt += '\\n';\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.nextSibling);\n        }\n        return txt;\n      }\n      function stepThroughMatches(node, matches, replaceFn) {\n        var startNode, endNode, startNodeIndex, endNodeIndex, innerNodes = [], atIndex = 0, curNode = node, matchLocation, matchIndex = 0;\n        matches = matches.slice(0);\n        matches.sort(function (a, b) {\n          return a.start - b.start;\n        });\n        matchLocation = matches.shift();\n        out:\n          while (true) {\n            if (blockElementsMap[curNode.nodeName] || shortEndedElementsMap[curNode.nodeName] || isContentEditableFalse(curNode)) {\n              atIndex++;\n            }\n            if (curNode.nodeType === 3) {\n              if (!endNode && curNode.length + atIndex >= matchLocation.end) {\n                endNode = curNode;\n                endNodeIndex = matchLocation.end - atIndex;\n              } else if (startNode) {\n                innerNodes.push(curNode);\n              }\n              if (!startNode && curNode.length + atIndex > matchLocation.start) {\n                startNode = curNode;\n                startNodeIndex = matchLocation.start - atIndex;\n              }\n              atIndex += curNode.length;\n            }\n            if (startNode && endNode) {\n              curNode = replaceFn({\n                startNode: startNode,\n                startNodeIndex: startNodeIndex,\n                endNode: endNode,\n                endNodeIndex: endNodeIndex,\n                innerNodes: innerNodes,\n                match: matchLocation.text,\n                matchIndex: matchIndex\n              });\n              atIndex -= endNode.length - endNodeIndex;\n              startNode = null;\n              endNode = null;\n              innerNodes = [];\n              matchLocation = matches.shift();\n              matchIndex++;\n              if (!matchLocation) {\n                break;\n              }\n            } else if ((!hiddenTextElementsMap[curNode.nodeName] || blockElementsMap[curNode.nodeName]) && curNode.firstChild) {\n              if (!isContentEditableFalse(curNode)) {\n                curNode = curNode.firstChild;\n                continue;\n              }\n            } else if (curNode.nextSibling) {\n              curNode = curNode.nextSibling;\n              continue;\n            }\n            while (true) {\n              if (curNode.nextSibling) {\n                curNode = curNode.nextSibling;\n                break;\n              } else if (curNode.parentNode !== node) {\n                curNode = curNode.parentNode;\n              } else {\n                break out;\n              }\n            }\n          }\n      }\n      function genReplacer(callback) {\n        function makeReplacementNode(fill, matchIndex) {\n          var match = matches[matchIndex];\n          if (!match.stencil) {\n            match.stencil = callback(match);\n          }\n          var clone = match.stencil.cloneNode(false);\n          clone.setAttribute('data-mce-index', matchIndex);\n          if (fill) {\n            clone.appendChild(dom.doc.createTextNode(fill));\n          }\n          return clone;\n        }\n        return function (range) {\n          var before;\n          var after;\n          var parentNode;\n          var startNode = range.startNode;\n          var endNode = range.endNode;\n          var matchIndex = range.matchIndex;\n          var doc = dom.doc;\n          if (startNode === endNode) {\n            var node_1 = startNode;\n            parentNode = node_1.parentNode;\n            if (range.startNodeIndex > 0) {\n              before = doc.createTextNode(node_1.data.substring(0, range.startNodeIndex));\n              parentNode.insertBefore(before, node_1);\n            }\n            var el = makeReplacementNode(range.match, matchIndex);\n            parentNode.insertBefore(el, node_1);\n            if (range.endNodeIndex < node_1.length) {\n              after = doc.createTextNode(node_1.data.substring(range.endNodeIndex));\n              parentNode.insertBefore(after, node_1);\n            }\n            node_1.parentNode.removeChild(node_1);\n            return el;\n          }\n          before = doc.createTextNode(startNode.data.substring(0, range.startNodeIndex));\n          after = doc.createTextNode(endNode.data.substring(range.endNodeIndex));\n          var elA = makeReplacementNode(startNode.data.substring(range.startNodeIndex), matchIndex);\n          for (var i = 0, l = range.innerNodes.length; i < l; ++i) {\n            var innerNode = range.innerNodes[i];\n            var innerEl = makeReplacementNode(innerNode.data, matchIndex);\n            innerNode.parentNode.replaceChild(innerEl, innerNode);\n          }\n          var elB = makeReplacementNode(endNode.data.substring(0, range.endNodeIndex), matchIndex);\n          parentNode = startNode.parentNode;\n          parentNode.insertBefore(before, startNode);\n          parentNode.insertBefore(elA, startNode);\n          parentNode.removeChild(startNode);\n          parentNode = endNode.parentNode;\n          parentNode.insertBefore(elB, endNode);\n          parentNode.insertBefore(after, endNode);\n          parentNode.removeChild(endNode);\n          return elB;\n        };\n      }\n      function unwrapElement(element) {\n        var parentNode = element.parentNode;\n        parentNode.insertBefore(element.firstChild, element);\n        element.parentNode.removeChild(element);\n      }\n      function hasClass(elm) {\n        return elm.className.indexOf('mce-spellchecker-word') !== -1;\n      }\n      function getWrappersByIndex(index) {\n        var elements = node.getElementsByTagName('*'), wrappers = [];\n        index = typeof index === 'number' ? '' + index : null;\n        for (var i = 0; i < elements.length; i++) {\n          var element = elements[i], dataIndex = element.getAttribute('data-mce-index');\n          if (dataIndex !== null && dataIndex.length && hasClass(element)) {\n            if (dataIndex === index || index === null) {\n              wrappers.push(element);\n            }\n          }\n        }\n        return wrappers;\n      }\n      function indexOf(match) {\n        var i = matches.length;\n        while (i--) {\n          if (matches[i] === match) {\n            return i;\n          }\n        }\n        return -1;\n      }\n      function filter(callback) {\n        var filteredMatches = [];\n        each(function (match, i) {\n          if (callback(match, i)) {\n            filteredMatches.push(match);\n          }\n        });\n        matches = filteredMatches;\n        return this;\n      }\n      function each(callback) {\n        for (var i = 0, l = matches.length; i < l; i++) {\n          if (callback(matches[i], i) === false) {\n            break;\n          }\n        }\n        return this;\n      }\n      function wrap(callback) {\n        if (matches.length) {\n          stepThroughMatches(node, matches, genReplacer(callback));\n        }\n        return this;\n      }\n      function find(regex, data) {\n        if (text && regex.global) {\n          while (m = regex.exec(text)) {\n            matches.push(createMatch(m, data));\n          }\n        }\n        return this;\n      }\n      function unwrap(match) {\n        var i;\n        var elements = getWrappersByIndex(match ? indexOf(match) : null);\n        i = elements.length;\n        while (i--) {\n          unwrapElement(elements[i]);\n        }\n        return this;\n      }\n      function matchFromElement(element) {\n        return matches[element.getAttribute('data-mce-index')];\n      }\n      function elementFromMatch(match) {\n        return getWrappersByIndex(indexOf(match))[0];\n      }\n      function add(start, length, data) {\n        matches.push({\n          start: start,\n          end: start + length,\n          text: text.substr(start, length),\n          data: data\n        });\n        return this;\n      }\n      function rangeFromMatch(match) {\n        var wrappers = getWrappersByIndex(indexOf(match));\n        var rng = editor.dom.createRng();\n        rng.setStartBefore(wrappers[0]);\n        rng.setEndAfter(wrappers[wrappers.length - 1]);\n        return rng;\n      }\n      function replace(match, text) {\n        var rng = rangeFromMatch(match);\n        rng.deleteContents();\n        if (text.length > 0) {\n          rng.insertNode(editor.dom.doc.createTextNode(text));\n        }\n        return rng;\n      }\n      function reset() {\n        matches.splice(0, matches.length);\n        unwrap();\n        return this;\n      }\n      text = getText(node);\n      return {\n        text: text,\n        matches: matches,\n        each: each,\n        filter: filter,\n        reset: reset,\n        matchFromElement: matchFromElement,\n        elementFromMatch: elementFromMatch,\n        find: find,\n        add: add,\n        wrap: wrap,\n        unwrap: unwrap,\n        replace: replace,\n        rangeFromMatch: rangeFromMatch,\n        indexOf: indexOf\n      };\n    };\n\n    var getTextMatcher = function (editor, textMatcherState) {\n      if (!textMatcherState.get()) {\n        var textMatcher = DomTextMatcher(editor.getBody(), editor);\n        textMatcherState.set(textMatcher);\n      }\n      return textMatcherState.get();\n    };\n    var isEmpty = function (obj) {\n      for (var _ in obj) {\n        return false;\n      }\n      return true;\n    };\n    var defaultSpellcheckCallback = function (editor, pluginUrl, currentLanguageState) {\n      return function (method, text, doneCallback, errorCallback) {\n        var data = {\n          method: method,\n          lang: currentLanguageState.get()\n        };\n        var postData = '';\n        data[method === 'addToDictionary' ? 'word' : 'text'] = text;\n        global$1.each(data, function (value, key) {\n          if (postData) {\n            postData += '&';\n          }\n          postData += key + '=' + encodeURIComponent(value);\n        });\n        global$3.send({\n          url: new global$2(pluginUrl).toAbsolute(Settings.getRpcUrl(editor)),\n          type: 'post',\n          content_type: 'application/x-www-form-urlencoded',\n          data: postData,\n          success: function (result) {\n            result = JSON.parse(result);\n            if (!result) {\n              var message = editor.translate('Server response wasn\\'t proper JSON.');\n              errorCallback(message);\n            } else if (result.error) {\n              errorCallback(result.error);\n            } else {\n              doneCallback(result);\n            }\n          },\n          error: function () {\n            var message = editor.translate('The spelling service was not found: (') + Settings.getRpcUrl(editor) + editor.translate(')');\n            errorCallback(message);\n          }\n        });\n      };\n    };\n    var sendRpcCall = function (editor, pluginUrl, currentLanguageState, name, data, successCallback, errorCallback) {\n      var userSpellcheckCallback = Settings.getSpellcheckerCallback(editor);\n      var spellCheckCallback = userSpellcheckCallback ? userSpellcheckCallback : defaultSpellcheckCallback(editor, pluginUrl, currentLanguageState);\n      spellCheckCallback.call(editor.plugins.spellchecker, name, data, successCallback, errorCallback);\n    };\n    var spellcheck = function (editor, pluginUrl, startedState, textMatcherState, lastSuggestionsState, currentLanguageState) {\n      if (finish(editor, startedState, textMatcherState)) {\n        return;\n      }\n      var errorCallback = function (message) {\n        editor.notificationManager.open({\n          text: message,\n          type: 'error'\n        });\n        editor.setProgressState(false);\n        finish(editor, startedState, textMatcherState);\n      };\n      var successCallback = function (data) {\n        markErrors(editor, startedState, textMatcherState, lastSuggestionsState, data);\n      };\n      editor.setProgressState(true);\n      sendRpcCall(editor, pluginUrl, currentLanguageState, 'spellcheck', getTextMatcher(editor, textMatcherState).text, successCallback, errorCallback);\n      editor.focus();\n    };\n    var checkIfFinished = function (editor, startedState, textMatcherState) {\n      if (!editor.dom.select('span.mce-spellchecker-word').length) {\n        finish(editor, startedState, textMatcherState);\n      }\n    };\n    var addToDictionary = function (editor, pluginUrl, startedState, textMatcherState, currentLanguageState, word, spans) {\n      editor.setProgressState(true);\n      sendRpcCall(editor, pluginUrl, currentLanguageState, 'addToDictionary', word, function () {\n        editor.setProgressState(false);\n        editor.dom.remove(spans, true);\n        checkIfFinished(editor, startedState, textMatcherState);\n      }, function (message) {\n        editor.notificationManager.open({\n          text: message,\n          type: 'error'\n        });\n        editor.setProgressState(false);\n      });\n    };\n    var ignoreWord = function (editor, startedState, textMatcherState, word, spans, all) {\n      editor.selection.collapse();\n      if (all) {\n        global$1.each(editor.dom.select('span.mce-spellchecker-word'), function (span) {\n          if (span.getAttribute('data-mce-word') === word) {\n            editor.dom.remove(span, true);\n          }\n        });\n      } else {\n        editor.dom.remove(spans, true);\n      }\n      checkIfFinished(editor, startedState, textMatcherState);\n    };\n    var finish = function (editor, startedState, textMatcherState) {\n      var bookmark = editor.selection.getBookmark();\n      getTextMatcher(editor, textMatcherState).reset();\n      editor.selection.moveToBookmark(bookmark);\n      textMatcherState.set(null);\n      if (startedState.get()) {\n        startedState.set(false);\n        Events.fireSpellcheckEnd(editor);\n        return true;\n      }\n    };\n    var getElmIndex = function (elm) {\n      var value = elm.getAttribute('data-mce-index');\n      if (typeof value === 'number') {\n        return '' + value;\n      }\n      return value;\n    };\n    var findSpansByIndex = function (editor, index) {\n      var nodes;\n      var spans = [];\n      nodes = global$1.toArray(editor.getBody().getElementsByTagName('span'));\n      if (nodes.length) {\n        for (var i = 0; i < nodes.length; i++) {\n          var nodeIndex = getElmIndex(nodes[i]);\n          if (nodeIndex === null || !nodeIndex.length) {\n            continue;\n          }\n          if (nodeIndex === index.toString()) {\n            spans.push(nodes[i]);\n          }\n        }\n      }\n      return spans;\n    };\n    var markErrors = function (editor, startedState, textMatcherState, lastSuggestionsState, data) {\n      var suggestions, hasDictionarySupport;\n      if (typeof data !== 'string' && data.words) {\n        hasDictionarySupport = !!data.dictionary;\n        suggestions = data.words;\n      } else {\n        suggestions = data;\n      }\n      editor.setProgressState(false);\n      if (isEmpty(suggestions)) {\n        var message = editor.translate('No misspellings found.');\n        editor.notificationManager.open({\n          text: message,\n          type: 'info'\n        });\n        startedState.set(false);\n        return;\n      }\n      lastSuggestionsState.set({\n        suggestions: suggestions,\n        hasDictionarySupport: hasDictionarySupport\n      });\n      var bookmark = editor.selection.getBookmark();\n      getTextMatcher(editor, textMatcherState).find(Settings.getSpellcheckerWordcharPattern(editor)).filter(function (match) {\n        return !!suggestions[match.text];\n      }).wrap(function (match) {\n        return editor.dom.create('span', {\n          'class': 'mce-spellchecker-word',\n          'data-mce-bogus': 1,\n          'data-mce-word': match.text\n        });\n      });\n      editor.selection.moveToBookmark(bookmark);\n      startedState.set(true);\n      Events.fireSpellcheckStart(editor);\n    };\n    var Actions = {\n      spellcheck: spellcheck,\n      checkIfFinished: checkIfFinished,\n      addToDictionary: addToDictionary,\n      ignoreWord: ignoreWord,\n      findSpansByIndex: findSpansByIndex,\n      getElmIndex: getElmIndex,\n      markErrors: markErrors\n    };\n\n    var get = function (editor, startedState, lastSuggestionsState, textMatcherState, currentLanguageState, url) {\n      var getLanguage = function () {\n        return currentLanguageState.get();\n      };\n      var getWordCharPattern = function () {\n        return Settings.getSpellcheckerWordcharPattern(editor);\n      };\n      var markErrors = function (data) {\n        Actions.markErrors(editor, startedState, textMatcherState, lastSuggestionsState, data);\n      };\n      var getTextMatcher = function () {\n        return textMatcherState.get();\n      };\n      return {\n        getTextMatcher: getTextMatcher,\n        getWordCharPattern: getWordCharPattern,\n        markErrors: markErrors,\n        getLanguage: getLanguage\n      };\n    };\n    var Api = { get: get };\n\n    var register = function (editor, pluginUrl, startedState, textMatcherState, lastSuggestionsState, currentLanguageState) {\n      editor.addCommand('mceSpellCheck', function () {\n        Actions.spellcheck(editor, pluginUrl, startedState, textMatcherState, lastSuggestionsState, currentLanguageState);\n      });\n    };\n    var Commands = { register: register };\n\n    var buildMenuItems = function (listName, languageValues) {\n      var items = [];\n      global$1.each(languageValues, function (languageValue) {\n        items.push({\n          selectable: true,\n          text: languageValue.name,\n          data: languageValue.value\n        });\n      });\n      return items;\n    };\n    var updateSelection = function (editor, currentLanguageState) {\n      return function (e) {\n        var selectedLanguage = currentLanguageState.get();\n        e.control.items().each(function (ctrl) {\n          ctrl.active(ctrl.settings.data === selectedLanguage);\n        });\n      };\n    };\n    var getItems = function (editor) {\n      return global$1.map(Settings.getLanguages(editor).split(','), function (langPair) {\n        langPair = langPair.split('=');\n        return {\n          name: langPair[0],\n          value: langPair[1]\n        };\n      });\n    };\n    var register$1 = function (editor, pluginUrl, startedState, textMatcherState, currentLanguageState, lastSuggestionsState) {\n      var languageMenuItems = buildMenuItems('Language', getItems(editor));\n      var startSpellchecking = function () {\n        Actions.spellcheck(editor, pluginUrl, startedState, textMatcherState, lastSuggestionsState, currentLanguageState);\n      };\n      var buttonArgs = {\n        tooltip: 'Spellcheck',\n        onclick: startSpellchecking,\n        onPostRender: function (e) {\n          var ctrl = e.control;\n          editor.on('SpellcheckStart SpellcheckEnd', function () {\n            ctrl.active(startedState.get());\n          });\n        }\n      };\n      if (languageMenuItems.length > 1) {\n        buttonArgs.type = 'splitbutton';\n        buttonArgs.menu = languageMenuItems;\n        buttonArgs.onshow = updateSelection(editor, currentLanguageState);\n        buttonArgs.onselect = function (e) {\n          currentLanguageState.set(e.control.settings.data);\n        };\n      }\n      editor.addButton('spellchecker', buttonArgs);\n      editor.addMenuItem('spellchecker', {\n        text: 'Spellcheck',\n        context: 'tools',\n        onclick: startSpellchecking,\n        selectable: true,\n        onPostRender: function () {\n          var self = this;\n          self.active(startedState.get());\n          editor.on('SpellcheckStart SpellcheckEnd', function () {\n            self.active(startedState.get());\n          });\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    var suggestionsMenu;\n    var showSuggestions = function (editor, pluginUrl, lastSuggestionsState, startedState, textMatcherState, currentLanguageState, word, spans) {\n      var items = [], suggestions = lastSuggestionsState.get().suggestions[word];\n      global$1.each(suggestions, function (suggestion) {\n        items.push({\n          text: suggestion,\n          onclick: function () {\n            editor.insertContent(editor.dom.encode(suggestion));\n            editor.dom.remove(spans);\n            Actions.checkIfFinished(editor, startedState, textMatcherState);\n          }\n        });\n      });\n      items.push({ text: '-' });\n      var hasDictionarySupport = lastSuggestionsState.get().hasDictionarySupport;\n      if (hasDictionarySupport) {\n        items.push({\n          text: 'Add to Dictionary',\n          onclick: function () {\n            Actions.addToDictionary(editor, pluginUrl, startedState, textMatcherState, currentLanguageState, word, spans);\n          }\n        });\n      }\n      items.push.apply(items, [\n        {\n          text: 'Ignore',\n          onclick: function () {\n            Actions.ignoreWord(editor, startedState, textMatcherState, word, spans);\n          }\n        },\n        {\n          text: 'Ignore all',\n          onclick: function () {\n            Actions.ignoreWord(editor, startedState, textMatcherState, word, spans, true);\n          }\n        }\n      ]);\n      suggestionsMenu = global$5.create('menu', {\n        items: items,\n        context: 'contextmenu',\n        onautohide: function (e) {\n          if (e.target.className.indexOf('spellchecker') !== -1) {\n            e.preventDefault();\n          }\n        },\n        onhide: function () {\n          suggestionsMenu.remove();\n          suggestionsMenu = null;\n        }\n      });\n      suggestionsMenu.renderTo(domGlobals.document.body);\n      var pos = global$4.DOM.getPos(editor.getContentAreaContainer());\n      var targetPos = editor.dom.getPos(spans[0]);\n      var root = editor.dom.getRoot();\n      if (root.nodeName === 'BODY') {\n        targetPos.x -= root.ownerDocument.documentElement.scrollLeft || root.scrollLeft;\n        targetPos.y -= root.ownerDocument.documentElement.scrollTop || root.scrollTop;\n      } else {\n        targetPos.x -= root.scrollLeft;\n        targetPos.y -= root.scrollTop;\n      }\n      pos.x += targetPos.x;\n      pos.y += targetPos.y;\n      suggestionsMenu.moveTo(pos.x, pos.y + spans[0].offsetHeight);\n    };\n    var setup = function (editor, pluginUrl, lastSuggestionsState, startedState, textMatcherState, currentLanguageState) {\n      editor.on('click', function (e) {\n        var target = e.target;\n        if (target.className === 'mce-spellchecker-word') {\n          e.preventDefault();\n          var spans = Actions.findSpansByIndex(editor, Actions.getElmIndex(target));\n          if (spans.length > 0) {\n            var rng = editor.dom.createRng();\n            rng.setStartBefore(spans[0]);\n            rng.setEndAfter(spans[spans.length - 1]);\n            editor.selection.setRng(rng);\n            showSuggestions(editor, pluginUrl, lastSuggestionsState, startedState, textMatcherState, currentLanguageState, target.getAttribute('data-mce-word'), spans);\n          }\n        }\n      });\n    };\n    var SuggestionsMenu = { setup: setup };\n\n    global.add('spellchecker', function (editor, pluginUrl) {\n      if (DetectProPlugin.hasProPlugin(editor) === false) {\n        var startedState = Cell(false);\n        var currentLanguageState = Cell(Settings.getLanguage(editor));\n        var textMatcherState = Cell(null);\n        var lastSuggestionsState = Cell(null);\n        Buttons.register(editor, pluginUrl, startedState, textMatcherState, currentLanguageState, lastSuggestionsState);\n        SuggestionsMenu.setup(editor, pluginUrl, lastSuggestionsState, startedState, textMatcherState, currentLanguageState);\n        Commands.register(editor, pluginUrl, startedState, textMatcherState, lastSuggestionsState, currentLanguageState);\n        return Api.get(editor, startedState, lastSuggestionsState, textMatcherState, currentLanguageState, pluginUrl);\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","(function () {\nvar wordcount = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var regExps = {\n      aletter: '[A-Za-z\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05F3\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u10a0-\\u10c5\\u10d0-\\u10fa\\u10fc\\u1100-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1a00-\\u1a16\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bc0-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u24B6-\\u24E9\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2d00-\\u2d25\\u2d30-\\u2d65\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005\\u303b\\u303c\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790\\ua791\\ua7a0-\\ua7a9\\ua7fa-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uffa0-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc]',\n      midnumlet: '[-\\'\\\\.\\u2018\\u2019\\u2024\\uFE52\\uFF07\\uFF0E]',\n      midletter: '[:\\xB7\\xB7\\u05F4\\u2027\\uFE13\\uFE55\\uFF1A]',\n      midnum: '[\\xB1+*/,;;\\u0589\\u060C\\u060D\\u066C\\u07F8\\u2044\\uFE10\\uFE14\\uFE50\\uFE54\\uFF0C\\uFF1B]',\n      numeric: '[0-9\\u0660-\\u0669\\u066B\\u06f0-\\u06f9\\u07c0-\\u07c9\\u0966-\\u096f\\u09e6-\\u09ef\\u0a66-\\u0a6f\\u0ae6-\\u0aef\\u0b66-\\u0b6f\\u0be6-\\u0bef\\u0c66-\\u0c6f\\u0ce6-\\u0cef\\u0d66-\\u0d6f\\u0e50-\\u0e59\\u0ed0-\\u0ed9\\u0f20-\\u0f29\\u1040-\\u1049\\u1090-\\u1099\\u17e0-\\u17e9\\u1810-\\u1819\\u1946-\\u194f\\u19d0-\\u19d9\\u1a80-\\u1a89\\u1a90-\\u1a99\\u1b50-\\u1b59\\u1bb0-\\u1bb9\\u1c40-\\u1c49\\u1c50-\\u1c59\\ua620-\\ua629\\ua8d0-\\ua8d9\\ua900-\\ua909\\ua9d0-\\ua9d9\\uaa50-\\uaa59\\uabf0-\\uabf9]',\n      cr: '\\\\r',\n      lf: '\\\\n',\n      newline: '[\\x0B\\f\\x85\\u2028\\u2029]',\n      extend: '[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09cb-\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2\\u0ae3\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0c01-\\u0c03\\u0c3e-\\u0c44\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d02\\u0d03\\u0d3e-\\u0d44\\u0d46-\\u0d48\\u0d4a-\\u0d4d\\u0d57\\u0d62\\u0d63\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f3e\\u0f3f\\u0f71-\\u0f84\\u0f86\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102b-\\u103e\\u1056-\\u1059\\u105e-\\u1060\\u1062-\\u1064\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f\\u109a-\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b6-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u192b\\u1930-\\u193b\\u19b0-\\u19c0\\u19c8\\u19c9\\u1a17-\\u1a1b\\u1a55-\\u1a5e\\u1a60-\\u1a7c\\u1a7f\\u1b00-\\u1b04\\u1b34-\\u1b44\\u1b6b-\\u1b73\\u1b80-\\u1b82\\u1ba1-\\u1baa\\u1be6-\\u1bf3\\u1c24-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce8\\u1ced\\u1cf2\\u1dc0-\\u1de6\\u1dfc-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\uA672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua823-\\ua827\\ua880\\ua881\\ua8b4-\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua953\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa29-\\uaa36\\uaa43\\uaa4c\\uaa4d\\uaa7b\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe3-\\uabea\\uabec\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]',\n      format: '[\\xAD\\u0600-\\u0603\\u06DD\\u070F\\u17b4\\u17b5\\u200E\\u200F\\u202A-\\u202E\\u2060-\\u2064\\u206A-\\u206F\\uFEFF\\uFFF9-\\uFFFB]',\n      katakana: '[\\u3031-\\u3035\\u309B\\u309C\\u30A0-\\u30fa\\u30fc-\\u30ff\\u31f0-\\u31ff\\u32D0-\\u32FE\\u3300-\\u3357\\uff66-\\uff9d]',\n      extendnumlet: '[=_\\u203f\\u2040\\u2054\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff3f\\u2200-\\u22FF<>]',\n      punctuation: '[!-#%-*,-\\\\/:;?@\\\\[-\\\\]_{}\\xA1\\xAB\\xB7\\xBB\\xBF;\\xB7\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1361-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u3008\\u3009\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30\\u2E31\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uff3f\\uFF5B\\uFF5D\\uFF5F-\\uFF65]'\n    };\n    var characterIndices = {\n      ALETTER: 0,\n      MIDNUMLET: 1,\n      MIDLETTER: 2,\n      MIDNUM: 3,\n      NUMERIC: 4,\n      CR: 5,\n      LF: 6,\n      NEWLINE: 7,\n      EXTEND: 8,\n      FORMAT: 9,\n      KATAKANA: 10,\n      EXTENDNUMLET: 11,\n      AT: 12,\n      OTHER: 13\n    };\n    var SETS = [\n      new RegExp(regExps.aletter),\n      new RegExp(regExps.midnumlet),\n      new RegExp(regExps.midletter),\n      new RegExp(regExps.midnum),\n      new RegExp(regExps.numeric),\n      new RegExp(regExps.cr),\n      new RegExp(regExps.lf),\n      new RegExp(regExps.newline),\n      new RegExp(regExps.extend),\n      new RegExp(regExps.format),\n      new RegExp(regExps.katakana),\n      new RegExp(regExps.extendnumlet),\n      new RegExp('@')\n    ];\n    var EMPTY_STRING = '';\n    var PUNCTUATION = new RegExp('^' + regExps.punctuation + '$');\n    var WHITESPACE = /^\\s+$/;\n    var UnicodeData = {\n      characterIndices: characterIndices,\n      SETS: SETS,\n      EMPTY_STRING: EMPTY_STRING,\n      PUNCTUATION: PUNCTUATION,\n      WHITESPACE: WHITESPACE\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var SETS$1 = UnicodeData.SETS;\n    var OTHER = UnicodeData.characterIndices.OTHER;\n    var getType = function (char) {\n      var j, set, type = OTHER;\n      var setsLength = SETS$1.length;\n      for (j = 0; j < setsLength; ++j) {\n        set = SETS$1[j];\n        if (set && set.test(char)) {\n          type = j;\n          break;\n        }\n      }\n      return type;\n    };\n    var memoize = function (func) {\n      var cache = {};\n      return function (char) {\n        if (cache[char]) {\n          return cache[char];\n        } else {\n          var result = func(char);\n          cache[char] = result;\n          return result;\n        }\n      };\n    };\n    var classify = function (string) {\n      var memoized = memoize(getType);\n      return map(string.split(''), memoized);\n    };\n    var StringMapper = { classify: classify };\n\n    var ci = UnicodeData.characterIndices;\n    var isWordBoundary = function (map, index) {\n      var prevType;\n      var type = map[index];\n      var nextType = map[index + 1];\n      var nextNextType;\n      if (index < 0 || index > map.length - 1 && index !== 0) {\n        return false;\n      }\n      if (type === ci.ALETTER && nextType === ci.ALETTER) {\n        return false;\n      }\n      nextNextType = map[index + 2];\n      if (type === ci.ALETTER && (nextType === ci.MIDLETTER || nextType === ci.MIDNUMLET || nextType === ci.AT) && nextNextType === ci.ALETTER) {\n        return false;\n      }\n      prevType = map[index - 1];\n      if ((type === ci.MIDLETTER || type === ci.MIDNUMLET || nextType === ci.AT) && nextType === ci.ALETTER && prevType === ci.ALETTER) {\n        return false;\n      }\n      if ((type === ci.NUMERIC || type === ci.ALETTER) && (nextType === ci.NUMERIC || nextType === ci.ALETTER)) {\n        return false;\n      }\n      if ((type === ci.MIDNUM || type === ci.MIDNUMLET) && nextType === ci.NUMERIC && prevType === ci.NUMERIC) {\n        return false;\n      }\n      if (type === ci.NUMERIC && (nextType === ci.MIDNUM || nextType === ci.MIDNUMLET) && nextNextType === ci.NUMERIC) {\n        return false;\n      }\n      if (type === ci.EXTEND || type === ci.FORMAT || prevType === ci.EXTEND || prevType === ci.FORMAT || nextType === ci.EXTEND || nextType === ci.FORMAT) {\n        return false;\n      }\n      if (type === ci.CR && nextType === ci.LF) {\n        return false;\n      }\n      if (type === ci.NEWLINE || type === ci.CR || type === ci.LF) {\n        return true;\n      }\n      if (nextType === ci.NEWLINE || nextType === ci.CR || nextType === ci.LF) {\n        return true;\n      }\n      if (type === ci.KATAKANA && nextType === ci.KATAKANA) {\n        return false;\n      }\n      if (nextType === ci.EXTENDNUMLET && (type === ci.ALETTER || type === ci.NUMERIC || type === ci.KATAKANA || type === ci.EXTENDNUMLET)) {\n        return false;\n      }\n      if (type === ci.EXTENDNUMLET && (nextType === ci.ALETTER || nextType === ci.NUMERIC || nextType === ci.KATAKANA)) {\n        return false;\n      }\n      if (type === ci.AT) {\n        return false;\n      }\n      return true;\n    };\n    var WordBoundary = { isWordBoundary: isWordBoundary };\n\n    var EMPTY_STRING$1 = UnicodeData.EMPTY_STRING;\n    var WHITESPACE$1 = UnicodeData.WHITESPACE;\n    var PUNCTUATION$1 = UnicodeData.PUNCTUATION;\n    var isProtocol = function (word) {\n      return word === 'http' || word === 'https';\n    };\n    var findWordEnd = function (str, index) {\n      var i;\n      for (i = index; i < str.length; ++i) {\n        var chr = str.charAt(i);\n        if (WHITESPACE$1.test(chr)) {\n          break;\n        }\n      }\n      return i;\n    };\n    var extractUrl = function (word, str, index) {\n      var endIndex = findWordEnd(str, index + 1);\n      var peakedWord = str.substring(index + 1, endIndex);\n      if (peakedWord.substr(0, 3) === '://') {\n        return {\n          word: word + peakedWord,\n          index: endIndex\n        };\n      }\n      return {\n        word: word,\n        index: index\n      };\n    };\n    var doGetWords = function (str, options) {\n      var i = 0;\n      var map = StringMapper.classify(str);\n      var len = map.length;\n      var word = [];\n      var words = [];\n      var chr;\n      var includePunctuation;\n      var includeWhitespace;\n      if (!options) {\n        options = {};\n      }\n      if (options.ignoreCase) {\n        str = str.toLowerCase();\n      }\n      includePunctuation = options.includePunctuation;\n      includeWhitespace = options.includeWhitespace;\n      for (; i < len; ++i) {\n        chr = str.charAt(i);\n        word.push(chr);\n        if (WordBoundary.isWordBoundary(map, i)) {\n          word = word.join(EMPTY_STRING$1);\n          if (word && (includeWhitespace || !WHITESPACE$1.test(word)) && (includePunctuation || !PUNCTUATION$1.test(word))) {\n            if (isProtocol(word)) {\n              var obj = extractUrl(word, str, i);\n              words.push(obj.word);\n              i = obj.index;\n            } else {\n              words.push(word);\n            }\n          }\n          word = [];\n        }\n      }\n      return words;\n    };\n    var getWords = function (str, options) {\n      return doGetWords(str.replace(/\\ufeff/g, ''), options);\n    };\n    var WordGetter = { getWords: getWords };\n\n    var getText = function (node, schema) {\n      var blockElements = schema.getBlockElements();\n      var shortEndedElements = schema.getShortEndedElements();\n      var whiteSpaceElements = schema.getWhiteSpaceElements();\n      var isSeparator = function (node) {\n        return blockElements[node.nodeName] || shortEndedElements[node.nodeName] || whiteSpaceElements[node.nodeName];\n      };\n      var txt = '';\n      var treeWalker = new global$1(node, node);\n      while (node = treeWalker.next()) {\n        if (node.nodeType === 3) {\n          txt += node.data;\n        } else if (isSeparator(node)) {\n          txt += ' ';\n        }\n      }\n      return txt;\n    };\n    var innerText = function (node, schema) {\n      return global$2.ie ? getText(node, schema) : node.innerText;\n    };\n    var getTextContent = function (editor) {\n      return editor.removed ? '' : innerText(editor.getBody(), editor.schema);\n    };\n    var getCount = function (editor) {\n      return WordGetter.getWords(getTextContent(editor)).length;\n    };\n    var WordCount = { getCount: getCount };\n\n    var get = function (editor) {\n      var getCount = function () {\n        return WordCount.getCount(editor);\n      };\n      return { getCount: getCount };\n    };\n    var Api = { get: get };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var setup = function (editor) {\n      var wordsToText = function (editor) {\n        return global$4.translate([\n          '{0} words',\n          WordCount.getCount(editor)\n        ]);\n      };\n      var update = function () {\n        editor.theme.panel.find('#wordcount').text(wordsToText(editor));\n      };\n      editor.on('init', function () {\n        var statusbar = editor.theme.panel && editor.theme.panel.find('#statusbar')[0];\n        var debouncedUpdate = global$3.debounce(update, 300);\n        if (statusbar) {\n          global$3.setEditorTimeout(editor, function () {\n            statusbar.insert({\n              type: 'label',\n              name: 'wordcount',\n              text: wordsToText(editor),\n              classes: 'wordcount',\n              disabled: editor.settings.readonly\n            }, 0);\n            editor.on('setcontent beforeaddundo undo redo keyup', debouncedUpdate);\n          }, 0);\n        }\n      });\n    };\n    var Statusbar = { setup: setup };\n\n    global.add('wordcount', function (editor) {\n      Statusbar.setup(editor);\n      return Api.get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"pagebreak\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/pagebreak')\n//   ES2015:\n//     import 'tinymce/plugins/pagebreak'\nrequire('./plugin.js');","// Exports the \"nonbreaking\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/nonbreaking')\n//   ES2015:\n//     import 'tinymce/plugins/nonbreaking'\nrequire('./plugin.js');","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentEditor.vue?vue&type=style&index=0&id=26d86a20&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentEditor.vue?vue&type=style&index=0&id=26d86a20&scoped=true&lang=css&\"","(function () {\nvar code = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var getMinWidth = function (editor) {\n      return editor.getParam('code_dialog_width', 600);\n    };\n    var getMinHeight = function (editor) {\n      return editor.getParam('code_dialog_height', Math.min(global$1.DOM.getViewPort().h - 200, 500));\n    };\n    var Settings = {\n      getMinWidth: getMinWidth,\n      getMinHeight: getMinHeight\n    };\n\n    var setContent = function (editor, html) {\n      editor.focus();\n      editor.undoManager.transact(function () {\n        editor.setContent(html);\n      });\n      editor.selection.setCursorLocation();\n      editor.nodeChanged();\n    };\n    var getContent = function (editor) {\n      return editor.getContent({ source_view: true });\n    };\n    var Content = {\n      setContent: setContent,\n      getContent: getContent\n    };\n\n    var open = function (editor) {\n      var minWidth = Settings.getMinWidth(editor);\n      var minHeight = Settings.getMinHeight(editor);\n      var win = editor.windowManager.open({\n        title: 'Source code',\n        body: {\n          type: 'textbox',\n          name: 'code',\n          multiline: true,\n          minWidth: minWidth,\n          minHeight: minHeight,\n          spellcheck: false,\n          style: 'direction: ltr; text-align: left'\n        },\n        onSubmit: function (e) {\n          Content.setContent(editor, e.data.code);\n        }\n      });\n      win.find('#code').value(Content.getContent(editor));\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceCodeEditor', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('code', {\n        icon: 'code',\n        tooltip: 'Source code',\n        onclick: function () {\n          Dialog.open(editor);\n        }\n      });\n      editor.addMenuItem('code', {\n        icon: 'code',\n        text: 'Source code',\n        onclick: function () {\n          Dialog.open(editor);\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('code', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      return {};\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"toc\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/toc')\n//   ES2015:\n//     import 'tinymce/plugins/toc'\nrequire('./plugin.js');","(function () {\nvar fullscreen = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get = function (fullscreenState) {\n      return {\n        isFullscreen: function () {\n          return fullscreenState.get() !== null;\n        }\n      };\n    };\n    var Api = { get: get };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var fireFullscreenStateChanged = function (editor, state) {\n      editor.fire('FullscreenStateChanged', { state: state });\n    };\n    var Events = { fireFullscreenStateChanged: fireFullscreenStateChanged };\n\n    var DOM = global$1.DOM;\n    var getWindowSize = function () {\n      var w;\n      var h;\n      var win = domGlobals.window;\n      var doc = domGlobals.document;\n      var body = doc.body;\n      if (body.offsetWidth) {\n        w = body.offsetWidth;\n        h = body.offsetHeight;\n      }\n      if (win.innerWidth && win.innerHeight) {\n        w = win.innerWidth;\n        h = win.innerHeight;\n      }\n      return {\n        w: w,\n        h: h\n      };\n    };\n    var getScrollPos = function () {\n      var vp = DOM.getViewPort();\n      return {\n        x: vp.x,\n        y: vp.y\n      };\n    };\n    var setScrollPos = function (pos) {\n      domGlobals.window.scrollTo(pos.x, pos.y);\n    };\n    var toggleFullscreen = function (editor, fullscreenState) {\n      var body = domGlobals.document.body;\n      var documentElement = domGlobals.document.documentElement;\n      var editorContainerStyle;\n      var editorContainer, iframe, iframeStyle;\n      var fullscreenInfo = fullscreenState.get();\n      var resize = function () {\n        DOM.setStyle(iframe, 'height', getWindowSize().h - (editorContainer.clientHeight - iframe.clientHeight));\n      };\n      var removeResize = function () {\n        DOM.unbind(domGlobals.window, 'resize', resize);\n      };\n      editorContainer = editor.getContainer();\n      editorContainerStyle = editorContainer.style;\n      iframe = editor.getContentAreaContainer().firstChild;\n      iframeStyle = iframe.style;\n      if (!fullscreenInfo) {\n        var newFullScreenInfo = {\n          scrollPos: getScrollPos(),\n          containerWidth: editorContainerStyle.width,\n          containerHeight: editorContainerStyle.height,\n          iframeWidth: iframeStyle.width,\n          iframeHeight: iframeStyle.height,\n          resizeHandler: resize,\n          removeHandler: removeResize\n        };\n        iframeStyle.width = iframeStyle.height = '100%';\n        editorContainerStyle.width = editorContainerStyle.height = '';\n        DOM.addClass(body, 'mce-fullscreen');\n        DOM.addClass(documentElement, 'mce-fullscreen');\n        DOM.addClass(editorContainer, 'mce-fullscreen');\n        DOM.bind(domGlobals.window, 'resize', resize);\n        editor.on('remove', removeResize);\n        resize();\n        fullscreenState.set(newFullScreenInfo);\n        Events.fireFullscreenStateChanged(editor, true);\n      } else {\n        iframeStyle.width = fullscreenInfo.iframeWidth;\n        iframeStyle.height = fullscreenInfo.iframeHeight;\n        if (fullscreenInfo.containerWidth) {\n          editorContainerStyle.width = fullscreenInfo.containerWidth;\n        }\n        if (fullscreenInfo.containerHeight) {\n          editorContainerStyle.height = fullscreenInfo.containerHeight;\n        }\n        DOM.removeClass(body, 'mce-fullscreen');\n        DOM.removeClass(documentElement, 'mce-fullscreen');\n        DOM.removeClass(editorContainer, 'mce-fullscreen');\n        setScrollPos(fullscreenInfo.scrollPos);\n        DOM.unbind(domGlobals.window, 'resize', fullscreenInfo.resizeHandler);\n        editor.off('remove', fullscreenInfo.removeHandler);\n        fullscreenState.set(null);\n        Events.fireFullscreenStateChanged(editor, false);\n      }\n    };\n    var Actions = { toggleFullscreen: toggleFullscreen };\n\n    var register = function (editor, fullscreenState) {\n      editor.addCommand('mceFullScreen', function () {\n        Actions.toggleFullscreen(editor, fullscreenState);\n      });\n    };\n    var Commands = { register: register };\n\n    var postRender = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('FullscreenStateChanged', function (e) {\n          ctrl.active(e.state);\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addMenuItem('fullscreen', {\n        text: 'Fullscreen',\n        shortcut: 'Ctrl+Shift+F',\n        selectable: true,\n        cmd: 'mceFullScreen',\n        onPostRender: postRender(editor),\n        context: 'view'\n      });\n      editor.addButton('fullscreen', {\n        active: false,\n        tooltip: 'Fullscreen',\n        cmd: 'mceFullScreen',\n        onPostRender: postRender(editor)\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('fullscreen', function (editor) {\n      var fullscreenState = Cell(null);\n      if (editor.settings.inline) {\n        return Api.get(fullscreenState);\n      }\n      Commands.register(editor, fullscreenState);\n      Buttons.register(editor);\n      editor.addShortcut('Ctrl+Shift+F', '', 'mceFullScreen');\n      return Api.get(fullscreenState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","var XMLHttpRequest = require('./lib/XMLHttpRequest');\n\nmodule.exports = IPFS;\n\n/**\n * The varructor object\n * @param {Object} `provider` the provider object\n * @return {Object} `ipfs` returns an IPFS instance\n * @throws if the `new` flag is not used\n */\nfunction IPFS(provider) {\n  if (!(this instanceof IPFS)) { throw new Error('[ipfs-mini] IPFS instance must be instantiated with \"new\" flag (e.g. var ipfs = new IPFS(\"http://localhost:8545\");).'); }\n\n  var self = this;\n  self.setProvider(provider || {});\n}\n\n/**\n * No operation method\n */\nfunction noop() {}\nfunction newPromise(val) { return new Promise(val); }\nfunction noopPromise(val) { val(noop, noop); }\n\n/**\n * Sets the provider of the IPFS instance\n * @param {Object} `provider` the provider object\n * @throws if the provider object is not an object\n */\nIPFS.prototype.setProvider = function setProvider(provider) {\n  if (typeof provider !== 'object') { throw new Error(`[ifpsjs] provider must be type Object, got '${typeof provider}'.`); }\n  var self = this;\n  var data = self.provider = Object.assign({\n    host: '127.0.0.1',\n    pinning: true,\n    port: '5001',\n    protocol: 'http',\n    base: '/api/v0' }, provider || {});\n  self.requestBase = String(`${data.protocol}://${data.host}:${data.port}${data.base}`);\n};\n\n/**\n * Sends an async data packet to an IPFS node\n * @param {Object} `opts` the options object\n * @param {Function} `cb` the provider callback\n * @callback returns an error if any, or the data from IPFS\n */\nIPFS.prototype.sendAsync = function sendAsync(opts, cb) {\n  var self = this;\n  var request = new XMLHttpRequest(); // eslint-disable-line\n  var options = opts || {};\n\n  return (cb ? noopPromise : newPromise)(function (resolve, reject) {\n    function callback(e, r){\n      (cb || noop)(e, options.takeHash && r ? r.Hash : r);\n      if (e) return reject(e);\n      if (!e && r) return resolve(options.takeHash ? r.Hash : r);\n    };\n\n    request.onreadystatechange = function () {\n      if (request.readyState === 4 && request.timeout !== 1) {\n        if (request.status !== 200) {\n          callback(new Error(`[ipfs-mini] status ${request.status}: ${request.responseText}`), null);\n        } else {\n          try {\n            callback(null, (options.jsonParse ? JSON.parse(request.responseText) : request.responseText));\n          } catch (jsonError) {\n            callback(new Error(`[ipfs-mini] while parsing data: '${String(request.responseText)}', error: ${String(jsonError)} with provider: '${self.requestBase}'`, null));\n          }\n        }\n      }\n    };\n\n    try {\n      var pinningURI = self.provider.pinning && opts.uri === '/add' ? '?pin=true' : '';\n\n      if (options.payload) {\n        request.open('POST', `${self.requestBase}${opts.uri}${pinningURI}`);\n      } else {\n        request.open('GET', `${self.requestBase}${opts.uri}${pinningURI}`);\n      }\n\n      if (options.accept) {\n        request.setRequestHeader('accept', options.accept);\n      }\n\n      if (options.payload && options.boundary) {\n        request.setRequestHeader('Content-Type', `multipart/form-data; boundary=${options.boundary}`);\n        request.send(options.payload);\n      } else {\n        request.send();\n      }\n    } catch (err) {\n      callback(err, null);\n    }\n  });\n};\n\n/**\n * creates a boundary that isn't part of the payload\n */\nfunction createBoundary(data) {\n  while (true) {\n    var boundary = `----IPFSMini${Math.random() * 100000}.${Math.random() * 100000}`;\n    if (data.indexOf(boundary) === -1) {\n      return boundary;\n    }\n  }\n}\n\n/**\n * Add an string or buffer to IPFS\n * @param {String|Buffer} `input` a single string or buffer\n * @param {Function} `callback` a callback, with (error, ipfsHash String)\n * @callback {String} `ipfsHash` returns an IPFS hash string\n */\nIPFS.prototype.add = function addData(input, callback) {\n  var data = ((typeof input === 'object' && input.isBuffer) ? input.toString('binary') : input);\n  var boundary = createBoundary(data);\n  var payload = `--${boundary}\\r\\nContent-Disposition: form-data; name=\"path\"\\r\\nContent-Type: application/octet-stream\\r\\n\\r\\n${data}\\r\\n--${boundary}--`;\n\n  return this.sendAsync({\n    jsonParse: true,\n    accept: 'application/json',\n    uri: '/add',\n    takeHash: true,\n    payload, boundary,\n  }, callback);\n};\n\n/**\n * Add an JSON object to IPFS\n * @param {Object} `jsonData` a single JSON object\n * @param {Function} `callback` a callback, with (error, ipfsHash String)\n * @callback {String} `ipfsHash` returns an IPFS hash string\n */\nIPFS.prototype.addJSON = function addJson(jsonData, callback) {\n  var self = this;\n  return self.add(JSON.stringify(jsonData), callback);\n};\n\n/**\n * Get an object stat `/object/stat` for an IPFS hash\n * @param {String} `ipfsHash` a single IPFS hash String\n * @param {Function} `callback` a callback, with (error, stats Object)\n * @callback {Object} `stats` returns the stats object for that IPFS hash\n */\nIPFS.prototype.stat = function cat(ipfsHash, callback) {\n  var self = this;\n  return self.sendAsync({ jsonParse: true, uri: `/object/stat/${ipfsHash}` }, callback);\n};\n\n/**\n * Get the data from an IPFS hash\n * @param {String} `ipfsHash` a single IPFS hash String\n * @param {Function} `callback` a callback, with (error, stats Object)\n * @callback {String} `data` returns the output data\n */\nIPFS.prototype.cat = function cat(ipfsHash, callback) {\n  var self = this;\n  return self.sendAsync({ uri: `/cat/${ipfsHash}` }, callback);\n};\n\n/**\n * Get the data from an IPFS hash that is a JSON object\n * @param {String} `ipfsHash` a single IPFS hash String\n * @param {Function} `callback` a callback, with (error, json Object)\n * @callback {Object} `data` returns the output data JSON object\n */\nIPFS.prototype.catJSON = function catJSON(ipfsHash, callback) {\n  var self = this;\n  return self.sendAsync({ uri: `/cat/${ipfsHash}`, jsonParse: true }, callback);\n};\n","// Exports the \"contextmenu\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/contextmenu')\n//   ES2015:\n//     import 'tinymce/plugins/contextmenu'\nrequire('./plugin.js');","(function () {\nvar tabfocus = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var getTabFocusElements = function (editor) {\n      return editor.getParam('tabfocus_elements', ':prev,:next');\n    };\n    var getTabFocus = function (editor) {\n      return editor.getParam('tab_focus', getTabFocusElements(editor));\n    };\n    var Settings = { getTabFocus: getTabFocus };\n\n    var DOM = global$1.DOM;\n    var tabCancel = function (e) {\n      if (e.keyCode === global$6.TAB && !e.ctrlKey && !e.altKey && !e.metaKey) {\n        e.preventDefault();\n      }\n    };\n    var setup = function (editor) {\n      function tabHandler(e) {\n        var x, el, v, i;\n        if (e.keyCode !== global$6.TAB || e.ctrlKey || e.altKey || e.metaKey || e.isDefaultPrevented()) {\n          return;\n        }\n        function find(direction) {\n          el = DOM.select(':input:enabled,*[tabindex]:not(iframe)');\n          function canSelectRecursive(e) {\n            return e.nodeName === 'BODY' || e.type !== 'hidden' && e.style.display !== 'none' && e.style.visibility !== 'hidden' && canSelectRecursive(e.parentNode);\n          }\n          function canSelect(el) {\n            return /INPUT|TEXTAREA|BUTTON/.test(el.tagName) && global$2.get(e.id) && el.tabIndex !== -1 && canSelectRecursive(el);\n          }\n          global$5.each(el, function (e, i) {\n            if (e.id === editor.id) {\n              x = i;\n              return false;\n            }\n          });\n          if (direction > 0) {\n            for (i = x + 1; i < el.length; i++) {\n              if (canSelect(el[i])) {\n                return el[i];\n              }\n            }\n          } else {\n            for (i = x - 1; i >= 0; i--) {\n              if (canSelect(el[i])) {\n                return el[i];\n              }\n            }\n          }\n          return null;\n        }\n        v = global$5.explode(Settings.getTabFocus(editor));\n        if (v.length === 1) {\n          v[1] = v[0];\n          v[0] = ':prev';\n        }\n        if (e.shiftKey) {\n          if (v[0] === ':prev') {\n            el = find(-1);\n          } else {\n            el = DOM.get(v[0]);\n          }\n        } else {\n          if (v[1] === ':next') {\n            el = find(1);\n          } else {\n            el = DOM.get(v[1]);\n          }\n        }\n        if (el) {\n          var focusEditor = global$2.get(el.id || el.name);\n          if (el.id && focusEditor) {\n            focusEditor.focus();\n          } else {\n            global$4.setTimeout(function () {\n              if (!global$3.webkit) {\n                domGlobals.window.focus();\n              }\n              el.focus();\n            }, 10);\n          }\n          e.preventDefault();\n        }\n      }\n      editor.on('init', function () {\n        if (editor.inline) {\n          DOM.setAttrib(editor.getBody(), 'tabIndex', null);\n        }\n        editor.on('keyup', tabCancel);\n        if (global$3.gecko) {\n          editor.on('keypress keydown', tabHandler);\n        } else {\n          editor.on('keydown', tabHandler);\n        }\n      });\n    };\n    var Keyboard = { setup: setup };\n\n    global.add('tabfocus', function (editor) {\n      Keyboard.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('slice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n","// Exports the \"importcss\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/importcss')\n//   ES2015:\n//     import 'tinymce/plugins/importcss'\nrequire('./plugin.js');","(function () {\nvar toc = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTocClass = function (editor) {\n      return editor.getParam('toc_class', 'mce-toc');\n    };\n    var getTocHeader = function (editor) {\n      var tagName = editor.getParam('toc_header', 'h2');\n      return /^h[1-6]$/.test(tagName) ? tagName : 'h2';\n    };\n    var getTocDepth = function (editor) {\n      var depth = parseInt(editor.getParam('toc_depth', '3'), 10);\n      return depth >= 1 && depth <= 9 ? depth : 3;\n    };\n    var Settings = {\n      getTocClass: getTocClass,\n      getTocHeader: getTocHeader,\n      getTocDepth: getTocDepth\n    };\n\n    var create = function (prefix) {\n      var counter = 0;\n      return function () {\n        var guid = new Date().getTime().toString(32);\n        return prefix + guid + (counter++).toString(32);\n      };\n    };\n    var Guid = { create: create };\n\n    var tocId = Guid.create('mcetoc_');\n    var generateSelector = function generateSelector(depth) {\n      var i;\n      var selector = [];\n      for (i = 1; i <= depth; i++) {\n        selector.push('h' + i);\n      }\n      return selector.join(',');\n    };\n    var hasHeaders = function (editor) {\n      return readHeaders(editor).length > 0;\n    };\n    var readHeaders = function (editor) {\n      var tocClass = Settings.getTocClass(editor);\n      var headerTag = Settings.getTocHeader(editor);\n      var selector = generateSelector(Settings.getTocDepth(editor));\n      var headers = editor.$(selector);\n      if (headers.length && /^h[1-9]$/i.test(headerTag)) {\n        headers = headers.filter(function (i, el) {\n          return !editor.dom.hasClass(el.parentNode, tocClass);\n        });\n      }\n      return global$3.map(headers, function (h) {\n        return {\n          id: h.id ? h.id : tocId(),\n          level: parseInt(h.nodeName.replace(/^H/i, ''), 10),\n          title: editor.$.text(h),\n          element: h\n        };\n      });\n    };\n    var getMinLevel = function (headers) {\n      var i, minLevel = 9;\n      for (i = 0; i < headers.length; i++) {\n        if (headers[i].level < minLevel) {\n          minLevel = headers[i].level;\n        }\n        if (minLevel === 1) {\n          return minLevel;\n        }\n      }\n      return minLevel;\n    };\n    var generateTitle = function (tag, title) {\n      var openTag = '<' + tag + ' contenteditable=\"true\">';\n      var closeTag = '</' + tag + '>';\n      return openTag + global$1.DOM.encode(title) + closeTag;\n    };\n    var generateTocHtml = function (editor) {\n      var html = generateTocContentHtml(editor);\n      return '<div class=\"' + editor.dom.encode(Settings.getTocClass(editor)) + '\" contenteditable=\"false\">' + html + '</div>';\n    };\n    var generateTocContentHtml = function (editor) {\n      var html = '';\n      var headers = readHeaders(editor);\n      var prevLevel = getMinLevel(headers) - 1;\n      var i, ii, h, nextLevel;\n      if (!headers.length) {\n        return '';\n      }\n      html += generateTitle(Settings.getTocHeader(editor), global$2.translate('Table of Contents'));\n      for (i = 0; i < headers.length; i++) {\n        h = headers[i];\n        h.element.id = h.id;\n        nextLevel = headers[i + 1] && headers[i + 1].level;\n        if (prevLevel === h.level) {\n          html += '<li>';\n        } else {\n          for (ii = prevLevel; ii < h.level; ii++) {\n            html += '<ul><li>';\n          }\n        }\n        html += '<a href=\"#' + h.id + '\">' + h.title + '</a>';\n        if (nextLevel === h.level || !nextLevel) {\n          html += '</li>';\n          if (!nextLevel) {\n            html += '</ul>';\n          }\n        } else {\n          for (ii = h.level; ii > nextLevel; ii--) {\n            html += '</li></ul><li>';\n          }\n        }\n        prevLevel = h.level;\n      }\n      return html;\n    };\n    var isEmptyOrOffscren = function (editor, nodes) {\n      return !nodes.length || editor.dom.getParents(nodes[0], '.mce-offscreen-selection').length > 0;\n    };\n    var insertToc = function (editor) {\n      var tocClass = Settings.getTocClass(editor);\n      var $tocElm = editor.$('.' + tocClass);\n      if (isEmptyOrOffscren(editor, $tocElm)) {\n        editor.insertContent(generateTocHtml(editor));\n      } else {\n        updateToc(editor);\n      }\n    };\n    var updateToc = function (editor) {\n      var tocClass = Settings.getTocClass(editor);\n      var $tocElm = editor.$('.' + tocClass);\n      if ($tocElm.length) {\n        editor.undoManager.transact(function () {\n          $tocElm.html(generateTocContentHtml(editor));\n        });\n      }\n    };\n    var Toc = {\n      hasHeaders: hasHeaders,\n      insertToc: insertToc,\n      updateToc: updateToc\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceInsertToc', function () {\n        Toc.insertToc(editor);\n      });\n      editor.addCommand('mceUpdateToc', function () {\n        Toc.updateToc(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor) {\n      var $ = editor.$, tocClass = Settings.getTocClass(editor);\n      editor.on('PreProcess', function (e) {\n        var $tocElm = $('.' + tocClass, e.node);\n        if ($tocElm.length) {\n          $tocElm.removeAttr('contentEditable');\n          $tocElm.find('[contenteditable]').removeAttr('contentEditable');\n        }\n      });\n      editor.on('SetContent', function () {\n        var $tocElm = $('.' + tocClass);\n        if ($tocElm.length) {\n          $tocElm.attr('contentEditable', false);\n          $tocElm.children(':first-child').attr('contentEditable', true);\n        }\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var toggleState = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('LoadContent SetContent change', function () {\n          ctrl.disabled(editor.readonly || !Toc.hasHeaders(editor));\n        });\n      };\n    };\n    var isToc = function (editor) {\n      return function (elm) {\n        return elm && editor.dom.is(elm, '.' + Settings.getTocClass(editor)) && editor.getBody().contains(elm);\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addButton('toc', {\n        tooltip: 'Table of Contents',\n        cmd: 'mceInsertToc',\n        icon: 'toc',\n        onPostRender: toggleState(editor)\n      });\n      editor.addButton('tocupdate', {\n        tooltip: 'Update',\n        cmd: 'mceUpdateToc',\n        icon: 'reload'\n      });\n      editor.addMenuItem('toc', {\n        text: 'Table of Contents',\n        context: 'insert',\n        cmd: 'mceInsertToc',\n        onPostRender: toggleState(editor)\n      });\n      editor.addContextToolbar(isToc(editor), 'tocupdate');\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('toc', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      FilterContent.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"autosave\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/autosave')\n//   ES2015:\n//     import 'tinymce/plugins/autosave'\nrequire('./plugin.js');"],"sourceRoot":""}