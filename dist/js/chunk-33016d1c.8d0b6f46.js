(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33016d1c"],{"2c49":function(t,e){const o=window.XMLHttpRequest;t.exports=o},"37d3":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.loading?o("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):t._e(),t.htmlContent?o("div",[o("div",{domProps:{innerHTML:t._s(t.htmlContent.data)}}),o("v-btn",{staticClass:"mr-1",on:{click:function(e){return t.buyForXYR(t.htmlContent.xyr)}}},[t._v(t._s(t.htmlContent.xyr)+" XYR")]),o("v-btn",{staticClass:"ml-1",on:{click:function(e){return t.buyForETH(t.htmlContent.eth)}}},[t._v(t._s(t.htmlContent.eth)+" ETH")])],1):t._e(),o("PromoDialog",{attrs:{show:t.dialog,callback:t.dialogAction,promoData:t.form}})],1)},r=[],a=(o("96cf"),o("1da1")),s=o("c734"),i=o("f452"),c=new i({host:"ipfs.infura.io",port:5001,protocol:"https"}),u={components:{PromoDialog:s["a"]},data:function(){return{dialog:!1,form:{promoTitle:"Promo title",promoImg:"Promo image",promoText:"Promo text",skipBtnText:"Skip button text",submitBtnText:"Submit button text"},htmlContent:null,loading:!1}},computed:{contractABI:function(){return this.$store.state.contractABI},tokenAddress:function(){return this.$store.state.tokenAddress},metamaskAddress:function(){return this.$store.state.metamaskAddress}},methods:{loadData:function(){var t=this;this.$http.get(this.$HOST+"/api/get/static/coupon_popup",{withCredentials:!0}).then((function(e){t.form=e.data.val}))},showPromoIfNotUID:function(){this.$cookie.get("popup_coupons_uid")||(this.dialog=!0)},dialogAction:function(){this.dialog=!1},gasPrice:function(){return window.web3.utils.toWei(this.$store.state.gasPrice,"gwei")},buyForETH:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e.showPromoIfNotUID(),window.web3.eth.sendTransaction({from:e.metamaskAddress,to:e.tokenAddress,value:window.web3.utils.toWei(t),gas:"90000"},(function(t,e){t||console.log(e+" success")}));case 2:case"end":return o.stop()}}),o)})))()},buyForXYR:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var n,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e.showPromoIfNotUID(),n=new window.web3.eth.Contract(e.contractABI,e.tokenAddress,{from:e.metamaskAddress}),o.next=4,n.methods.transfer(e.tokenAddress,window.web3.utils.toWei(t)).send({gas:"90000"});case 4:r=o.sent,console.log(r);case 6:case"end":return o.stop()}}),o)})))()},readIPFS:function(t){var e=this;""!=t.key&&(this.loading=!0,c.cat(t.key,(function(o,n){n&&(e.htmlContent={data:n,created:t.created,key:t.key,category:t.category,img:t.img,xyr:t.xyr,eth:t.eth}),e.loading=!1})))},getPost:function(t){var e=this;this.loading=!0,this.$http.get(this.$HOST+"/api/get/content/"+t,{withCredentials:!0}).then((function(t){e.selectedItem=t.data,e.readIPFS(e.selectedItem)})).catch((function(t){console.log(t),e.loading=!1}))}},watch:{$route:function(){}},mounted:function(){var t=this.$route.params.key;this.getPost(t),this.loadData()}},d=u,l=o("2877"),p=Object(l["a"])(d,n,r,!1,null,null,null);e["default"]=p.exports},c734:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-row",{attrs:{justify:"center"}},[o("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[t._v(t._s(t.promoData.promoTitle))]),o("v-card-text",[o("v-container",[t._v(" "+t._s(t.promoData.promoText)+" "),t.promoData.promoImg?o("img",{staticStyle:{width:"100%"},attrs:{src:t.promoData.promoImg,alt:""}}):t._e(),o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{"error-messages":t.error,label:"Email*",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1)],1)],1),o("v-card-actions",[o("v-btn",{attrs:{color:"grey darken-1",text:""},on:{click:function(e){return t.callback()}}},[t._v(" "+t._s(t.promoData.skipBtnText)+" ")]),o("v-spacer"),o("v-btn",{staticClass:"white--text",attrs:{loading:t.loading,color:"green darken-1"},on:{click:function(e){return t.dialogAction(!0)}}},[t._v(" "+t._s(t.promoData.submitBtnText)+" ")])],1)],1)],1)],1)},r=[],a={props:{show:Boolean,callback:Function,promoData:Object},data:function(){return{loading:!1,email:"",error:"",couponId:"",couponText:""}},computed:{metamaskAddress:function(){return this.$store.state.metamaskAddress}},methods:{dialogAction:function(t){if(t&&""!=this.email){this.loading=!0;var e=this;this.$http.post(this.$HOST+"/api/submit/email/"+this.email+"?address="+this.metamaskAddress,JSON.stringify({}),{withCredentials:!0}).then((function(t){console.log(t),this.$cookie.set("popup_coupons_uid",t.popup_coupons_uid),e.error="",e.callback()})).catch((function(t){console.log(t),t&&400==t.response.status&&(e.error=t.response.data.msg)})),this.loading=!1}}},mounted:function(){}},s=a,i=o("2877"),c=Object(i["a"])(s,n,r,!1,null,null,null);e["a"]=c.exports},f452:function(t,e,o){var n=o("2c49");function r(t){if(!(this instanceof r))throw new Error('[ipfs-mini] IPFS instance must be instantiated with "new" flag (e.g. var ipfs = new IPFS("http://localhost:8545");).');var e=this;e.setProvider(t||{})}function a(){}function s(t){return new Promise(t)}function i(t){t(a,a)}function c(t){while(1){var e=`----IPFSMini${1e5*Math.random()}.${1e5*Math.random()}`;if(-1===t.indexOf(e))return e}}t.exports=r,r.prototype.setProvider=function(t){if("object"!==typeof t)throw new Error(`[ifpsjs] provider must be type Object, got '${typeof t}'.`);var e=this,o=e.provider=Object.assign({host:"127.0.0.1",pinning:!0,port:"5001",protocol:"http",base:"/api/v0"},t||{});e.requestBase=String(`${o.protocol}://${o.host}:${o.port}${o.base}`)},r.prototype.sendAsync=function(t,e){var o=this,r=new n,c=t||{};return(e?i:s)((function(n,s){function i(t,o){return(e||a)(t,c.takeHash&&o?o.Hash:o),t?s(t):!t&&o?n(c.takeHash?o.Hash:o):void 0}r.onreadystatechange=function(){if(4===r.readyState&&1!==r.timeout)if(200!==r.status)i(new Error(`[ipfs-mini] status ${r.status}: ${r.responseText}`),null);else try{i(null,c.jsonParse?JSON.parse(r.responseText):r.responseText)}catch(t){i(new Error(`[ipfs-mini] while parsing data: '${String(r.responseText)}', error: ${String(t)} with provider: '${o.requestBase}'`,null))}};try{var u=o.provider.pinning&&"/add"===t.uri?"?pin=true":"";c.payload?r.open("POST",`${o.requestBase}${t.uri}${u}`):r.open("GET",`${o.requestBase}${t.uri}${u}`),c.accept&&r.setRequestHeader("accept",c.accept),c.payload&&c.boundary?(r.setRequestHeader("Content-Type","multipart/form-data; boundary="+c.boundary),r.send(c.payload)):r.send()}catch(d){i(d,null)}}))},r.prototype.add=function(t,e){var o="object"===typeof t&&t.isBuffer?t.toString("binary"):t,n=c(o),r=`--${n}\r\nContent-Disposition: form-data; name="path"\r\nContent-Type: application/octet-stream\r\n\r\n${o}\r\n--${n}--`;return this.sendAsync({jsonParse:!0,accept:"application/json",uri:"/add",takeHash:!0,payload:r,boundary:n},e)},r.prototype.addJSON=function(t,e){var o=this;return o.add(JSON.stringify(t),e)},r.prototype.stat=function(t,e){var o=this;return o.sendAsync({jsonParse:!0,uri:"/object/stat/"+t},e)},r.prototype.cat=function(t,e){var o=this;return o.sendAsync({uri:"/cat/"+t},e)},r.prototype.catJSON=function(t,e){var o=this;return o.sendAsync({uri:"/cat/"+t,jsonParse:!0},e)}}}]);
//# sourceMappingURL=chunk-33016d1c.8d0b6f46.js.map