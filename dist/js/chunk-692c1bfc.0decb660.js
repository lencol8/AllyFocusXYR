(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-692c1bfc"],{4886:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{staticClass:"pt-0"},[o("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),o("v-row",{attrs:{justify:"center"}},[o("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[t.content.length>0?o("v-row",t._l(t.content,(function(e){return o("v-col",{key:e.key,attrs:{md:"4",sm:"12"}},[o("v-card",{staticClass:"mx-auto",attrs:{"min-width":"344"}},[o("router-link",{attrs:{to:{name:"Post",params:{city:e.city,category:e.category,key:e.key}}}},[o("v-img",{attrs:{src:e.img,height:"200px",contain:""}})],1),o("v-card-title",[o("router-link",{attrs:{to:{name:"Post",params:{city:e.city,category:e.category,key:e.key}}}},[t._v(t._s(e.title))])],1),o("v-card-actions",[o("v-btn",{attrs:{color:"red",text:""},on:{click:function(o){return t.buyForXYR(e.xyr)}}},[t._v(t._s(e.xyr)+" XYR")]),o("v-btn",{attrs:{color:"primary",text:""},on:{click:function(o){return t.buyForETH(e.eth)}}},[t._v(t._s(e.eth)+" ETH")]),o("v-spacer")],1)],1)],1)})),1):t._e(),t.loading?o("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}}):t._e()],1)],1),o("PromoDialog",{attrs:{show:t.dialog,callback:t.dialogAction,promoData:t.form}})],1)},a=[],n=(o("96cf"),o("1da1")),s=o("c734"),i={components:{PromoDialog:s["a"]},data:function(){return{dialog:!1,form:{promoTitle:"Promo title",promoImg:"Promo image",promoText:"Promo text",skipBtnText:"Skip button text",submitBtnText:"Submit button text"},content:[],loading:!1,search:"",searchTimer:null}},watch:{search:function(t){var e=this.$route.params.city,o=this.$route.params.category;this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout(this.getContent,350,e,o,t)}},computed:{contractABI:function(){return this.$store.state.contractABI},tokenAddress:function(){return this.$store.state.tokenAddress},metamaskAddress:function(){return this.$store.state.metamaskAddress}},methods:{loadData:function(){var t=this;this.$http.get(this.$HOST+"/api/get/static/coupon_popup",{withCredentials:!0}).then((function(e){t.form=e.data.val}))},showPromoIfNotUID:function(){this.$cookie.get("popup_coupons_uid")||(this.dialog=!0)},dialogAction:function(){this.dialog=!1},gasPrice:function(){return window.web3.utils.toWei(this.$store.state.gasPrice,"gwei")},buyForETH:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e.showPromoIfNotUID(),window.web3.eth.sendTransaction({from:e.metamaskAddress,to:e.tokenAddress,value:window.web3.utils.toWei(t),gas:"90000"},(function(t,e){t||console.log(e+" success")}));case 2:case"end":return o.stop()}}),o)})))()},buyForXYR:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){var r,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e.showPromoIfNotUID(),r=new window.web3.eth.Contract(e.contractABI,e.tokenAddress,{from:e.metamaskAddress}),o.next=4,r.methods.transfer(e.tokenAddress,window.web3.utils.toWei(t)).send({gas:"90000"});case 4:a=o.sent,console.log(a);case 6:case"end":return o.stop()}}),o)})))()},getContent:function(t,e,o){var r=this;this.loading=!0,o=null!=o?o:"",this.$http.get(this.$HOST+"/api/search/content?args="+JSON.stringify({city:t,category:e})+"&search="+o,{withCredentials:!0}).then((function(t){r.content=t.data,r.loading=!1})).catch((function(t){console.log(t),r.loading=!1}))}},mounted:function(){var t=this.$route.params.city,e=this.$route.params.category;this.getContent(t,e),this.loadData()}},c=i,l=o("2877"),u=Object(l["a"])(c,r,a,!1,null,null,null);e["default"]=u.exports},c734:function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-row",{attrs:{justify:"center"}},[o("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[t._v(t._s(t.promoData.promoTitle))]),o("v-card-text",[o("v-container",[t._v(" "+t._s(t.promoData.promoText)+" "),t.promoData.promoImg?o("img",{staticStyle:{width:"100%"},attrs:{src:t.promoData.promoImg,alt:""}}):t._e(),o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{"error-messages":t.error,label:"Email*",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1)],1)],1),o("v-card-actions",[o("v-btn",{attrs:{color:"grey darken-1",text:""},on:{click:function(e){return t.callback()}}},[t._v(" "+t._s(t.promoData.skipBtnText)+" ")]),o("v-spacer"),o("v-btn",{staticClass:"white--text",attrs:{loading:t.loading,color:"green darken-1"},on:{click:function(e){return t.dialogAction(!0)}}},[t._v(" "+t._s(t.promoData.submitBtnText)+" ")])],1)],1)],1)],1)},a=[],n={props:{show:Boolean,callback:Function,promoData:Object},data:function(){return{loading:!1,email:"",error:"",couponId:"",couponText:""}},computed:{metamaskAddress:function(){return this.$store.state.metamaskAddress}},methods:{dialogAction:function(t){if(t&&""!=this.email){this.loading=!0;var e=this;this.$http.post(this.$HOST+"/api/submit/email/"+this.email+"?address="+this.metamaskAddress,JSON.stringify({}),{withCredentials:!0}).then((function(t){console.log(t),this.$cookie.set("popup_coupons_uid",t.popup_coupons_uid),e.error="",e.callback()})).catch((function(t){console.log(t),t&&400==t.response.status&&(e.error=t.response.data.msg)})),this.loading=!1}}},mounted:function(){}},s=n,i=o("2877"),c=Object(i["a"])(s,r,a,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-692c1bfc.0decb660.js.map