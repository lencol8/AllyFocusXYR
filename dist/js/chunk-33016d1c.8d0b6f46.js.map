{"version":3,"sources":["webpack:///./node_modules/ipfs-mini/src/lib/XMLHttpRequest-browser.js","webpack:///./src/views/Post.vue?1e7e","webpack:///src/views/Post.vue","webpack:///./src/views/Post.vue?4a13","webpack:///./src/views/Post.vue","webpack:///./src/components/PromoDialog.vue?fdff","webpack:///src/components/PromoDialog.vue","webpack:///./src/components/PromoDialog.vue?ed72","webpack:///./src/components/PromoDialog.vue","webpack:///./node_modules/ipfs-mini/src/index.js"],"names":["XMLHttpRequest","window","module","exports","render","_vm","this","_h","$createElement","_c","_self","attrs","_e","domProps","_s","htmlContent","data","staticClass","on","$event","buyForXYR","xyr","_v","buyForETH","eth","dialog","dialogAction","form","staticRenderFns","host","port","protocol","components","PromoDialog","promoTitle","promoImg","promoText","skipBtnText","submitBtnText","loading","computed","contractABI","$store","state","tokenAddress","metamaskAddress","methods","loadData","$http","showPromoIfNotUID","$cookie","get","gasPrice","web3","utils","toWei","readIPFS","post","key","ipfs","cat","result","created","category","img","getPost","watch","$route","mounted","component","model","value","callback","$$v","show","expression","promoData","staticStyle","error","email","props","Boolean","Function","Object","couponId","couponText","IPFS","provider","Error","self","setProvider","noop","newPromise","val","Promise","noopPromise","createBoundary","boundary","Math","random","indexOf","prototype","assign","pinning","base","requestBase","String","sendAsync","opts","cb","request","options","resolve","reject","e","r","takeHash","Hash","onreadystatechange","readyState","timeout","status","responseText","jsonParse","JSON","parse","jsonError","pinningURI","uri","payload","open","accept","setRequestHeader","send","err","add","input","isBuffer","toString","addJSON","jsonData","stringify","stat","ipfsHash","catJSON"],"mappings":"mGAAA,MAAMA,EAAiBC,OAAOD,eAE9BE,EAAOC,QAAUH,G,2CCFjB,IAAII,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAEJ,EAAW,QAAEI,EAAG,sBAAsB,CAACE,MAAM,CAAC,cAAgB,GAAG,MAAQ,aAAaN,EAAIO,KAAMP,EAAe,YAAEI,EAAG,MAAM,CAACA,EAAG,MAAM,CAACI,SAAS,CAAC,UAAYR,EAAIS,GAAGT,EAAIU,YAAYC,SAASP,EAAG,QAAQ,CAACQ,YAAY,OAAOC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAIe,UAAUf,EAAIU,YAAYM,QAAQ,CAAChB,EAAIiB,GAAGjB,EAAIS,GAAGT,EAAIU,YAAYM,KAAK,UAAUZ,EAAG,QAAQ,CAACQ,YAAY,OAAOC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAIkB,UAAUlB,EAAIU,YAAYS,QAAQ,CAACnB,EAAIiB,GAAGjB,EAAIS,GAAGT,EAAIU,YAAYS,KAAK,WAAW,GAAGnB,EAAIO,KAAKH,EAAG,cAAc,CAACE,MAAM,CAAC,KAAON,EAAIoB,OAAO,SAAWpB,EAAIqB,aAAa,UAAYrB,EAAIsB,SAAS,IAC7rBC,EAAkB,G,oCCoBtB,YACA,SACEC,KAAM,iBACNC,KAAM,KACNC,SAAU,UAGZ,GACEC,WAAY,CACVC,YAAJ,QAEEjB,KAJF,WAKI,MAAO,CACLS,QAAQ,EACRE,KAAM,CACJO,WAAY,cACZC,SAAU,cACVC,UAAW,aACXC,YAAa,mBACbC,cAAe,sBAEjBvB,YAAa,KACbwB,SAAS,IAGbC,SAAU,CACRC,YADJ,WAEM,OAAOnC,KAAKoC,OAAOC,MAAMF,aAE3BG,aAJJ,WAKM,OAAOtC,KAAKoC,OAAOC,MAAMC,cAE3BC,gBAPJ,WAQM,OAAOvC,KAAKoC,OAAOC,MAAME,kBAG7BC,QAAS,CACPC,SADJ,WACA,WACMzC,KAAK0C,MACX,+CACQ,iBAAR,IAEA,kBACQ,EAAR,oBAGIC,kBAVJ,WAWU3C,KAAK4C,QAAQC,IAAI,uBACrB7C,KAAKmB,QAAS,IAEhBC,aAdJ,WAeMpB,KAAKmB,QAAS,GAEhB2B,SAjBJ,WAkBM,OAAOnD,OAAOoD,KAAKC,MAAMC,MAAMjD,KAAKoC,OAAOC,MAAMS,SAAU,SAE7D,UApBJ,SAoBA,2JACA,sBACA,gCACA,CACA,uBACA,kBACA,iCAEA,cAEA,cACA,gCAXA,8CAeI,UAnCJ,SAmCA,0KACA,sBACA,+BACA,cACA,eACA,CACA,yBANA,SASA,UACA,oDACA,MACA,cAZA,OASA,EATA,OAeA,eAfA,8CAiBII,SApDJ,SAoDA,cACsB,IAAZC,EAAKC,MACPpD,KAAKiC,SAAU,EACfoB,EAAKC,IAAIH,EAAKC,KAAK,SAA3B,KACcG,IACF,EAAZ,aACc7C,KAAM6C,EACNC,QAASL,EAAKK,QACdJ,IAAKD,EAAKC,IACVK,SAAUN,EAAKM,SACfC,IAAKP,EAAKO,IACV3C,IAAKoC,EAAKpC,IACVG,IAAKiC,EAAKjC,MAGd,EAAV,gBAIIyC,QAvEJ,SAuEA,cACM3D,KAAKiC,SAAU,EACfjC,KAAK0C,MACX,sCACQ,iBAAR,IAEA,kBACQ,EAAR,oBACQ,EAAR,4BAEA,mBACQ,QAAR,OACQ,EAAR,gBAIEkB,MAAO,CACLC,OADJ,cAGEC,QAvHF,WAwHI,IAAJ,yBACI9D,KAAK2D,QAAQP,GACbpD,KAAKyC,aCtJqU,I,YCO1UsB,EAAY,eACd,EACAjE,EACAwB,GACA,EACA,KACA,KACA,MAIa,aAAAyC,E,2CClBf,IAAIjE,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACE,MAAM,CAAC,QAAU,WAAW,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,WAAa,GAAG,YAAY,OAAO2D,MAAM,CAACC,MAAOlE,EAAQ,KAAEmE,SAAS,SAAUC,GAAMpE,EAAIqE,KAAKD,GAAKE,WAAW,SAAS,CAAClE,EAAG,SAAS,CAACA,EAAG,eAAe,CAACQ,YAAY,YAAY,CAACZ,EAAIiB,GAAGjB,EAAIS,GAAGT,EAAIuE,UAAU1C,eAAezB,EAAG,cAAc,CAACA,EAAG,cAAc,CAACJ,EAAIiB,GAAG,IAAIjB,EAAIS,GAAGT,EAAIuE,UAAUxC,WAAW,KAAM/B,EAAIuE,UAAkB,SAAEnE,EAAG,MAAM,CAACoE,YAAY,CAAC,MAAQ,QAAQlE,MAAM,CAAC,IAAMN,EAAIuE,UAAUzC,SAAS,IAAM,MAAM9B,EAAIO,KAAKH,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,iBAAiBN,EAAIyE,MAAM,MAAQ,SAAS,SAAW,IAAIR,MAAM,CAACC,MAAOlE,EAAS,MAAEmE,SAAS,SAAUC,GAAMpE,EAAI0E,MAAMN,GAAKE,WAAW,YAAY,IAAI,IAAI,IAAI,GAAGlE,EAAG,iBAAiB,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,gBAAgB,KAAO,IAAIO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAImE,cAAc,CAACnE,EAAIiB,GAAG,IAAIjB,EAAIS,GAAGT,EAAIuE,UAAUvC,aAAa,OAAO5B,EAAG,YAAYA,EAAG,QAAQ,CAACQ,YAAY,cAAcN,MAAM,CAAC,QAAUN,EAAIkC,QAAQ,MAAQ,kBAAkBrB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAIqB,cAAa,MAAS,CAACrB,EAAIiB,GAAG,IAAIjB,EAAIS,GAAGT,EAAIuE,UAAUtC,eAAe,QAAQ,IAAI,IAAI,IAAI,IACjtCV,EAAkB,GC6CtB,GACEoD,MAAO,CACLN,KAAMO,QACNT,SAAUU,SACVN,UAAWO,QAEbnE,KANF,WAOI,MAAO,CACLuB,SAAS,EACTwC,MAAO,GACPD,MAAO,GACPM,SAAU,GACVC,WAAY,KAGhB7C,SAAU,CACRK,gBADJ,WAEM,OAAOvC,KAAKoC,OAAOC,MAAME,kBAG7BC,QAAS,CACPpB,aADJ,SACA,GACM,GAAImC,GAAwB,IAAdvD,KAAKyE,MAAa,CAC9BzE,KAAKiC,SAAU,EACf,IAAR,OACQjC,KAAK0C,MACb,KACA,WACA,qBACA,WACA,YACA,qBACA,mBACA,CAAU,iBAAV,IAEA,kBACU,QAAV,OACU,KAAV,qDACU,EAAV,SACU,EAAV,cAEA,mBACU,QAAV,OACA,4BACY,EAAZ,8BAGQ1C,KAAKiC,SAAU,KAIrB6B,QAnDF,cC9CqV,I,YCOjVC,EAAY,eACd,EACAjE,EACAwB,GACA,EACA,KACA,KACA,MAIa,OAAAyC,E,8BClBf,IAAIrE,EAAiB,EAAQ,QAU7B,SAASsF,EAAKC,GACZ,KAAMjF,gBAAgBgF,GAAS,MAAM,IAAIE,MAAM,wHAE/C,IAAIC,EAAOnF,KACXmF,EAAKC,YAAYH,GAAY,IAM/B,SAASI,KACT,SAASC,EAAWC,GAAO,OAAO,IAAIC,QAAQD,GAC9C,SAASE,EAAYF,GAAOA,EAAIF,EAAMA,GA+EtC,SAASK,EAAehF,GACtB,MAAO,EAAM,CACX,IAAIiF,EAAW,eAA+B,IAAhBC,KAAKC,YAAqC,IAAhBD,KAAKC,WAC7D,IAAgC,IAA5BnF,EAAKoF,QAAQH,GACf,OAAOA,GAvGb/F,EAAOC,QAAUmF,EA2BjBA,EAAKe,UAAUX,YAAc,SAAqBH,GAChD,GAAwB,kBAAbA,EAAyB,MAAM,IAAIC,MAAM,sDAAsDD,OAC1G,IAAIE,EAAOnF,KACPU,EAAOyE,EAAKF,SAAWJ,OAAOmB,OAAO,CACvCzE,KAAM,YACN0E,SAAS,EACTzE,KAAM,OACNC,SAAU,OACVyE,KAAM,WAAajB,GAAY,IACjCE,EAAKgB,YAAcC,OAAO,GAAG1F,EAAKe,cAAcf,EAAKa,QAAQb,EAAKc,OAAOd,EAAKwF,SAShFlB,EAAKe,UAAUM,UAAY,SAAmBC,EAAMC,GAClD,IAAIpB,EAAOnF,KACPwG,EAAU,IAAI9G,EACd+G,EAAUH,GAAQ,GAEtB,OAAQC,EAAKd,EAAcH,IAAY,SAAUoB,EAASC,GACxD,SAASzC,EAAS0C,EAAGC,GAEnB,OADCN,GAAMlB,GAAMuB,EAAGH,EAAQK,UAAYD,EAAIA,EAAEE,KAAOF,GAC7CD,EAAUD,EAAOC,IAChBA,GAAKC,EAAUH,EAAQD,EAAQK,SAAWD,EAAEE,KAAOF,QAAxD,EAGFL,EAAQQ,mBAAqB,WAC3B,GAA2B,IAAvBR,EAAQS,YAAwC,IAApBT,EAAQU,QACtC,GAAuB,MAAnBV,EAAQW,OACVjD,EAAS,IAAIgB,MAAM,sBAAsBsB,EAAQW,WAAWX,EAAQY,gBAAiB,WAErF,IACElD,EAAS,KAAOuC,EAAQY,UAAYC,KAAKC,MAAMf,EAAQY,cAAgBZ,EAAQY,cAC/E,MAAOI,GACPtD,EAAS,IAAIgB,MAAM,oCAAoCkB,OAAOI,EAAQY,0BAA0BhB,OAAOoB,sBAA8BrC,EAAKgB,eAAgB,SAMlK,IACE,IAAIsB,EAAatC,EAAKF,SAASgB,SAAwB,SAAbK,EAAKoB,IAAiB,YAAc,GAE1EjB,EAAQkB,QACVnB,EAAQoB,KAAK,OAAQ,GAAGzC,EAAKgB,cAAcG,EAAKoB,MAAMD,KAEtDjB,EAAQoB,KAAK,MAAO,GAAGzC,EAAKgB,cAAcG,EAAKoB,MAAMD,KAGnDhB,EAAQoB,QACVrB,EAAQsB,iBAAiB,SAAUrB,EAAQoB,QAGzCpB,EAAQkB,SAAWlB,EAAQd,UAC7Ba,EAAQsB,iBAAiB,eAAgB,iCAAiCrB,EAAQd,UAClFa,EAAQuB,KAAKtB,EAAQkB,UAErBnB,EAAQuB,OAEV,MAAOC,GACP9D,EAAS8D,EAAK,WAuBpBhD,EAAKe,UAAUkC,IAAM,SAAiBC,EAAOhE,GAC3C,IAAIxD,EAA0B,kBAAVwH,GAAsBA,EAAMC,SAAYD,EAAME,SAAS,UAAYF,EACnFvC,EAAWD,EAAehF,GAC1BiH,EAAU,KAAKhC,qGAA4GjF,UAAaiF,MAE5I,OAAO3F,KAAKqG,UAAU,CACpBgB,WAAW,EACXQ,OAAQ,mBACRH,IAAK,OACLZ,UAAU,EACVa,UAAShC,YACRzB,IASLc,EAAKe,UAAUsC,QAAU,SAAiBC,EAAUpE,GAClD,IAAIiB,EAAOnF,KACX,OAAOmF,EAAK8C,IAAIX,KAAKiB,UAAUD,GAAWpE,IAS5Cc,EAAKe,UAAUyC,KAAO,SAAaC,EAAUvE,GAC3C,IAAIiB,EAAOnF,KACX,OAAOmF,EAAKkB,UAAU,CAAEgB,WAAW,EAAMK,IAAK,gBAAgBe,GAAcvE,IAS9Ec,EAAKe,UAAUzC,IAAM,SAAamF,EAAUvE,GAC1C,IAAIiB,EAAOnF,KACX,OAAOmF,EAAKkB,UAAU,CAAEqB,IAAK,QAAQe,GAAcvE,IASrDc,EAAKe,UAAU2C,QAAU,SAAiBD,EAAUvE,GAClD,IAAIiB,EAAOnF,KACX,OAAOmF,EAAKkB,UAAU,CAAEqB,IAAK,QAAQe,EAAYpB,WAAW,GAAQnD","file":"js/chunk-33016d1c.8d0b6f46.js","sourcesContent":["const XMLHttpRequest = window.XMLHttpRequest; // eslint-disable-line\n\nmodule.exports = XMLHttpRequest;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.loading)?_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}}):_vm._e(),(_vm.htmlContent)?_c('div',[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.htmlContent.data)}}),_c('v-btn',{staticClass:\"mr-1\",on:{\"click\":function($event){return _vm.buyForXYR(_vm.htmlContent.xyr)}}},[_vm._v(_vm._s(_vm.htmlContent.xyr)+\" XYR\")]),_c('v-btn',{staticClass:\"ml-1\",on:{\"click\":function($event){return _vm.buyForETH(_vm.htmlContent.eth)}}},[_vm._v(_vm._s(_vm.htmlContent.eth)+\" ETH\")])],1):_vm._e(),_c('PromoDialog',{attrs:{\"show\":_vm.dialog,\"callback\":_vm.dialogAction,\"promoData\":_vm.form}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-progress-circular\n      v-if=\"loading\"\n      indeterminate\n      color=\"primary\"\n    ></v-progress-circular>\n    <div v-if=\"htmlContent\">\n      <div v-html=\"htmlContent.data\"></div>\n      <v-btn class=\"mr-1\" @click=\"buyForXYR(htmlContent.xyr)\"\n        >{{ htmlContent.xyr }} XYR</v-btn\n      >\n      <v-btn class=\"ml-1\" @click=\"buyForETH(htmlContent.eth)\"\n        >{{ htmlContent.eth }} ETH</v-btn\n      >\n    </div>\n    <PromoDialog :show=\"dialog\" :callback=\"dialogAction\" :promoData=\"form\" />\n  </div>\n</template>\n\n<script>\nconst IPFS = require(\"ipfs-mini\");\nconst ipfs = new IPFS({\n  host: \"ipfs.infura.io\",\n  port: 5001,\n  protocol: \"https\",\n});\nimport PromoDialog from \"@/components/PromoDialog.vue\";\nexport default {\n  components: {\n    PromoDialog,\n  },\n  data() {\n    return {\n      dialog: false,\n      form: {\n        promoTitle: \"Promo title\",\n        promoImg: \"Promo image\",\n        promoText: \"Promo text\",\n        skipBtnText: \"Skip button text\",\n        submitBtnText: \"Submit button text\",\n      },\n      htmlContent: null,\n      loading: false,\n    };\n  },\n  computed: {\n    contractABI() {\n      return this.$store.state.contractABI;\n    },\n    tokenAddress() {\n      return this.$store.state.tokenAddress;\n    },\n    metamaskAddress() {\n      return this.$store.state.metamaskAddress;\n    },\n  },\n  methods: {\n    loadData() {\n      this.$http\n        .get(this.$HOST + \"/api/get/static/coupon_popup\", {\n          withCredentials: true,\n        })\n        .then((resp) => {\n          this.form = resp.data.val;\n        });\n    },\n    showPromoIfNotUID() {\n      if (this.$cookie.get(\"popup_coupons_uid\")) return;\n      this.dialog = true;\n    },\n    dialogAction() {\n      this.dialog = false;\n    },\n    gasPrice() {\n      return window.web3.utils.toWei(this.$store.state.gasPrice, \"gwei\");\n    },\n    async buyForETH(amount) {\n      this.showPromoIfNotUID();\n      window.web3.eth.sendTransaction(\n        {\n          from: this.metamaskAddress,\n          to: this.tokenAddress,\n          value: window.web3.utils.toWei(amount),\n          // gasPrice: this.gasPrice(),\n          gas: \"90000\",\n        },\n        function (err, transactionHash) {\n          if (!err) console.log(transactionHash + \" success\");\n        }\n      );\n    },\n    async buyForXYR(amount) {\n      this.showPromoIfNotUID();\n      let contract = new window.web3.eth.Contract(\n        this.contractABI,\n        this.tokenAddress,\n        {\n          from: this.metamaskAddress,\n        }\n      );\n      let v = await contract.methods\n        .transfer(this.tokenAddress, window.web3.utils.toWei(amount))\n        .send({\n          gas: '90000',\n          // gasPrice: this.gasPrice()\n        });\n      console.log(v);\n    },\n    readIPFS(post) {\n      if (post.key != \"\") {\n        this.loading = true;\n        ipfs.cat(post.key, (err, result) => {\n          if (result) {\n            this.htmlContent = {\n              data: result,\n              created: post.created,\n              key: post.key,\n              category: post.category,\n              img: post.img,\n              xyr: post.xyr,\n              eth: post.eth,\n            };\n          }\n          this.loading = false;\n        });\n      }\n    },\n    getPost(key) {\n      this.loading = true;\n      this.$http\n        .get(this.$HOST + \"/api/get/content/\" + key, {\n          withCredentials: true,\n        })\n        .then((resp) => {\n          this.selectedItem = resp.data;\n          this.readIPFS(this.selectedItem);\n        })\n        .catch((error) => {\n          console.log(error);\n          this.loading = false;\n        });\n    },\n  },\n  watch: {\n    $route() {},\n  },\n  mounted() {\n    const key = this.$route.params.key;\n    this.getPost(key);\n    this.loadData()\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Post.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Post.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Post.vue?vue&type=template&id=0bbc85ed&\"\nimport script from \"./Post.vue?vue&type=script&lang=js&\"\nexport * from \"./Post.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"500\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.promoData.promoTitle))]),_c('v-card-text',[_c('v-container',[_vm._v(\" \"+_vm._s(_vm.promoData.promoText)+\" \"),(_vm.promoData.promoImg)?_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.promoData.promoImg,\"alt\":\"\"}}):_vm._e(),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"error-messages\":_vm.error,\"label\":\"Email*\",\"required\":\"\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}})],1)],1)],1)],1),_c('v-card-actions',[_c('v-btn',{attrs:{\"color\":\"grey darken-1\",\"text\":\"\"},on:{\"click\":function($event){return _vm.callback()}}},[_vm._v(\" \"+_vm._s(_vm.promoData.skipBtnText)+\" \")]),_c('v-spacer'),_c('v-btn',{staticClass:\"white--text\",attrs:{\"loading\":_vm.loading,\"color\":\"green darken-1\"},on:{\"click\":function($event){return _vm.dialogAction(true)}}},[_vm._v(\" \"+_vm._s(_vm.promoData.submitBtnText)+\" \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row justify=\"center\">\n    <v-dialog v-model=\"show\" persistent max-width=\"500\">\n      <v-card>\n        <v-card-title class=\"headline\">{{ promoData.promoTitle }}</v-card-title>\n        <v-card-text>\n          <v-container>\n            {{ promoData.promoText }}\n            <img\n              v-if=\"promoData.promoImg\"\n              :src=\"promoData.promoImg\"\n              alt=\"\"\n              style=\"width: 100%\"\n            />\n            <v-row>\n              <v-col cols=\"12\">\n                <v-text-field\n                  :error-messages=\"error\"\n                  v-model=\"email\"\n                  label=\"Email*\"\n                  required\n                ></v-text-field>\n              </v-col>\n            </v-row>\n          </v-container>\n        </v-card-text>\n        <v-card-actions>\n          <v-btn color=\"grey darken-1\" text @click=\"callback()\">\n            {{ promoData.skipBtnText }}\n          </v-btn>\n          <v-spacer></v-spacer>\n          <v-btn\n            :loading=\"loading\"\n            color=\"green darken-1\"\n            class=\"white--text\"\n            @click=\"dialogAction(true)\"\n          >\n            {{ promoData.submitBtnText }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-row>\n</template>\n\n<script>\nexport default {\n  props: {\n    show: Boolean,\n    callback: Function,\n    promoData: Object,\n  },\n  data() {\n    return {\n      loading: false,\n      email: \"\",\n      error: \"\",\n      couponId: \"\",\n      couponText: \"\",\n    };\n  },\n  computed: {\n    metamaskAddress() {\n      return this.$store.state.metamaskAddress;\n    },\n  },\n  methods: {\n    dialogAction(result) {\n      if (result && this.email != \"\") {\n        this.loading = true;\n        let _this = this;\n        this.$http\n          .post(\n            this.$HOST +\n              \"/api/submit/email/\" +\n              this.email +\n              \"?address=\" +\n              this.metamaskAddress,\n            JSON.stringify({}),\n            { withCredentials: true }\n          )\n          .then(function (response) {\n            console.log(response);\n            this.$cookie.set(\"popup_coupons_uid\", response.popup_coupons_uid);\n            _this.error = \"\";\n            _this.callback();\n          })\n          .catch(function (error) {\n            console.log(error);\n            if (error && error.response.status == 400) {\n              _this.error = error.response.data.msg;\n            }\n          });\n        this.loading = false;\n      }\n    },\n  },\n  mounted() {},\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PromoDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PromoDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PromoDialog.vue?vue&type=template&id=39b21ac2&\"\nimport script from \"./PromoDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./PromoDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var XMLHttpRequest = require('./lib/XMLHttpRequest');\n\nmodule.exports = IPFS;\n\n/**\n * The varructor object\n * @param {Object} `provider` the provider object\n * @return {Object} `ipfs` returns an IPFS instance\n * @throws if the `new` flag is not used\n */\nfunction IPFS(provider) {\n  if (!(this instanceof IPFS)) { throw new Error('[ipfs-mini] IPFS instance must be instantiated with \"new\" flag (e.g. var ipfs = new IPFS(\"http://localhost:8545\");).'); }\n\n  var self = this;\n  self.setProvider(provider || {});\n}\n\n/**\n * No operation method\n */\nfunction noop() {}\nfunction newPromise(val) { return new Promise(val); }\nfunction noopPromise(val) { val(noop, noop); }\n\n/**\n * Sets the provider of the IPFS instance\n * @param {Object} `provider` the provider object\n * @throws if the provider object is not an object\n */\nIPFS.prototype.setProvider = function setProvider(provider) {\n  if (typeof provider !== 'object') { throw new Error(`[ifpsjs] provider must be type Object, got '${typeof provider}'.`); }\n  var self = this;\n  var data = self.provider = Object.assign({\n    host: '127.0.0.1',\n    pinning: true,\n    port: '5001',\n    protocol: 'http',\n    base: '/api/v0' }, provider || {});\n  self.requestBase = String(`${data.protocol}://${data.host}:${data.port}${data.base}`);\n};\n\n/**\n * Sends an async data packet to an IPFS node\n * @param {Object} `opts` the options object\n * @param {Function} `cb` the provider callback\n * @callback returns an error if any, or the data from IPFS\n */\nIPFS.prototype.sendAsync = function sendAsync(opts, cb) {\n  var self = this;\n  var request = new XMLHttpRequest(); // eslint-disable-line\n  var options = opts || {};\n\n  return (cb ? noopPromise : newPromise)(function (resolve, reject) {\n    function callback(e, r){\n      (cb || noop)(e, options.takeHash && r ? r.Hash : r);\n      if (e) return reject(e);\n      if (!e && r) return resolve(options.takeHash ? r.Hash : r);\n    };\n\n    request.onreadystatechange = function () {\n      if (request.readyState === 4 && request.timeout !== 1) {\n        if (request.status !== 200) {\n          callback(new Error(`[ipfs-mini] status ${request.status}: ${request.responseText}`), null);\n        } else {\n          try {\n            callback(null, (options.jsonParse ? JSON.parse(request.responseText) : request.responseText));\n          } catch (jsonError) {\n            callback(new Error(`[ipfs-mini] while parsing data: '${String(request.responseText)}', error: ${String(jsonError)} with provider: '${self.requestBase}'`, null));\n          }\n        }\n      }\n    };\n\n    try {\n      var pinningURI = self.provider.pinning && opts.uri === '/add' ? '?pin=true' : '';\n\n      if (options.payload) {\n        request.open('POST', `${self.requestBase}${opts.uri}${pinningURI}`);\n      } else {\n        request.open('GET', `${self.requestBase}${opts.uri}${pinningURI}`);\n      }\n\n      if (options.accept) {\n        request.setRequestHeader('accept', options.accept);\n      }\n\n      if (options.payload && options.boundary) {\n        request.setRequestHeader('Content-Type', `multipart/form-data; boundary=${options.boundary}`);\n        request.send(options.payload);\n      } else {\n        request.send();\n      }\n    } catch (err) {\n      callback(err, null);\n    }\n  });\n};\n\n/**\n * creates a boundary that isn't part of the payload\n */\nfunction createBoundary(data) {\n  while (true) {\n    var boundary = `----IPFSMini${Math.random() * 100000}.${Math.random() * 100000}`;\n    if (data.indexOf(boundary) === -1) {\n      return boundary;\n    }\n  }\n}\n\n/**\n * Add an string or buffer to IPFS\n * @param {String|Buffer} `input` a single string or buffer\n * @param {Function} `callback` a callback, with (error, ipfsHash String)\n * @callback {String} `ipfsHash` returns an IPFS hash string\n */\nIPFS.prototype.add = function addData(input, callback) {\n  var data = ((typeof input === 'object' && input.isBuffer) ? input.toString('binary') : input);\n  var boundary = createBoundary(data);\n  var payload = `--${boundary}\\r\\nContent-Disposition: form-data; name=\"path\"\\r\\nContent-Type: application/octet-stream\\r\\n\\r\\n${data}\\r\\n--${boundary}--`;\n\n  return this.sendAsync({\n    jsonParse: true,\n    accept: 'application/json',\n    uri: '/add',\n    takeHash: true,\n    payload, boundary,\n  }, callback);\n};\n\n/**\n * Add an JSON object to IPFS\n * @param {Object} `jsonData` a single JSON object\n * @param {Function} `callback` a callback, with (error, ipfsHash String)\n * @callback {String} `ipfsHash` returns an IPFS hash string\n */\nIPFS.prototype.addJSON = function addJson(jsonData, callback) {\n  var self = this;\n  return self.add(JSON.stringify(jsonData), callback);\n};\n\n/**\n * Get an object stat `/object/stat` for an IPFS hash\n * @param {String} `ipfsHash` a single IPFS hash String\n * @param {Function} `callback` a callback, with (error, stats Object)\n * @callback {Object} `stats` returns the stats object for that IPFS hash\n */\nIPFS.prototype.stat = function cat(ipfsHash, callback) {\n  var self = this;\n  return self.sendAsync({ jsonParse: true, uri: `/object/stat/${ipfsHash}` }, callback);\n};\n\n/**\n * Get the data from an IPFS hash\n * @param {String} `ipfsHash` a single IPFS hash String\n * @param {Function} `callback` a callback, with (error, stats Object)\n * @callback {String} `data` returns the output data\n */\nIPFS.prototype.cat = function cat(ipfsHash, callback) {\n  var self = this;\n  return self.sendAsync({ uri: `/cat/${ipfsHash}` }, callback);\n};\n\n/**\n * Get the data from an IPFS hash that is a JSON object\n * @param {String} `ipfsHash` a single IPFS hash String\n * @param {Function} `callback` a callback, with (error, json Object)\n * @callback {Object} `data` returns the output data JSON object\n */\nIPFS.prototype.catJSON = function catJSON(ipfsHash, callback) {\n  var self = this;\n  return self.sendAsync({ uri: `/cat/${ipfsHash}`, jsonParse: true }, callback);\n};\n"],"sourceRoot":""}